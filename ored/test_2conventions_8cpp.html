<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREData: test/conventions.cpp File Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oredextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-data@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.10</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_13e138d54eb8818da29c3992edef070a.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">conventions.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;boost/test/unit_test.hpp&gt;</code><br />
<code>#include &lt;oret/toplevelfixture.hpp&gt;</code><br />
<code>#include &lt;boost/algorithm/string/replace.hpp&gt;</code><br />
<code>#include &lt;boost/make_shared.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="conventions_8hpp_source.html">ored/configuration/conventions.hpp</a>&gt;</code><br />
<code>#include &lt;ql/currencies/all.hpp&gt;</code><br />
<code>#include &lt;ql/time/calendars/all.hpp&gt;</code><br />
<code>#include &lt;ql/time/daycounters/all.hpp&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../qle/ice_8hpp.html">qle/calendars/ice.hpp</a>&gt;</code><br />
</div>
<p><a href="test_2conventions_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9045121b139d00cc8958c5073717cdfe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#a9045121b139d00cc8958c5073717cdfe">BOOST_AUTO_TEST_CASE</a> (testCrossCcyFixFloatSwapConventionConstruction)</td></tr>
<tr class="separator:a9045121b139d00cc8958c5073717cdfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6346ab23a72d42d56da0874403c660f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#aa6346ab23a72d42d56da0874403c660f">BOOST_AUTO_TEST_CASE</a> (testCrossCcyFixFloatSwapConventionFromXml)</td></tr>
<tr class="separator:aa6346ab23a72d42d56da0874403c660f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a310ef8b441596a3d606c0e82116ef830"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#a310ef8b441596a3d606c0e82116ef830">BOOST_AUTO_TEST_CASE</a> (testCrossCcyFixFloatSwapConventionToXml)</td></tr>
<tr class="separator:a310ef8b441596a3d606c0e82116ef830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0f784893ff26481fad9a9b49dba521"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#a0c0f784893ff26481fad9a9b49dba521">BOOST_AUTO_TEST_CASE</a> (testDayOfMonthCommodityFutureConventionConstruction)</td></tr>
<tr class="separator:a0c0f784893ff26481fad9a9b49dba521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d5f5be411d8de7176a54f4ec1e0699"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#af8d5f5be411d8de7176a54f4ec1e0699">BOOST_AUTO_TEST_CASE</a> (testDayOfMonthCommodityFutureConventionFromXml)</td></tr>
<tr class="separator:af8d5f5be411d8de7176a54f4ec1e0699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fb0e2375e56175d1de823ef4036e357"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#a9fb0e2375e56175d1de823ef4036e357">BOOST_AUTO_TEST_CASE</a> (testDayOfMonthCommodityFutureConventionToXml)</td></tr>
<tr class="separator:a9fb0e2375e56175d1de823ef4036e357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a534830cf1ee396136e1d6b06d1f329dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#a534830cf1ee396136e1d6b06d1f329dc">BOOST_AUTO_TEST_CASE</a> (testIborConventionConstructionWithTenor)</td></tr>
<tr class="separator:a534830cf1ee396136e1d6b06d1f329dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c34fd190e85d0492eee066104620d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#a98c34fd190e85d0492eee066104620d6">BOOST_AUTO_TEST_CASE</a> (testIborConventionConstructionWithoutTenor)</td></tr>
<tr class="separator:a98c34fd190e85d0492eee066104620d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0c6afdbebe59923db526c68787deec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2conventions_8cpp.html#aef0c6afdbebe59923db526c68787deec">BOOST_AUTO_TEST_CASE</a> (testIborConventionConstruction7D)</td></tr>
<tr class="separator:aef0c6afdbebe59923db526c68787deec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9045121b139d00cc8958c5073717cdfe" name="a9045121b139d00cc8958c5073717cdfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9045121b139d00cc8958c5073717cdfe">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[1/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testCrossCcyFixFloatSwapConventionConstruction&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00063">63</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>                                                                     {</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing cross currency fix float convention construction&quot;</span>);</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    <span class="comment">// Check construction raises no errors</span></div>
<div class="line"><span class="lineno">   68</span>    boost::shared_ptr&lt;CrossCcyFixFloatSwapConvention&gt; convention;</div>
<div class="line"><span class="lineno">   69</span>    BOOST_CHECK_NO_THROW(</div>
<div class="line"><span class="lineno">   70</span>        convention = boost::make_shared&lt;CrossCcyFixFloatSwapConvention&gt;(<span class="stringliteral">&quot;USD-TRY-XCCY-FIX-FLOAT&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;US,UK,TRY&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>,</div>
<div class="line"><span class="lineno">   71</span>                                                                        <span class="stringliteral">&quot;TRY&quot;</span>, <span class="stringliteral">&quot;Annual&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <span class="comment">// Check object</span></div>
<div class="line"><span class="lineno">   74</span>    BOOST_CHECK_EQUAL(convention-&gt;id(), <span class="stringliteral">&quot;USD-TRY-XCCY-FIX-FLOAT&quot;</span>);</div>
<div class="line"><span class="lineno">   75</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementDays(), 2);</div>
<div class="line"><span class="lineno">   76</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementCalendar(), JointCalendar(UnitedStates(UnitedStates::Settlement), UnitedKingdom(), Turkey()));</div>
<div class="line"><span class="lineno">   77</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementConvention(), Following);</div>
<div class="line"><span class="lineno">   78</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedCurrency(), TRYCurrency());</div>
<div class="line"><span class="lineno">   79</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedFrequency(), Annual);</div>
<div class="line"><span class="lineno">   80</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedConvention(), Following);</div>
<div class="line"><span class="lineno">   81</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedDayCounter(), Actual360());</div>
<div class="line"><span class="lineno">   82</span>    BOOST_CHECK_EQUAL(convention-&gt;index()-&gt;name(), <span class="stringliteral">&quot;USDLibor3M Actual/360&quot;</span>);</div>
<div class="line"><span class="lineno">   83</span>    BOOST_CHECK(!convention-&gt;eom());</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">// Check end of month when not default</span></div>
<div class="line"><span class="lineno">   86</span>    BOOST_CHECK_NO_THROW(</div>
<div class="line"><span class="lineno">   87</span>        convention = boost::make_shared&lt;CrossCcyFixFloatSwapConvention&gt;(</div>
<div class="line"><span class="lineno">   88</span>            <span class="stringliteral">&quot;USD-TRY-XCCY-FIX-FLOAT&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;US,UK,TRY&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;TRY&quot;</span>, <span class="stringliteral">&quot;Annual&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>));</div>
<div class="line"><span class="lineno">   89</span>    BOOST_CHECK(!convention-&gt;eom());</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    BOOST_CHECK_NO_THROW(</div>
<div class="line"><span class="lineno">   92</span>        convention = boost::make_shared&lt;CrossCcyFixFloatSwapConvention&gt;(</div>
<div class="line"><span class="lineno">   93</span>            <span class="stringliteral">&quot;USD-TRY-XCCY-FIX-FLOAT&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;US,UK,TRY&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;TRY&quot;</span>, <span class="stringliteral">&quot;Annual&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>));</div>
<div class="line"><span class="lineno">   94</span>    BOOST_CHECK(convention-&gt;eom());</div>
<div class="line"><span class="lineno">   95</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6346ab23a72d42d56da0874403c660f" name="aa6346ab23a72d42d56da0874403c660f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6346ab23a72d42d56da0874403c660f">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[2/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testCrossCcyFixFloatSwapConventionFromXml&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00097">97</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   97</span>                                                                {</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing parsing of cross currency fix float convention from XML&quot;</span>);</div>
<div class="line"><span class="lineno">  100</span> </div>
<div class="line"><span class="lineno">  101</span>    <span class="comment">// XML string convention</span></div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordtype">string</span> xml;</div>
<div class="line"><span class="lineno">  103</span>    xml.append(<span class="stringliteral">&quot;&lt;CrossCurrencyFixFloat&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  104</span>    xml.append(<span class="stringliteral">&quot;  &lt;Id&gt;USD-TRY-XCCY-FIX-FLOAT&lt;/Id&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>    xml.append(<span class="stringliteral">&quot;  &lt;SettlementDays&gt;2&lt;/SettlementDays&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  106</span>    xml.append(<span class="stringliteral">&quot;  &lt;SettlementCalendar&gt;US,UK,TRY&lt;/SettlementCalendar&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  107</span>    xml.append(<span class="stringliteral">&quot;  &lt;SettlementConvention&gt;F&lt;/SettlementConvention&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>    xml.append(<span class="stringliteral">&quot;  &lt;FixedCurrency&gt;TRY&lt;/FixedCurrency&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span>    xml.append(<span class="stringliteral">&quot;  &lt;FixedFrequency&gt;Annual&lt;/FixedFrequency&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  110</span>    xml.append(<span class="stringliteral">&quot;  &lt;FixedConvention&gt;F&lt;/FixedConvention&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  111</span>    xml.append(<span class="stringliteral">&quot;  &lt;FixedDayCounter&gt;A360&lt;/FixedDayCounter&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  112</span>    xml.append(<span class="stringliteral">&quot;  &lt;Index&gt;USD-LIBOR-3M&lt;/Index&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  113</span>    xml.append(<span class="stringliteral">&quot;&lt;/CrossCurrencyFixFloat&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="comment">// Parse convention from XML</span></div>
<div class="line"><span class="lineno">  116</span>    boost::shared_ptr&lt;CrossCcyFixFloatSwapConvention&gt; convention = boost::make_shared&lt;CrossCcyFixFloatSwapConvention&gt;();</div>
<div class="line"><span class="lineno">  117</span>    BOOST_CHECK_NO_THROW(convention-&gt;fromXMLString(xml));</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    <span class="comment">// Check parsed object</span></div>
<div class="line"><span class="lineno">  120</span>    BOOST_CHECK_EQUAL(convention-&gt;id(), <span class="stringliteral">&quot;USD-TRY-XCCY-FIX-FLOAT&quot;</span>);</div>
<div class="line"><span class="lineno">  121</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementDays(), 2);</div>
<div class="line"><span class="lineno">  122</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementCalendar(), JointCalendar(UnitedStates(UnitedStates::Settlement), UnitedKingdom(), Turkey()));</div>
<div class="line"><span class="lineno">  123</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementConvention(), Following);</div>
<div class="line"><span class="lineno">  124</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedCurrency(), TRYCurrency());</div>
<div class="line"><span class="lineno">  125</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedFrequency(), Annual);</div>
<div class="line"><span class="lineno">  126</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedConvention(), Following);</div>
<div class="line"><span class="lineno">  127</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedDayCounter(), Actual360());</div>
<div class="line"><span class="lineno">  128</span>    BOOST_CHECK_EQUAL(convention-&gt;index()-&gt;name(), <span class="stringliteral">&quot;USDLibor3M Actual/360&quot;</span>);</div>
<div class="line"><span class="lineno">  129</span>    BOOST_CHECK(!convention-&gt;eom());</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>    <span class="comment">// Check end of month also</span></div>
<div class="line"><span class="lineno">  132</span>    xml = replace_all_copy(xml, <span class="stringliteral">&quot;&lt;/CrossCurrencyFixFloat&gt;&quot;</span>, <span class="stringliteral">&quot;&lt;EOM&gt;false&lt;/EOM&gt;&lt;/CrossCurrencyFixFloat&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  133</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;xml is: &quot;</span> &lt;&lt; xml);</div>
<div class="line"><span class="lineno">  134</span>    convention-&gt;fromXMLString(xml);</div>
<div class="line"><span class="lineno">  135</span>    BOOST_CHECK(!convention-&gt;eom());</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>    xml = replace_all_copy(xml, <span class="stringliteral">&quot;&lt;EOM&gt;false&lt;/EOM&gt;&quot;</span>, <span class="stringliteral">&quot;&lt;EOM&gt;true&lt;/EOM&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  138</span>    convention-&gt;fromXMLString(xml);</div>
<div class="line"><span class="lineno">  139</span>    BOOST_CHECK(convention-&gt;eom());</div>
<div class="line"><span class="lineno">  140</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a310ef8b441596a3d606c0e82116ef830" name="a310ef8b441596a3d606c0e82116ef830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a310ef8b441596a3d606c0e82116ef830">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[3/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testCrossCcyFixFloatSwapConventionToXml&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00142">142</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  142</span>                                                              {</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing writing of cross currency fix float convention to XML&quot;</span>);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">// Construct the convention</span></div>
<div class="line"><span class="lineno">  147</span>    boost::shared_ptr&lt;CrossCcyFixFloatSwapConvention&gt; convention;</div>
<div class="line"><span class="lineno">  148</span>    BOOST_CHECK_NO_THROW(</div>
<div class="line"><span class="lineno">  149</span>        convention = boost::make_shared&lt;CrossCcyFixFloatSwapConvention&gt;(<span class="stringliteral">&quot;USD-TRY-XCCY-FIX-FLOAT&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;US,UK,TRY&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>,</div>
<div class="line"><span class="lineno">  150</span>                                                                        <span class="stringliteral">&quot;TRY&quot;</span>, <span class="stringliteral">&quot;Annual&quot;</span>, <span class="stringliteral">&quot;F&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <span class="comment">// Write the convention to a string</span></div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordtype">string</span> xml = convention-&gt;toXMLString();</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    <span class="comment">// Read the convention back from the string using fromXMLString</span></div>
<div class="line"><span class="lineno">  156</span>    boost::shared_ptr&lt;CrossCcyFixFloatSwapConvention&gt; readConvention =</div>
<div class="line"><span class="lineno">  157</span>        boost::make_shared&lt;CrossCcyFixFloatSwapConvention&gt;();</div>
<div class="line"><span class="lineno">  158</span>    BOOST_CHECK_NO_THROW(readConvention-&gt;fromXMLString(xml));</div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>    <span class="comment">// The read convention should equal the original convention</span></div>
<div class="line"><span class="lineno">  161</span>    BOOST_CHECK_EQUAL(convention-&gt;id(), readConvention-&gt;id());</div>
<div class="line"><span class="lineno">  162</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementDays(), readConvention-&gt;settlementDays());</div>
<div class="line"><span class="lineno">  163</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementCalendar(), readConvention-&gt;settlementCalendar());</div>
<div class="line"><span class="lineno">  164</span>    BOOST_CHECK_EQUAL(convention-&gt;settlementConvention(), readConvention-&gt;settlementConvention());</div>
<div class="line"><span class="lineno">  165</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedCurrency(), readConvention-&gt;fixedCurrency());</div>
<div class="line"><span class="lineno">  166</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedFrequency(), readConvention-&gt;fixedFrequency());</div>
<div class="line"><span class="lineno">  167</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedConvention(), readConvention-&gt;fixedConvention());</div>
<div class="line"><span class="lineno">  168</span>    BOOST_CHECK_EQUAL(convention-&gt;fixedDayCounter(), readConvention-&gt;fixedDayCounter());</div>
<div class="line"><span class="lineno">  169</span>    BOOST_CHECK_EQUAL(convention-&gt;index()-&gt;name(), readConvention-&gt;index()-&gt;name());</div>
<div class="line"><span class="lineno">  170</span>    BOOST_CHECK_EQUAL(convention-&gt;eom(), readConvention-&gt;eom());</div>
<div class="line"><span class="lineno">  171</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c0f784893ff26481fad9a9b49dba521" name="a0c0f784893ff26481fad9a9b49dba521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0f784893ff26481fad9a9b49dba521">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[4/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testDayOfMonthCommodityFutureConventionConstruction&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00173">173</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  173</span>                                                                          {</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing commodity future convention construction with day of month based anchor day&quot;</span>);</div>
<div class="line"><span class="lineno">  176</span> </div>
<div class="line"><span class="lineno">  177</span>    <span class="comment">// Check construction raises no errors</span></div>
<div class="line"><span class="lineno">  178</span>    <span class="keyword">using </span>PE = <a class="code hl_class" href="classore_1_1data_1_1_commodity_future_convention_1_1_prohibited_expiry.html">CommodityFutureConvention::ProhibitedExpiry</a>;</div>
<div class="line"><span class="lineno">  179</span>    set&lt;PE&gt; prohibitedExpiries;</div>
<div class="line"><span class="lineno">  180</span>    prohibitedExpiries.insert(PE(Date(31, Dec, 2020)));</div>
<div class="line"><span class="lineno">  181</span>    prohibitedExpiries.insert(PE(Date(31, Dec, 2021)));</div>
<div class="line"><span class="lineno">  182</span>    prohibitedExpiries.insert(PE(Date(30, Dec, 2022)));</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    boost::shared_ptr&lt;CommodityFutureConvention&gt; convention;</div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_struct" href="structore_1_1data_1_1_commodity_future_convention_1_1_day_of_month.html">CommodityFutureConvention::DayOfMonth</a> dayOfMonth(<span class="stringliteral">&quot;31&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_struct" href="structore_1_1data_1_1_commodity_future_convention_1_1_calendar_days_before.html">CommodityFutureConvention::CalendarDaysBefore</a> optionExpiryBusinessDayBefore(<span class="stringliteral">&quot;3&quot;</span>);</div>
<div class="line"><span class="lineno">  187</span>    <a class="code hl_struct" href="structore_1_1data_1_1_commodity_future_convention_1_1_option_expiry_anchor_date_rule.html">CommodityFutureConvention::OptionExpiryAnchorDateRule</a> optionExpiryDateRule(optionExpiryBusinessDayBefore);</div>
<div class="line"><span class="lineno">  188</span>    BOOST_CHECK_NO_THROW(convention = boost::make_shared&lt;CommodityFutureConvention&gt;(</div>
<div class="line"><span class="lineno">  189</span>                             <span class="stringliteral">&quot;ICE:B&quot;</span>, dayOfMonth, <span class="stringliteral">&quot;Monthly&quot;</span>, <span class="stringliteral">&quot;ICE_FuturesEU&quot;</span>, <span class="stringliteral">&quot;UK&quot;</span>, 2, <span class="stringliteral">&quot;Jan&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;Preceding&quot;</span>, <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  190</span>                             <span class="keyword">false</span>, optionExpiryDateRule, prohibitedExpiries));</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    <span class="comment">// Check object</span></div>
<div class="line"><span class="lineno">  193</span>    BOOST_CHECK_EQUAL(convention-&gt;id(), <span class="stringliteral">&quot;ICE:B&quot;</span>);</div>
<div class="line"><span class="lineno">  194</span>    BOOST_CHECK(convention-&gt;anchorType() == CommodityFutureConvention::AnchorType::DayOfMonth);</div>
<div class="line"><span class="lineno">  195</span>    BOOST_CHECK_EQUAL(convention-&gt;dayOfMonth(), 31);</div>
<div class="line"><span class="lineno">  196</span>    BOOST_CHECK_EQUAL(convention-&gt;contractFrequency(), Monthly);</div>
<div class="line"><span class="lineno">  197</span>    BOOST_CHECK_EQUAL(convention-&gt;calendar(), <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_i_c_e.html">ICE</a>(<a class="code hl_variableRef" href="../qle/class_quant_ext_1_1_i_c_e.html#abe41cfffd960e29a5d8b07be00aeda42a11767a57ab6cffea5552ed924ca77ddf">ICE::FuturesEU</a>));</div>
<div class="line"><span class="lineno">  198</span>    BOOST_CHECK_EQUAL(convention-&gt;expiryCalendar(), UnitedKingdom());</div>
<div class="line"><span class="lineno">  199</span>    BOOST_CHECK_EQUAL(convention-&gt;expiryMonthLag(), 2);</div>
<div class="line"><span class="lineno">  200</span>    BOOST_CHECK_EQUAL(convention-&gt;oneContractMonth(), Jan);</div>
<div class="line"><span class="lineno">  201</span>    BOOST_CHECK_EQUAL(convention-&gt;offsetDays(), 0);</div>
<div class="line"><span class="lineno">  202</span>    BOOST_CHECK_EQUAL(convention-&gt;businessDayConvention(), Preceding);</div>
<div class="line"><span class="lineno">  203</span>    BOOST_CHECK(convention-&gt;adjustBeforeOffset());</div>
<div class="line"><span class="lineno">  204</span>    BOOST_CHECK(!convention-&gt;isAveraging());</div>
<div class="line"><span class="lineno">  205</span>    BOOST_CHECK_EQUAL(convention-&gt;optionExpiryOffset(), 3);</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    set&lt;Date&gt; expExpiries{Date(31, Dec, 2020), Date(31, Dec, 2021), Date(30, Dec, 2022)};</div>
<div class="line"><span class="lineno">  208</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; proExps = convention-&gt;prohibitedExpiries();</div>
<div class="line"><span class="lineno">  209</span>    BOOST_CHECK_EQUAL(proExps.size(), expExpiries.size());</div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> Date&amp; expExpiry : expExpiries) {</div>
<div class="line"><span class="lineno">  211</span>        <span class="keyword">auto</span> it = proExps.find(PE(expExpiry));</div>
<div class="line"><span class="lineno">  212</span>        BOOST_REQUIRE_MESSAGE(it != proExps.end(), <span class="stringliteral">&quot;Expected date &quot;</span> &lt;&lt; io::iso_date(expExpiry) &lt;&lt;</div>
<div class="line"><span class="lineno">  213</span>            <span class="stringliteral">&quot; not found in Prohibited Expiries&quot;</span>);</div>
<div class="line"><span class="lineno">  214</span>        BOOST_CHECK_EQUAL(it-&gt;expiry(), expExpiry);</div>
<div class="line"><span class="lineno">  215</span>        BOOST_CHECK(it-&gt;forFuture());</div>
<div class="line"><span class="lineno">  216</span>        BOOST_CHECK_EQUAL(it-&gt;futureBdc(), Preceding);</div>
<div class="line"><span class="lineno">  217</span>        BOOST_CHECK(it-&gt;forOption());</div>
<div class="line"><span class="lineno">  218</span>        BOOST_CHECK_EQUAL(it-&gt;optionBdc(), Preceding);</div>
<div class="line"><span class="lineno">  219</span>    }</div>
<div class="line"><span class="lineno">  220</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_i_c_e_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_i_c_e.html">QuantExt::ICE</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_i_c_e_html_abe41cfffd960e29a5d8b07be00aeda42a11767a57ab6cffea5552ed924ca77ddf"><div class="ttname"><a href="../qle/class_quant_ext_1_1_i_c_e.html#abe41cfffd960e29a5d8b07be00aeda42a11767a57ab6cffea5552ed924ca77ddf">QuantExt::ICE::FuturesEU</a></div><div class="ttdeci">FuturesEU</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_1_1_prohibited_expiry_html"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention_1_1_prohibited_expiry.html">ore::data::CommodityFutureConvention::ProhibitedExpiry</a></div><div class="ttdoc">Class to hold prohibited expiry information.</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01458">conventions.hpp:1458</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_commodity_future_convention_1_1_calendar_days_before_html"><div class="ttname"><a href="structore_1_1data_1_1_commodity_future_convention_1_1_calendar_days_before.html">ore::data::CommodityFutureConvention::CalendarDaysBefore</a></div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01327">conventions.hpp:1327</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_commodity_future_convention_1_1_day_of_month_html"><div class="ttname"><a href="structore_1_1data_1_1_commodity_future_convention_1_1_day_of_month.html">ore::data::CommodityFutureConvention::DayOfMonth</a></div><div class="ttdoc">Classes to differentiate constructors below.</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01322">conventions.hpp:1322</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_commodity_future_convention_1_1_option_expiry_anchor_date_rule_html"><div class="ttname"><a href="structore_1_1data_1_1_commodity_future_convention_1_1_option_expiry_anchor_date_rule.html">ore::data::CommodityFutureConvention::OptionExpiryAnchorDateRule</a></div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01343">conventions.hpp:1343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af8d5f5be411d8de7176a54f4ec1e0699" name="af8d5f5be411d8de7176a54f4ec1e0699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d5f5be411d8de7176a54f4ec1e0699">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[5/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testDayOfMonthCommodityFutureConventionFromXml&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00222">222</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  222</span>                                                                     {</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing parsing of commodity future convention with day of month based anchor day from XML&quot;</span>);</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>    <span class="comment">// XML string convention</span></div>
<div class="line"><span class="lineno">  227</span>    <span class="keywordtype">string</span> xml;</div>
<div class="line"><span class="lineno">  228</span>    xml.append(<span class="stringliteral">&quot;&lt;CommodityFuture&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  229</span>    xml.append(<span class="stringliteral">&quot;  &lt;Id&gt;ICE:B&lt;/Id&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  230</span>    xml.append(<span class="stringliteral">&quot;  &lt;AnchorDay&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  231</span>    xml.append(<span class="stringliteral">&quot;    &lt;DayOfMonth&gt;31&lt;/DayOfMonth&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  232</span>    xml.append(<span class="stringliteral">&quot;  &lt;/AnchorDay&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  233</span>    xml.append(<span class="stringliteral">&quot;  &lt;ContractFrequency&gt;Monthly&lt;/ContractFrequency&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  234</span>    xml.append(<span class="stringliteral">&quot;  &lt;Calendar&gt;ICE_FuturesEU&lt;/Calendar&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  235</span>    xml.append(<span class="stringliteral">&quot;  &lt;ExpiryCalendar&gt;UK&lt;/ExpiryCalendar&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  236</span>    xml.append(<span class="stringliteral">&quot;  &lt;ExpiryMonthLag&gt;2&lt;/ExpiryMonthLag&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  237</span>    xml.append(<span class="stringliteral">&quot;  &lt;IsAveraging&gt;false&lt;/IsAveraging&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  238</span>    xml.append(<span class="stringliteral">&quot;  &lt;OptionExpiryOffset&gt;3&lt;/OptionExpiryOffset&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  239</span>    xml.append(<span class="stringliteral">&quot;  &lt;ProhibitedExpiries&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  240</span>    xml.append(<span class="stringliteral">&quot;    &lt;Dates&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>    xml.append(<span class="stringliteral">&quot;      &lt;Date&gt;2020-12-31&lt;/Date&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  242</span>    xml.append(<span class="stringliteral">&quot;      &lt;Date&gt;2021-12-31&lt;/Date&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  243</span>    xml.append(<span class="stringliteral">&quot;      &lt;Date&gt;2022-12-30&lt;/Date&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  244</span>    xml.append(<span class="stringliteral">&quot;    &lt;/Dates&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  245</span>    xml.append(<span class="stringliteral">&quot;  &lt;/ProhibitedExpiries&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  246</span>    xml.append(<span class="stringliteral">&quot;&lt;/CommodityFuture&gt;&quot;</span>);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="comment">// Parse convention from XML</span></div>
<div class="line"><span class="lineno">  249</span>    boost::shared_ptr&lt;CommodityFutureConvention&gt; convention = boost::make_shared&lt;CommodityFutureConvention&gt;();</div>
<div class="line"><span class="lineno">  250</span>    BOOST_CHECK_NO_THROW(convention-&gt;fromXMLString(xml));</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">// Check parsed object</span></div>
<div class="line"><span class="lineno">  253</span>    BOOST_CHECK_EQUAL(convention-&gt;id(), <span class="stringliteral">&quot;ICE:B&quot;</span>);</div>
<div class="line"><span class="lineno">  254</span>    BOOST_CHECK(convention-&gt;anchorType() == CommodityFutureConvention::AnchorType::DayOfMonth);</div>
<div class="line"><span class="lineno">  255</span>    BOOST_CHECK_EQUAL(convention-&gt;dayOfMonth(), 31);</div>
<div class="line"><span class="lineno">  256</span>    BOOST_CHECK_EQUAL(convention-&gt;contractFrequency(), Monthly);</div>
<div class="line"><span class="lineno">  257</span>    BOOST_CHECK_EQUAL(convention-&gt;calendar(), <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_i_c_e.html">ICE</a>(<a class="code hl_variableRef" href="../qle/class_quant_ext_1_1_i_c_e.html#abe41cfffd960e29a5d8b07be00aeda42a11767a57ab6cffea5552ed924ca77ddf">ICE::FuturesEU</a>));</div>
<div class="line"><span class="lineno">  258</span>    BOOST_CHECK_EQUAL(convention-&gt;expiryCalendar(), UnitedKingdom());</div>
<div class="line"><span class="lineno">  259</span>    BOOST_CHECK_EQUAL(convention-&gt;expiryMonthLag(), 2);</div>
<div class="line"><span class="lineno">  260</span>    BOOST_CHECK_EQUAL(convention-&gt;oneContractMonth(), Jan);</div>
<div class="line"><span class="lineno">  261</span>    BOOST_CHECK_EQUAL(convention-&gt;offsetDays(), 0);</div>
<div class="line"><span class="lineno">  262</span>    BOOST_CHECK_EQUAL(convention-&gt;businessDayConvention(), Preceding);</div>
<div class="line"><span class="lineno">  263</span>    BOOST_CHECK(convention-&gt;adjustBeforeOffset());</div>
<div class="line"><span class="lineno">  264</span>    BOOST_CHECK(!convention-&gt;isAveraging());</div>
<div class="line"><span class="lineno">  265</span>    BOOST_CHECK_EQUAL(convention-&gt;optionExpiryOffset(), 3);</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    <span class="keyword">using </span>PE = <a class="code hl_class" href="classore_1_1data_1_1_commodity_future_convention_1_1_prohibited_expiry.html">CommodityFutureConvention::ProhibitedExpiry</a>;</div>
<div class="line"><span class="lineno">  268</span>    set&lt;Date&gt; expExpiries{ Date(31, Dec, 2020), Date(31, Dec, 2021), Date(30, Dec, 2022) };</div>
<div class="line"><span class="lineno">  269</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; proExps = convention-&gt;prohibitedExpiries();</div>
<div class="line"><span class="lineno">  270</span>    BOOST_CHECK_EQUAL(proExps.size(), expExpiries.size());</div>
<div class="line"><span class="lineno">  271</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> Date&amp; expExpiry : expExpiries) {</div>
<div class="line"><span class="lineno">  272</span>        <span class="keyword">auto</span> it = proExps.find(PE(expExpiry));</div>
<div class="line"><span class="lineno">  273</span>        BOOST_REQUIRE_MESSAGE(it != proExps.end(), <span class="stringliteral">&quot;Expected date &quot;</span> &lt;&lt; io::iso_date(expExpiry) &lt;&lt;</div>
<div class="line"><span class="lineno">  274</span>            <span class="stringliteral">&quot; not found in Prohibited Expiries&quot;</span>);</div>
<div class="line"><span class="lineno">  275</span>        BOOST_CHECK_EQUAL(it-&gt;expiry(), expExpiry);</div>
<div class="line"><span class="lineno">  276</span>        BOOST_CHECK(it-&gt;forFuture());</div>
<div class="line"><span class="lineno">  277</span>        BOOST_CHECK_EQUAL(it-&gt;futureBdc(), Preceding);</div>
<div class="line"><span class="lineno">  278</span>        BOOST_CHECK(it-&gt;forOption());</div>
<div class="line"><span class="lineno">  279</span>        BOOST_CHECK_EQUAL(it-&gt;optionBdc(), Preceding);</div>
<div class="line"><span class="lineno">  280</span>    }</div>
<div class="line"><span class="lineno">  281</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9fb0e2375e56175d1de823ef4036e357" name="a9fb0e2375e56175d1de823ef4036e357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fb0e2375e56175d1de823ef4036e357">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[6/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testDayOfMonthCommodityFutureConventionToXml&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00283">283</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  283</span>                                                                   {</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing writing of commodity future convention with day of month based anchor day to XML&quot;</span>);</div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>    <span class="comment">// Construct the convention</span></div>
<div class="line"><span class="lineno">  288</span>    <span class="keyword">using </span>PE = <a class="code hl_class" href="classore_1_1data_1_1_commodity_future_convention_1_1_prohibited_expiry.html">CommodityFutureConvention::ProhibitedExpiry</a>;</div>
<div class="line"><span class="lineno">  289</span>    set&lt;PE&gt; prohibitedExpiries;</div>
<div class="line"><span class="lineno">  290</span>    prohibitedExpiries.insert(PE(Date(31, Dec, 2020), <span class="keyword">true</span>, Following, <span class="keyword">false</span>, ModifiedFollowing));</div>
<div class="line"><span class="lineno">  291</span>    prohibitedExpiries.insert(PE(Date(31, Dec, 2021), <span class="keyword">false</span>, Preceding, <span class="keyword">true</span>, ModifiedPreceding));</div>
<div class="line"><span class="lineno">  292</span>    prohibitedExpiries.insert(PE(Date(31, Dec, 2021), <span class="keyword">false</span>, Following));</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    boost::shared_ptr&lt;CommodityFutureConvention&gt; convention;</div>
<div class="line"><span class="lineno">  295</span>    <a class="code hl_struct" href="structore_1_1data_1_1_commodity_future_convention_1_1_day_of_month.html">CommodityFutureConvention::DayOfMonth</a> dayOfMonth(<span class="stringliteral">&quot;31&quot;</span>);</div>
<div class="line"><span class="lineno">  296</span>    <a class="code hl_struct" href="structore_1_1data_1_1_commodity_future_convention_1_1_calendar_days_before.html">CommodityFutureConvention::CalendarDaysBefore</a> optionExpiryBusinessDayBefore(<span class="stringliteral">&quot;3&quot;</span>);</div>
<div class="line"><span class="lineno">  297</span>    <a class="code hl_struct" href="structore_1_1data_1_1_commodity_future_convention_1_1_option_expiry_anchor_date_rule.html">CommodityFutureConvention::OptionExpiryAnchorDateRule</a> optionExpiryDateRule(optionExpiryBusinessDayBefore);</div>
<div class="line"><span class="lineno">  298</span>    BOOST_CHECK_NO_THROW(convention = boost::make_shared&lt;CommodityFutureConvention&gt;(</div>
<div class="line"><span class="lineno">  299</span>                             <span class="stringliteral">&quot;ICE:B&quot;</span>, dayOfMonth, <span class="stringliteral">&quot;Monthly&quot;</span>, <span class="stringliteral">&quot;ICE_FuturesEU&quot;</span>, <span class="stringliteral">&quot;UK&quot;</span>, 2, <span class="stringliteral">&quot;Jan&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;Preceding&quot;</span>, <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  300</span>                             <span class="keyword">false</span>, optionExpiryDateRule, prohibitedExpiries));</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    <span class="comment">// Write the convention to a string</span></div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordtype">string</span> xml = convention-&gt;toXMLString();</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>    <span class="comment">// Read the convention back from the string using fromXMLString</span></div>
<div class="line"><span class="lineno">  306</span>    boost::shared_ptr&lt;CommodityFutureConvention&gt; readConvention = boost::make_shared&lt;CommodityFutureConvention&gt;();</div>
<div class="line"><span class="lineno">  307</span>    BOOST_CHECK_NO_THROW(readConvention-&gt;fromXMLString(xml));</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="comment">// The read convention should equal the original convention</span></div>
<div class="line"><span class="lineno">  310</span>    BOOST_CHECK_EQUAL(convention-&gt;id(), readConvention-&gt;id());</div>
<div class="line"><span class="lineno">  311</span>    BOOST_CHECK(convention-&gt;anchorType() == readConvention-&gt;anchorType());</div>
<div class="line"><span class="lineno">  312</span>    BOOST_CHECK_EQUAL(convention-&gt;dayOfMonth(), readConvention-&gt;dayOfMonth());</div>
<div class="line"><span class="lineno">  313</span>    BOOST_CHECK_EQUAL(convention-&gt;contractFrequency(), readConvention-&gt;contractFrequency());</div>
<div class="line"><span class="lineno">  314</span>    BOOST_CHECK_EQUAL(convention-&gt;calendar(), readConvention-&gt;calendar());</div>
<div class="line"><span class="lineno">  315</span>    BOOST_CHECK_EQUAL(convention-&gt;expiryMonthLag(), readConvention-&gt;expiryMonthLag());</div>
<div class="line"><span class="lineno">  316</span>    BOOST_CHECK_EQUAL(convention-&gt;oneContractMonth(), readConvention-&gt;oneContractMonth());</div>
<div class="line"><span class="lineno">  317</span>    BOOST_CHECK_EQUAL(convention-&gt;offsetDays(), readConvention-&gt;offsetDays());</div>
<div class="line"><span class="lineno">  318</span>    BOOST_CHECK_EQUAL(convention-&gt;businessDayConvention(), readConvention-&gt;businessDayConvention());</div>
<div class="line"><span class="lineno">  319</span>    BOOST_CHECK_EQUAL(convention-&gt;adjustBeforeOffset(), readConvention-&gt;adjustBeforeOffset());</div>
<div class="line"><span class="lineno">  320</span>    BOOST_CHECK_EQUAL(convention-&gt;isAveraging(), readConvention-&gt;isAveraging());</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; proExps = convention-&gt;prohibitedExpiries();</div>
<div class="line"><span class="lineno">  323</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; readProExps = readConvention-&gt;prohibitedExpiries();</div>
<div class="line"><span class="lineno">  324</span>    BOOST_CHECK_EQUAL(proExps.size(), readProExps.size());</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pe : proExps) {</div>
<div class="line"><span class="lineno">  326</span>        <span class="keyword">auto</span> it = readProExps.find(pe);</div>
<div class="line"><span class="lineno">  327</span>        BOOST_REQUIRE_MESSAGE(it != readProExps.end(), <span class="stringliteral">&quot;Expected date &quot;</span> &lt;&lt; io::iso_date(pe.expiry()) &lt;&lt;</div>
<div class="line"><span class="lineno">  328</span>            <span class="stringliteral">&quot; not found in Prohibited Expiries&quot;</span>);</div>
<div class="line"><span class="lineno">  329</span>        BOOST_CHECK_EQUAL(it-&gt;expiry(), pe.expiry());</div>
<div class="line"><span class="lineno">  330</span>        BOOST_CHECK_EQUAL(it-&gt;forFuture(), pe.forFuture());</div>
<div class="line"><span class="lineno">  331</span>        BOOST_CHECK_EQUAL(it-&gt;futureBdc(), pe.futureBdc());</div>
<div class="line"><span class="lineno">  332</span>        BOOST_CHECK_EQUAL(it-&gt;forOption(), pe.forOption());</div>
<div class="line"><span class="lineno">  333</span>        BOOST_CHECK_EQUAL(it-&gt;optionBdc(), pe.optionBdc());</div>
<div class="line"><span class="lineno">  334</span>    }</div>
<div class="line"><span class="lineno">  335</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a534830cf1ee396136e1d6b06d1f329dc" name="a534830cf1ee396136e1d6b06d1f329dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a534830cf1ee396136e1d6b06d1f329dc">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[7/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testIborConventionConstructionWithTenor&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00337">337</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  337</span>                                                              {</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Ibor Index convention construction with Tenor&quot;</span>);</div>
<div class="line"><span class="lineno">  340</span>    testIborIndexConvention(<span class="stringliteral">&quot;AED-EIBOR-3M&quot;</span>, <span class="stringliteral">&quot;AED&quot;</span>, <span class="stringliteral">&quot;ACT/360&quot;</span>, 2, <span class="stringliteral">&quot;MF&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  341</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a98c34fd190e85d0492eee066104620d6" name="a98c34fd190e85d0492eee066104620d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98c34fd190e85d0492eee066104620d6">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[8/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testIborConventionConstructionWithoutTenor&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00343">343</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  343</span>                                                                 {</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Ibor Index convention construction with Tenor&quot;</span>);</div>
<div class="line"><span class="lineno">  346</span>    testIborIndexConvention(<span class="stringliteral">&quot;AED-EIBOR&quot;</span>, <span class="stringliteral">&quot;AED&quot;</span>, <span class="stringliteral">&quot;ACT/360&quot;</span>, 2, <span class="stringliteral">&quot;MF&quot;</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  347</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aef0c6afdbebe59923db526c68787deec" name="aef0c6afdbebe59923db526c68787deec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef0c6afdbebe59923db526c68787deec">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[9/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testIborConventionConstruction7D&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2conventions_8cpp_source.html#l00349">349</a> of file <a class="el" href="test_2conventions_8cpp_source.html">conventions.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  349</span>                                                       {</div>
<div class="line"><span class="lineno">  350</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Ibor Index convention construction with Tenor&quot;</span>);</div>
<div class="line"><span class="lineno">  351</span>    testIborIndexConvention(<span class="stringliteral">&quot;CNY-REPO-7D&quot;</span>, <span class="stringliteral">&quot;CNY&quot;</span>, <span class="stringliteral">&quot;A365F&quot;</span>, 2, <span class="stringliteral">&quot;MF&quot;</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;CNY-REPO-1W&quot;</span>);</div>
<div class="line"><span class="lineno">  352</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
