<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREData: ored/scripting/models/gaussiancam.cpp Source File</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oredextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-data@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.8.11</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3e56cb31e3027d5bae8796cb64b50d07.html">ored</a></li><li class="navelem"><a class="el" href="dir_5ec8a1e1d14eaa47b1b0e648274be507.html">scripting</a></li><li class="navelem"><a class="el" href="dir_f42446cc52b32b57df5f03cb32d31df7.html">models</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">gaussiancam.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="ored_2scripting_2models_2gaussiancam_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> Copyright (C) 2019 Quaternion Risk Management Ltd</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> All rights reserved.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"></span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> This file is part of ORE, a free-software/open-source library</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> for transparent pricing and risk analysis - http://opensourcerisk.org</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"></span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> ORE is free software: you can redistribute it and/or modify it</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> under the terms of the Modified BSD License.  You should have received a</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> copy of the license along with this program.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> The license is also available online at &lt;http://opensourcerisk.org&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"></span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> This program is distributed on the basis that it will form a useful</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> contribution to risk analytics and model standardisation, but WITHOUT</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment"> FITNESS FOR A PARTICULAR PURPOSE. See the license for more details.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">*/</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;<a class="code" href="gaussiancam_8hpp.html">ored/scripting/models/gaussiancam.hpp</a>&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;qle/models/infdkvectorised.hpp&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;qle/math/randomvariablelsmbasissystem.hpp&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/multipathvariategenerator_8hpp.html">qle/methods/multipathvariategenerator.hpp</a>&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;<a class="code" href="indexparser_8hpp.html">ored/utilities/indexparser.hpp</a>&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;<a class="code" href="log_8hpp.html">ored/utilities/log.hpp</a>&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;<a class="code" href="parsers_8hpp.html">ored/utilities/parsers.hpp</a>&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;<a class="code" href="to__string_8hpp.html">ored/utilities/to_string.hpp</a>&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/averageonindexedcoupon_8hpp.html">qle/cashflows/averageonindexedcoupon.hpp</a>&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/averageonindexedcouponpricer_8hpp.html">qle/cashflows/averageonindexedcouponpricer.hpp</a>&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/overnightindexedcoupon_8hpp.html">qle/cashflows/overnightindexedcoupon.hpp</a>&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/flatextrapolation_8hpp.html">qle/math/flatextrapolation.hpp</a>&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/crossassetmodel_8hpp.html">qle/models/crossassetmodel.hpp</a>&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/jyimpliedzeroinflationtermstructure_8hpp.html">qle/models/jyimpliedzeroinflationtermstructure.hpp</a>&gt;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../qle/lgmvectorised_8hpp.html">qle/models/lgmvectorised.hpp</a>&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;ql/math/comparison.hpp&gt;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;ql/quotes/simplequote.hpp&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceore.html">ore</a> {</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="keyword">namespace </span><a class="code hl_enumvalue" href="log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a> {</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_quant_lib.html">QuantLib</a>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_quant_ext.html">QuantExt</a>;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#ade7962af7fbf40817ae3bb69ffb0d602">   47</a></span><a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ade7962af7fbf40817ae3bb69ffb0d602">GaussianCam::GaussianCam</a>(<span class="keyword">const</span> Handle&lt;CrossAssetModel&gt;&amp; cam, <span class="keyword">const</span> Size paths,</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>                         <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; currencies,</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>                         <span class="keyword">const</span> std::vector&lt;Handle&lt;YieldTermStructure&gt;&gt;&amp; curves,</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>                         <span class="keyword">const</span> std::vector&lt;Handle&lt;Quote&gt;&gt;&amp; fxSpots,</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>                         <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::string, boost::shared_ptr&lt;InterestRateIndex&gt;&gt;&gt;&amp; irIndices,</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>                         <span class="keyword">const</span> std::vector&lt;std::pair&lt;std::string, boost::shared_ptr&lt;ZeroInflationIndex&gt;&gt;&gt;&amp; infIndices,</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>                         <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; indices, <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; indexCurrencies,</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>                         <span class="keyword">const</span> std::set&lt;Date&gt;&amp; simulationDates, <span class="keyword">const</span> <a class="code hl_struct" href="structore_1_1data_1_1_model_1_1_mc_params.html">McParams</a>&amp; mcParams, <span class="keyword">const</span> Size timeStepsPerYear,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>                         <span class="keyword">const</span> <a class="code hl_class" href="classore_1_1data_1_1_ibor_fallback_config.html">IborFallbackConfig</a>&amp; iborFallbackConfig,</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>                         <span class="keyword">const</span> std::vector&lt;Size&gt;&amp; projectedStateProcessIndices,</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>                         <span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; conditionalExpectationModelStates)</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    : <a class="code hl_class" href="classore_1_1data_1_1_model_impl.html">ModelImpl</a>(curves.front()-&gt;dayCounter(), paths, currencies, irIndices, infIndices, indices, indexCurrencies,</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>                simulationDates, iborFallbackConfig),</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>      cam_(cam), curves_(curves), fxSpots_(fxSpots), mcParams_(mcParams), timeStepsPerYear_(timeStepsPerYear),</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>      projectedStateProcessIndices_(projectedStateProcessIndices) {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    QL_REQUIRE(!<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>.empty(), <span class="stringliteral">&quot;model is empty&quot;</span>);</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="comment">// register with observables</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; o : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>)</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        registerWith(o);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; o : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aaf8a64586eb5db2781e2ba5c0597041f">fxSpots_</a>)</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        registerWith(o);</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    registerWith(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// set conditional expectation model states</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7a781df5730e7f7c6c0f658887a27005">conditionalExpectationUseIr_</a> =</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        conditionalExpectationModelStates.empty() ||</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        std::find(conditionalExpectationModelStates.begin(), conditionalExpectationModelStates.end(), <span class="stringliteral">&quot;IR&quot;</span>) !=</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>            conditionalExpectationModelStates.end();</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aa612483092be7f58e73321add0fe18fa">conditionalExpectationUseInf_</a> =</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        conditionalExpectationModelStates.empty() ||</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        std::find(conditionalExpectationModelStates.begin(), conditionalExpectationModelStates.end(), <span class="stringliteral">&quot;INF&quot;</span>) !=</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            conditionalExpectationModelStates.end();</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a634aaf5baa807c18ff5d15e5cd91bdd6">conditionalExpectationUseAsset_</a> =</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        conditionalExpectationModelStates.empty() ||</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        std::find(conditionalExpectationModelStates.begin(), conditionalExpectationModelStates.end(), <span class="stringliteral">&quot;Asset&quot;</span>) !=</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            conditionalExpectationModelStates.end();</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>} <span class="comment">// GaussianCam ctor</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">   91</a></span>Size <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">GaussianCam::size</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> == <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aec271be46c547c89cd27b4d9c811a37d">inTrainingPhase_</a>)</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a150e9051900157f9eeb47db76a408ba8">trainingSamples</a>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_model.html#a9edcd102946c4e3bd0bcdba2fc64e397">Model::size</a>();</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a4b10372529e618784504b78a934f0a3e">overwriteModelSize_</a>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    }</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>}</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a15aa444a844bc8f8670058816b9dcc0c">  102</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a15aa444a844bc8f8670058816b9dcc0c">GaussianCam::releaseMemory</a>() {</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>.clear();</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a5e67018fb05525c8b8a040d102e98564">underlyingPathsTraining_</a>.clear();</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>.clear();</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">infStates_</a>.clear();</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ab53b008b44304b9be78ec92b1449eb43">irStatesTraining_</a>.clear();</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6177708ca5ed4a0563ffa6d15b803a88">infStatesTraining_</a>.clear();</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a343681da14ddb8f9e59360718bcf1958">irIndexValueCache_</a>.clear();</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>}</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#ad48a455c1a5496f2a02cd0640356b86b">  112</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ad48a455c1a5496f2a02cd0640356b86b">GaussianCam::resetNPVMem</a>() { <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9c44a3812e75d9594b98936761506d62">storedRegressionCoeff_</a>.clear(); }</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">  114</a></span><span class="keyword">const</span> Date&amp; <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">GaussianCam::referenceDate</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    calculate();</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a3e22290961d6b56dce069c1c4fda6386">referenceDate_</a>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>}</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a1127cccc9668a02247dc139d27121708">  119</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a1127cccc9668a02247dc139d27121708">GaussianCam::performCalculations</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    QL_REQUIRE(!<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aec271be46c547c89cd27b4d9c811a37d">inTrainingPhase_</a>, <span class="stringliteral">&quot;GaussianCam::performCalculations(): state inTrainingPhase should be false, this was &quot;</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                                  <span class="stringliteral">&quot;not resetted appropriately.&quot;</span>);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a3e22290961d6b56dce069c1c4fda6386">referenceDate_</a> = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;referenceDate();</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">// set up time grid</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.clear();</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.insert(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">referenceDate</a>());</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; d : <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#ae637d21787eeb964d8df83a05eee7b04">simulationDates_</a>) {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">if</span> (d &gt;= <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">referenceDate</a>())</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.insert(d);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    }</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    std::vector&lt;Real&gt; times;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; d : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>) {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        times.push_back(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;timeFromReference(d));</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    Size <a class="code hl_variableRef" href="../qle/test_2commodityschwartzmodel_8cpp.html#a84e1cc7fe4440301cfe72e7c64be988b">steps</a> = std::max(std::lround(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ad58dc5329a35fa64347940b5f1221fab">timeStepsPerYear_</a> * times.back() + 0.5), 1l);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#adda5ae6c670bdbb1857509a4aa20ec25">timeGrid_</a> = TimeGrid(times.begin(), times.end(), <a class="code hl_variableRef" href="../qle/test_2commodityschwartzmodel_8cpp.html#a84e1cc7fe4440301cfe72e7c64be988b">steps</a>);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9be63a7f055dbb0ed0fc95090d92e87">positionInTimeGrid_</a>.resize(times.size());</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9be63a7f055dbb0ed0fc95090d92e87">positionInTimeGrid_</a>.size(); ++i)</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9be63a7f055dbb0ed0fc95090d92e87">positionInTimeGrid_</a>[i] = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#adda5ae6c670bdbb1857509a4aa20ec25">timeGrid_</a>.index(times[i]);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// clear underlying paths</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>.clear();</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a5e67018fb05525c8b8a040d102e98564">underlyingPathsTraining_</a>.clear();</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="comment">// init times vector and underlying path where we map a date to a randomvariable representing the path values</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; d : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>) {</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>[d] = std::vector&lt;RandomVariable&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(), <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), 0.0));</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>[d] = std::vector&lt;RandomVariable&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(), <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), 0.0));</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">infStates_</a>[d] = std::vector&lt;std::pair&lt;RandomVariable, RandomVariable&gt;&gt;(</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(), std::make_pair(<a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), 0.0), <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), 0.0)));</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <span class="keywordflow">if</span>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>() != Null&lt;Size&gt;() &amp;&amp; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a5e67018fb05525c8b8a040d102e98564">underlyingPathsTraining_</a>[d] =</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                std::vector&lt;RandomVariable&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(), <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>(), 0.0));</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ab53b008b44304b9be78ec92b1449eb43">irStatesTraining_</a>[d] =</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                std::vector&lt;RandomVariable&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(), <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>(), 0.0));</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6177708ca5ed4a0563ffa6d15b803a88">infStatesTraining_</a>[d] = std::vector&lt;std::pair&lt;RandomVariable, RandomVariable&gt;&gt;(</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>                <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(),</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>                std::make_pair(<a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>(), 0.0), <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>(), 0.0)));</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        }</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    }</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// populate index mappings</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6577772acc146eb3eb208257cbf50529">currencyPositionInProcess_</a>.clear();</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8b244cbd26ed49cbaed3a3542f5c816c">currencyPositionInCam_</a>.clear();</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(); ++i) {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6577772acc146eb3eb208257cbf50529">currencyPositionInProcess_</a>.push_back(</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;pIdx(CrossAssetModel::AssetType::IR, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;ccyIndex(<a class="code hl_function" href="group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>[i]))));</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8b244cbd26ed49cbaed3a3542f5c816c">currencyPositionInCam_</a>.push_back(</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;idx(CrossAssetModel::AssetType::IR, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;ccyIndex(<a class="code hl_function" href="group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>[i]))));</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    }</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7062dfe3672fd24ef57614c00f39b65f">irIndexPositionInCam_</a>.clear();</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>.size(); ++i) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7062dfe3672fd24ef57614c00f39b65f">irIndexPositionInCam_</a>.push_back(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;ccyIndex(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>[i].second-&gt;currency()));</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">infIndexPositionInProcess_</a>.clear();</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a272074ef35e7d2356ff92b3b1fae4f0b">infIndexPositionInCam_</a>.clear();</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(); ++i) {</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        Size infIdx = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;infIndex(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[i].first.infName());</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">infIndexPositionInProcess_</a>.push_back(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;pIdx(CrossAssetModel::AssetType::INF, infIdx));</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a272074ef35e7d2356ff92b3b1fae4f0b">infIndexPositionInCam_</a>.push_back(infIdx);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a413e2230491b27cddd759bcde9bb6d74">indexPositionInProcess_</a>.clear();</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(); ++i) {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>[i].isFx()) {</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            <span class="comment">// FX</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            Size ccyIdx = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;ccyIndex(<a class="code hl_function" href="group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#ad2f62229897fdae7a8e793ee62e3d00c">indexCurrencies_</a>[i]));</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            QL_REQUIRE(ccyIdx &gt; 0, <span class="stringliteral">&quot;fx index &#39;&quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>[i] &lt;&lt; <span class="stringliteral">&quot;&#39; has unexpected for ccy = base ccy&quot;</span>);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a413e2230491b27cddd759bcde9bb6d74">indexPositionInProcess_</a>.push_back(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;pIdx(CrossAssetModel::AssetType::FX, ccyIdx - 1));</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a444aa2c3317c8e7cf74e4f0fd797a701">eqIndexInCam_</a>.push_back(Null&lt;Size&gt;());</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>[i].isEq()) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <span class="comment">// EQ</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            Size eqIdx = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;eqIndex(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>[i].eq()-&gt;<a class="code hl_variable" href="todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a>());</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a413e2230491b27cddd759bcde9bb6d74">indexPositionInProcess_</a>.push_back(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;pIdx(CrossAssetModel::AssetType::EQ, eqIdx));</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a444aa2c3317c8e7cf74e4f0fd797a701">eqIndexInCam_</a>.push_back(eqIdx);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            QL_FAIL(<span class="stringliteral">&quot;index &#39;&quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>[i].<a class="code hl_variable" href="todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a>() &lt;&lt; <span class="stringliteral">&quot;&#39; expected to be FX or EQ&quot;</span>);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        }</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    }</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="comment">// populate path values</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a4337a36a572127722e5fb875b79f6ea1">populatePathValues</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">infStates_</a>, times, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>() != Null&lt;Size&gt;() &amp;&amp; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a4337a36a572127722e5fb875b79f6ea1">populatePathValues</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>(), <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a5e67018fb05525c8b8a040d102e98564">underlyingPathsTraining_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ab53b008b44304b9be78ec92b1449eb43">irStatesTraining_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6177708ca5ed4a0563ffa6d15b803a88">infStatesTraining_</a>, times,</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                           <span class="keyword">true</span>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>}</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a4337a36a572127722e5fb875b79f6ea1">  222</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a4337a36a572127722e5fb875b79f6ea1">GaussianCam::populatePathValues</a>(<span class="keyword">const</span> Size nSamples, std::map&lt;Date, std::vector&lt;RandomVariable&gt;&gt;&amp; paths,</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                                     std::map&lt;Date, std::vector&lt;RandomVariable&gt;&gt;&amp; irStates,</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>                                     std::map&lt;Date, std::vector&lt;std::pair&lt;RandomVariable, RandomVariable&gt;&gt;&gt;&amp; infStates,</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>                                     <span class="keyword">const</span> std::vector&lt;Real&gt;&amp; times, <span class="keyword">const</span> <span class="keywordtype">bool</span> isTraining)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="comment">// get state process</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="keyword">auto</span> process = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;stateProcess();</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="comment">// set reference date values, if there are no future simulation dates, we are done</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="comment">// FX and EQ indcies</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(); ++k) {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        paths[<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a3e22290961d6b56dce069c1c4fda6386">referenceDate_</a>][k].setAll(process-&gt;initialValues().at(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a413e2230491b27cddd759bcde9bb6d74">indexPositionInProcess_</a>[k]));</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    }</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="comment">// IR states per currency (they are all just 0)</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(); ++k) {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        irStates[<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">referenceDate</a>()][k].setAll(0.0);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    }</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">// INF DK or JY state, we happen to have two components (x,y) for each, so no case distinction needed</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(); ++k) {</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        infStates[<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">referenceDate</a>()].push_back(</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            std::make_pair(<a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(nSamples, process-&gt;initialValues().at(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">infIndexPositionInProcess_</a>[k])),</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                           <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(nSamples, process-&gt;initialValues().at(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">infIndexPositionInProcess_</a>[k] + 1))));</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    }</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() == 1)</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="comment">// populate path values</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="keywordflow">if</span> (process-&gt;size() == 1 &amp;&amp; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span> </div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <span class="comment">// we treat the case of a one dimensional process separately for optimisation reasons; we know that in</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        <span class="comment">// this case we have a single, driftless LGM process for currency 0</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <span class="keyword">auto</span> lgmProcess = boost::dynamic_pointer_cast&lt;StochasticProcess1D&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;lgm(0)-&gt;stateProcess());</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        std::vector&lt;Real&gt; stdDevs(times.size() - 1);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size() - 1; ++i) {</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            stdDevs[i] = lgmProcess-&gt;stdDeviation(times[i], 0.0, times[i + 1] - times[i]);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="comment">// generate paths using own variate generator</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <span class="keyword">auto</span> gen =</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a7f86fab2a811580eabbe8805ae8df78a">makeMultiPathVariateGenerator</a>(isTraining ? <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a84980bac080623a4958f54eea9156714">trainingSequenceType</a> : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a65d2adee751431c28952c4b92532ae92">sequenceType</a>, 1,</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                                          times.size() - 1, isTraining ? <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#ab26b0dbe400a21ff54dd3f1ed4c4b9a2">trainingSeed</a> : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a4656aca0e143d476a66743acc51b0b59">seed</a>,</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                                          <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a701af3323cc00f206ca91b361a1d61cc">sobolOrdering</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a873e0a0bc00eabfaf2955249ae2edcb1">sobolDirectionIntegers</a>);</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> s = std::next(irStates.begin(), 1); s != irStates.end(); ++s)</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; r : s-&gt;second)</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>                r.expand();</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        <span class="keywordflow">for</span> (Size path = 0; path &lt; nSamples; ++path) {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            <span class="keyword">auto</span> p = gen-&gt;next();</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            Real state = 0.0;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            <span class="keyword">auto</span> date = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.begin();</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size() - 1; ++i) {</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>                state += stdDevs[i] * p.value[i][0];</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>                ++date;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>                irStates[*date][0].data()[path] = state;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            }</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        <span class="comment">// case process size &gt; 1 or we have injected paths, we use the normal process interface to evolve the process</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        boost::shared_ptr&lt;MultiPathGeneratorBase&gt; pathGen;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="comment">// build a temporary repository of the state prcess values, since we want to access them not path by path</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        <span class="comment">// below - for efficiency reasons the loop over the paths should be the innermost loop there!</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        std::vector&lt;std::vector&lt;std::vector&lt;Real&gt;&gt;&gt; pathValues(</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1,</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            std::vector&lt;std::vector&lt;Real&gt;&gt;(process-&gt;size(), std::vector&lt;Real&gt;(nSamples)));</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            <span class="comment">// the usual path generator</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>            <span class="keywordflow">if</span> (<span class="keyword">auto</span> tmp = boost::dynamic_pointer_cast&lt;CrossAssetStateProcess&gt;(process)) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>                tmp-&gt;resetCache(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#adda5ae6c670bdbb1857509a4aa20ec25">timeGrid_</a>.size() - 1);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            }</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span> </div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <span class="keyword">auto</span> pathGen =</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a293bf46c308777c99d96b720845b4887">makeMultiPathGenerator</a>(isTraining ? <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a84980bac080623a4958f54eea9156714">trainingSequenceType</a> : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a65d2adee751431c28952c4b92532ae92">sequenceType</a>, process,</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                                       <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#adda5ae6c670bdbb1857509a4aa20ec25">timeGrid_</a>, isTraining ? <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#ab26b0dbe400a21ff54dd3f1ed4c4b9a2">trainingSeed</a> : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a4656aca0e143d476a66743acc51b0b59">seed</a>,</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                                       <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a701af3323cc00f206ca91b361a1d61cc">sobolOrdering</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a873e0a0bc00eabfaf2955249ae2edcb1">sobolDirectionIntegers</a>);</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>            <span class="keywordflow">for</span> (Size i = 0; i &lt; nSamples; ++i) {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                MultiPath path = pathGen-&gt;next().value;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                <span class="keywordflow">for</span> (Size j = 0; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1; ++j) {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                    <span class="keywordflow">for</span> (Size k = 0; k &lt; process-&gt;size(); ++k) {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                        pathValues[j][k][i] = path[k][<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9be63a7f055dbb0ed0fc95090d92e87">positionInTimeGrid_</a>[j + 1]];</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                    }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            }</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            <span class="comment">// simple linear interpolation of injected paths, TODO explore the usage of Brownian Bridges here</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            std::vector&lt;Real&gt; relevantPathTimes;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            std::vector&lt;Size&gt; relevantPathIndices;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>            QL_REQUIRE(!<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a048c85b684fd270461a6094c86b1859c">injectedPathStickyCloseOutRun_</a> || !((*<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ae0c91f0b07093ee765f599d03638171a">injectedPathIsRelevantTime_</a>)[0]),</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                       <span class="stringliteral">&quot;internal error: first injected time is relevant and stickyCloseOutRun is true&quot;</span>);</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a>-&gt;size(); ++j) {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                <span class="keywordflow">if</span> ((*<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ae0c91f0b07093ee765f599d03638171a">injectedPathIsRelevantTime_</a>)[j]) {</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                    relevantPathTimes.push_back((*<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a>)[<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a048c85b684fd270461a6094c86b1859c">injectedPathStickyCloseOutRun_</a> ? j - 1 : j]);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                    relevantPathIndices.push_back(j);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>                }</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            Array y(relevantPathTimes.size());</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            <span class="keyword">auto</span> pathInterpolator =</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>                <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_linear_flat.html">LinearFlat</a>().<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_linear_flat.html#aeebdaea19fcf47f8c30382a178283141">interpolate</a>(relevantPathTimes.begin(), relevantPathTimes.end(), y.begin());</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            pathInterpolator.enableExtrapolation();</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="keywordflow">for</span> (Size i = 0; i &lt; nSamples; ++i) {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                <span class="keywordflow">for</span> (Size k = 0; k &lt; process-&gt;size(); ++k) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                    <span class="keywordflow">for</span> (Size j = 0; j &lt; relevantPathTimes.size(); ++j) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                        y[j] = (*injectedPaths_)[relevantPathIndices[j]][<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ac1f186ffe8b2932683c6f54969aa2f58">projectedStateProcessIndices_</a>[k]][i];</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                    }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                    pathInterpolator.update();</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                    <span class="keywordflow">for</span> (Size j = 0; j &lt; times.size() - 1; ++j) {</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>                        pathValues[j][k][i] = pathInterpolator(times[j + 1]);</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>                    }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>                }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>            }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <span class="comment">// FX and EQ indcies</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        std::vector&lt;std::vector&lt;RandomVariable*&gt;&gt; rvs(</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(), std::vector&lt;RandomVariable*&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1));</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <span class="keyword">auto</span> date = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.begin();</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1; ++i) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            ++date;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(); ++j) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                rvs[j][i] = &amp;paths[*date][j];</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                rvs[j][i]-&gt;expand();</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            }</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.size(); ++k) {</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>            <span class="keywordflow">for</span> (Size j = 1; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size(); ++j) {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>                <span class="keywordflow">for</span> (Size i = 0; i &lt; nSamples; ++i) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>                    rvs[k][j - 1]-&gt;data()[i] = std::exp(pathValues[j - 1][<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a413e2230491b27cddd759bcde9bb6d74">indexPositionInProcess_</a>[k]][i]);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>                }</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            }</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        }</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <span class="comment">// IR states per currency</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        std::vector&lt;std::vector&lt;RandomVariable*&gt;&gt; rvs2(</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(), std::vector&lt;RandomVariable*&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1));</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="keyword">auto</span> date2 = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.begin();</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1; ++i) {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            ++date2;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(); ++j) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>                rvs2[j][i] = &amp;irStates[*date2][j];</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>                rvs2[j][i]-&gt;expand();</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.size(); ++k) {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            <span class="keywordflow">for</span> (Size j = 1; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size(); ++j) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                <span class="keywordflow">for</span> (Size i = 0; i &lt; nSamples; ++i) {</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                    rvs2[k][j - 1]-&gt;data()[i] = pathValues[j - 1][<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6577772acc146eb3eb208257cbf50529">currencyPositionInProcess_</a>[k]][i];</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>                }</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>            }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        }</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>        <span class="comment">// INF states per index, again we do not need to distinguish DK and JY here</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        std::vector&lt;std::vector&lt;RandomVariable*&gt;&gt; rvs3a(</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(), std::vector&lt;RandomVariable*&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1));</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        std::vector&lt;std::vector&lt;RandomVariable*&gt;&gt; rvs3b(</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(), std::vector&lt;RandomVariable*&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1));</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="keyword">auto</span> date3 = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.begin();</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size() - 1; ++i) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            ++date3;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(); ++j) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>                rvs3a[j][i] = &amp;infStates[*date3][j].first;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                rvs3b[j][i] = &amp;infStates[*date3][j].second;</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                rvs3a[j][i]-&gt;expand();</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                rvs3b[j][i]-&gt;expand();</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            }</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        }</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>.size(); ++k) {</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            <span class="keywordflow">for</span> (Size j = 1; j &lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">effectiveSimulationDates_</a>.size(); ++j) {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>                <span class="keywordflow">for</span> (Size i = 0; i &lt; nSamples; ++i) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>                    rvs3a[k][j - 1]-&gt;data()[i] = pathValues[j - 1][<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">infIndexPositionInProcess_</a>[k]][i];</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>                    rvs3b[k][j - 1]-&gt;data()[i] = pathValues[j - 1][<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">infIndexPositionInProcess_</a>[k] + 1][i];</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>                }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    }</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>}</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#ac2531b45af9259f8b3af891fac9f5d03">  415</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac2531b45af9259f8b3af891fac9f5d03">GaussianCam::getIndexValue</a>(<span class="keyword">const</span> Size indexNo, <span class="keyword">const</span> Date&amp; d, <span class="keyword">const</span> Date&amp; fwd)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <span class="keyword">auto</span> res = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>.at(d).at(indexNo);</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="comment">// compute forwarding factor</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="keywordflow">if</span> (fwd != Null&lt;Date&gt;()) {</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <span class="keyword">auto</span> ccy = std::find(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.begin(), <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.end(), <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#ad2f62229897fdae7a8e793ee62e3d00c">indexCurrencies_</a>[indexNo]);</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        QL_REQUIRE(ccy != <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.end(), <span class="stringliteral">&quot;GaussianCam::getIndexValue(): can not get currency for index #&quot;</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>                                                 &lt;&lt; indexNo &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.at(indexNo) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>[indexNo].isFx()) {</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            res *= <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">getDiscount</a>(std::distance(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.begin(), ccy), d, fwd) / <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">getDiscount</a>(0, d, fwd);</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a444aa2c3317c8e7cf74e4f0fd797a701">eqIndexInCam_</a>[indexNo] != Null&lt;Size&gt;()) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            <span class="comment">// the CAM assumes a deterministic dividend curve for EQ</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            <span class="keyword">auto</span> div = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;eqbs(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a444aa2c3317c8e7cf74e4f0fd797a701">eqIndexInCam_</a>[indexNo])-&gt;equityDivYieldCurveToday();</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            res *= <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), div-&gt;discount(fwd) / div-&gt;discount(d)) /</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>                   <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">getDiscount</a>(std::distance(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">currencies_</a>.begin(), ccy), d, fwd,</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>                               <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;eqbs(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a444aa2c3317c8e7cf74e4f0fd797a701">eqIndexInCam_</a>[indexNo])-&gt;equityIrCurveToday());</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            QL_FAIL(<span class="stringliteral">&quot;GaussianGam::getIndexValue(): did not recognise  index #&quot;</span> &lt;&lt; indexNo &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">indices_</a>.at(indexNo)</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>                                                                               &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        }</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>}</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a31ea941e2c5742d1de925abc758a422e">  438</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a31ea941e2c5742d1de925abc758a422e">GaussianCam::getIrIndexValue</a>(<span class="keyword">const</span> Size indexNo, <span class="keyword">const</span> Date&amp; d, <span class="keyword">const</span> Date&amp; fwd)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    Date <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = d;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="keywordflow">if</span> (fwd != Null&lt;Date&gt;())</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = fwd;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <span class="comment">// ensure a valid fixing date</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>[indexNo].second-&gt;fixingCalendar().adjust(<a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a>);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    <span class="comment">// look up required fixing in cache and return it if found</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <span class="keyword">auto</span> cacheValue = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a343681da14ddb8f9e59360718bcf1958">irIndexValueCache_</a>.find(std::make_tuple(indexNo, d, <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a>));</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="keywordflow">if</span> (cacheValue != <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a343681da14ddb8f9e59360718bcf1958">irIndexValueCache_</a>.end())</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        <span class="keywordflow">return</span> cacheValue-&gt;second;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="comment">// compute value, add to cache and return it</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    Size currencyIdx = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7062dfe3672fd24ef57614c00f39b65f">irIndexPositionInCam_</a>[indexNo];</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a> lgmv(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;irlgm1f(currencyIdx));</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <span class="keyword">auto</span> result = lgmv.<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html#a671bc1fefafaf56ae7028084cec2ac5c">fixing</a>(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>[indexNo].second, <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;timeFromReference(d),</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                              <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>.at(d).at(currencyIdx));</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a343681da14ddb8f9e59360718bcf1958">irIndexValueCache_</a>[std::make_tuple(indexNo, d, <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a>)] = result;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>}</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a0e7b4b054beda325e75ce61b56405d20">  457</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a0e7b4b054beda325e75ce61b56405d20">GaussianCam::getInfIndexValue</a>(<span class="keyword">const</span> Size indexNo, <span class="keyword">const</span> Date&amp; d, <span class="keyword">const</span> Date&amp; fwd)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    Date <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = d;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    Date obsDate = d;</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <span class="keywordflow">if</span> (fwd != Null&lt;Date&gt;())</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = fwd;</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    Size lag = <a class="code hl_function" href="namespaceore_1_1data.html#a55cb2058e735993a24abc89b532e2e72">getInflationSimulationLag</a>(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].second);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="keyword">auto</span> <span class="keyword">const</span>&amp; state = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">infStates_</a>.at(obsDate + lag).at(indexNo);</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    Size camIndex = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a272074ef35e7d2356ff92b3b1fae4f0b">infIndexPositionInCam_</a>[indexNo];</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    Real t = <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].second-&gt;zeroInflationTermStructure()-&gt;timeFromReference(obsDate + lag);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    Real T = <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].second-&gt;zeroInflationTermStructure()-&gt;timeFromReference(<a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> + lag);</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    QL_DEPRECATED_DISABLE_WARNING</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <span class="keywordtype">bool</span> isInterpolated = <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].second-&gt;interpolated();</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    QL_DEPRECATED_ENABLE_WARNING</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    Real baseFixing =</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].second-&gt;fixing(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].second-&gt;zeroInflationTermStructure()-&gt;baseDate());</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> result(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>());</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;modelType(CrossAssetModel::AssetType::INF, camIndex) == CrossAssetModel::ModelType::DK) {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        InfDkVectorised infdkv(*<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>);</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> baseFixingVec(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), baseFixing);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        QL_REQUIRE(t &lt; T || <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(t, T), <span class="stringliteral">&quot;infdkI: t (&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) &lt;= T (&quot;</span> &lt;&lt; T &lt;&lt; <span class="stringliteral">&quot;) required&quot;</span>);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        <span class="keyword">auto</span> dk = infdkv.infdkI(camIndex, t, T, state.first, state.second, isInterpolated);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        result = baseFixingVec * dk.first * (<a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> != obsDate ? dk.second : <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), 1.0));</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;modelType(CrossAssetModel::AssetType::INF, camIndex) == CrossAssetModel::ModelType::JY) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        result = <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a11171c842d01ffacc4ec522e398070a9">exp</a>(state.second);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>        <span class="keywordflow">if</span> (<a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> != obsDate) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            <span class="comment">// we need a forward cpi, TODO vectorise this computation</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> growthFactor(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>());</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            growthFactor.<a class="code hl_functionRef" href="../qle/struct_quant_ext_1_1_random_variable.html#abba907f9ff1c67082fba469156a9b30a">expand</a>();</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            <span class="keywordflow">for</span> (Size p = 0; p &lt; <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(); ++p) {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>                growthFactor.data()[p] =</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>                    <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a37304ba878095935ffcb4e582a095101">inflationGrowth</a>(*<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>, indexNo, t, T, state.first[p], state.second[p], isInterpolated);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            }</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            result *= growthFactor;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        }</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        QL_FAIL(<span class="stringliteral">&quot;GaussianCam::getInfIndexValue(): unknown model type for inflation index &quot;</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">infIndices_</a>[indexNo].first.name());</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>}</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span> </div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#aef2fa78219e2206833d4d8f63bf20a70">  499</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#aef2fa78219e2206833d4d8f63bf20a70">GaussianCam::fwdCompAvg</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> isAvg, <span class="keyword">const</span> std::string&amp; indexInput, <span class="keyword">const</span> Date&amp; obsdate,</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                                       <span class="keyword">const</span> Date&amp; start, <span class="keyword">const</span> Date&amp; end, <span class="keyword">const</span> Real spread, <span class="keyword">const</span> Real gearing,</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>                                       <span class="keyword">const</span> Integer lookback, <span class="keyword">const</span> Natural rateCutoff, <span class="keyword">const</span> Natural fixingDays,</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                                       <span class="keyword">const</span> <span class="keywordtype">bool</span> includeSpread, <span class="keyword">const</span> Real cap, <span class="keyword">const</span> Real floor,</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>                                       <span class="keyword">const</span> <span class="keywordtype">bool</span> nakedOption, <span class="keyword">const</span> <span class="keywordtype">bool</span> localCapFloor)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    calculate();</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="keyword">auto</span> ir = std::find_if(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>.begin(), <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>.end(),</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>                           [&amp;indexInput](<span class="keyword">const</span> std::pair&lt;<a class="code hl_class" href="classore_1_1data_1_1_index_info.html">IndexInfo</a>, boost::shared_ptr&lt;InterestRateIndex&gt;&gt;&amp; p) {</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>                               return p.first.name() == indexInput;</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>                           });</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    QL_REQUIRE(ir != <a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>.end(),</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>               <span class="stringliteral">&quot;ModelImpl::fwdComp() ir index &quot;</span> &lt;&lt; indexInput &lt;&lt; <span class="stringliteral">&quot; not found, this is unexpected&quot;</span>);</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    Size irIndexPos = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7062dfe3672fd24ef57614c00f39b65f">irIndexPositionInCam_</a>[std::distance(<a class="code hl_variable" href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">irIndices_</a>.begin(), ir)];</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a> lgmv(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;lgm(irIndexPos)-&gt;parametrization());</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="keyword">auto</span> on = boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(ir-&gt;second);</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    QL_REQUIRE(on, <span class="stringliteral">&quot;GaussianCam::fwdCompAvg(): expected on index for &quot;</span> &lt;&lt; indexInput);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <span class="comment">// only used to extract fixing and value dates</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <span class="keyword">auto</span> coupon = boost::make_shared&lt;QuantExt::OvernightIndexedCoupon&gt;(</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        end, 1.0, start, end, on, gearing, spread, Date(), Date(), DayCounter(), <span class="keyword">false</span>, includeSpread, lookback * Days,</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        rateCutoff, fixingDays);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="comment">// get model time and state</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    Date effobsdate = std::max(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">referenceDate</a>(), obsdate);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; modelState = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>.at(effobsdate)[irIndexPos];</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; modelTime = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;timeFromReference(effobsdate);</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="keywordflow">if</span> (isAvg) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="keywordflow">return</span> lgmv.<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html#a0f7a2ad59f8396ab1ff7efbf852df112">averagedOnRate</a>(on, coupon-&gt;fixingDates(), coupon-&gt;valueDates(), coupon-&gt;dt(), rateCutoff,</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>                                   includeSpread, spread, gearing, lookback * Days, cap, floor, localCapFloor,</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>                                   nakedOption, modelTime, modelState);</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        <span class="keywordflow">return</span> lgmv.<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html#add6ae677f50c0490bc9d72ad877b6033">compoundedOnRate</a>(on, coupon-&gt;fixingDates(), coupon-&gt;valueDates(), coupon-&gt;dt(), rateCutoff,</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>                                     includeSpread, spread, gearing, lookback * Days, cap, floor, localCapFloor,</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>                                     nakedOption, modelTime, modelState);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    }</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>}</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">  534</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">GaussianCam::getDiscount</a>(<span class="keyword">const</span> Size idx, <span class="keyword">const</span> Date&amp; s, <span class="keyword">const</span> Date&amp; t)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">getDiscount</a>(idx, s, t, Handle&lt;YieldTermStructure&gt;());</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>}</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a06c5b1b3aeaab39373a732db81bd1191">  538</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">GaussianCam::getDiscount</a>(<span class="keyword">const</span> Size idx, <span class="keyword">const</span> Date&amp; s, <span class="keyword">const</span> Date&amp; t,</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>                                        <span class="keyword">const</span> Handle&lt;YieldTermStructure&gt;&amp; targetCurve)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a> lgmv(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;lgm(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8b244cbd26ed49cbaed3a3542f5c816c">currencyPositionInCam_</a>[idx])-&gt;parametrization());</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keywordflow">return</span> lgmv.<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html#ac99ad0854013e1ff2905588ef1322bcc">discountBond</a>(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;timeFromReference(s), <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;timeFromReference(t),</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                             <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>.at(s)[idx], targetCurve);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>}</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a698c2421ff0b896c0388b6d6477cd7b6">  545</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a698c2421ff0b896c0388b6d6477cd7b6">GaussianCam::getNumeraire</a>(<span class="keyword">const</span> Date&amp; s)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a> lgmv(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;lgm(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8b244cbd26ed49cbaed3a3542f5c816c">currencyPositionInCam_</a>[0])-&gt;parametrization());</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">return</span> lgmv.<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_lgm_vectorised.html#acd02c2d3dce0c3416336f67441a99b39">numeraire</a>(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">curves_</a>.front()-&gt;timeFromReference(s), <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>.at(s)[0]);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>}</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a3430beef258b2f54144fc121011267e6">  550</a></span>Real <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a3430beef258b2f54144fc121011267e6">GaussianCam::getFxSpot</a>(<span class="keyword">const</span> Size idx)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aaf8a64586eb5db2781e2ba5c0597041f">fxSpots_</a>.at(idx)-&gt;value(); }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a32a74f796461167901dcb7df1c74cbba">  552</a></span><a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a32a74f796461167901dcb7df1c74cbba">GaussianCam::npv</a>(<span class="keyword">const</span> <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&amp; amount, <span class="keyword">const</span> Date&amp; obsdate, <span class="keyword">const</span> <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_filter.html">Filter</a>&amp; <a class="code hl_variable" href="computationgraphbuilder_8cpp.html#abd640cc39af07965a8475be310893006">filter</a>,</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>                                <span class="keyword">const</span> boost::optional&lt;long&gt;&amp; memSlot, <span class="keyword">const</span> <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&amp; addRegressor1,</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>                                <span class="keyword">const</span> <a class="code hl_structRef" href="../qle/struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&amp; addRegressor2)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    calculate();</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="comment">// short cut, if amount is deterministic and no memslot is given</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="keywordflow">if</span> (amount.<a class="code hl_functionRef" href="../qle/struct_quant_ext_1_1_random_variable.html#a6e0fdc031c26ed1d1a956019d2cee4a1">deterministic</a>() &amp;&amp; !memSlot)</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <span class="keywordflow">return</span> amount;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="comment">// if obsdate is today, take a plain expectation</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">if</span> (obsdate == <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">referenceDate</a>())</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <span class="keywordflow">return</span> <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a8c7149e5256e71f377e1810576ac6b4c">expectation</a>(amount);</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="comment">// build the state</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    std::vector&lt;const RandomVariable*&gt; state;</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span> </div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a634aaf5baa807c18ff5d15e5cd91bdd6">conditionalExpectationUseAsset_</a> &amp;&amp; !<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>.empty()) {</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; r : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>.at(obsdate))</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>            state.push_back(&amp;r);</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    }</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <span class="comment">// TODO we include zero vol ir states here, we could exclude them</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7a781df5730e7f7c6c0f658887a27005">conditionalExpectationUseIr_</a>) {</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; r : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>.at(obsdate))</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            state.push_back(&amp;r);</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    }</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="comment">// valid for both DK and JY</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aa612483092be7f58e73321add0fe18fa">conditionalExpectationUseInf_</a>) {</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; r : <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">infStates_</a>.at(obsdate)) {</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            state.push_back(&amp;r.first);</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>            state.push_back(&amp;r.second);</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>    }</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span> </div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    Size nModelStates = state.size();</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span> </div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="comment">// if memSlot is given we have to make sure the state always has the same size</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="keywordflow">if</span> (addRegressor1.<a class="code hl_functionRef" href="../qle/struct_quant_ext_1_1_random_variable.html#adaeda39d7b8cc716a40c4da65b00ba77">initialised</a>() &amp;&amp; (memSlot || !addRegressor1.<a class="code hl_functionRef" href="../qle/struct_quant_ext_1_1_random_variable.html#a6e0fdc031c26ed1d1a956019d2cee4a1">deterministic</a>()))</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        state.push_back(&amp;addRegressor1);</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <span class="keywordflow">if</span> (addRegressor2.<a class="code hl_functionRef" href="../qle/struct_quant_ext_1_1_random_variable.html#adaeda39d7b8cc716a40c4da65b00ba77">initialised</a>() &amp;&amp; (memSlot || !addRegressor2.<a class="code hl_functionRef" href="../qle/struct_quant_ext_1_1_random_variable.html#a6e0fdc031c26ed1d1a956019d2cee4a1">deterministic</a>()))</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        state.push_back(&amp;addRegressor2);</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span> </div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    Size nAddReg = state.size() - nModelStates;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <span class="comment">// if the state is empty, return the plain expectation (no conditioning)</span></div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span> </div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <span class="keywordflow">if</span> (state.empty()) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>        <span class="keywordflow">return</span> <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a8c7149e5256e71f377e1810576ac6b4c">expectation</a>(amount);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    }</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <span class="comment">// generate basis if not yet done</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span> </div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a68ea04692c785fe923960937db93e927">basisFns_</a>.find(state.size()) == <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a68ea04692c785fe923960937db93e927">basisFns_</a>.end())</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a68ea04692c785fe923960937db93e927">basisFns_</a>[state.size()] = <a class="code hl_function" href="namespaceore_1_1data.html#a0a2b3f313047ac1448c08512830e4ff1">multiPathBasisSystem</a>(state.size(), <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#acd2409cd1ff4c11fd24593d0b4338c75">regressionOrder</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#af47330752b982eb481cd9bf41e6444dc">polynomType</a>,</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                                                       std::min(<a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">size</a>(), <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">trainingSamples</a>()));</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span> </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    <span class="comment">// if a memSlot is given and coefficients are stored, we use them</span></div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span> </div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    Array coeff;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span> </div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="keywordflow">if</span> (memSlot) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9c44a3812e75d9594b98936761506d62">storedRegressionCoeff_</a>.find(*memSlot);</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9c44a3812e75d9594b98936761506d62">storedRegressionCoeff_</a>.end()) {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>            coeff = it-&gt;second.first;</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>            QL_REQUIRE(it-&gt;second.second == state.size(),</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>                       <span class="stringliteral">&quot;GaussianCam::npv(): stored regression coefficients at mem slot &quot;</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                           &lt;&lt; *memSlot &lt;&lt; <span class="stringliteral">&quot; are for state size &quot;</span> &lt;&lt; it-&gt;second.second &lt;&lt; <span class="stringliteral">&quot;, actual state size is &quot;</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                           &lt;&lt; state.size());</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        }</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    }</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span> </div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="comment">// otherwise compute coefficients and store them if a memSlot is given</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="keywordflow">if</span> (coeff.size() == 0) {</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        coeff = <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a7df53a22f26c6ca1f06b1a45635f341b">regressionCoefficients</a>(amount, state, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a68ea04692c785fe923960937db93e927">basisFns_</a>.at(state.size()), <a class="code hl_variable" href="computationgraphbuilder_8cpp.html#abd640cc39af07965a8475be310893006">filter</a>,</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>                                       RandomVariableRegressionMethod::QR);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;GaussianCam::npv(&quot;</span> &lt;&lt; <a class="code hl_function" href="namespaceore_1_1data.html#a86651dfeb5c18ee891f7a4734d8cf455">ore::data::to_string</a>(obsdate) &lt;&lt; <span class="stringliteral">&quot;): regression coefficients are &quot;</span> &lt;&lt; coeff</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>                                 &lt;&lt; <span class="stringliteral">&quot; (got model state size &quot;</span> &lt;&lt; nModelStates &lt;&lt; <span class="stringliteral">&quot; and &quot;</span> &lt;&lt; nAddReg</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>                                 &lt;&lt; <span class="stringliteral">&quot; additional regressors)&quot;</span>);</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        <span class="keywordflow">if</span> (memSlot) {</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>            <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9c44a3812e75d9594b98936761506d62">storedRegressionCoeff_</a>[*memSlot] = std::make_pair(coeff, state.size());</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        }</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    }</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <span class="comment">// compute conditional expectation and return the result</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordflow">return</span> <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#aa20ffa6fc84566f721a455a1bb72502b">conditionalExpectation</a>(state, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a68ea04692c785fe923960937db93e927">basisFns_</a>.at(state.size()), coeff);</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>}</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span> </div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#adf22662f450d61eb77d17f2ea7f4376d">  646</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#adf22662f450d61eb77d17f2ea7f4376d">GaussianCam::toggleTrainingPaths</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    std::swap(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">underlyingPaths_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a5e67018fb05525c8b8a040d102e98564">underlyingPathsTraining_</a>);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    std::swap(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">irStates_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ab53b008b44304b9be78ec92b1449eb43">irStatesTraining_</a>);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    std::swap(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">infStates_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a6177708ca5ed4a0563ffa6d15b803a88">infStatesTraining_</a>);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aec271be46c547c89cd27b4d9c811a37d">inTrainingPhase_</a> = !<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#aec271be46c547c89cd27b4d9c811a37d">inTrainingPhase_</a>;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a343681da14ddb8f9e59360718bcf1958">irIndexValueCache_</a>.clear();</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>}</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span> </div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">  654</a></span>Size <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">GaussianCam::trainingSamples</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">mcParams_</a>.<a class="code hl_variable" href="structore_1_1data_1_1_model_1_1_mc_params.html#a150e9051900157f9eeb47db76a408ba8">trainingSamples</a>; }</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span> </div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno"><a class="line" href="classore_1_1data_1_1_gaussian_cam.html#a8efab74dfc02a7711b89ffcb6d89f6de">  656</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classore_1_1data_1_1_gaussian_cam.html#a8efab74dfc02a7711b89ffcb6d89f6de">GaussianCam::injectPaths</a>(<span class="keyword">const</span> std::vector&lt;QuantLib::Real&gt;* pathTimes,</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>                              <span class="keyword">const</span> std::vector&lt;std::vector&lt;QuantExt::RandomVariable&gt;&gt;* paths,</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                              <span class="keyword">const</span> std::vector&lt;bool&gt;* isRelevantTime, <span class="keyword">const</span> <span class="keywordtype">bool</span> stickyCloseOutRun) {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <span class="keywordflow">if</span> (pathTimes == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        <span class="comment">// reset injected path data</span></div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a4b2dcdb3795029128763ed81125d6d8e">injectedPaths_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ae0c91f0b07093ee765f599d03638171a">injectedPathIsRelevantTime_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a048c85b684fd270461a6094c86b1859c">injectedPathStickyCloseOutRun_</a> = <span class="keyword">false</span>; <span class="comment">// arbitrary</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    }</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span> </div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    QL_REQUIRE(!pathTimes-&gt;empty(), <span class="stringliteral">&quot;GaussianCam::injectPaths(): injected path times empty&quot;</span>);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span> </div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    QL_REQUIRE(pathTimes-&gt;size() == paths-&gt;size(), <span class="stringliteral">&quot;GaussianCam::injectPaths(): path times (&quot;</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>                                                       &lt;&lt; pathTimes-&gt;size() &lt;&lt; <span class="stringliteral">&quot;) must match path size (&quot;</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>                                                       &lt;&lt; paths-&gt;size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span> </div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    QL_REQUIRE(pathTimes-&gt;size() == isRelevantTime-&gt;size(),</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>               <span class="stringliteral">&quot;GaussianCam::injectPaths(): path times (&quot;</span> &lt;&lt; pathTimes-&gt;size() &lt;&lt; <span class="stringliteral">&quot;) must match isRelevanTime size (&quot;</span></div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                                                          &lt;&lt; isRelevantTime-&gt;size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span> </div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    QL_REQUIRE(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ac1f186ffe8b2932683c6f54969aa2f58">projectedStateProcessIndices_</a>.size() == <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;dimension(),</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>               <span class="stringliteral">&quot;GaussianCam::injectPaths(): number of projected state process indices (&quot;</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>                   &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ac1f186ffe8b2932683c6f54969aa2f58">projectedStateProcessIndices_</a>.size() &lt;&lt; <span class="stringliteral">&quot;) must match model dimension (&quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">cam_</a>-&gt;dimension());</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span> </div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    Size maxProjectedStateProcessIndex =</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        *std::max_element(<a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ac1f186ffe8b2932683c6f54969aa2f58">projectedStateProcessIndices_</a>.begin(), <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ac1f186ffe8b2932683c6f54969aa2f58">projectedStateProcessIndices_</a>.end());</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span> </div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; v : *paths) {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        QL_REQUIRE(v.size() &gt; maxProjectedStateProcessIndex, <span class="stringliteral">&quot;GaussianCam::injectPaths(): dimension of variates (&quot;</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>                                                                 &lt;&lt; v.size()</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>                                                                 &lt;&lt; <span class="stringliteral">&quot;) must cover max projected state process index (&quot;</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                                                                 &lt;&lt; maxProjectedStateProcessIndex &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a4b10372529e618784504b78a934f0a3e">overwriteModelSize_</a> = v.front().size();</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">injectedPathTimes_</a> = pathTimes;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a4b2dcdb3795029128763ed81125d6d8e">injectedPaths_</a> = paths;</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#ae0c91f0b07093ee765f599d03638171a">injectedPathIsRelevantTime_</a> = isRelevantTime;</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <a class="code hl_variable" href="classore_1_1data_1_1_gaussian_cam.html#a048c85b684fd270461a6094c86b1859c">injectedPathStickyCloseOutRun_</a> = stickyCloseOutRun;</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    update();</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>}</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span> </div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>} <span class="comment">// namespace data</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>} <span class="comment">// namespace ore</span></div>
<div class="ttc" id="aaverageonindexedcoupon_8hpp_html"><div class="ttname"><a href="../qle/averageonindexedcoupon_8hpp.html">averageonindexedcoupon.hpp</a></div></div>
<div class="ttc" id="aaverageonindexedcouponpricer_8hpp_html"><div class="ttname"><a href="../qle/averageonindexedcouponpricer_8hpp.html">averageonindexedcouponpricer.hpp</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm_vectorised.html">QuantExt::LgmVectorised</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_a0f7a2ad59f8396ab1ff7efbf852df112"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm_vectorised.html#a0f7a2ad59f8396ab1ff7efbf852df112">QuantExt::LgmVectorised::averagedOnRate</a></div><div class="ttdeci">RandomVariable averagedOnRate(const boost::shared_ptr&lt; OvernightIndex &gt; &amp;index, const std::vector&lt; Date &gt; &amp;fixingDates, const std::vector&lt; Date &gt; &amp;valueDates, const std::vector&lt; Real &gt; &amp;dt, const Natural rateCutoff, const bool includeSpread, const Real spread, const Real gearing, const Period lookback, const DayCounter &amp;accrualDayCounter, const Real cap, const Real floor, const bool localCapFloor, const bool nakedOption, const Time t, const RandomVariable &amp;x) const</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_a671bc1fefafaf56ae7028084cec2ac5c"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm_vectorised.html#a671bc1fefafaf56ae7028084cec2ac5c">QuantExt::LgmVectorised::fixing</a></div><div class="ttdeci">RandomVariable fixing(const boost::shared_ptr&lt; InterestRateIndex &gt; &amp;index, const Date &amp;fixingDate, const Time t, const RandomVariable &amp;x) const</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_ac99ad0854013e1ff2905588ef1322bcc"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm_vectorised.html#ac99ad0854013e1ff2905588ef1322bcc">QuantExt::LgmVectorised::discountBond</a></div><div class="ttdeci">RandomVariable discountBond(const Time t, const Time T, const RandomVariable &amp;x, Handle&lt; YieldTermStructure &gt; discountCurve=Handle&lt; YieldTermStructure &gt;()) const</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_acd02c2d3dce0c3416336f67441a99b39"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm_vectorised.html#acd02c2d3dce0c3416336f67441a99b39">QuantExt::LgmVectorised::numeraire</a></div><div class="ttdeci">RandomVariable numeraire(const Time t, const RandomVariable &amp;x, const Handle&lt; YieldTermStructure &gt; discountCurve=Handle&lt; YieldTermStructure &gt;()) const</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_add6ae677f50c0490bc9d72ad877b6033"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm_vectorised.html#add6ae677f50c0490bc9d72ad877b6033">QuantExt::LgmVectorised::compoundedOnRate</a></div><div class="ttdeci">RandomVariable compoundedOnRate(const boost::shared_ptr&lt; OvernightIndex &gt; &amp;index, const std::vector&lt; Date &gt; &amp;fixingDates, const std::vector&lt; Date &gt; &amp;valueDates, const std::vector&lt; Real &gt; &amp;dt, const Natural rateCutoff, const bool includeSpread, const Real spread, const Real gearing, const Period lookback, const DayCounter &amp;accrualDayCounter, const Real cap, const Real floor, const bool localCapFloor, const bool nakedOption, const Time t, const RandomVariable &amp;x) const</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_linear_flat_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_linear_flat.html">QuantExt::LinearFlat</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_linear_flat_html_aeebdaea19fcf47f8c30382a178283141"><div class="ttname"><a href="../qle/class_quant_ext_1_1_linear_flat.html#aeebdaea19fcf47f8c30382a178283141">QuantExt::LinearFlat::interpolate</a></div><div class="ttdeci">Interpolation interpolate(const I1 &amp;xBegin, const I1 &amp;xEnd, const I2 &amp;yBegin) const</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a048c85b684fd270461a6094c86b1859c"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a048c85b684fd270461a6094c86b1859c">ore::data::GaussianCam::injectedPathStickyCloseOutRun_</a></div><div class="ttdeci">bool injectedPathStickyCloseOutRun_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00144">gaussiancam.hpp:144</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a0e7b4b054beda325e75ce61b56405d20"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a0e7b4b054beda325e75ce61b56405d20">ore::data::GaussianCam::getInfIndexValue</a></div><div class="ttdeci">RandomVariable getInfIndexValue(const Size indexNo, const Date &amp;d, const Date &amp;fwd=Null&lt; Date &gt;()) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00457">gaussiancam.cpp:457</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a1127cccc9668a02247dc139d27121708"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a1127cccc9668a02247dc139d27121708">ore::data::GaussianCam::performCalculations</a></div><div class="ttdeci">void performCalculations() const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00119">gaussiancam.cpp:119</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a15aa444a844bc8f8670058816b9dcc0c"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a15aa444a844bc8f8670058816b9dcc0c">ore::data::GaussianCam::releaseMemory</a></div><div class="ttdeci">void releaseMemory() override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00102">gaussiancam.cpp:102</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a18b519ebaacdf827b592dd67a7873e8c"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a18b519ebaacdf827b592dd67a7873e8c">ore::data::GaussianCam::infStates_</a></div><div class="ttdeci">std::map&lt; Date, std::vector&lt; std::pair&lt; RandomVariable, RandomVariable &gt; &gt; &gt; infStates_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00120">gaussiancam.hpp:120</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a22f414d57ba9b94e5696ae6fb61352a2"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a22f414d57ba9b94e5696ae6fb61352a2">ore::data::GaussianCam::size</a></div><div class="ttdeci">Size size() const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00091">gaussiancam.cpp:91</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a272074ef35e7d2356ff92b3b1fae4f0b"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a272074ef35e7d2356ff92b3b1fae4f0b">ore::data::GaussianCam::infIndexPositionInCam_</a></div><div class="ttdeci">std::vector&lt; Size &gt; infIndexPositionInCam_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00130">gaussiancam.hpp:130</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a31ea941e2c5742d1de925abc758a422e"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a31ea941e2c5742d1de925abc758a422e">ore::data::GaussianCam::getIrIndexValue</a></div><div class="ttdeci">RandomVariable getIrIndexValue(const Size indexNo, const Date &amp;d, const Date &amp;fwd=Null&lt; Date &gt;()) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00438">gaussiancam.cpp:438</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a32a74f796461167901dcb7df1c74cbba"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a32a74f796461167901dcb7df1c74cbba">ore::data::GaussianCam::npv</a></div><div class="ttdeci">RandomVariable npv(const RandomVariable &amp;amount, const Date &amp;obsdate, const Filter &amp;filter, const boost::optional&lt; long &gt; &amp;memSlot, const RandomVariable &amp;addRegressor1, const RandomVariable &amp;addRegressor2) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00552">gaussiancam.cpp:552</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a3430beef258b2f54144fc121011267e6"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a3430beef258b2f54144fc121011267e6">ore::data::GaussianCam::getFxSpot</a></div><div class="ttdeci">Real getFxSpot(const Size idx) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00550">gaussiancam.cpp:550</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a343681da14ddb8f9e59360718bcf1958"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a343681da14ddb8f9e59360718bcf1958">ore::data::GaussianCam::irIndexValueCache_</a></div><div class="ttdeci">std::map&lt; std::tuple&lt; Size, Date, Date &gt;, RandomVariable &gt; irIndexValueCache_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00138">gaussiancam.hpp:138</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a39bd77d3e567892ab7cf350da8d09dad"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a39bd77d3e567892ab7cf350da8d09dad">ore::data::GaussianCam::infIndexPositionInProcess_</a></div><div class="ttdeci">std::vector&lt; Size &gt; infIndexPositionInProcess_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00127">gaussiancam.hpp:127</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a3e22290961d6b56dce069c1c4fda6386"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a3e22290961d6b56dce069c1c4fda6386">ore::data::GaussianCam::referenceDate_</a></div><div class="ttdeci">Date referenceDate_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00113">gaussiancam.hpp:113</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a413e2230491b27cddd759bcde9bb6d74"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a413e2230491b27cddd759bcde9bb6d74">ore::data::GaussianCam::indexPositionInProcess_</a></div><div class="ttdeci">std::vector&lt; Size &gt; indexPositionInProcess_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00126">gaussiancam.hpp:126</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a4337a36a572127722e5fb875b79f6ea1"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a4337a36a572127722e5fb875b79f6ea1">ore::data::GaussianCam::populatePathValues</a></div><div class="ttdeci">void populatePathValues(const Size nSamples, std::map&lt; Date, std::vector&lt; RandomVariable &gt; &gt; &amp;paths, std::map&lt; Date, std::vector&lt; RandomVariable &gt; &gt; &amp;irStates, std::map&lt; Date, std::vector&lt; std::pair&lt; RandomVariable, RandomVariable &gt; &gt; &gt; &amp;infStates, const std::vector&lt; Real &gt; &amp;times, const bool isTraining) const</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00222">gaussiancam.cpp:222</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a444aa2c3317c8e7cf74e4f0fd797a701"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a444aa2c3317c8e7cf74e4f0fd797a701">ore::data::GaussianCam::eqIndexInCam_</a></div><div class="ttdeci">std::vector&lt; Size &gt; eqIndexInCam_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00132">gaussiancam.hpp:132</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a4b10372529e618784504b78a934f0a3e"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a4b10372529e618784504b78a934f0a3e">ore::data::GaussianCam::overwriteModelSize_</a></div><div class="ttdeci">Size overwriteModelSize_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00145">gaussiancam.hpp:145</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a4b2dcdb3795029128763ed81125d6d8e"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a4b2dcdb3795029128763ed81125d6d8e">ore::data::GaussianCam::injectedPaths_</a></div><div class="ttdeci">const std::vector&lt; std::vector&lt; QuantExt::RandomVariable &gt; &gt; * injectedPaths_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00142">gaussiancam.hpp:142</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a58d5b10b5bfb05a3a2ad8cd7f0de8b76"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a58d5b10b5bfb05a3a2ad8cd7f0de8b76">ore::data::GaussianCam::injectedPathTimes_</a></div><div class="ttdeci">const std::vector&lt; QuantLib::Real &gt; * injectedPathTimes_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00141">gaussiancam.hpp:141</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a5ce8b0af276b7c06ab424e688ae2d318"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a5ce8b0af276b7c06ab424e688ae2d318">ore::data::GaussianCam::referenceDate</a></div><div class="ttdeci">const Date &amp; referenceDate() const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00114">gaussiancam.cpp:114</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a5e67018fb05525c8b8a040d102e98564"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a5e67018fb05525c8b8a040d102e98564">ore::data::GaussianCam::underlyingPathsTraining_</a></div><div class="ttdeci">std::map&lt; Date, std::vector&lt; RandomVariable &gt; &gt; underlyingPathsTraining_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00121">gaussiancam.hpp:121</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a6177708ca5ed4a0563ffa6d15b803a88"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a6177708ca5ed4a0563ffa6d15b803a88">ore::data::GaussianCam::infStatesTraining_</a></div><div class="ttdeci">std::map&lt; Date, std::vector&lt; std::pair&lt; RandomVariable, RandomVariable &gt; &gt; &gt; infStatesTraining_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00124">gaussiancam.hpp:124</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a634aaf5baa807c18ff5d15e5cd91bdd6"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a634aaf5baa807c18ff5d15e5cd91bdd6">ore::data::GaussianCam::conditionalExpectationUseAsset_</a></div><div class="ttdeci">bool conditionalExpectationUseAsset_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00135">gaussiancam.hpp:135</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a6577772acc146eb3eb208257cbf50529"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a6577772acc146eb3eb208257cbf50529">ore::data::GaussianCam::currencyPositionInProcess_</a></div><div class="ttdeci">std::vector&lt; Size &gt; currencyPositionInProcess_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00128">gaussiancam.hpp:128</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a68ea04692c785fe923960937db93e927"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a68ea04692c785fe923960937db93e927">ore::data::GaussianCam::basisFns_</a></div><div class="ttdeci">map&lt; Size, std::vector&lt; std::function&lt; RandomVariable(const std::vector&lt; const RandomVariable * &gt; &amp;)&gt; &gt; &gt; basisFns_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00112">gaussiancam.hpp:112</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a698c2421ff0b896c0388b6d6477cd7b6"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a698c2421ff0b896c0388b6d6477cd7b6">ore::data::GaussianCam::getNumeraire</a></div><div class="ttdeci">RandomVariable getNumeraire(const Date &amp;s) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00545">gaussiancam.cpp:545</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a7062dfe3672fd24ef57614c00f39b65f"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a7062dfe3672fd24ef57614c00f39b65f">ore::data::GaussianCam::irIndexPositionInCam_</a></div><div class="ttdeci">std::vector&lt; Size &gt; irIndexPositionInCam_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00129">gaussiancam.hpp:129</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a7681fcd6d75035e16931f946f1b84fbc"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a7681fcd6d75035e16931f946f1b84fbc">ore::data::GaussianCam::mcParams_</a></div><div class="ttdeci">const McParams mcParams_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00107">gaussiancam.hpp:107</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a7a781df5730e7f7c6c0f658887a27005"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a7a781df5730e7f7c6c0f658887a27005">ore::data::GaussianCam::conditionalExpectationUseIr_</a></div><div class="ttdeci">bool conditionalExpectationUseIr_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00133">gaussiancam.hpp:133</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a8b244cbd26ed49cbaed3a3542f5c816c"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a8b244cbd26ed49cbaed3a3542f5c816c">ore::data::GaussianCam::currencyPositionInCam_</a></div><div class="ttdeci">std::vector&lt; Size &gt; currencyPositionInCam_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00131">gaussiancam.hpp:131</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a8c8034e67c16d12a55c58843bb7681e5"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a8c8034e67c16d12a55c58843bb7681e5">ore::data::GaussianCam::cam_</a></div><div class="ttdeci">const Handle&lt; CrossAssetModel &gt; cam_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00104">gaussiancam.hpp:104</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a8d84524f3d537eadc02dbca5ec4826f5"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a8d84524f3d537eadc02dbca5ec4826f5">ore::data::GaussianCam::underlyingPaths_</a></div><div class="ttdeci">std::map&lt; Date, std::vector&lt; RandomVariable &gt; &gt; underlyingPaths_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00117">gaussiancam.hpp:117</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a8efab74dfc02a7711b89ffcb6d89f6de"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a8efab74dfc02a7711b89ffcb6d89f6de">ore::data::GaussianCam::injectPaths</a></div><div class="ttdeci">void injectPaths(const std::vector&lt; QuantLib::Real &gt; *pathTimes, const std::vector&lt; std::vector&lt; QuantExt::RandomVariable &gt; &gt; *paths, const std::vector&lt; bool &gt; *isRelevantTime, const bool stickyCloseOutRun) override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00656">gaussiancam.cpp:656</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a9356ce4490b329fbfbad73fa28841898"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a9356ce4490b329fbfbad73fa28841898">ore::data::GaussianCam::effectiveSimulationDates_</a></div><div class="ttdeci">std::set&lt; Date &gt; effectiveSimulationDates_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00114">gaussiancam.hpp:114</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a9a7b1183c60755cf23c14a9878f1edd0"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a9a7b1183c60755cf23c14a9878f1edd0">ore::data::GaussianCam::irStates_</a></div><div class="ttdeci">std::map&lt; Date, std::vector&lt; RandomVariable &gt; &gt; irStates_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00118">gaussiancam.hpp:118</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_a9c44a3812e75d9594b98936761506d62"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#a9c44a3812e75d9594b98936761506d62">ore::data::GaussianCam::storedRegressionCoeff_</a></div><div class="ttdeci">std::map&lt; long, std::pair&lt; Array, Size &gt; &gt; storedRegressionCoeff_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00148">gaussiancam.hpp:148</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_aa612483092be7f58e73321add0fe18fa"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#aa612483092be7f58e73321add0fe18fa">ore::data::GaussianCam::conditionalExpectationUseInf_</a></div><div class="ttdeci">bool conditionalExpectationUseInf_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00134">gaussiancam.hpp:134</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_aaf8a64586eb5db2781e2ba5c0597041f"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#aaf8a64586eb5db2781e2ba5c0597041f">ore::data::GaussianCam::fxSpots_</a></div><div class="ttdeci">const std::vector&lt; Handle&lt; Quote &gt; &gt; fxSpots_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00106">gaussiancam.hpp:106</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ab53b008b44304b9be78ec92b1449eb43"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ab53b008b44304b9be78ec92b1449eb43">ore::data::GaussianCam::irStatesTraining_</a></div><div class="ttdeci">std::map&lt; Date, std::vector&lt; RandomVariable &gt; &gt; irStatesTraining_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00122">gaussiancam.hpp:122</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_abb84774b08d6924094481e3ed5821a8d"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#abb84774b08d6924094481e3ed5821a8d">ore::data::GaussianCam::getDiscount</a></div><div class="ttdeci">RandomVariable getDiscount(const Size idx, const Date &amp;s, const Date &amp;t) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00534">gaussiancam.cpp:534</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ac1f186ffe8b2932683c6f54969aa2f58"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ac1f186ffe8b2932683c6f54969aa2f58">ore::data::GaussianCam::projectedStateProcessIndices_</a></div><div class="ttdeci">const std::vector&lt; Size &gt; projectedStateProcessIndices_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00109">gaussiancam.hpp:109</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ac2531b45af9259f8b3af891fac9f5d03"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ac2531b45af9259f8b3af891fac9f5d03">ore::data::GaussianCam::getIndexValue</a></div><div class="ttdeci">RandomVariable getIndexValue(const Size indexNo, const Date &amp;d, const Date &amp;fwd=Null&lt; Date &gt;()) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00415">gaussiancam.cpp:415</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ac41c73ef8085aa5b72bf6009f56011ff"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ac41c73ef8085aa5b72bf6009f56011ff">ore::data::GaussianCam::trainingSamples</a></div><div class="ttdeci">Size trainingSamples() const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00654">gaussiancam.cpp:654</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ad48a455c1a5496f2a02cd0640356b86b"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ad48a455c1a5496f2a02cd0640356b86b">ore::data::GaussianCam::resetNPVMem</a></div><div class="ttdeci">void resetNPVMem() override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00112">gaussiancam.cpp:112</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ad58dc5329a35fa64347940b5f1221fab"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ad58dc5329a35fa64347940b5f1221fab">ore::data::GaussianCam::timeStepsPerYear_</a></div><div class="ttdeci">const Size timeStepsPerYear_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00108">gaussiancam.hpp:108</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_adda5ae6c670bdbb1857509a4aa20ec25"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#adda5ae6c670bdbb1857509a4aa20ec25">ore::data::GaussianCam::timeGrid_</a></div><div class="ttdeci">TimeGrid timeGrid_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00115">gaussiancam.hpp:115</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ade7962af7fbf40817ae3bb69ffb0d602"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ade7962af7fbf40817ae3bb69ffb0d602">ore::data::GaussianCam::GaussianCam</a></div><div class="ttdeci">GaussianCam(const Handle&lt; CrossAssetModel &gt; &amp;cam, const Size paths, const std::vector&lt; std::string &gt; &amp;currencies, const std::vector&lt; Handle&lt; YieldTermStructure &gt; &gt; &amp;curves, const std::vector&lt; Handle&lt; Quote &gt; &gt; &amp;fxSpots, const std::vector&lt; std::pair&lt; std::string, boost::shared_ptr&lt; InterestRateIndex &gt; &gt; &gt; &amp;irIndices, const std::vector&lt; std::pair&lt; std::string, boost::shared_ptr&lt; ZeroInflationIndex &gt; &gt; &gt; &amp;infIndices, const std::vector&lt; std::string &gt; &amp;indices, const std::vector&lt; std::string &gt; &amp;indexCurrencies, const std::set&lt; Date &gt; &amp;simulationDates, const McParams &amp;mcParams, const Size timeStepsPerYear=1, const IborFallbackConfig &amp;iborFallbackConfig=IborFallbackConfig::defaultConfig(), const std::vector&lt; Size &gt; &amp;projectedStateProcessIndices={}, const std::vector&lt; std::string &gt; &amp;conditionalExpectationModelStates={})</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00047">gaussiancam.cpp:47</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_adf22662f450d61eb77d17f2ea7f4376d"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#adf22662f450d61eb77d17f2ea7f4376d">ore::data::GaussianCam::toggleTrainingPaths</a></div><div class="ttdeci">void toggleTrainingPaths() const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00646">gaussiancam.cpp:646</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_ae0c91f0b07093ee765f599d03638171a"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#ae0c91f0b07093ee765f599d03638171a">ore::data::GaussianCam::injectedPathIsRelevantTime_</a></div><div class="ttdeci">const std::vector&lt; bool &gt; * injectedPathIsRelevantTime_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00143">gaussiancam.hpp:143</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_aec271be46c547c89cd27b4d9c811a37d"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#aec271be46c547c89cd27b4d9c811a37d">ore::data::GaussianCam::inTrainingPhase_</a></div><div class="ttdeci">bool inTrainingPhase_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00125">gaussiancam.hpp:125</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_aef2fa78219e2206833d4d8f63bf20a70"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#aef2fa78219e2206833d4d8f63bf20a70">ore::data::GaussianCam::fwdCompAvg</a></div><div class="ttdeci">RandomVariable fwdCompAvg(const bool isAvg, const std::string &amp;index, const Date &amp;obsdate, const Date &amp;start, const Date &amp;end, const Real spread, const Real gearing, const Integer lookback, const Natural rateCutoff, const Natural fixingDays, const bool includeSpread, const Real cap, const Real floor, const bool nakedOption, const bool localCapFloor) const override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2scripting_2models_2gaussiancam_8cpp_source.html#l00499">gaussiancam.cpp:499</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_af9092b7d1618dd9a9092dc9dae37ea75"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#af9092b7d1618dd9a9092dc9dae37ea75">ore::data::GaussianCam::curves_</a></div><div class="ttdeci">const std::vector&lt; Handle&lt; YieldTermStructure &gt; &gt; curves_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00105">gaussiancam.hpp:105</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_gaussian_cam_html_af9be63a7f055dbb0ed0fc95090d92e87"><div class="ttname"><a href="classore_1_1data_1_1_gaussian_cam.html#af9be63a7f055dbb0ed0fc95090d92e87">ore::data::GaussianCam::positionInTimeGrid_</a></div><div class="ttdeci">std::vector&lt; Size &gt; positionInTimeGrid_</div><div class="ttdef"><b>Definition:</b> <a href="gaussiancam_8hpp_source.html#l00116">gaussiancam.hpp:116</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_ibor_fallback_config_html"><div class="ttname"><a href="classore_1_1data_1_1_ibor_fallback_config.html">ore::data::IborFallbackConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="iborfallbackconfig_8hpp_source.html#l00031">iborfallbackconfig.hpp:31</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_index_info_html"><div class="ttname"><a href="classore_1_1data_1_1_index_info.html">ore::data::IndexInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="scripting_2utilities_8hpp_source.html#l00093">utilities.hpp:93</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_html_a9edcd102946c4e3bd0bcdba2fc64e397"><div class="ttname"><a href="classore_1_1data_1_1_model.html#a9edcd102946c4e3bd0bcdba2fc64e397">ore::data::Model::size</a></div><div class="ttdeci">virtual Size size() const</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00069">model.hpp:69</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html">ore::data::ModelImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00044">modelimpl.hpp:44</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html_a0e02d6070bafb36ab736bf5cbb4e70ce"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html#a0e02d6070bafb36ab736bf5cbb4e70ce">ore::data::ModelImpl::irIndices_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; IndexInfo, boost::shared_ptr&lt; InterestRateIndex &gt; &gt; &gt; irIndices_</div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00112">modelimpl.hpp:112</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html_a14efd0665cded9d6785314f26306e91b"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html#a14efd0665cded9d6785314f26306e91b">ore::data::ModelImpl::currencies_</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; currencies_</div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00107">modelimpl.hpp:107</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html_a7033255d9f10aca8436bdf488964db70"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html#a7033255d9f10aca8436bdf488964db70">ore::data::ModelImpl::indices_</a></div><div class="ttdeci">std::vector&lt; IndexInfo &gt; indices_</div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00114">modelimpl.hpp:114</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html_ad2f62229897fdae7a8e793ee62e3d00c"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html#ad2f62229897fdae7a8e793ee62e3d00c">ore::data::ModelImpl::indexCurrencies_</a></div><div class="ttdeci">const std::vector&lt; std::string &gt; indexCurrencies_</div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00108">modelimpl.hpp:108</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html_ae637d21787eeb964d8df83a05eee7b04"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html#ae637d21787eeb964d8df83a05eee7b04">ore::data::ModelImpl::simulationDates_</a></div><div class="ttdeci">const std::set&lt; Date &gt; simulationDates_</div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00109">modelimpl.hpp:109</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_impl_html_aebe584e14684cee39eecccd086ba1588"><div class="ttname"><a href="classore_1_1data_1_1_model_impl.html#aebe584e14684cee39eecccd086ba1588">ore::data::ModelImpl::infIndices_</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; IndexInfo, boost::shared_ptr&lt; ZeroInflationIndex &gt; &gt; &gt; infIndices_</div><div class="ttdef"><b>Definition:</b> <a href="modelimpl_8hpp_source.html#l00113">modelimpl.hpp:113</a></div></div>
<div class="ttc" id="acomputationgraphbuilder_8cpp_html_abd640cc39af07965a8475be310893006"><div class="ttname"><a href="computationgraphbuilder_8cpp.html#abd640cc39af07965a8475be310893006">filter</a></div><div class="ttdeci">SafeStack&lt; Filter &gt; filter</div><div class="ttdef"><b>Definition:</b> <a href="computationgraphbuilder_8cpp_source.html#l01474">computationgraphbuilder.cpp:1474</a></div></div>
<div class="ttc" id="acrossassetmodel_8hpp_html"><div class="ttname"><a href="../qle/crossassetmodel_8hpp.html">crossassetmodel.hpp</a></div></div>
<div class="ttc" id="aflatextrapolation_8hpp_html"><div class="ttname"><a href="../qle/flatextrapolation_8hpp.html">flatextrapolation.hpp</a></div></div>
<div class="ttc" id="agaussiancam_8hpp_html"><div class="ttname"><a href="gaussiancam_8hpp.html">gaussiancam.hpp</a></div><div class="ttdoc">gaussian cross asset model for ir, fx, eq, com</div></div>
<div class="ttc" id="agroup__utilities_html_ga6e9e781a58e78200301c76161589fc7b"><div class="ttname"><a href="group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">ore::data::parseCurrency</a></div><div class="ttdeci">Currency parseCurrency(const string &amp;s)</div><div class="ttdoc">Convert text to QuantLib::Currency.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l00287">parsers.cpp:287</a></div></div>
<div class="ttc" id="aindexparser_8hpp_html"><div class="ttname"><a href="indexparser_8hpp.html">indexparser.hpp</a></div><div class="ttdoc">Map text representations to QuantLib/QuantExt types.</div></div>
<div class="ttc" id="ajyimpliedzeroinflationtermstructure_8hpp_html"><div class="ttname"><a href="../qle/jyimpliedzeroinflationtermstructure_8hpp.html">jyimpliedzeroinflationtermstructure.hpp</a></div></div>
<div class="ttc" id="algmvectorised_8hpp_html"><div class="ttname"><a href="../qle/lgmvectorised_8hpp.html">lgmvectorised.hpp</a></div></div>
<div class="ttc" id="alog_8hpp_html"><div class="ttname"><a href="log_8hpp.html">log.hpp</a></div><div class="ttdoc">Classes and functions for log message handling.</div></div>
<div class="ttc" id="alog_8hpp_html_a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b"><div class="ttname"><a href="log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a></div><div class="ttdeci">@ data</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00077">log.hpp:77</a></div></div>
<div class="ttc" id="alog_8hpp_html_a34c7c8cde9b91d2eee82d7b9a0b66fd5"><div class="ttname"><a href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a></div><div class="ttdeci">#define DLOG(text)</div><div class="ttdoc">Logging Macro (Level = Debug)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00508">log.hpp:508</a></div></div>
<div class="ttc" id="amultipathvariategenerator_8hpp_html"><div class="ttname"><a href="../qle/multipathvariategenerator_8hpp.html">multipathvariategenerator.hpp</a></div></div>
<div class="ttc" id="anamespace_quant_ext_1_1_zero_inflation_html_a57de786c1c8988b6da9d354282b4b370"><div class="ttname"><a href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a></div><div class="ttdeci">QuantLib::Date fixingDate(const QuantLib::Date &amp;d, const QuantLib::Period obsLag, const QuantLib::Frequency freq, bool interpolated)</div></div>
<div class="ttc" id="anamespace_quant_ext_html"><div class="ttname"><a href="namespace_quant_ext.html">QuantExt</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_a11171c842d01ffacc4ec522e398070a9"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a11171c842d01ffacc4ec522e398070a9">QuantExt::exp</a></div><div class="ttdeci">RandomVariable exp(RandomVariable x)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a1cab4fb6a720eff245acb9f3a7a9e7c5"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">QuantExt::close_enough</a></div><div class="ttdeci">Filter close_enough(const RandomVariable &amp;x, const RandomVariable &amp;y)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a293bf46c308777c99d96b720845b4887"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a293bf46c308777c99d96b720845b4887">QuantExt::makeMultiPathGenerator</a></div><div class="ttdeci">boost::shared_ptr&lt; MultiPathGeneratorBase &gt; makeMultiPathGenerator(const SequenceType s, const boost::shared_ptr&lt; StochasticProcess &gt; &amp;process, const TimeGrid &amp;timeGrid, const BigNatural seed, const SobolBrownianGenerator::Ordering ordering=SobolBrownianGenerator::Steps, const SobolRsg::DirectionIntegers directionIntegers=SobolRsg::JoeKuoD7)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a37304ba878095935ffcb4e582a095101"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a37304ba878095935ffcb4e582a095101">QuantExt::inflationGrowth</a></div><div class="ttdeci">Real inflationGrowth(const boost::shared_ptr&lt; CrossAssetModel &gt; &amp;model, Size index, Time S, Time T, Real irState, Real rrState, bool indexIsInterpolated)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a7df53a22f26c6ca1f06b1a45635f341b"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a7df53a22f26c6ca1f06b1a45635f341b">QuantExt::regressionCoefficients</a></div><div class="ttdeci">Array regressionCoefficients(RandomVariable r, const std::vector&lt; const RandomVariable * &gt; &amp;regressor, const std::vector&lt; std::function&lt; RandomVariable(const std::vector&lt; const RandomVariable * &gt; &amp;)&gt; &gt; &amp;basisFn, const Filter &amp;filter)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a7f86fab2a811580eabbe8805ae8df78a"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a7f86fab2a811580eabbe8805ae8df78a">QuantExt::makeMultiPathVariateGenerator</a></div><div class="ttdeci">boost::shared_ptr&lt; MultiPathVariateGeneratorBase &gt; makeMultiPathVariateGenerator(const SequenceType s, const Size dimension, const TimeGrid &amp;timeGrid, const BigNatural seed, const SobolBrownianGenerator::Ordering ordering, const SobolRsg::DirectionIntegers directionIntegers)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a8c7149e5256e71f377e1810576ac6b4c"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a8c7149e5256e71f377e1810576ac6b4c">QuantExt::expectation</a></div><div class="ttdeci">RandomVariable expectation(const RandomVariable &amp;r)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_aa20ffa6fc84566f721a455a1bb72502b"><div class="ttname"><a href="../qle/namespace_quant_ext.html#aa20ffa6fc84566f721a455a1bb72502b">QuantExt::conditionalExpectation</a></div><div class="ttdeci">RandomVariable conditionalExpectation(const std::vector&lt; const RandomVariable * &gt; &amp;regressor, const std::vector&lt; std::function&lt; RandomVariable(const std::vector&lt; const RandomVariable * &gt; &amp;)&gt; &gt; &amp;basisFn, const Array &amp;coefficients)</div></div>
<div class="ttc" id="anamespace_quant_lib_html"><div class="ttname"><a href="namespace_quant_lib.html">QuantLib</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a0a2b3f313047ac1448c08512830e4ff1"><div class="ttname"><a href="namespaceore_1_1data.html#a0a2b3f313047ac1448c08512830e4ff1">ore::data::multiPathBasisSystem</a></div><div class="ttdeci">std::vector&lt; std::function&lt; RandomVariable(const std::vector&lt; const RandomVariable * &gt; &amp;)&gt; &gt; multiPathBasisSystem(Size dim, Size order, QuantLib::LsmBasisSystem::PolynomialType type, Size basisSystemSizeBound)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_2utilities_8cpp_source.html#l00529">utilities.cpp:529</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a55cb2058e735993a24abc89b532e2e72"><div class="ttname"><a href="namespaceore_1_1data.html#a55cb2058e735993a24abc89b532e2e72">ore::data::getInflationSimulationLag</a></div><div class="ttdeci">Size getInflationSimulationLag(const boost::shared_ptr&lt; ZeroInflationIndex &gt; &amp;index)</div><div class="ttdef"><b>Definition:</b> <a href="scripting_2utilities_8cpp_source.html#l00680">utilities.cpp:680</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a86651dfeb5c18ee891f7a4734d8cf455"><div class="ttname"><a href="namespaceore_1_1data.html#a86651dfeb5c18ee891f7a4734d8cf455">ore::data::to_string</a></div><div class="ttdeci">std::string to_string(const LocationInfo &amp;l)</div><div class="ttdef"><b>Definition:</b> <a href="ast_8cpp_source.html#l00028">ast.cpp:28</a></div></div>
<div class="ttc" id="anamespaceore_html"><div class="ttname"><a href="namespaceore.html">ore</a></div><div class="ttdoc">Serializable Credit Default Swap.</div><div class="ttdef"><b>Definition:</b> <a href="namespaces_8docs.html_source#l00023">namespaces.docs:23</a></div></div>
<div class="ttc" id="aovernightindexedcoupon_8hpp_html"><div class="ttname"><a href="../qle/overnightindexedcoupon_8hpp.html">overnightindexedcoupon.hpp</a></div></div>
<div class="ttc" id="aparsers_8hpp_html"><div class="ttname"><a href="parsers_8hpp.html">parsers.hpp</a></div><div class="ttdoc">Map text representations to QuantLib/QuantExt types.</div></div>
<div class="ttc" id="astruct_quant_ext_1_1_filter_html"><div class="ttname"><a href="../qle/struct_quant_ext_1_1_filter.html">QuantExt::Filter</a></div></div>
<div class="ttc" id="astruct_quant_ext_1_1_random_variable_html"><div class="ttname"><a href="../qle/struct_quant_ext_1_1_random_variable.html">QuantExt::RandomVariable</a></div></div>
<div class="ttc" id="astruct_quant_ext_1_1_random_variable_html_a6e0fdc031c26ed1d1a956019d2cee4a1"><div class="ttname"><a href="../qle/struct_quant_ext_1_1_random_variable.html#a6e0fdc031c26ed1d1a956019d2cee4a1">QuantExt::RandomVariable::deterministic</a></div><div class="ttdeci">bool deterministic() const</div></div>
<div class="ttc" id="astruct_quant_ext_1_1_random_variable_html_abba907f9ff1c67082fba469156a9b30a"><div class="ttname"><a href="../qle/struct_quant_ext_1_1_random_variable.html#abba907f9ff1c67082fba469156a9b30a">QuantExt::RandomVariable::expand</a></div><div class="ttdeci">void expand()</div></div>
<div class="ttc" id="astruct_quant_ext_1_1_random_variable_html_adaeda39d7b8cc716a40c4da65b00ba77"><div class="ttname"><a href="../qle/struct_quant_ext_1_1_random_variable.html#adaeda39d7b8cc716a40c4da65b00ba77">QuantExt::RandomVariable::initialised</a></div><div class="ttdeci">bool initialised() const</div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html">ore::data::Model::McParams</a></div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00049">model.hpp:49</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_a150e9051900157f9eeb47db76a408ba8"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#a150e9051900157f9eeb47db76a408ba8">ore::data::Model::McParams::trainingSamples</a></div><div class="ttdeci">Size trainingSamples</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00053">model.hpp:53</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_a4656aca0e143d476a66743acc51b0b59"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#a4656aca0e143d476a66743acc51b0b59">ore::data::Model::McParams::seed</a></div><div class="ttdeci">Size seed</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00051">model.hpp:51</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_a65d2adee751431c28952c4b92532ae92"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#a65d2adee751431c28952c4b92532ae92">ore::data::Model::McParams::sequenceType</a></div><div class="ttdeci">QuantExt::SequenceType sequenceType</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00054">model.hpp:54</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_a701af3323cc00f206ca91b361a1d61cc"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#a701af3323cc00f206ca91b361a1d61cc">ore::data::Model::McParams::sobolOrdering</a></div><div class="ttdeci">QuantLib::SobolBrownianGenerator::Ordering sobolOrdering</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00058">model.hpp:58</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_a84980bac080623a4958f54eea9156714"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#a84980bac080623a4958f54eea9156714">ore::data::Model::McParams::trainingSequenceType</a></div><div class="ttdeci">QuantExt::SequenceType trainingSequenceType</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00055">model.hpp:55</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_a873e0a0bc00eabfaf2955249ae2edcb1"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#a873e0a0bc00eabfaf2955249ae2edcb1">ore::data::Model::McParams::sobolDirectionIntegers</a></div><div class="ttdeci">QuantLib::SobolRsg::DirectionIntegers sobolDirectionIntegers</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00059">model.hpp:59</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_ab26b0dbe400a21ff54dd3f1ed4c4b9a2"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#ab26b0dbe400a21ff54dd3f1ed4c4b9a2">ore::data::Model::McParams::trainingSeed</a></div><div class="ttdeci">Size trainingSeed</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00052">model.hpp:52</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_acd2409cd1ff4c11fd24593d0b4338c75"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#acd2409cd1ff4c11fd24593d0b4338c75">ore::data::Model::McParams::regressionOrder</a></div><div class="ttdeci">Size regressionOrder</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00056">model.hpp:56</a></div></div>
<div class="ttc" id="astructore_1_1data_1_1_model_1_1_mc_params_html_af47330752b982eb481cd9bf41e6444dc"><div class="ttname"><a href="structore_1_1data_1_1_model_1_1_mc_params.html#af47330752b982eb481cd9bf41e6444dc">ore::data::Model::McParams::polynomType</a></div><div class="ttdeci">QuantLib::LsmBasisSystem::PolynomialType polynomType</div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00057">model.hpp:57</a></div></div>
<div class="ttc" id="atest_2commodityschwartzmodel_8cpp_html_a84e1cc7fe4440301cfe72e7c64be988b"><div class="ttname"><a href="../qle/test_2commodityschwartzmodel_8cpp.html#a84e1cc7fe4440301cfe72e7c64be988b">steps</a></div><div class="ttdeci">std::vector&lt; Size &gt; steps</div></div>
<div class="ttc" id="ato__string_8hpp_html"><div class="ttname"><a href="to__string_8hpp.html">to_string.hpp</a></div><div class="ttdoc">string conversion utilities</div></div>
<div class="ttc" id="atodaysmarketparameters_8cpp_html_a8ccf841cb59e451791bcb2e1ac4f1edc"><div class="ttname"><a href="todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> <a href="todaysmarketparameters_8cpp_source.html#l00032">todaysmarketparameters.cpp:32</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
