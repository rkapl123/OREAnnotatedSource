<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREData: ConventionsBasedFutureExpiry Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oredextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-data@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.10</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceore.html">ore</a></li><li class="navelem"><a class="el" href="namespaceore_1_1data.html">data</a></li><li class="navelem"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html">ConventionsBasedFutureExpiry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classore_1_1data_1_1_conventions_based_future_expiry-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ConventionsBasedFutureExpiry Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Perform date calculations for future contracts based on conventions.  
 <a href="classore_1_1data_1_1_conventions_based_future_expiry.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html">ored/utilities/conventionsbasedfutureexpiry.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for ConventionsBasedFutureExpiry:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry__inherit__graph.png" border="0" usemap="#a_conventions_based_future_expiry_inherit__map" alt="Inheritance graph"/></div>
<map name="a_conventions_based_future_expiry_inherit__map" id="a_conventions_based_future_expiry_inherit__map">
<area shape="rect" title="Perform date calculations for future contracts based on conventions." alt="" coords="5,181,235,427"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html" title=" " alt="" coords="26,5,214,133"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for ConventionsBasedFutureExpiry:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry__coll__graph.png" border="0" usemap="#a_conventions_based_future_expiry_coll__map" alt="Collaboration graph"/></div>
<map name="a_conventions_based_future_expiry_coll__map" id="a_conventions_based_future_expiry_coll__map">
<area shape="rect" title="Perform date calculations for future contracts based on conventions." alt="" coords="1363,1443,1593,1659"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html" title=" " alt="" coords="1159,1069,1347,1197"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html" title=" " alt="" coords="1371,885,1585,1380"/>
<area shape="rect" href="classore_1_1data_1_1_convention.html" title="Abstract base class for convention objects." alt="" coords="1584,577,1703,735"/>
<area shape="rect" href="classore_1_1data_1_1_x_m_l_serializable.html" title="Base class for all serializable classes." alt="" coords="1531,5,1679,148"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention_1_1_prohibited_expiry.html" title="Class to hold prohibited expiry information." alt="" coords="1967,225,2109,397"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention_1_1_averaging_data.html" title=" " alt="" coords="803,519,947,793"/>
<area shape="rect" title=" " alt="" coords="1879,291,1933,331"/>
<area shape="rect" title=" " alt="" coords="1178,291,1237,331"/>
<area shape="rect" title=" " alt="" coords="1134,57,1281,97"/>
<area shape="rect" title=" " alt="" coords="5,636,100,676"/>
<area shape="rect" title=" " alt="" coords="395,291,462,331"/>
<area shape="rect" title=" " alt="" coords="611,629,779,683"/>
<area shape="rect" title=" " alt="" coords="305,636,387,676"/>
<area shape="rect" title=" " alt="" coords="411,636,476,676"/>
<area shape="rect" title=" " alt="" coords="500,636,587,676"/>
<area shape="rect" title=" " alt="" coords="759,291,837,331"/>
<area shape="rect" title=" " alt="" coords="1552,291,1615,331"/>
<area shape="rect" title=" " alt="" coords="1396,636,1560,676"/>
<area shape="rect" title=" " alt="" coords="2464,57,2631,97"/>
<area shape="rect" title=" " alt="" coords="2709,636,2761,676"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="2013,57,2063,97"/>
<area shape="rect" title=" " alt="" coords="1727,629,1965,683"/>
<area shape="rect" title=" " alt="" coords="1703,57,1757,97"/>
<area shape="rect" title=" " alt="" coords="1450,291,1527,331"/>
<area shape="rect" title=" " alt="" coords="1344,57,1383,97"/>
<area shape="rect" title=" " alt="" coords="119,291,218,331"/>
<area shape="rect" title=" " alt="" coords="149,57,188,97"/>
<area shape="rect" title=" " alt="" coords="605,291,732,331"/>
<area shape="rect" title=" " alt="" coords="2159,621,2355,691"/>
<area shape="rect" title=" " alt="" coords="2379,636,2513,676"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6d79945598b06982bf05e789f3857622"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a6d79945598b06982bf05e789f3857622">ConventionsBasedFutureExpiry</a> (const std::string &amp;commName, QuantLib::Size <a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8577348a4efd6f58c50dc54ca79ed54e">maxIterations</a>=10)</td></tr>
<tr class="separator:a6d79945598b06982bf05e789f3857622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8adada81bcee699705c7876b04b7150d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8adada81bcee699705c7876b04b7150d">ConventionsBasedFutureExpiry</a> (const <a class="el" href="classore_1_1data_1_1_commodity_future_convention.html">CommodityFutureConvention</a> &amp;convention, QuantLib::Size <a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8577348a4efd6f58c50dc54ca79ed54e">maxIterations</a>=10)</td></tr>
<tr class="separator:a8adada81bcee699705c7876b04b7150d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd20c07171472e89c54943f2da6dffd"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd">nextExpiry</a> (<a class="el" href="classbool.html">bool</a> includeExpiry=true, const QuantLib::Date &amp;<a class="el" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a>=QuantLib::Date(), QuantLib::Natural offset=0, <a class="el" href="classbool.html">bool</a> forOption=false) override</td></tr>
<tr class="separator:a2bd20c07171472e89c54943f2da6dffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7012a5245486e866704b219d52ea7df8"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7012a5245486e866704b219d52ea7df8">priorExpiry</a> (<a class="el" href="classbool.html">bool</a> includeExpiry=true, const QuantLib::Date &amp;<a class="el" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a>=QuantLib::Date(), <a class="el" href="classbool.html">bool</a> forOption=false) override</td></tr>
<tr class="separator:a7012a5245486e866704b219d52ea7df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fca9325c213578c4b07e8e8de5a7dfa"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a> (const QuantLib::Date &amp;<a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>, QuantLib::Natural monthOffset=0, <a class="el" href="classbool.html">bool</a> forOption=false) override</td></tr>
<tr class="separator:a7fca9325c213578c4b07e8e8de5a7dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7220cd76b1667b4165b5f206c3bf28"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a> (const QuantLib::Date &amp;<a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>) override</td></tr>
<tr class="separator:a9d7220cd76b1667b4165b5f206c3bf28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dcbb077a2236bb3e11306e8ca392a36"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7dcbb077a2236bb3e11306e8ca392a36">applyFutureMonthOffset</a> (const QuantLib::Date &amp;<a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>, Natural futureMonthOffset) override</td></tr>
<tr class="separator:a7dcbb077a2236bb3e11306e8ca392a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_quant_ext_1_1_future_expiry_calculator')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el"  href="../qle/class_quant_ext_1_1_future_expiry_calculator.html">FutureExpiryCalculator</a></td></tr>
<tr class="memitem:a8d0a343f3f0a5153afb8e21282a134b8 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a8d0a343f3f0a5153afb8e21282a134b8">~FutureExpiryCalculator</a> ()</td></tr>
<tr class="separator:a8d0a343f3f0a5153afb8e21282a134b8 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714aaa254f59a58ded4e4d6474893c98 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memItemLeft" align="right" valign="top">virtual QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a714aaa254f59a58ded4e4d6474893c98">nextExpiry</a> (<a class="el" href="classbool.html">bool</a> includeExpiry=true, const QuantLib::Date &amp;<a class="el" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a>=QuantLib::Date(), QuantLib::Natural offset=0, <a class="el" href="classbool.html">bool</a> forOption=false)=0</td></tr>
<tr class="separator:a714aaa254f59a58ded4e4d6474893c98 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c9507f309604f06159411690c191ae3 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memItemLeft" align="right" valign="top">virtual QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a6c9507f309604f06159411690c191ae3">priorExpiry</a> (<a class="el" href="classbool.html">bool</a> includeExpiry=true, const QuantLib::Date &amp;<a class="el" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a>=QuantLib::Date(), <a class="el" href="classbool.html">bool</a> forOption=false)=0</td></tr>
<tr class="separator:a6c9507f309604f06159411690c191ae3 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7806bdcdf861d5a8e504df6e65a132f3 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memItemLeft" align="right" valign="top">virtual QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a7806bdcdf861d5a8e504df6e65a132f3">expiryDate</a> (const QuantLib::Date &amp;<a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a0f542e138850de6b599c533e51a7d140">contractDate</a>, QuantLib::Natural monthOffset=0, <a class="el" href="classbool.html">bool</a> forOption=false)=0</td></tr>
<tr class="separator:a7806bdcdf861d5a8e504df6e65a132f3 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f542e138850de6b599c533e51a7d140 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memItemLeft" align="right" valign="top">virtual QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a0f542e138850de6b599c533e51a7d140">contractDate</a> (const QuantLib::Date &amp;<a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a7806bdcdf861d5a8e504df6e65a132f3">expiryDate</a>)=0</td></tr>
<tr class="separator:a0f542e138850de6b599c533e51a7d140 inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeabea42e41fd68761a5422c61d45ae9e inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memItemLeft" align="right" valign="top">virtual QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#aeabea42e41fd68761a5422c61d45ae9e">applyFutureMonthOffset</a> (const QuantLib::Date &amp;<a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a0f542e138850de6b599c533e51a7d140">contractDate</a>, Natural futureMonthOffset)=0</td></tr>
<tr class="separator:aeabea42e41fd68761a5422c61d45ae9e inherit pub_methods_class_quant_ext_1_1_future_expiry_calculator"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Inspectors</h2></td></tr>
<tr class="memitem:a8568e73675dbcdb8b3d8fbb05370a025"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_commodity_future_convention.html">CommodityFutureConvention</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a></td></tr>
<tr class="separator:a8568e73675dbcdb8b3d8fbb05370a025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe17f7f391751847521d6cb4155a9770"><td class="memItemLeft" align="right" valign="top">QuantLib::Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#abe17f7f391751847521d6cb4155a9770">maxIterations_</a></td></tr>
<tr class="separator:abe17f7f391751847521d6cb4155a9770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af655271d74e4fe76118a916202b480f4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classore_1_1data_1_1_commodity_future_convention.html">CommodityFutureConvention</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#af655271d74e4fe76118a916202b480f4">commodityFutureConvention</a> () const</td></tr>
<tr class="memdesc:af655271d74e4fe76118a916202b480f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the commodity future convention.  <a href="classore_1_1data_1_1_conventions_based_future_expiry.html#af655271d74e4fe76118a916202b480f4">More...</a><br /></td></tr>
<tr class="separator:af655271d74e4fe76118a916202b480f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8577348a4efd6f58c50dc54ca79ed54e"><td class="memItemLeft" align="right" valign="top">QuantLib::Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8577348a4efd6f58c50dc54ca79ed54e">maxIterations</a> () const</td></tr>
<tr class="memdesc:a8577348a4efd6f58c50dc54ca79ed54e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the maximum iterations parameter.  <a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8577348a4efd6f58c50dc54ca79ed54e">More...</a><br /></td></tr>
<tr class="separator:a8577348a4efd6f58c50dc54ca79ed54e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f51eb3c35521d6da9190729a50dee6b"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> (QuantLib::Day dayOfMonth, QuantLib::Month contractMonth, QuantLib::Year contractYear, QuantLib::Natural monthOffset, <a class="el" href="classbool.html">bool</a> forOption) const</td></tr>
<tr class="memdesc:a5f51eb3c35521d6da9190729a50dee6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a <code>contractMonth</code>, a <code>contractYear</code> and <code>conventions</code>, calculate the contract expiry date.  <a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">More...</a><br /></td></tr>
<tr class="separator:a5f51eb3c35521d6da9190729a50dee6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0c0ad18321047c5d9ec3151bc0ed80"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a0c0c0ad18321047c5d9ec3151bc0ed80">nextExpiry</a> (const QuantLib::Date &amp;<a class="el" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a>, <a class="el" href="classbool.html">bool</a> forOption) const</td></tr>
<tr class="memdesc:a0c0c0ad18321047c5d9ec3151bc0ed80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do the next expiry work.  <a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a0c0c0ad18321047c5d9ec3151bc0ed80">More...</a><br /></td></tr>
<tr class="separator:a0c0c0ad18321047c5d9ec3151bc0ed80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e62d1af433ac8508e0ee1c7e9570884"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884">avoidProhibited</a> (const QuantLib::Date &amp;<a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <a class="el" href="classbool.html">bool</a> forOption) const</td></tr>
<tr class="memdesc:a5e62d1af433ac8508e0ee1c7e9570884"><td class="mdescLeft">&#160;</td><td class="mdescRight">Account for prohibited expiries.  <a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884">More...</a><br /></td></tr>
<tr class="separator:a5e62d1af433ac8508e0ee1c7e9570884"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Perform date calculations for future contracts based on conventions. </p>

<p class="definition">Definition at line <a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html#l00033">33</a> of file <a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html">conventionsbasedfutureexpiry.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6d79945598b06982bf05e789f3857622" name="a6d79945598b06982bf05e789f3857622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d79945598b06982bf05e789f3857622">&#9670;&#160;</a></span>ConventionsBasedFutureExpiry() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html">ConventionsBasedFutureExpiry</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>commName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Size&#160;</td>
          <td class="paramname"><em>maxIterations</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8adada81bcee699705c7876b04b7150d" name="a8adada81bcee699705c7876b04b7150d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8adada81bcee699705c7876b04b7150d">&#9670;&#160;</a></span>ConventionsBasedFutureExpiry() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_conventions_based_future_expiry.html">ConventionsBasedFutureExpiry</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_commodity_future_convention.html">CommodityFutureConvention</a> &amp;&#160;</td>
          <td class="paramname"><em>convention</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Size&#160;</td>
          <td class="paramname"><em>maxIterations</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00038">38</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>    : <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>(convention), <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#abe17f7f391751847521d6cb4155a9770">maxIterations_</a>(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8577348a4efd6f58c50dc54ca79ed54e">maxIterations</a>) {}</div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a8568e73675dbcdb8b3d8fbb05370a025"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">ore::data::ConventionsBasedFutureExpiry::convention_</a></div><div class="ttdeci">CommodityFutureConvention convention_</div><div class="ttdef"><b>Definition:</b> <a href="conventionsbasedfutureexpiry_8hpp_source.html#l00061">conventionsbasedfutureexpiry.hpp:61</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a8577348a4efd6f58c50dc54ca79ed54e"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8577348a4efd6f58c50dc54ca79ed54e">ore::data::ConventionsBasedFutureExpiry::maxIterations</a></div><div class="ttdeci">QuantLib::Size maxIterations() const</div><div class="ttdoc">Return the maximum iterations parameter.</div><div class="ttdef"><b>Definition:</b> <a href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00310">conventionsbasedfutureexpiry.cpp:310</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_abe17f7f391751847521d6cb4155a9770"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#abe17f7f391751847521d6cb4155a9770">ore::data::ConventionsBasedFutureExpiry::maxIterations_</a></div><div class="ttdeci">QuantLib::Size maxIterations_</div><div class="ttdef"><b>Definition:</b> <a href="conventionsbasedfutureexpiry_8hpp_source.html#l00062">conventionsbasedfutureexpiry.hpp:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2bd20c07171472e89c54943f2da6dffd" name="a2bd20c07171472e89c54943f2da6dffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd20c07171472e89c54943f2da6dffd">&#9670;&#160;</a></span>nextExpiry() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date nextExpiry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>includeExpiry</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>referenceDate</em> = <code>QuantLib::Date()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Natural&#160;</td>
          <td class="paramname"><em>offset</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>forOption</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a714aaa254f59a58ded4e4d6474893c98">FutureExpiryCalculator</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a2bd20c07171472e89c54943f2da6dffd_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a2bd20c07171472e89c54943f2da6dffd_icgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a2bd20c07171472e89c54943f2da6dffd_icgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a2bd20c07171472e89c54943f2da6dffd_icgraph">
<area shape="rect" title=" " alt="" coords="1184,1059,1268,1085"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_position.html#ac998e259f78b98d10df4f18f6d3c9a9a" title=" " alt="" coords="715,432,909,472"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa" title=" " alt="" coords="1005,1245,1089,1270"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d5a62f54d619803ecebbe09dc93d7d9" title=" " alt="" coords="957,909,1136,949"/>
<area shape="rect" href="classore_1_1data_1_1_asian_option.html#af903446b7ae0162e35e591e6394d0a89" title=" " alt="" coords="736,1052,888,1092"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7012a5245486e866704b219d52ea7df8" title=" " alt="" coords="1005,1294,1089,1319"/>
<area shape="rect" href="test_2conventionsbasedfutureexpiry_8cpp.html#afeaab8386141406f310f9e2ef058b56c" title=" " alt="" coords="717,1245,907,1270"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28" title=" " alt="" coords="764,1294,860,1319"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7dcbb077a2236bb3e11306e8ca392a36" title=" " alt="" coords="481,1474,641,1499"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_curve.html#a75270868cf6dc7217514710735089a8d" title=" " alt="" coords="723,496,901,536"/>
<area shape="rect" href="namespaceore_1_1data.html#a4762d52341d1436be19e245d0e686e47" title=" " alt="" coords="723,560,901,600"/>
<area shape="rect" href="namespaceore_1_1data.html#a445fe37fcb6ed264376329b7d70d58ee" title=" " alt="" coords="732,625,892,650"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_floating_leg_builder.html#a139b78cb06c706ab4a2a4f456f7ddad2" title=" " alt="" coords="464,937,657,977"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_curve.html#af67e7c2b3e83030b4412f148d40ff311" title="Build commodity basis price curve." alt="" coords="723,937,901,977"/>
<area shape="rect" href="group__utilities.html#ga4dd46ea66198fb027344956d4821bd8d" title="Return true if the indexName is that of an CommodityIndex, otherwise false." alt="" coords="718,1002,906,1027"/>
<area shape="rect" href="group__utilities.html#gab2d26348315b387f1b203be151c09fbf" title="Convert std::string to QuantLib::Index." alt="" coords="740,1195,884,1221"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_curve.html#a30389d59c3806a212814ae01f6dca313" title="Build commodity piecewise price curve." alt="" coords="471,5,650,45"/>
<area shape="rect" href="test_2fixings_8cpp.html#a67ada7956eb90fe9fbecd12a611892ab" title=" " alt="" coords="465,70,656,95"/>
<area shape="rect" href="classore_1_1data_1_1_swap.html#a9c636e31b77522b708a0b20e376209aa" title="Build QuantLib/QuantExt instrument, link pricing engine." alt="" coords="487,119,635,145"/>
<area shape="rect" href="classore_1_1data_1_1_fixed_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="473,169,648,209"/>
<area shape="rect" href="classore_1_1data_1_1_zero_coupon_fixed_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="469,233,652,273"/>
<area shape="rect" href="classore_1_1data_1_1_floating_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="467,297,655,337"/>
<area shape="rect" href="classore_1_1data_1_1_c_p_i_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="479,361,642,401"/>
<area shape="rect" href="classore_1_1data_1_1_y_y_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="481,425,641,465"/>
<area shape="rect" href="classore_1_1data_1_1_c_m_s_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="475,489,646,529"/>
<area shape="rect" href="classore_1_1data_1_1_c_m_b_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="475,553,646,593"/>
<area shape="rect" href="classore_1_1data_1_1_digital_c_m_s_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="477,617,644,657"/>
<area shape="rect" href="classore_1_1data_1_1_c_m_s_spread_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="455,681,667,721"/>
<area shape="rect" href="classore_1_1data_1_1_digital_c_m_s_spread_leg_builder.html#a2db8847a3f7eba0c3ab0378e263d10e7" title=" " alt="" coords="467,745,654,785"/>
<area shape="rect" href="classore_1_1data_1_1_duration_adjusted_cms_leg_builder.html#aec2b4d309c409580ac1da5b0d5e34f87" title=" " alt="" coords="471,809,651,849"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_fixed_leg_builder.html#a139b78cb06c706ab4a2a4f456f7ddad2" title=" " alt="" coords="471,873,650,913"/>
<area shape="rect" href="test_2todaysmarket_8cpp.html#aeb43366ac05a65218ef11c74fa7a5650" title=" " alt="" coords="216,30,407,55"/>
<area shape="rect" href="classore_1_1data_1_1_equity_swap.html#a9c636e31b77522b708a0b20e376209aa" title="Trade interface." alt="" coords="236,80,387,120"/>
<area shape="rect" href="classore_1_1data_1_1_inflation_swap.html#a9c636e31b77522b708a0b20e376209aa" title="Trade interface." alt="" coords="233,144,390,184"/>
<area shape="rect" href="classore_1_1data_1_1_index_credit_default_swap.html#a9c636e31b77522b708a0b20e376209aa" title=" " alt="" coords="218,208,405,248"/>
<area shape="rect" href="classore_1_1data_1_1_asian_option.html#a8e1ee54795e991c3756e0c78e900bd8a" title=" " alt="" coords="235,1013,387,1053"/>
<area shape="rect" href="namespaceore_1_1data.html#afbdabb3acc8c9fd3e013b2d5b9b71660" title="Utility to write a vector of fixings in the QuantLib index manager&#39;s fixing history." alt="" coords="483,1167,638,1193"/>
<area shape="rect" href="classore_1_1data_1_1_asian_option.html#a9c636e31b77522b708a0b20e376209aa" title="Build QuantLib/QuantExt instrument, link pricing engine." alt="" coords="235,1087,387,1127"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_swap.html#aa6ef9bf809c54ebef188c02a9f5e9ae0" title="Add underlying Commodity names." alt="" coords="471,1217,650,1257"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_option_strip.html#ace1ee35a5870d6d6824cba8e63dfd3b8" title="Add underlying Commodity names." alt="" coords="468,1281,653,1321"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_swaption.html#a8e1ee54795e991c3756e0c78e900bd8a" title="Add underlying Commodity names." alt="" coords="461,1345,661,1385"/>
<area shape="rect" href="classore_1_1data_1_1_swap.html#aa80b421a434b9b4e99b95cf32cfcb22f" title="Add underlying index names." alt="" coords="471,1409,651,1449"/>
<area shape="rect" href="classore_1_1data_1_1_todays_market.html#a0816e5ec53019bee5353fea5fc006eb1" title=" " alt="" coords="230,1160,393,1200"/>
<area shape="rect" href="classore_1_1data_1_1_todays_market.html#aa82cc4ddd3bd6cf77cbe95fa5d2281cd" title="Constructor taking pointers and allowing for a lazy build of the market objects." alt="" coords="5,1160,168,1200"/>
<area shape="rect" href="classore_1_1data_1_1_asian_option.html#acfb5662c8346d62dda85653879dbeb05" title=" " alt="" coords="485,1052,637,1092"/>
</map>
</div>

</div>
</div>
<a id="a7012a5245486e866704b219d52ea7df8" name="a7012a5245486e866704b219d52ea7df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7012a5245486e866704b219d52ea7df8">&#9670;&#160;</a></span>priorExpiry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Date priorExpiry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>includeExpiry</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>referenceDate</em> = <code>QuantLib::Date()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>forOption</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a6c9507f309604f06159411690c191ae3">FutureExpiryCalculator</a>.</p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00065">65</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>                                                                                                            {</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    <span class="comment">// Set the date relative to which we are calculating the preceding expiry</span></div>
<div class="line"><span class="lineno">   68</span>    Date today = <a class="code hl_variable" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a> == Date() ? Settings::instance().evaluationDate() : <a class="code hl_variable" href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a>;</div>
<div class="line"><span class="lineno">   69</span> </div>
<div class="line"><span class="lineno">   70</span>    <span class="comment">// Get the next expiry relative to the reference date (including the reference date)</span></div>
<div class="line"><span class="lineno">   71</span>    Date <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd">nextExpiry</a>(<span class="keyword">true</span>, today, 0, forOption);</div>
<div class="line"><span class="lineno">   72</span> </div>
<div class="line"><span class="lineno">   73</span>    <span class="comment">// If that expiry is equal to reference date and we have set includeExpiry to true, we are done.</span></div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span> (includeExpiry &amp;&amp; <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> == today)</div>
<div class="line"><span class="lineno">   75</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>;</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    <span class="comment">// Get the preceding expiry.</span></div>
<div class="line"><span class="lineno">   78</span>    Period p(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">contractFrequency</a>());</div>
<div class="line"><span class="lineno">   79</span>    Date baseDate = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().advance(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, -p);</div>
<div class="line"><span class="lineno">   80</span>    <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd">nextExpiry</a>(<span class="keyword">true</span>, baseDate, 0, forOption);</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    <span class="comment">// May still not have the preceding expiry but must be close</span></div>
<div class="line"><span class="lineno">   83</span>    Size counter = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#abe17f7f391751847521d6cb4155a9770">maxIterations_</a>;</div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">while</span> (<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> &gt;= today &amp;&amp; counter &gt; 0) {</div>
<div class="line"><span class="lineno">   85</span>        baseDate--;</div>
<div class="line"><span class="lineno">   86</span>        counter--;</div>
<div class="line"><span class="lineno">   87</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd">nextExpiry</a>(<span class="keyword">true</span>, baseDate, 0, forOption);</div>
<div class="line"><span class="lineno">   88</span>    }</div>
<div class="line"><span class="lineno">   89</span>    QL_REQUIRE(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> &lt; today, <span class="stringliteral">&quot;Expected that expiry &quot;</span> &lt;&lt; io::iso_date(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>) &lt;&lt; <span class="stringliteral">&quot; would be less than reference date &quot;</span></div>
<div class="line"><span class="lineno">   90</span>                                                       &lt;&lt; io::iso_date(today) &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>;</div>
<div class="line"><span class="lineno">   93</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36ab1d6a60a0fb456d4f0370c59481c4"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">ore::data::CommodityFutureConvention::expiryCalendar</a></div><div class="ttdeci">const QuantLib::Calendar &amp; expiryCalendar() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01569">conventions.hpp:1569</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a60ca1392f0826c87e624985e78c5c7ce"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">ore::data::CommodityFutureConvention::contractFrequency</a></div><div class="ttdeci">QuantLib::Frequency contractFrequency() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01567">conventions.hpp:1567</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a2bd20c07171472e89c54943f2da6dffd"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd">ore::data::ConventionsBasedFutureExpiry::nextExpiry</a></div><div class="ttdeci">QuantLib::Date nextExpiry(bool includeExpiry=true, const QuantLib::Date &amp;referenceDate=QuantLib::Date(), QuantLib::Natural offset=0, bool forOption=false) override</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a5f51eb3c35521d6da9190729a50dee6b"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">ore::data::ConventionsBasedFutureExpiry::expiry</a></div><div class="ttdeci">QuantLib::Date expiry(QuantLib::Day dayOfMonth, QuantLib::Month contractMonth, QuantLib::Year contractYear, QuantLib::Natural monthOffset, bool forOption) const</div><div class="ttdoc">Given a contractMonth, a contractYear and conventions, calculate the contract expiry date.</div><div class="ttdef"><b>Definition:</b> <a href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00147">conventionsbasedfutureexpiry.cpp:147</a></div></div>
<div class="ttc" id="autilities_8cpp_html_a24bc06abadc72e51af462e64714c3822"><div class="ttname"><a href="utilities_8cpp.html#a24bc06abadc72e51af462e64714c3822">referenceDate</a></div><div class="ttdeci">Date referenceDate</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00442">utilities.cpp:442</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a7012a5245486e866704b219d52ea7df8_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a7012a5245486e866704b219d52ea7df8_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a7012a5245486e866704b219d52ea7df8_cgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a7012a5245486e866704b219d52ea7df8_cgraph">
<area shape="rect" title=" " alt="" coords="5,546,89,571"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce" title=" " alt="" coords="303,5,504,45"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="151,646,208,671"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4" title=" " alt="" coords="311,69,495,109"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd" title=" " alt="" coords="137,695,221,721"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe" title=" " alt="" coords="304,517,503,557"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e" title=" " alt="" coords="311,581,495,621"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884" title="Account for prohibited expiries." alt="" coords="349,646,458,671"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b" title=" " alt="" coords="288,696,519,736"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5" title=" " alt="" coords="302,760,505,800"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93" title=" " alt="" coords="299,824,508,864"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d" title=" " alt="" coords="311,888,495,928"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491" title=" " alt="" coords="311,952,496,992"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5" title=" " alt="" coords="326,1016,481,1056"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8" title=" " alt="" coords="311,1080,495,1120"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614" title=" " alt="" coords="311,1144,495,1184"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9" title=" " alt="" coords="305,1208,502,1248"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3" title=" " alt="" coords="269,1272,537,1312"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85" title=" " alt="" coords="284,1336,523,1376"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a" title=" " alt="" coords="309,1400,497,1440"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9" title=" " alt="" coords="292,133,515,173"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5" title=" " alt="" coords="304,197,503,237"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3" title=" " alt="" coords="311,261,495,301"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4" title=" " alt="" coords="311,325,495,365"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449" title=" " alt="" coords="298,389,509,429"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee" title=" " alt="" coords="311,453,495,493"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258" title=" " alt="" coords="591,607,775,647"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f" title=" " alt="" coords="585,671,781,711"/>
</map>
</div>

</div>
</div>
<a id="a7fca9325c213578c4b07e8e8de5a7dfa" name="a7fca9325c213578c4b07e8e8de5a7dfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fca9325c213578c4b07e8e8de5a7dfa">&#9670;&#160;</a></span>expiryDate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Date expiryDate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>contractDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Natural&#160;</td>
          <td class="paramname"><em>monthOffset</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>forOption</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a7806bdcdf861d5a8e504df6e65a132f3">FutureExpiryCalculator</a>.</p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00095">95</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   95</span>                                                                                                           {</div>
<div class="line"><span class="lineno">   96</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">contractFrequency</a>() == Daily) {</div>
<div class="line"><span class="lineno">   97</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd">nextExpiry</a>(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>, forOption);</div>
<div class="line"><span class="lineno">   98</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   99</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>.dayOfMonth(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>.month(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>.year(), monthOffset, forOption);</div>
<div class="line"><span class="lineno">  100</span>    }</div>
<div class="line"><span class="lineno">  101</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a9d7220cd76b1667b4165b5f206c3bf28"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">ore::data::ConventionsBasedFutureExpiry::contractDate</a></div><div class="ttdeci">QuantLib::Date contractDate(const QuantLib::Date &amp;expiryDate) override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00103">conventionsbasedfutureexpiry.cpp:103</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_cgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_cgraph">
<area shape="rect" title=" " alt="" coords="5,289,89,314"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28" title=" " alt="" coords="137,289,233,314"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce" title=" " alt="" coords="420,5,621,45"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="281,607,339,633"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd" title=" " alt="" coords="143,390,227,415"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe" title=" " alt="" coords="421,69,620,109"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e" title=" " alt="" coords="429,133,613,173"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884" title="Account for prohibited expiries." alt="" coords="466,198,575,223"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b" title=" " alt="" coords="405,248,636,288"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5" title=" " alt="" coords="419,312,622,352"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93" title=" " alt="" coords="416,376,625,416"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d" title=" " alt="" coords="429,440,613,480"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4" title=" " alt="" coords="429,504,613,544"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491" title=" " alt="" coords="428,568,613,608"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5" title=" " alt="" coords="443,632,598,672"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8" title=" " alt="" coords="429,696,613,736"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614" title=" " alt="" coords="429,760,613,800"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9" title=" " alt="" coords="422,824,619,864"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3" title=" " alt="" coords="387,888,655,928"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85" title=" " alt="" coords="401,952,640,992"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a" title=" " alt="" coords="427,1016,615,1056"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9" title=" " alt="" coords="409,1080,632,1120"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5" title=" " alt="" coords="421,1144,620,1184"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3" title=" " alt="" coords="429,1208,613,1248"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4" title=" " alt="" coords="429,1272,613,1312"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449" title=" " alt="" coords="415,1336,626,1376"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee" title=" " alt="" coords="429,1400,613,1440"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258" title=" " alt="" coords="709,159,893,199"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f" title=" " alt="" coords="703,223,899,263"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_icgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_icgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a7fca9325c213578c4b07e8e8de5a7dfa_icgraph">
<area shape="rect" title=" " alt="" coords="452,55,536,80"/>
<area shape="rect" href="test_2conventionsbasedfutureexpiry_8cpp.html#afeaab8386141406f310f9e2ef058b56c" title=" " alt="" coords="213,5,404,31"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28" title=" " alt="" coords="261,55,357,80"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7dcbb077a2236bb3e11306e8ca392a36" title=" " alt="" coords="5,55,165,80"/>
</map>
</div>

</div>
</div>
<a id="a9d7220cd76b1667b4165b5f206c3bf28" name="a9d7220cd76b1667b4165b5f206c3bf28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7220cd76b1667b4165b5f206c3bf28">&#9670;&#160;</a></span>contractDate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date contractDate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>expiryDate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#a0f542e138850de6b599c533e51a7d140">FutureExpiryCalculator</a>.</p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00103">103</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  103</span>                                                                                      {</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">contractFrequency</a>() == Monthly) {</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>        <span class="comment">// do not attempt to invert the logic in expiry(), instead just search for a valid contract month</span></div>
<div class="line"><span class="lineno">  108</span>        <span class="comment">// in a reasonable range</span></div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">for</span> (Size m = 0; m &lt; 120; ++m) {</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  112</span>                Date tmp = Date(15, <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>.month(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>.year()) + m * Months;</div>
<div class="line"><span class="lineno">  113</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>(tmp.dayOfMonth(), tmp.month(), tmp.year(), 0, <span class="keyword">false</span>) == <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>)</div>
<div class="line"><span class="lineno">  114</span>                    <span class="keywordflow">return</span> tmp;</div>
<div class="line"><span class="lineno">  115</span>            } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  116</span>            }</div>
<div class="line"><span class="lineno">  117</span>            <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  118</span>                Date tmp = Date(15, <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>.month(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>.year()) - m * Months;</div>
<div class="line"><span class="lineno">  119</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>(tmp.dayOfMonth(), tmp.month(), tmp.year(), 0, <span class="keyword">false</span>) == <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>)</div>
<div class="line"><span class="lineno">  120</span>                    <span class="keywordflow">return</span> tmp;</div>
<div class="line"><span class="lineno">  121</span>            } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  122</span>            }</div>
<div class="line"><span class="lineno">  123</span>        }</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>        <span class="comment">// daily of weekly contract frequency =&gt; we can use contract date = expiry date</span></div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a>;</div>
<div class="line"><span class="lineno">  130</span>    }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    QL_FAIL(<span class="stringliteral">&quot;ConventionsBasedFutureExpiry::contractDate(&quot;</span> &lt;&lt; <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">expiryDate</a> &lt;&lt; <span class="stringliteral">&quot;): could not imply contract date. This is an internal error. Contact support.&quot;</span>);</div>
<div class="line"><span class="lineno">  133</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a7fca9325c213578c4b07e8e8de5a7dfa"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa">ore::data::ConventionsBasedFutureExpiry::expiryDate</a></div><div class="ttdeci">QuantLib::Date expiryDate(const QuantLib::Date &amp;contractDate, QuantLib::Natural monthOffset=0, bool forOption=false) override</div><div class="ttdef"><b>Definition:</b> <a href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00095">conventionsbasedfutureexpiry.cpp:95</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_cgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_cgraph">
<area shape="rect" title=" " alt="" coords="5,482,101,507"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce" title=" " alt="" coords="447,5,648,45"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="295,611,352,637"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa" title=" " alt="" coords="149,482,233,507"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe" title=" " alt="" coords="448,69,647,109"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e" title=" " alt="" coords="455,133,639,173"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884" title="Account for prohibited expiries." alt="" coords="493,198,602,223"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b" title=" " alt="" coords="432,248,663,288"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5" title=" " alt="" coords="446,312,649,352"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93" title=" " alt="" coords="443,376,652,416"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d" title=" " alt="" coords="455,440,639,480"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4" title=" " alt="" coords="455,504,639,544"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491" title=" " alt="" coords="455,568,640,608"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5" title=" " alt="" coords="470,632,625,672"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8" title=" " alt="" coords="455,696,639,736"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614" title=" " alt="" coords="455,760,639,800"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9" title=" " alt="" coords="449,824,646,864"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3" title=" " alt="" coords="413,888,681,928"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85" title=" " alt="" coords="428,952,667,992"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a" title=" " alt="" coords="453,1016,641,1056"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9" title=" " alt="" coords="436,1080,659,1120"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5" title=" " alt="" coords="448,1144,647,1184"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3" title=" " alt="" coords="455,1208,639,1248"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4" title=" " alt="" coords="455,1272,639,1312"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449" title=" " alt="" coords="442,1336,653,1376"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee" title=" " alt="" coords="455,1400,639,1440"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258" title=" " alt="" coords="735,159,919,199"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f" title=" " alt="" coords="729,223,925,263"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd" title=" " alt="" coords="281,482,365,507"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_icgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_icgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a9d7220cd76b1667b4165b5f206c3bf28_icgraph">
<area shape="rect" title=" " alt="" coords="452,55,548,80"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7dcbb077a2236bb3e11306e8ca392a36" title=" " alt="" coords="244,5,404,31"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa" title=" " alt="" coords="282,55,366,80"/>
<area shape="rect" href="test_2conventionsbasedfutureexpiry_8cpp.html#afeaab8386141406f310f9e2ef058b56c" title=" " alt="" coords="5,55,196,80"/>
</map>
</div>

</div>
</div>
<a id="a7dcbb077a2236bb3e11306e8ca392a36" name="a7dcbb077a2236bb3e11306e8ca392a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dcbb077a2236bb3e11306e8ca392a36">&#9670;&#160;</a></span>applyFutureMonthOffset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date applyFutureMonthOffset </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>contractDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Natural&#160;</td>
          <td class="paramname"><em>futureMonthOffset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="elRef" href="../qle/class_quant_ext_1_1_future_expiry_calculator.html#aeabea42e41fd68761a5422c61d45ae9e">FutureExpiryCalculator</a>.</p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00135">135</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>                                                                                               {</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    Date tmp = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>;</div>
<div class="line"><span class="lineno">  139</span> </div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">contractFrequency</a>() == Monthly) {</div>
<div class="line"><span class="lineno">  141</span>        tmp = Date(15, <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>.month(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28">contractDate</a>.year()) + futureMonthOffset * Months;</div>
<div class="line"><span class="lineno">  142</span>    }</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    <span class="keywordflow">return</span> tmp;</div>
<div class="line"><span class="lineno">  145</span>}</div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a7dcbb077a2236bb3e11306e8ca392a36_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a7dcbb077a2236bb3e11306e8ca392a36_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a7dcbb077a2236bb3e11306e8ca392a36_cgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a7dcbb077a2236bb3e11306e8ca392a36_cgraph">
<area shape="rect" title=" " alt="" coords="5,1345,165,1370"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28" title=" " alt="" coords="213,1281,309,1306"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce" title=" " alt="" coords="655,1400,856,1440"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="503,735,560,761"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa" title=" " alt="" coords="357,1281,441,1306"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe" title=" " alt="" coords="656,69,855,109"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e" title=" " alt="" coords="663,133,847,173"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884" title="Account for prohibited expiries." alt="" coords="701,198,810,223"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b" title=" " alt="" coords="640,248,871,288"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5" title=" " alt="" coords="654,312,857,352"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93" title=" " alt="" coords="651,376,860,416"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d" title=" " alt="" coords="663,440,847,480"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4" title=" " alt="" coords="663,504,847,544"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491" title=" " alt="" coords="663,568,848,608"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5" title=" " alt="" coords="678,632,833,672"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8" title=" " alt="" coords="663,696,847,736"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614" title=" " alt="" coords="663,760,847,800"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9" title=" " alt="" coords="657,824,854,864"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3" title=" " alt="" coords="621,888,889,928"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85" title=" " alt="" coords="636,952,875,992"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a" title=" " alt="" coords="661,1016,849,1056"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9" title=" " alt="" coords="644,1080,867,1120"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5" title=" " alt="" coords="656,1144,855,1184"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3" title=" " alt="" coords="663,1208,847,1248"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4" title=" " alt="" coords="663,1272,847,1312"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449" title=" " alt="" coords="650,1336,861,1376"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee" title=" " alt="" coords="663,5,847,45"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258" title=" " alt="" coords="943,159,1127,199"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f" title=" " alt="" coords="937,223,1133,263"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a2bd20c07171472e89c54943f2da6dffd" title=" " alt="" coords="489,1255,573,1281"/>
</map>
</div>

</div>
</div>
<a id="af655271d74e4fe76118a916202b480f4" name="af655271d74e4fe76118a916202b480f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af655271d74e4fe76118a916202b480f4">&#9670;&#160;</a></span>commodityFutureConvention()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classore_1_1data_1_1_commodity_future_convention.html">CommodityFutureConvention</a> &amp; commodityFutureConvention </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the commodity future convention. </p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00308">308</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  308</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8577348a4efd6f58c50dc54ca79ed54e" name="a8577348a4efd6f58c50dc54ca79ed54e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8577348a4efd6f58c50dc54ca79ed54e">&#9670;&#160;</a></span>maxIterations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Size maxIterations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the maximum iterations parameter. </p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00310">310</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  310</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#abe17f7f391751847521d6cb4155a9770">maxIterations_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f51eb3c35521d6da9190729a50dee6b" name="a5f51eb3c35521d6da9190729a50dee6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f51eb3c35521d6da9190729a50dee6b">&#9670;&#160;</a></span>expiry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Date expiry </td>
          <td>(</td>
          <td class="paramtype">QuantLib::Day&#160;</td>
          <td class="paramname"><em>dayOfMonth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Month&#160;</td>
          <td class="paramname"><em>contractMonth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Year&#160;</td>
          <td class="paramname"><em>contractYear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Natural&#160;</td>
          <td class="paramname"><em>monthOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>forOption</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a <code>contractMonth</code>, a <code>contractYear</code> and <code>conventions</code>, calculate the contract expiry date. </p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00147">147</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  148</span>                                                                {</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    Date <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>;</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">contractFrequency</a>() == Weekly) {</div>
<div class="line"><span class="lineno">  152</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">anchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248aa0c74851a6e7bd6efd1bb0c4422b40d8">CommodityFutureConvention::AnchorType::WeeklyDayOfTheWeek</a>,</div>
<div class="line"><span class="lineno">  153</span>                   <span class="stringliteral">&quot;Please change anchorType to WeeklyDayOfTheWeek for weekly contract expiries&quot;</span>);</div>
<div class="line"><span class="lineno">  154</span>        Date d(dayOfMonth, contractMonth, contractYear);</div>
<div class="line"><span class="lineno">  155</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().adjust(d - d.weekday() + <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee">weekday</a>(),</div>
<div class="line"><span class="lineno">  156</span>                                                     <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b">businessDayConvention</a>());</div>
<div class="line"><span class="lineno">  157</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  158</span>        <span class="comment">// Apply month offset if non-zero</span></div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">if</span> (monthOffset &gt; 0) {</div>
<div class="line"><span class="lineno">  160</span>            Date newDate = Date(15, contractMonth, contractYear) + monthOffset * Months;</div>
<div class="line"><span class="lineno">  161</span>            contractMonth = newDate.month();</div>
<div class="line"><span class="lineno">  162</span>            contractYear = newDate.year();</div>
<div class="line"><span class="lineno">  163</span>        }</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>        <span class="comment">// Move n months before (+ve) or after (-ve) for the expiry if necessary</span></div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491">expiryMonthLag</a>() != 0) {</div>
<div class="line"><span class="lineno">  167</span>            Date newDate = Date(15, contractMonth, contractYear) - <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491">expiryMonthLag</a>() * Months;</div>
<div class="line"><span class="lineno">  168</span>            contractMonth = newDate.month();</div>
<div class="line"><span class="lineno">  169</span>            contractYear = newDate.year();</div>
<div class="line"><span class="lineno">  170</span>        }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce">contractFrequency</a>() == Monthly &amp;&amp; !<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449">validContractMonths</a>().empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  173</span>            <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449">validContractMonths</a>().size() &lt; 12 &amp;&amp;</div>
<div class="line"><span class="lineno">  174</span>            <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449">validContractMonths</a>().count(contractMonth) == 0) {</div>
<div class="line"><span class="lineno">  175</span>            <span class="comment">// contractMonth is in the not in the list of valid contract months</span></div>
<div class="line"><span class="lineno">  176</span>            <span class="keywordflow">return</span> Date();</div>
<div class="line"><span class="lineno">  177</span>        } </div>
<div class="line"><span class="lineno">  178</span>        <span class="comment">// Calculate the relevant date in the expiry month and year</span></div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">anchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a569a460fd57f5e86e237ad553750a3c7">CommodityFutureConvention::AnchorType::DayOfMonth</a>) {</div>
<div class="line"><span class="lineno">  180</span>            Date last = Date::endOfMonth(Date(1, contractMonth, contractYear));</div>
<div class="line"><span class="lineno">  181</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d">dayOfMonth</a>() &gt; <span class="keyword">static_cast&lt;</span>Natural<span class="keyword">&gt;</span>(last.dayOfMonth())) {</div>
<div class="line"><span class="lineno">  182</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = last;</div>
<div class="line"><span class="lineno">  183</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  184</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = Date(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d">dayOfMonth</a>(), contractMonth, contractYear);</div>
<div class="line"><span class="lineno">  185</span>            }</div>
<div class="line"><span class="lineno">  186</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">anchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a238b56a65c2469676ef3ece072a302e1">CommodityFutureConvention::AnchorType::NthWeekday</a>) {</div>
<div class="line"><span class="lineno">  187</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = Date::nthWeekday(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8">nth</a>(), <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee">weekday</a>(), contractMonth, contractYear);</div>
<div class="line"><span class="lineno">  188</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">anchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a95f70742ffd00db2392e73a9f2334441">CommodityFutureConvention::AnchorType::CalendarDaysBefore</a>) {</div>
<div class="line"><span class="lineno">  189</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = Date(1, contractMonth, contractYear) - <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93">calendarDaysBefore</a>() * Days;</div>
<div class="line"><span class="lineno">  190</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">anchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a28293f48bb5dd0a8aacbcdcc554b7bcb">CommodityFutureConvention::AnchorType::BusinessDaysAfter</a>) {</div>
<div class="line"><span class="lineno">  191</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5">businessDaysAfter</a>() &gt; 0) {</div>
<div class="line"><span class="lineno">  192</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().advance(Date(1, contractMonth, contractYear) - 1 * Days,</div>
<div class="line"><span class="lineno">  193</span>                                                              <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5">businessDaysAfter</a>(), Days);</div>
<div class="line"><span class="lineno">  194</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  195</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().advance(Date(1, contractMonth, contractYear),</div>
<div class="line"><span class="lineno">  196</span>                                                              <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5">businessDaysAfter</a>(), Days);</div>
<div class="line"><span class="lineno">  197</span>            }</div>
<div class="line"><span class="lineno">  198</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">anchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248ab24e5e4bb4a288b0c2cc4128e611ca70">CommodityFutureConvention::AnchorType::LastWeekday</a>) {</div>
<div class="line"><span class="lineno">  199</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5">QuantExt::DateUtilities::lastWeekday</a>(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee">weekday</a>(), contractMonth, contractYear);</div>
<div class="line"><span class="lineno">  200</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  201</span>            QL_FAIL(<span class="stringliteral">&quot;Did not recognise the commodity future convention&#39;s anchor type&quot;</span>);</div>
<div class="line"><span class="lineno">  202</span>        }</div>
<div class="line"><span class="lineno">  203</span>        <span class="comment">// If expiry date is not a good business day, adjust it before applying the offset.</span></div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe">adjustBeforeOffset</a>()) {</div>
<div class="line"><span class="lineno">  205</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().adjust(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b">businessDayConvention</a>());</div>
<div class="line"><span class="lineno">  206</span>        }</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>        <span class="comment">// Apply offset adjustments if necessary. A negative integer indicates that we move forward that number of days.</span></div>
<div class="line"><span class="lineno">  209</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().advance(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, -<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614">offsetDays</a>(), Days);</div>
<div class="line"><span class="lineno">  210</span>    }</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">// If we want the option contract expiry, do the extra work here.</span></div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">if</span> (forOption &amp;&amp; <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85">optionContractFrequency</a>() == Weekly) {</div>
<div class="line"><span class="lineno">  214</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9">optionAnchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228aa0c74851a6e7bd6efd1bb0c4422b40d8">CommodityFutureConvention::OptionAnchorType::WeeklyDayOfTheWeek</a>,</div>
<div class="line"><span class="lineno">  215</span>                   <span class="stringliteral">&quot;Please change anchorType to WeeklyDayOfTheWeek for weekly contract expiries&quot;</span>);</div>
<div class="line"><span class="lineno">  216</span>        Date d(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.dayOfMonth(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.month(), <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.year());</div>
<div class="line"><span class="lineno">  217</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().adjust(d - d.weekday() + <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4">optionWeekday</a>(),</div>
<div class="line"><span class="lineno">  218</span>                                                     <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b">businessDayConvention</a>());</div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884">avoidProhibited</a>(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  220</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (forOption) {</div>
<div class="line"><span class="lineno">  221</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9">optionAnchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228a569a460fd57f5e86e237ad553750a3c7">CommodityFutureConvention::OptionAnchorType::DayOfMonth</a>) {</div>
<div class="line"><span class="lineno">  222</span>            <span class="keyword">auto</span> optionMonth = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.month();</div>
<div class="line"><span class="lineno">  223</span>            <span class="keyword">auto</span> optionYear = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.year();</div>
<div class="line"><span class="lineno">  224</span> </div>
<div class="line"><span class="lineno">  225</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() != 0) {</div>
<div class="line"><span class="lineno">  226</span>                Date newDate = Date(15, optionMonth, optionYear) - <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() * Months;</div>
<div class="line"><span class="lineno">  227</span>                optionMonth = newDate.month();</div>
<div class="line"><span class="lineno">  228</span>                optionYear = newDate.year();</div>
<div class="line"><span class="lineno">  229</span>            }</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>            <span class="keyword">auto</span> d = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a">optionExpiryDay</a>();</div>
<div class="line"><span class="lineno">  232</span>            Date last = Date::endOfMonth(Date(1, optionMonth, optionYear));</div>
<div class="line"><span class="lineno">  233</span>            <span class="keywordflow">if</span> (d &gt; <span class="keyword">static_cast&lt;</span>Natural<span class="keyword">&gt;</span>(last.dayOfMonth())) {</div>
<div class="line"><span class="lineno">  234</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = last;</div>
<div class="line"><span class="lineno">  235</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  236</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = Date(d, optionMonth, optionYear);</div>
<div class="line"><span class="lineno">  237</span>            }</div>
<div class="line"><span class="lineno">  238</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().adjust(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3">optionBusinessDayConvention</a>());</div>
<div class="line"><span class="lineno">  239</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9">optionAnchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228a78ff80492ce225aa6d37653494519cbe">CommodityFutureConvention::OptionAnchorType::BusinessDaysBefore</a>) {</div>
<div class="line"><span class="lineno">  240</span>            QL_REQUIRE(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() == 0 ||</div>
<div class="line"><span class="lineno">  241</span>                           <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491">expiryMonthLag</a>() == <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>(),</div>
<div class="line"><span class="lineno">  242</span>                       <span class="stringliteral">&quot;The expiry month lag &quot;</span></div>
<div class="line"><span class="lineno">  243</span>                           &lt;&lt; <span class="stringliteral">&quot;and the option expiry month lag should be the same if using option expiry offset days.&quot;</span>);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().advance(</div>
<div class="line"><span class="lineno">  246</span>                <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, -<span class="keyword">static_cast&lt;</span>Integer<span class="keyword">&gt;</span>(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5">optionExpiryOffset</a>()), Days);</div>
<div class="line"><span class="lineno">  247</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9">optionAnchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228a238b56a65c2469676ef3ece072a302e1">CommodityFutureConvention::OptionAnchorType::NthWeekday</a>) {</div>
<div class="line"><span class="lineno">  248</span>            <span class="keyword">auto</span> optionMonth = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.month();</div>
<div class="line"><span class="lineno">  249</span>            <span class="keyword">auto</span> optionYear = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.year();</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() != 0) {</div>
<div class="line"><span class="lineno">  252</span>                Date newDate = Date(15, optionMonth, optionYear) - <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() * Months;</div>
<div class="line"><span class="lineno">  253</span>                optionMonth = newDate.month();</div>
<div class="line"><span class="lineno">  254</span>                optionYear = newDate.year();</div>
<div class="line"><span class="lineno">  255</span>            }</div>
<div class="line"><span class="lineno">  256</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = Date::nthWeekday(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3">optionNth</a>(), <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4">optionWeekday</a>(), optionMonth, optionYear);</div>
<div class="line"><span class="lineno">  257</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().adjust(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3">optionBusinessDayConvention</a>());</div>
<div class="line"><span class="lineno">  258</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9">optionAnchorType</a>() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228ab24e5e4bb4a288b0c2cc4128e611ca70">CommodityFutureConvention::OptionAnchorType::LastWeekday</a>) {</div>
<div class="line"><span class="lineno">  259</span>            <span class="keyword">auto</span> optionMonth = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.month();</div>
<div class="line"><span class="lineno">  260</span>            <span class="keyword">auto</span> optionYear = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>.year();</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() != 0) {</div>
<div class="line"><span class="lineno">  263</span>                Date newDate = Date(15, optionMonth, optionYear) - <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">optionExpiryMonthLag</a>() * Months;</div>
<div class="line"><span class="lineno">  264</span>                optionMonth = newDate.month();</div>
<div class="line"><span class="lineno">  265</span>                optionYear = newDate.year();</div>
<div class="line"><span class="lineno">  266</span>            }</div>
<div class="line"><span class="lineno">  267</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_functionRef" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5">QuantExt::DateUtilities::lastWeekday</a>(<a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4">optionWeekday</a>(), optionMonth, optionYear);</div>
<div class="line"><span class="lineno">  268</span>            <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4">expiryCalendar</a>().adjust(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3">optionBusinessDayConvention</a>());</div>
<div class="line"><span class="lineno">  269</span>        }</div>
<div class="line"><span class="lineno">  270</span> </div>
<div class="line"><span class="lineno">  271</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884">avoidProhibited</a>(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  274</span>        <span class="comment">// If expiry date is one of the prohibited dates, move to preceding or following business day</span></div>
<div class="line"><span class="lineno">  275</span>        <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a> = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884">avoidProhibited</a>(<a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  276</span>    }</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>;</div>
<div class="line"><span class="lineno">  279</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a063ea598405aabf2d0fc24d75b90efc3"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3">ore::data::CommodityFutureConvention::optionBusinessDayConvention</a></div><div class="ttdeci">QuantLib::BusinessDayConvention optionBusinessDayConvention() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01582">conventions.hpp:1582</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a14dfd36a61211d6a86d626b051c8e9e5"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5">ore::data::CommodityFutureConvention::optionExpiryOffset</a></div><div class="ttdeci">QuantLib::Natural optionExpiryOffset() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01576">conventions.hpp:1576</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a171415d296a5667cd6468d74025005fe"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe">ore::data::CommodityFutureConvention::adjustBeforeOffset</a></div><div class="ttdeci">bool adjustBeforeOffset() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01574">conventions.hpp:1574</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a195ffc488761ef1bd3e56700dbe5faee"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee">ore::data::CommodityFutureConvention::weekday</a></div><div class="ttdeci">QuantLib::Weekday weekday() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01564">conventions.hpp:1564</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a1fbdfdc2fec2d9c9a36680b91b6c835e"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e">ore::data::CommodityFutureConvention::anchorType</a></div><div class="ttdeci">AnchorType anchorType() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01561">conventions.hpp:1561</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36388d1ac26722c387a0a040b0669248a238b56a65c2469676ef3ece072a302e1"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a238b56a65c2469676ef3ece072a302e1">ore::data::CommodityFutureConvention::AnchorType::NthWeekday</a></div><div class="ttdeci">@ NthWeekday</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36388d1ac26722c387a0a040b0669248a28293f48bb5dd0a8aacbcdcc554b7bcb"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a28293f48bb5dd0a8aacbcdcc554b7bcb">ore::data::CommodityFutureConvention::AnchorType::BusinessDaysAfter</a></div><div class="ttdeci">@ BusinessDaysAfter</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36388d1ac26722c387a0a040b0669248a569a460fd57f5e86e237ad553750a3c7"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a569a460fd57f5e86e237ad553750a3c7">ore::data::CommodityFutureConvention::AnchorType::DayOfMonth</a></div><div class="ttdeci">@ DayOfMonth</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36388d1ac26722c387a0a040b0669248a95f70742ffd00db2392e73a9f2334441"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248a95f70742ffd00db2392e73a9f2334441">ore::data::CommodityFutureConvention::AnchorType::CalendarDaysBefore</a></div><div class="ttdeci">@ CalendarDaysBefore</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36388d1ac26722c387a0a040b0669248aa0c74851a6e7bd6efd1bb0c4422b40d8"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248aa0c74851a6e7bd6efd1bb0c4422b40d8">ore::data::CommodityFutureConvention::AnchorType::WeeklyDayOfTheWeek</a></div><div class="ttdeci">@ WeeklyDayOfTheWeek</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a36388d1ac26722c387a0a040b0669248ab24e5e4bb4a288b0c2cc4128e611ca70"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a36388d1ac26722c387a0a040b0669248ab24e5e4bb4a288b0c2cc4128e611ca70">ore::data::CommodityFutureConvention::AnchorType::LastWeekday</a></div><div class="ttdeci">@ LastWeekday</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a369d26e2357b73c505d9c95d1ef6c228a238b56a65c2469676ef3ece072a302e1"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228a238b56a65c2469676ef3ece072a302e1">ore::data::CommodityFutureConvention::OptionAnchorType::NthWeekday</a></div><div class="ttdeci">@ NthWeekday</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a369d26e2357b73c505d9c95d1ef6c228a569a460fd57f5e86e237ad553750a3c7"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228a569a460fd57f5e86e237ad553750a3c7">ore::data::CommodityFutureConvention::OptionAnchorType::DayOfMonth</a></div><div class="ttdeci">@ DayOfMonth</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a369d26e2357b73c505d9c95d1ef6c228a78ff80492ce225aa6d37653494519cbe"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228a78ff80492ce225aa6d37653494519cbe">ore::data::CommodityFutureConvention::OptionAnchorType::BusinessDaysBefore</a></div><div class="ttdeci">@ BusinessDaysBefore</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a369d26e2357b73c505d9c95d1ef6c228aa0c74851a6e7bd6efd1bb0c4422b40d8"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228aa0c74851a6e7bd6efd1bb0c4422b40d8">ore::data::CommodityFutureConvention::OptionAnchorType::WeeklyDayOfTheWeek</a></div><div class="ttdeci">@ WeeklyDayOfTheWeek</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a369d26e2357b73c505d9c95d1ef6c228ab24e5e4bb4a288b0c2cc4128e611ca70"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a369d26e2357b73c505d9c95d1ef6c228ab24e5e4bb4a288b0c2cc4128e611ca70">ore::data::CommodityFutureConvention::OptionAnchorType::LastWeekday</a></div><div class="ttdeci">@ LastWeekday</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a4dffd4cf5f19c5a40d615b19a85cc14b"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b">ore::data::CommodityFutureConvention::businessDayConvention</a></div><div class="ttdeci">QuantLib::BusinessDayConvention businessDayConvention() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01573">conventions.hpp:1573</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a53ee29a10eaccc255f4027e71d1e87e5"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5">ore::data::CommodityFutureConvention::businessDaysAfter</a></div><div class="ttdeci">QuantLib::Integer businessDaysAfter() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01566">conventions.hpp:1566</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a632d4b251c9ef3d19a8223576869cb85"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85">ore::data::CommodityFutureConvention::optionContractFrequency</a></div><div class="ttdeci">QuantLib::Frequency optionContractFrequency() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01593">conventions.hpp:1593</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a6551258ea86b332cfc39c29b73caa6c9"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9">ore::data::CommodityFutureConvention::optionAnchorType</a></div><div class="ttdeci">OptionAnchorType optionAnchorType() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01594">conventions.hpp:1594</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a666db594084b67eb937791f7fc4187e3"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3">ore::data::CommodityFutureConvention::optionNth</a></div><div class="ttdeci">QuantLib::Natural optionNth() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01595">conventions.hpp:1595</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a72711cf8fc5afdff043031209bac1ac9"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9">ore::data::CommodityFutureConvention::optionExpiryMonthLag</a></div><div class="ttdeci">QuantLib::Size optionExpiryMonthLag() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01580">conventions.hpp:1580</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_aa0a3e469aa723d37c93a8966ee2be43a"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a">ore::data::CommodityFutureConvention::optionExpiryDay</a></div><div class="ttdeci">QuantLib::Natural optionExpiryDay() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01581">conventions.hpp:1581</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_aa2fb5f0d67e1638c4b0ef9e8c9e27a2d"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d">ore::data::CommodityFutureConvention::dayOfMonth</a></div><div class="ttdeci">QuantLib::Natural dayOfMonth() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01562">conventions.hpp:1562</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_ac1f9e5eff8e4511271d9438f4f728449"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449">ore::data::CommodityFutureConvention::validContractMonths</a></div><div class="ttdeci">const std::set&lt; QuantLib::Month &gt; &amp; validContractMonths() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01598">conventions.hpp:1598</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_acdc04d3c6ad6cf3b8746ec4c61b00614"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614">ore::data::CommodityFutureConvention::offsetDays</a></div><div class="ttdeci">QuantLib::Integer offsetDays() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01572">conventions.hpp:1572</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_acff9c28103e8f123a1bfe8063d95f6a4"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4">ore::data::CommodityFutureConvention::optionWeekday</a></div><div class="ttdeci">QuantLib::Weekday optionWeekday() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01596">conventions.hpp:1596</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_ad8aa8b81c7518ee5ee59572cb69d68e8"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8">ore::data::CommodityFutureConvention::nth</a></div><div class="ttdeci">QuantLib::Natural nth() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01563">conventions.hpp:1563</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_ae97f7f2e251592629bbfba149523ce93"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93">ore::data::CommodityFutureConvention::calendarDaysBefore</a></div><div class="ttdeci">QuantLib::Natural calendarDaysBefore() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01565">conventions.hpp:1565</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_aff89e1979a176b451fd058c9816d3491"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491">ore::data::CommodityFutureConvention::expiryMonthLag</a></div><div class="ttdeci">QuantLib::Size expiryMonthLag() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01570">conventions.hpp:1570</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_based_future_expiry_html_a5e62d1af433ac8508e0ee1c7e9570884"><div class="ttname"><a href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884">ore::data::ConventionsBasedFutureExpiry::avoidProhibited</a></div><div class="ttdeci">QuantLib::Date avoidProhibited(const QuantLib::Date &amp;expiry, bool forOption) const</div><div class="ttdoc">Account for prohibited expiries.</div><div class="ttdef"><b>Definition:</b> <a href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00312">conventionsbasedfutureexpiry.cpp:312</a></div></div>
<div class="ttc" id="anamespace_quant_ext_1_1_date_utilities_html_aa27a24248cdd4c654a2ac8391b40a7f5"><div class="ttname"><a href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5">QuantExt::DateUtilities::lastWeekday</a></div><div class="ttdeci">Date lastWeekday(Weekday dayOfWeek, Month m, Year y)</div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_cgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_cgraph">
<area shape="rect" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="17,671,74,697"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe" title=" " alt="" coords="157,5,355,45"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e" title=" " alt="" coords="164,69,348,109"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884" title="Account for prohibited expiries." alt="" coords="201,134,311,159"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b" title=" " alt="" coords="141,184,371,224"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5" title=" " alt="" coords="155,248,357,288"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93" title=" " alt="" coords="151,312,361,352"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce" title=" " alt="" coords="155,376,357,416"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d" title=" " alt="" coords="164,440,348,480"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4" title=" " alt="" coords="164,504,348,544"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491" title=" " alt="" coords="163,568,349,608"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5" title=" " alt="" coords="179,632,333,672"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8" title=" " alt="" coords="164,696,348,736"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614" title=" " alt="" coords="164,760,348,800"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9" title=" " alt="" coords="157,824,355,864"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3" title=" " alt="" coords="122,888,390,928"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85" title=" " alt="" coords="137,952,375,992"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a" title=" " alt="" coords="162,1016,350,1056"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9" title=" " alt="" coords="145,1080,367,1120"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5" title=" " alt="" coords="157,1144,355,1184"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3" title=" " alt="" coords="164,1208,348,1248"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4" title=" " alt="" coords="164,1272,348,1312"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449" title=" " alt="" coords="151,1336,361,1376"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee" title=" " alt="" coords="164,1400,348,1440"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258" title=" " alt="" coords="444,95,628,135"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f" title=" " alt="" coords="438,159,634,199"/>
</map>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_icgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_icgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a5f51eb3c35521d6da9190729a50dee6b_icgraph">
<area shape="rect" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="609,55,667,80"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5e62d1af433ac8508e0ee1c7e9570884" title="Account for prohibited expiries." alt="" coords="452,5,561,31"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28" title=" " alt="" coords="459,55,555,80"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa" title=" " alt="" coords="282,80,366,105"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7012a5245486e866704b219d52ea7df8" title=" " alt="" coords="465,156,549,181"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7dcbb077a2236bb3e11306e8ca392a36" title=" " alt="" coords="244,31,404,56"/>
<area shape="rect" href="test_2conventionsbasedfutureexpiry_8cpp.html#afeaab8386141406f310f9e2ef058b56c" title=" " alt="" coords="5,80,196,105"/>
</map>
</div>

</div>
</div>
<a id="a0c0c0ad18321047c5d9ec3151bc0ed80" name="a0c0c0ad18321047c5d9ec3151bc0ed80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0c0ad18321047c5d9ec3151bc0ed80">&#9670;&#160;</a></span>nextExpiry() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date nextExpiry </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>referenceDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>forOption</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Do the next expiry work. </p>

</div>
</div>
<a id="a5e62d1af433ac8508e0ee1c7e9570884" name="a5e62d1af433ac8508e0ee1c7e9570884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e62d1af433ac8508e0ee1c7e9570884">&#9670;&#160;</a></span>avoidProhibited()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Date avoidProhibited </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>expiry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>forOption</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Account for prohibited expiries. </p>

<p class="definition">Definition at line <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html#l00312">312</a> of file <a class="el" href="ored_2utilities_2conventionsbasedfutureexpiry_8cpp_source.html">conventionsbasedfutureexpiry.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  312</span>                                                                                           {</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    <span class="comment">// If expiry date is one of the prohibited dates, move to preceding or following business day.</span></div>
<div class="line"><span class="lineno">  315</span>    <span class="keyword">using </span>PE = CommodityFutureConvention::ProhibitedExpiry;</div>
<div class="line"><span class="lineno">  316</span>    Date result = <a class="code hl_function" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b">expiry</a>;</div>
<div class="line"><span class="lineno">  317</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; pes = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f">prohibitedExpiries</a>();</div>
<div class="line"><span class="lineno">  318</span>    <span class="keyword">auto</span> it = pes.find(PE(result));</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>    <span class="keywordflow">while</span> (it != pes.end()) {</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>        <span class="comment">// If not relevant, exit.</span></div>
<div class="line"><span class="lineno">  323</span>        <span class="keywordflow">if</span> ((!forOption &amp;&amp; !it-&gt;forFuture()) || (forOption &amp;&amp; !it-&gt;forOption()))</div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>        <span class="keyword">auto</span> bdc = !forOption ? it-&gt;futureBdc() : it-&gt;optionBdc();</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">if</span> (bdc == Preceding || bdc == ModifiedPreceding) {</div>
<div class="line"><span class="lineno">  329</span>            result = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258">calendar</a>().advance(result, -1, Days, bdc);</div>
<div class="line"><span class="lineno">  330</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bdc == Following || bdc == ModifiedFollowing) {</div>
<div class="line"><span class="lineno">  331</span>            result = <a class="code hl_variable" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a8568e73675dbcdb8b3d8fbb05370a025">convention_</a>.<a class="code hl_function" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258">calendar</a>().advance(result, 1, Days, bdc);</div>
<div class="line"><span class="lineno">  332</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  333</span>            QL_FAIL(<span class="stringliteral">&quot;Convention &quot;</span> &lt;&lt; bdc &lt;&lt; <span class="stringliteral">&quot; associated with prohibited expiry &quot;</span> &lt;&lt; io::iso_date(result)</div>
<div class="line"><span class="lineno">  334</span>                                  &lt;&lt; <span class="stringliteral">&quot; is not supported.&quot;</span>);</div>
<div class="line"><span class="lineno">  335</span>        }</div>
<div class="line"><span class="lineno">  336</span> </div>
<div class="line"><span class="lineno">  337</span>        it = pes.find(PE(result));</div>
<div class="line"><span class="lineno">  338</span>    }</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno">  341</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a78d19d9a8d0072dadaf399d3e6ee1258"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258">ore::data::CommodityFutureConvention::calendar</a></div><div class="ttdeci">const QuantLib::Calendar &amp; calendar() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01568">conventions.hpp:1568</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_commodity_future_convention_html_a82c3367baabfd8339aebc8b9d61e857f"><div class="ttname"><a href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f">ore::data::CommodityFutureConvention::prohibitedExpiries</a></div><div class="ttdeci">const std::set&lt; ProhibitedExpiry &gt; &amp; prohibitedExpiries() const</div><div class="ttdef"><b>Definition:</b> <a href="conventions_8hpp_source.html#l01577">conventions.hpp:1577</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_cgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_cgraph">
<area shape="rect" title="Account for prohibited expiries." alt="" coords="5,685,115,710"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a78d19d9a8d0072dadaf399d3e6ee1258" title=" " alt="" coords="169,596,353,636"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="232,685,289,710"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a82c3367baabfd8339aebc8b9d61e857f" title=" " alt="" coords="163,735,359,775"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a171415d296a5667cd6468d74025005fe" title=" " alt="" coords="441,5,640,45"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a1fbdfdc2fec2d9c9a36680b91b6c835e" title=" " alt="" coords="449,69,633,109"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a4dffd4cf5f19c5a40d615b19a85cc14b" title=" " alt="" coords="425,133,656,173"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a53ee29a10eaccc255f4027e71d1e87e5" title=" " alt="" coords="439,197,642,237"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ae97f7f2e251592629bbfba149523ce93" title=" " alt="" coords="436,261,645,301"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a60ca1392f0826c87e624985e78c5c7ce" title=" " alt="" coords="440,325,641,365"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa2fb5f0d67e1638c4b0ef9e8c9e27a2d" title=" " alt="" coords="449,389,633,429"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a36ab1d6a60a0fb456d4f0370c59481c4" title=" " alt="" coords="449,453,633,493"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aff89e1979a176b451fd058c9816d3491" title=" " alt="" coords="448,517,633,557"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_date_utilities.html#aa27a24248cdd4c654a2ac8391b40a7f5" title=" " alt="" coords="463,581,618,621"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ad8aa8b81c7518ee5ee59572cb69d68e8" title=" " alt="" coords="449,645,633,685"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acdc04d3c6ad6cf3b8746ec4c61b00614" title=" " alt="" coords="449,709,633,749"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a6551258ea86b332cfc39c29b73caa6c9" title=" " alt="" coords="442,773,639,813"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a063ea598405aabf2d0fc24d75b90efc3" title=" " alt="" coords="407,837,675,877"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a632d4b251c9ef3d19a8223576869cb85" title=" " alt="" coords="421,901,660,941"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#aa0a3e469aa723d37c93a8966ee2be43a" title=" " alt="" coords="447,965,635,1005"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a72711cf8fc5afdff043031209bac1ac9" title=" " alt="" coords="429,1029,652,1069"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a14dfd36a61211d6a86d626b051c8e9e5" title=" " alt="" coords="441,1093,640,1133"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a666db594084b67eb937791f7fc4187e3" title=" " alt="" coords="449,1157,633,1197"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#acff9c28103e8f123a1bfe8063d95f6a4" title=" " alt="" coords="449,1221,633,1261"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#ac1f9e5eff8e4511271d9438f4f728449" title=" " alt="" coords="435,1285,646,1325"/>
<area shape="rect" href="classore_1_1data_1_1_commodity_future_convention.html#a195ffc488761ef1bd3e56700dbe5faee" title=" " alt="" coords="449,1349,633,1389"/>
</map>
</div>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_icgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_icgraph" id="aclassore_1_1data_1_1_conventions_based_future_expiry_a5e62d1af433ac8508e0ee1c7e9570884_icgraph">
<area shape="rect" title="Account for prohibited expiries." alt="" coords="701,80,811,105"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a5f51eb3c35521d6da9190729a50dee6b" title="Given a contractMonth, a contractYear and conventions, calculate the contract expiry date." alt="" coords="596,80,653,105"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a9d7220cd76b1667b4165b5f206c3bf28" title=" " alt="" coords="452,29,548,55"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7fca9325c213578c4b07e8e8de5a7dfa" title=" " alt="" coords="282,55,366,80"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7012a5245486e866704b219d52ea7df8" title=" " alt="" coords="458,131,542,156"/>
<area shape="rect" href="classore_1_1data_1_1_conventions_based_future_expiry.html#a7dcbb077a2236bb3e11306e8ca392a36" title=" " alt="" coords="244,5,404,31"/>
<area shape="rect" href="test_2conventionsbasedfutureexpiry_8cpp.html#afeaab8386141406f310f9e2ef058b56c" title=" " alt="" coords="5,55,196,80"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8568e73675dbcdb8b3d8fbb05370a025" name="a8568e73675dbcdb8b3d8fbb05370a025"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8568e73675dbcdb8b3d8fbb05370a025">&#9670;&#160;</a></span>convention_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_commodity_future_convention.html">CommodityFutureConvention</a> convention_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html#l00061">61</a> of file <a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html">conventionsbasedfutureexpiry.hpp</a>.</p>

</div>
</div>
<a id="abe17f7f391751847521d6cb4155a9770" name="abe17f7f391751847521d6cb4155a9770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe17f7f391751847521d6cb4155a9770">&#9670;&#160;</a></span>maxIterations_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Size maxIterations_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html#l00062">62</a> of file <a class="el" href="conventionsbasedfutureexpiry_8hpp_source.html">conventionsbasedfutureexpiry.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
