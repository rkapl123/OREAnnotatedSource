<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>OREData: InfJyBuilder Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oredextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-data@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.7</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceore.html">ore</a></li><li class="navelem"><a class="el" href="namespaceore_1_1data.html">data</a></li><li class="navelem"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html">InfJyBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classore_1_1data_1_1_inf_jy_builder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">InfJyBuilder Class Reference<div class="ingroups"><a class="el" href="group__models.html">Models</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="infjybuilder_8hpp_source.html">ored/model/inflation/infjybuilder.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for InfJyBuilder:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder__inherit__graph.png" border="0" usemap="#a_inf_jy_builder_inherit__map" alt="Inheritance graph"/></div>
<map name="_inf_jy_builder_inherit__map" id="a_inf_jy_builder_inherit__map">
<area shape="rect" title=" " alt="" coords="5,285,192,1199"/>
<area shape="rect" href="classore_1_1data_1_1_model_builder.html" title=" " alt="" coords="17,131,180,237"/>
<area shape="rect" title=" " alt="" coords="55,5,143,83"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for InfJyBuilder:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder__coll__graph.png" border="0" usemap="#a_inf_jy_builder_coll__map" alt="Collaboration graph"/></div>
<map name="_inf_jy_builder_coll__map" id="a_inf_jy_builder_coll__map">
<area shape="rect" title=" " alt="" coords="1341,513,1528,1148"/>
<area shape="rect" href="classore_1_1data_1_1_model_builder.html" title=" " alt="" coords="5,315,168,421"/>
<area shape="rect" title=" " alt="" coords="43,153,131,230"/>
<area shape="rect" title=" " alt="" coords="1450,315,1627,421"/>
<area shape="rect" title=" " alt="" coords="1239,145,1385,237"/>
<area shape="rect" title="STL class." alt="" coords="1449,153,1535,230"/>
<area shape="rect" title=" " alt="" coords="916,329,1020,407"/>
<area shape="rect" title=" " alt="" coords="1651,329,1818,407"/>
<area shape="rect" title=" " alt="" coords="1473,5,1511,83"/>
<area shape="rect" title=" " alt="" coords="345,322,492,414"/>
<area shape="rect" title=" " alt="" coords="516,322,663,414"/>
<area shape="rect" title=" " alt="" coords="687,322,892,414"/>
<area shape="rect" title=" " alt="" coords="393,153,439,230"/>
<area shape="rect" title=" " alt="" coords="1044,322,1255,414"/>
<area shape="rect" title=" " alt="" coords="1279,322,1425,414"/>
<area shape="rect" title=" " alt="" coords="1843,329,2040,407"/>
<area shape="rect" title=" " alt="" coords="1927,153,1990,230"/>
<area shape="rect" title="STL class." alt="" coords="2406,329,2461,407"/>
<area shape="rect" title="STL class." alt="" coords="2363,153,2504,230"/>
<area shape="rect" title=" " alt="" coords="2064,322,2211,414"/>
<area shape="rect" title=" " alt="" coords="2235,322,2381,414"/>
<area shape="rect" title=" " alt="" coords="1839,153,1887,230"/>
<area shape="rect" title=" " alt="" coords="2485,322,2651,414"/>
<area shape="rect" title=" " alt="" coords="2684,329,2737,407"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ade48cc2e594ab6101da51172394368d7"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> = std::vector&lt; boost::shared_ptr&lt; QuantLib::CalibrationHelper &gt; &gt;</td></tr>
<tr class="separator:ade48cc2e594ab6101da51172394368d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a77ef4b995a50b74ebba1339685f47995"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995">InfJyBuilder</a> (const boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_market.html">Market</a> &gt; &amp;market, const boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_inf_jy_data.html">InfJyData</a> &gt; &amp;data, const std::string &amp;configuration=<a class="el" href="classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a>, const std::string &amp;referenceCalibrationGrid=&quot;&quot;)</td></tr>
<tr class="separator:a77ef4b995a50b74ebba1339685f47995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Inspectors</div></td></tr>
<tr class="memitem:ad22960d15d32d9e5be44c045744d8a3a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a">inflationIndex</a> () const</td></tr>
<tr class="separator:ad22960d15d32d9e5be44c045744d8a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f251a3eebd133fa6e334472ae80af8b"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_inf_jy_parameterization.html">QuantExt::InfJyParameterization</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a4f251a3eebd133fa6e334472ae80af8b">parameterization</a> () const</td></tr>
<tr class="separator:a4f251a3eebd133fa6e334472ae80af8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2157271dc05daad8fe87a600811b9b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#af2157271dc05daad8fe87a600811b9b4">realRateBasket</a> () const</td></tr>
<tr class="separator:af2157271dc05daad8fe87a600811b9b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121034627f5a9731241eb3e88c764269"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a121034627f5a9731241eb3e88c764269">indexBasket</a> () const</td></tr>
<tr class="separator:a121034627f5a9731241eb3e88c764269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classore_1_1data_1_1_model_builder"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classore_1_1data_1_1_model_builder')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classore_1_1data_1_1_model_builder.html">ModelBuilder</a></td></tr>
<tr class="memitem:a2a0d41a02184bfe265a53cb6b6a1def8 inherit pub_methods_classore_1_1data_1_1_model_builder"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_model_builder.html#a2a0d41a02184bfe265a53cb6b6a1def8">recalibrate</a> () const</td></tr>
<tr class="memdesc:a2a0d41a02184bfe265a53cb6b6a1def8 inherit pub_methods_classore_1_1data_1_1_model_builder"><td class="mdescLeft">&#160;</td><td class="mdescRight">recalibrate model, if necessary  <a href="classore_1_1data_1_1_model_builder.html#a2a0d41a02184bfe265a53cb6b6a1def8">More...</a><br /></td></tr>
<tr class="separator:a2a0d41a02184bfe265a53cb6b6a1def8 inherit pub_methods_classore_1_1data_1_1_model_builder"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">LazyObject interface</div></td></tr>
<tr class="memitem:a1127cccc9668a02247dc139d27121708"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708">performCalculations</a> () const override</td></tr>
<tr class="separator:a1127cccc9668a02247dc139d27121708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935e1c16b02ca6dbe5e1e5f32882b2c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7">buildCalibrationBaskets</a> () const</td></tr>
<tr class="memdesc:a935e1c16b02ca6dbe5e1e5f32882b2c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build any calibration baskets requested by the configuration i.e. via the <code>data_</code> member.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7">More...</a><br /></td></tr>
<tr class="separator:a935e1c16b02ca6dbe5e1e5f32882b2c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04274cbe5a4625db825e42c300eef575"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a> (const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries, bool forRealRateReversion=false) const</td></tr>
<tr class="memdesc:a04274cbe5a4625db825e42c300eef575"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the calibration basket.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">More...</a><br /></td></tr>
<tr class="separator:a04274cbe5a4625db825e42c300eef575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c1e8a74b5a706e29821a070c83907d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d">buildCpiCapFloorBasket</a> (const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries) const</td></tr>
<tr class="memdesc:a69c1e8a74b5a706e29821a070c83907d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a CPI cap floor calibration basket.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d">More...</a><br /></td></tr>
<tr class="separator:a69c1e8a74b5a706e29821a070c83907d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62a24690024d3d23ae7d3f880eef8ef2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2">buildYoYCapFloorBasket</a> (const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries) const</td></tr>
<tr class="memdesc:a62a24690024d3d23ae7d3f880eef8ef2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a YoY cap floor calibration basket.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2">More...</a><br /></td></tr>
<tr class="separator:a62a24690024d3d23ae7d3f880eef8ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133d1dc488d0f63362752706f448007e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e">buildYoYSwapBasket</a> (const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries, bool forRealRateReversion=false) const</td></tr>
<tr class="memdesc:a133d1dc488d0f63362752706f448007e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a YoY swap calibration basket.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e">More...</a><br /></td></tr>
<tr class="separator:a133d1dc488d0f63362752706f448007e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc0c8081ffc221edaa8f90c065a2747"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747">calibrationBasket</a> (const std::string &amp;parameter) const</td></tr>
<tr class="memdesc:a3bc0c8081ffc221edaa8f90c065a2747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find calibration basket with parameter value equal to <code>parameter</code>.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747">More...</a><br /></td></tr>
<tr class="separator:a3bc0c8081ffc221edaa8f90c065a2747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38891d2ad44f9b6e02730f8d10b58d8"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_lgm1f_parametrization.html">QuantExt::Lgm1fParametrization</a>&lt; ZeroInflationTermStructure &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ac38891d2ad44f9b6e02730f8d10b58d8">createRealRateParam</a> () const</td></tr>
<tr class="memdesc:ac38891d2ad44f9b6e02730f8d10b58d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the real rate parameterisation.  <a href="classore_1_1data_1_1_inf_jy_builder.html#ac38891d2ad44f9b6e02730f8d10b58d8">More...</a><br /></td></tr>
<tr class="separator:ac38891d2ad44f9b6e02730f8d10b58d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb4b90a6643bcae142fa5f3ed5dc0c6"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_fx_bs_parametrization.html">QuantExt::FxBsParametrization</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#aaeb4b90a6643bcae142fa5f3ed5dc0c6">createIndexParam</a> () const</td></tr>
<tr class="memdesc:aaeb4b90a6643bcae142fa5f3ed5dc0c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the inflation index parameterisation.  <a href="classore_1_1data_1_1_inf_jy_builder.html#aaeb4b90a6643bcae142fa5f3ed5dc0c6">More...</a><br /></td></tr>
<tr class="separator:aaeb4b90a6643bcae142fa5f3ed5dc0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc7000ad61c727a1c92edf461dfeda9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e">setupParams</a> (const <a class="el" href="classore_1_1data_1_1_model_parameter.html">ModelParameter</a> &amp;param, QuantLib::Array &amp;times, QuantLib::Array &amp;values, const QuantLib::Array &amp;expiries, const std::string &amp;paramName) const</td></tr>
<tr class="separator:abc7000ad61c727a1c92edf461dfeda9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7b35fae386b8e18ed5b7a4bbe99cea"><td class="memItemLeft" align="right" valign="top">std::vector&lt; QuantLib::Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea">referenceCalibrationDates</a> () const</td></tr>
<tr class="memdesc:acc7b35fae386b8e18ed5b7a4bbe99cea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the reference calibration dates.  <a href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea">More...</a><br /></td></tr>
<tr class="separator:acc7b35fae386b8e18ed5b7a4bbe99cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a653cb2f17648c48732f61cf3ceb947fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a653cb2f17648c48732f61cf3ceb947fb">initialiseMarket</a> ()</td></tr>
<tr class="memdesc:a653cb2f17648c48732f61cf3ceb947fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to initialise market data members that may be needed for building calibration instruments.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a653cb2f17648c48732f61cf3ceb947fb">More...</a><br /></td></tr>
<tr class="separator:a653cb2f17648c48732f61cf3ceb947fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963ba81fda2b78c9565c4bbd02cd3504"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504">pricesChanged</a> (bool updateCache) const</td></tr>
<tr class="separator:a963ba81fda2b78c9565c4bbd02cd3504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ab42808dfdb4cbc27855eae7f89d785"><td class="memItemLeft" align="right" valign="top">QuantLib::Real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785">marketPrice</a> (const boost::shared_ptr&lt; QuantLib::CalibrationHelper &gt; &amp;<a class="elRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>) const</td></tr>
<tr class="memdesc:a0ab42808dfdb4cbc27855eae7f89d785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the market value of the given calibration helper.  <a href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785">More...</a><br /></td></tr>
<tr class="separator:a0ab42808dfdb4cbc27855eae7f89d785"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
ModelBuilder interface</h2></td></tr>
<tr class="memitem:a82226e669d4e6cd7376d1423c5b60077"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_market.html">Market</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a></td></tr>
<tr class="separator:a82226e669d4e6cd7376d1423c5b60077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4b08299a79a3b3b4d4eaad5bd28e99"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a></td></tr>
<tr class="separator:a0a4b08299a79a3b3b4d4eaad5bd28e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adafe7cfdf7d178aa1c949a02759b8fa5"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_inf_jy_data.html">InfJyData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a></td></tr>
<tr class="separator:adafe7cfdf7d178aa1c949a02759b8fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bc17d8c194cab073236cd2e1f224404"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a0bc17d8c194cab073236cd2e1f224404">referenceCalibrationGrid_</a></td></tr>
<tr class="separator:a0bc17d8c194cab073236cd2e1f224404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a5d2b5cf2cd645e147c6b898ec6483"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_inf_jy_parameterization.html">QuantExt::InfJyParameterization</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a72a5d2b5cf2cd645e147c6b898ec6483">parameterization_</a></td></tr>
<tr class="separator:a72a5d2b5cf2cd645e147c6b898ec6483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d6d3b4f4273e20b791c05b53261ad2"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_market_observer.html">MarketObserver</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a></td></tr>
<tr class="separator:a53d6d3b4f4273e20b791c05b53261ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca075a069cbdaef300ed3c33643cbc7"><td class="memItemLeft" align="right" valign="top">Handle&lt; YieldTermStructure &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a></td></tr>
<tr class="separator:a8ca075a069cbdaef300ed3c33643cbc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b4d7e0553841f69d5f75f3d3451a023"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a></td></tr>
<tr class="separator:a3b4d7e0553841f69d5f75f3d3451a023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3cf0f8fb1df1e41b5ffa3465ce7d6c"><td class="memItemLeft" align="right" valign="top">QuantLib::Handle&lt; QuantLib::CPIVolatilitySurface &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">cpiVolatility_</a></td></tr>
<tr class="separator:afd3cf0f8fb1df1e41b5ffa3465ce7d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1a37433919dbd599fcb9b992256145"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; QuantLib::YoYInflationIndex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a></td></tr>
<tr class="separator:afe1a37433919dbd599fcb9b992256145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4c56de13c681c63fe9a5d1b0a65387"><td class="memItemLeft" align="right" valign="top">QuantLib::Handle&lt; QuantLib::YoYOptionletVolatilitySurface &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a></td></tr>
<tr class="separator:a2e4c56de13c681c63fe9a5d1b0a65387"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3eda0b5404f3ff116648f3ba963630"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a6c3eda0b5404f3ff116648f3ba963630">forceCalibration_</a> = false</td></tr>
<tr class="separator:a6c3eda0b5404f3ff116648f3ba963630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02893862c9291857eacb13b282763a19"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a></td></tr>
<tr class="separator:a02893862c9291857eacb13b282763a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0aba3b464ef608c3d87b3119c0ff4b5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a></td></tr>
<tr class="separator:ac0aba3b464ef608c3d87b3119c0ff4b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72eab70098c362118240f7f399929ae"><td class="memItemLeft" align="right" valign="top">QuantLib::Array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">rrInstExpiries_</a></td></tr>
<tr class="separator:ae72eab70098c362118240f7f399929ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f41b27b8a702a1e17ce9f1dcc84420e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a></td></tr>
<tr class="separator:a9f41b27b8a702a1e17ce9f1dcc84420e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85c4827699d9287d8d2f19f48f4a9d4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a></td></tr>
<tr class="separator:af85c4827699d9287d8d2f19f48f4a9d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a558282c73c546091441cbc15b68a7"><td class="memItemLeft" align="right" valign="top">QuantLib::Array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ac0a558282c73c546091441cbc15b68a7">indexInstExpiries_</a></td></tr>
<tr class="separator:ac0a558282c73c546091441cbc15b68a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef97893ccf18dc74bd1d845d0fde38b5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; QuantLib::Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">priceCache_</a></td></tr>
<tr class="memdesc:aef97893ccf18dc74bd1d845d0fde38b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache the prices of all of the active calibration helper instruments.  <a href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">More...</a><br /></td></tr>
<tr class="separator:aef97893ccf18dc74bd1d845d0fde38b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e592aed9dc92dd0235530f6c6530fe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a0e592aed9dc92dd0235530f6c6530fe7">forceRecalculate</a> () override</td></tr>
<tr class="memdesc:a0e592aed9dc92dd0235530f6c6530fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">force recalibration of model  <a href="classore_1_1data_1_1_inf_jy_builder.html#a0e592aed9dc92dd0235530f6c6530fe7">More...</a><br /></td></tr>
<tr class="separator:a0e592aed9dc92dd0235530f6c6530fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83cbd1c07f17f2f51faea02f40eeaac9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9">requiresRecalibration</a> () const override</td></tr>
<tr class="memdesc:a83cbd1c07f17f2f51faea02f40eeaac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">if false is returned, the model does not require a recalibration  <a href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9">More...</a><br /></td></tr>
<tr class="separator:a83cbd1c07f17f2f51faea02f40eeaac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Builder for a Jarrow Yildrim inflation model component</p>
<p>This class is a utility to turn a Jarrow Yildrim inflation model component description into an inflation model parameterization which can be used to instantiate a CrossAssetModel. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00042">42</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ade48cc2e594ab6101da51172394368d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade48cc2e594ab6101da51172394368d7">&#9670;&nbsp;</a></span>Helpers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> =  std::vector&lt;boost::shared_ptr&lt;QuantLib::CalibrationHelper&gt; &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00056">56</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a77ef4b995a50b74ebba1339685f47995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ef4b995a50b74ebba1339685f47995">&#9670;&nbsp;</a></span>InfJyBuilder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html">InfJyBuilder</a> </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_market.html">Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_inf_jy_data.html">InfJyData</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>configuration</em> = <code><a class="el" href="classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>referenceCalibrationGrid</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">market</td><td><a class="el" href="classore_1_1data_1_1_market.html" title="Market.">Market</a> object </td></tr>
    <tr><td class="paramname">data</td><td>Jarrow Yildrim inflation model description </td></tr>
    <tr><td class="paramname">configuration</td><td><a class="el" href="classore_1_1data_1_1_market.html" title="Market.">Market</a> configuration to use </td></tr>
    <tr><td class="paramname">referenceCalibrationGrid</td><td>The reference calibration grid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00076">76</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    : <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a>(market),</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a>(configuration),</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>(data),</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0bc17d8c194cab073236cd2e1f224404">referenceCalibrationGrid_</a>(referenceCalibrationGrid),</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>(boost::make_shared&lt;MarketObserver&gt;()),</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>(*<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a>-&gt;zeroInflationIndex(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a>)) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;InfJyBuilder: building model for inflation index &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index());</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// Get rate curve</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a>-&gt;discountCurve(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;currency().code(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Register with market observables except volatilities</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>-&gt;registerWith(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>-&gt;registerWith(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a653cb2f17648c48732f61cf3ceb947fb">initialiseMarket</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// Register the model builder with the market observer</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    registerWith(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Notify observers of all market data changes, not only when not calculated</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    alwaysForwardNotifications();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// Build the calibration instruments</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7">buildCalibrationBaskets</a>();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Create the JY parameterisation.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a72a5d2b5cf2cd645e147c6b898ec6483">parameterization_</a> = boost::make_shared&lt;QuantExt::InfJyParameterization&gt;(</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac38891d2ad44f9b6e02730f8d10b58d8">createRealRateParam</a>(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#aaeb4b90a6643bcae142fa5f3ed5dc0c6">createIndexParam</a>(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a77ef4b995a50b74ebba1339685f47995_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a77ef4b995a50b74ebba1339685f47995_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a77ef4b995a50b74ebba1339685f47995_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a77ef4b995a50b74ebba1339685f47995_cgraph">
<area shape="rect" title=" " alt="" coords="5,813,93,840"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="141,585,300,612"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#aaeb4b90a6643bcae142fa5f3ed5dc0c6" title="Create the inflation index parameterisation." alt="" coords="157,763,284,789"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ac38891d2ad44f9b6e02730f8d10b58d8" title="Create the real rate parameterisation." alt="" coords="146,864,295,891"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a653cb2f17648c48732f61cf3ceb947fb" title="Attempt to initialise market data members that may be needed for building calibration instruments." alt="" coords="166,915,275,941"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="371,443,522,469"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="597,625,773,666"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747" title="Find calibration basket with parameter value equal to parameter." alt="" coords="385,611,508,637"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="604,224,765,251"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="827,443,1009,485"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="601,341,768,368"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="611,392,758,419"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a644718bb2fb240de962dc3c9a1fdf0dc" title="Returns true if the calibration basket is empty." alt="" coords="593,494,776,535"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#aa525cac0662eacaed44a94894b9a002a" title=" " alt="" coords="593,559,776,601"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="826,107,1010,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="879,224,957,251"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="869,56,967,83"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="871,341,965,368"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="837,5,999,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="833,392,1003,419"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="853,173,983,200"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="1105,199,1147,225"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="1060,385,1192,426"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="824,275,1012,317"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e" title=" " alt="" coords="397,763,496,789"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a23131baceb8e12f265f04d3d772fa628" title=" " alt="" coords="597,821,773,862"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a8df044e9f3b4bd3e3e5c855a7f84adbb" title=" " alt="" coords="597,690,773,731"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#adaf95a566e294a0739abae733b5475ee" title=" " alt="" coords="597,755,773,797"/>
<area shape="rect" href="classore_1_1data_1_1_reversion_parameter.html#a8c5dd13b5a108105c52d850a097f93c5" title=" " alt="" coords="348,915,545,957"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_parameter.html#a24ed2d5eca36f983090654744009e773" title=" " alt="" coords="351,981,542,1022"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad22960d15d32d9e5be44c045744d8a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad22960d15d32d9e5be44c045744d8a3a">&#9670;&nbsp;</a></span>inflationIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string inflationIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00112">112</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                          {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_ad22960d15d32d9e5be44c045744d8a3a_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_ad22960d15d32d9e5be44c045744d8a3a_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_ad22960d15d32d9e5be44c045744d8a3a_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_ad22960d15d32d9e5be44c045744d8a3a_icgraph">
<area shape="rect" title=" " alt="" coords="1151,56,1248,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="941,56,1103,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="743,56,893,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a4f251a3eebd133fa6e334472ae80af8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f251a3eebd133fa6e334472ae80af8b">&#9670;&nbsp;</a></span>parameterization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_inf_jy_parameterization.html">QuantExt::InfJyParameterization</a> &gt; parameterization </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00116">116</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                                                    {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    calculate();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a72a5d2b5cf2cd645e147c6b898ec6483">parameterization_</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af2157271dc05daad8fe87a600811b9b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2157271dc05daad8fe87a600811b9b4">&#9670;&nbsp;</a></span>realRateBasket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> realRateBasket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00121">121</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                           {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    calculate();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a121034627f5a9731241eb3e88c764269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121034627f5a9731241eb3e88c764269">&#9670;&nbsp;</a></span>indexBasket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> indexBasket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00126">126</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    calculate();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e592aed9dc92dd0235530f6c6530fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e592aed9dc92dd0235530f6c6530fe7">&#9670;&nbsp;</a></span>forceRecalculate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void forceRecalculate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>force recalibration of model </p>

<p>Reimplemented from <a class="el" href="classore_1_1data_1_1_model_builder.html#ad4022a137ba10acf78529ed31f54e479">ModelBuilder</a>.</p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00148">148</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                    {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a6c3eda0b5404f3ff116648f3ba963630">forceCalibration_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classore_1_1data_1_1_model_builder.html#ad4022a137ba10acf78529ed31f54e479">ModelBuilder::forceRecalculate</a>();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a6c3eda0b5404f3ff116648f3ba963630">forceCalibration_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a0e592aed9dc92dd0235530f6c6530fe7_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a0e592aed9dc92dd0235530f6c6530fe7_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a0e592aed9dc92dd0235530f6c6530fe7_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a0e592aed9dc92dd0235530f6c6530fe7_cgraph">
<area shape="rect" title="force recalibration of model" alt="" coords="5,13,124,39"/>
<area shape="rect" href="classore_1_1data_1_1_model_builder.html#ad4022a137ba10acf78529ed31f54e479" title="force recalibration of model" alt="" coords="172,5,328,47"/>
</map>
</div>

</div>
</div>
<a id="a83cbd1c07f17f2f51faea02f40eeaac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83cbd1c07f17f2f51faea02f40eeaac9">&#9670;&nbsp;</a></span>requiresRecalibration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool requiresRecalibration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if false is returned, the model does not require a recalibration </p>

<p>Implements <a class="el" href="classore_1_1data_1_1_model_builder.html#a31f411d1a79dd2b1e29aeb772a37a5af">ModelBuilder</a>.</p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00131">131</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                               {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;realRateVolatility().calibrate() ||</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;realRateReversion().calibrate() ||</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;indexVolatility().calibrate()) &amp;&amp;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        (<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>-&gt;hasUpdated(<span class="keyword">false</span>) ||</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a6c3eda0b5404f3ff116648f3ba963630">forceCalibration_</a> ||</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504">pricesChanged</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_cgraph">
<area shape="rect" title="if false is returned, the model does not require a recalibration" alt="" coords="5,523,148,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="196,523,304,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="352,472,511,499"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="380,523,483,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785" title="Return the market value of the given calibration helper." alt="" coords="385,573,477,600"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="571,413,722,440"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="559,465,735,506"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747" title="Find calibration basket with parameter value equal to parameter." alt="" coords="585,531,708,557"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="793,224,955,251"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="1016,443,1199,485"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="791,333,957,360"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="801,388,947,415"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a644718bb2fb240de962dc3c9a1fdf0dc" title="Returns true if the calibration basket is empty." alt="" coords="783,490,965,531"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#aa525cac0662eacaed44a94894b9a002a" title=" " alt="" coords="783,555,965,597"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="1015,107,1199,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="1068,224,1147,251"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="1059,5,1156,32"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="1060,275,1155,301"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="1026,56,1189,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="1022,392,1193,419"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="1042,173,1173,200"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="1294,224,1337,251"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="1249,385,1381,426"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="1013,326,1201,367"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a83cbd1c07f17f2f51faea02f40eeaac9_icgraph">
<area shape="rect" title="if false is returned, the model does not require a recalibration" alt="" coords="189,5,332,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,5,141,32"/>
</map>
</div>

</div>
</div>
<a id="a1127cccc9668a02247dc139d27121708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1127cccc9668a02247dc139d27121708">&#9670;&nbsp;</a></span>performCalculations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void performCalculations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00140">140</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                             {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9">requiresRecalibration</a>()) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>-&gt;hasUpdated(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7">buildCalibrationBaskets</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504">pricesChanged</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a1127cccc9668a02247dc139d27121708_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a1127cccc9668a02247dc139d27121708_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a1127cccc9668a02247dc139d27121708_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a1127cccc9668a02247dc139d27121708_cgraph">
<area shape="rect" title=" " alt="" coords="5,523,141,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,472,695,499"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,523,488,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,523,332,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="755,413,906,440"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="743,465,919,506"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747" title="Find calibration basket with parameter value equal to parameter." alt="" coords="769,531,892,557"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="977,224,1139,251"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="1200,443,1383,485"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="975,333,1141,360"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="985,388,1131,415"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a644718bb2fb240de962dc3c9a1fdf0dc" title="Returns true if the calibration basket is empty." alt="" coords="967,490,1149,531"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#aa525cac0662eacaed44a94894b9a002a" title=" " alt="" coords="967,555,1149,597"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="1199,107,1383,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="1252,224,1331,251"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="1243,5,1340,32"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="1244,275,1339,301"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="1210,56,1373,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="1206,392,1377,419"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="1226,173,1357,200"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="1478,224,1521,251"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="1433,385,1565,426"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="1197,326,1385,367"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="564,573,667,600"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785" title="Return the market value of the given calibration helper." alt="" coords="569,523,661,549"/>
</map>
</div>

</div>
</div>
<a id="a935e1c16b02ca6dbe5e1e5f32882b2c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935e1c16b02ca6dbe5e1e5f32882b2c7">&#9670;&nbsp;</a></span>buildCalibrationBaskets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void buildCalibrationBaskets </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build any calibration baskets requested by the configuration i.e. via the <code>data_</code> member. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00154">154</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                                 {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// If calibration type is None, don&#39;t build any baskets.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationType() == <a class="code" href="namespaceore_1_1data.html#a18340f2f2342933b54b1dc8e6c0ed797a6adf97f83acf6453d4a6a4b1070f3754">CalibrationType::None</a>) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: calibration type is None so no calibration baskets built.&quot;</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cbs = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationBaskets();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// If calibration type is BestFit, check that we have at least one calibration basket. Build up to a maximum of </span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// two calibration baskets. Log a warning if more than two are given. Arbitrarily assign the built baskets to </span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// the realRateBasket_ and indexBasket_ members. They will be combined again in any case for BestFit calibration.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationType() == CalibrationType::BestFit) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        QL_REQUIRE(cbs.size() &gt; 0, <span class="stringliteral">&quot;InfJyBuilder: calibration type is BestFit but no calibration baskets provided.&quot;</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a> = vector&lt;bool&gt;(cbs[0].instruments().size(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a>(cbs[0], <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">rrInstExpiries_</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> (cbs.size() &gt; 1) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a> = vector&lt;bool&gt;(cbs[1].instruments().size(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a>(cbs[1], <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0a558282c73c546091441cbc15b68a7">indexInstExpiries_</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">if</span> (cbs.size() &gt; 2)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: only 2 calibration baskets can be processed but &quot;</span> &lt;&lt; cbs.size() &lt;&lt;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="stringliteral">&quot; were supplied. The extra baskets are ignored.&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Make sure that the calibration type is now Bootstrap.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    QL_REQUIRE(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationType() == <a class="code" href="namespaceore_1_1data.html#a18340f2f2342933b54b1dc8e6c0ed797a6699fc2680f2601917ba69358414fa51">CalibrationType::Bootstrap</a>, <span class="stringliteral">&quot;InfJyBuilder: expected the calibration &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="stringliteral">&quot;type to be one of None, BestFit or Bootstrap.&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">const</span> VolatilityParameter&amp; idxVolatility = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;indexVolatility();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keyword">const</span> ReversionParameter&amp; rrReversion = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;realRateReversion();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keyword">const</span> VolatilityParameter&amp; rrVolatility = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;realRateVolatility();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// Firstly, look at the inflation index portion i.e. are we calibrating it.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (idxVolatility.calibrate()) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: building calibration basket for JY index bootstrap calibration.&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// If we are not calibrating the real rate portion, then we expect exactly one calibration basket. Otherwise </span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">// we need to find a basket with the &#39;Index&#39; parameter.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span> (!rrReversion.calibrate() &amp;&amp; !rrVolatility.calibrate()) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            QL_REQUIRE(cbs.size() == 1, <span class="stringliteral">&quot;InfJyBuilder: calibrating only JY index volatility using Bootstrap so &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                <span class="stringliteral">&quot;expected exactly one basket but got &quot;</span> &lt;&lt; cbs.size() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cb = cbs[0];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span> (!cb.parameter().empty() &amp;&amp; cb.parameter() != <span class="stringliteral">&quot;Index&quot;</span>) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <a class="code" href="log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: calibrating only JY index volatility using Bootstrap so expected the &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <span class="stringliteral">&quot;calibration basket parameter to be &#39;Index&#39; but got &#39;&quot;</span> &lt;&lt; cb.parameter() &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a> = vector&lt;bool&gt;(cb.instruments().size(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a>(cb, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0a558282c73c546091441cbc15b68a7">indexInstExpiries_</a>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: need a calibration basket with parameter equal to &#39;Index&#39;.&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cb = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747">calibrationBasket</a>(<span class="stringliteral">&quot;Index&quot;</span>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a> = vector&lt;bool&gt;(cb.instruments().size(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a>(cb, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">indexInstActive_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0a558282c73c546091441cbc15b68a7">indexInstExpiries_</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// Secondly, look at the real rate portion i.e. are we calibrating it.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (rrReversion.calibrate() || rrVolatility.calibrate()) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: building calibration basket for JY real rate bootstrap calibration.&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        QL_REQUIRE(!(rrReversion.calibrate() &amp;&amp; rrVolatility.calibrate()), <span class="stringliteral">&quot;InfJyBuilder: calibrating both the &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="stringliteral">&quot;real rate reversion and real rate volatility using Bootstrap is not supported.&quot;</span>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// If we are not calibrating the index portion, then we expect exactly one calibration basket. Otherwise </span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">// we need to find a basket with the &#39;RealRate&#39; parameter.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (!idxVolatility.calibrate()) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            QL_REQUIRE(cbs.size() == 1, <span class="stringliteral">&quot;InfJyBuilder: calibrating only JY real rate using Bootstrap so &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="stringliteral">&quot;expected exactly one basket but got &quot;</span> &lt;&lt; cbs.size() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cb = cbs[0];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">if</span> (!cb.parameter().empty() &amp;&amp; cb.parameter() != <span class="stringliteral">&quot;RealRate&quot;</span>) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <a class="code" href="log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: calibrating only JY real rate using Bootstrap so expected the &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="stringliteral">&quot;calibration basket parameter to be &#39;RealRate&#39; but got &#39;&quot;</span> &lt;&lt; cb.parameter() &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a> = vector&lt;bool&gt;(cb.instruments().size(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a>(cb, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">rrInstExpiries_</a>, rrReversion.calibrate());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: need a calibration basket with parameter equal to &#39;RealRate&#39;.&quot;</span>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cb = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747">calibrationBasket</a>(<span class="stringliteral">&quot;RealRate&quot;</span>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a> = vector&lt;bool&gt;(cb.instruments().size(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">buildCalibrationBasket</a>(cb, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">rrInstActive_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">rrInstExpiries_</a>, rrReversion.calibrate());</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_cgraph">
<area shape="rect" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="5,472,164,499"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="225,413,375,440"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="212,465,388,506"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747" title="Find calibration basket with parameter value equal to parameter." alt="" coords="239,531,361,557"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="447,224,608,251"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="669,443,852,485"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="444,333,611,360"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="454,388,601,415"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a644718bb2fb240de962dc3c9a1fdf0dc" title="Returns true if the calibration basket is empty." alt="" coords="436,490,619,531"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#aa525cac0662eacaed44a94894b9a002a" title=" " alt="" coords="436,555,619,597"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="669,107,853,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="721,224,800,251"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="712,5,809,32"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="713,275,808,301"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="679,56,842,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="675,392,846,419"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="695,173,826,200"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="947,224,990,251"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="903,385,1035,426"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="667,326,855,367"/>
</map>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a935e1c16b02ca6dbe5e1e5f32882b2c7_icgraph">
<area shape="rect" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a04274cbe5a4625db825e42c300eef575"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04274cbe5a4625db825e42c300eef575">&#9670;&nbsp;</a></span>buildCalibrationBasket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> buildCalibrationBasket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>expiries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forRealRateReversion</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build the calibration basket. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00243">243</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                                                                            {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    QL_REQUIRE(!cb.empty(), <span class="stringliteral">&quot;InfJyBuilder: calibration basket should not be empty.&quot;</span>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ci = cb.instruments();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    QL_REQUIRE(ci.size() == active.size(), <span class="stringliteral">&quot;InfJyBuilder: expected the active instruments vector &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="stringliteral">&quot;size to equal the number of calibration instruments&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    fill(active.begin(), active.end(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (cb.instrumentType() == <span class="stringliteral">&quot;CpiCapFloor&quot;</span>) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d">buildCpiCapFloorBasket</a>(cb, active, expiries);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cb.instrumentType() == <span class="stringliteral">&quot;YoYCapFloor&quot;</span>) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2">buildYoYCapFloorBasket</a>(cb, active, expiries);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cb.instrumentType() == <span class="stringliteral">&quot;YoYSwap&quot;</span>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e">buildYoYSwapBasket</a>(cb, active, expiries, forRealRateReversion);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;InfJyBuilder: expected calibration instrument to be one of CpiCapFloor, YoYCapFloor or YoYSwap&quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_cgraph">
<area shape="rect" title="Build the calibration basket." alt="" coords="5,413,156,440"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="215,224,376,251"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="437,443,620,485"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="212,333,379,360"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="222,388,369,415"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a644718bb2fb240de962dc3c9a1fdf0dc" title="Returns true if the calibration basket is empty." alt="" coords="204,490,387,531"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#aa525cac0662eacaed44a94894b9a002a" title=" " alt="" coords="204,555,387,597"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="437,107,621,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="489,224,568,251"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="480,5,577,32"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="481,275,576,301"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="447,56,610,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="443,392,614,419"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="463,173,594,200"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="715,224,758,251"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="671,385,803,426"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="435,326,623,367"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a04274cbe5a4625db825e42c300eef575_icgraph">
<area shape="rect" title="Build the calibration basket." alt="" coords="743,56,893,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a69c1e8a74b5a706e29821a070c83907d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c1e8a74b5a706e29821a070c83907d">&#9670;&nbsp;</a></span>buildCpiCapFloorBasket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> buildCpiCapFloorBasket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>expiries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a CPI cap floor calibration basket. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00264">264</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                                 {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start building the CPI cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    QL_REQUIRE(!<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">cpiVolatility_</a>.empty(), <span class="stringliteral">&quot;InfJyBuilder: need a non-empty CPI cap floor volatility structure &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="stringliteral">&quot;to build a CPI cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Procedure is to create a CPI cap floor as described by each instrument in the calibration basket. We then value </span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// each of the CPI cap floor instruments using market data and an engine and pass the NPV as the market premium to </span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// helper that we create.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> helpers;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// Create the engine</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">auto</span> zts = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;zeroInflationTermStructure();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">auto</span> engine = boost::make_shared&lt;CPIBlackCapFloorEngine&gt;(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">cpiVolatility_</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// CPI cap floor calibration instrument details. Assumed to equal those from the index and market structures.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// Some of these should possibly come from conventions.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Also some variables used in the loop below.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">auto</span> <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;fixingCalendar();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">auto</span> baseDate = zts-&gt;baseDate();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keyword">auto</span> baseCpi = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;fixing(baseDate);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keyword">auto</span> bdc = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">cpiVolatility_</a>-&gt;businessDayConvention();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">auto</span> obsLag = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">cpiVolatility_</a>-&gt;observationLag();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    Handle&lt;ZeroInflationIndex&gt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a">inflationIndex</a>(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    Real nominal = 1.0;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// Avoid instruments with duplicate expiry times in the loop below</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    set&lt;Time, CloseCmp&gt; expiryTimes;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">// Reference calibration dates if any. If they are given, we only include one calibration instrument from each </span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// period in the grid. Logic copied from other builders.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">auto</span> rcDates = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea">referenceCalibrationDates</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">auto</span> prevRcDate = Date::minDate();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// Add calibration instruments to the helpers vector.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ci = cb.instruments();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">for</span> (Size i = 0; i &lt; ci.size(); ++i) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keyword">auto</span> cpiCapFloor = boost::dynamic_pointer_cast&lt;CpiCapFloor&gt;(ci[i]);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        QL_REQUIRE(cpiCapFloor, <span class="stringliteral">&quot;InfJyBuilder: expected CpiCapFloor calibration instrument.&quot;</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keyword">auto</span> <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a> = <a class="code" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039">optionMaturity</a>(cpiCapFloor-&gt;maturity(), <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">// Deal with reference calibration date grid stuff.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keyword">auto</span> rcDate = lower_bound(rcDates.begin(), rcDates.end(), <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (!(rcDate == rcDates.end() || *rcDate &gt; prevRcDate)) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            active[i] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (rcDate != rcDates.end())</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            prevRcDate = *rcDate;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment">// Build the CPI calibration instrument in order to calculate its NPV.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">/* FIXME - the maturity date is not adjusted on eval date changes even if given as a tenor</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">                 - if the strike is atm, the value will not be updated on eval date changes */</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        Real strikeValue =</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28">cpiCapFloorStrikeValue</a>(cpiCapFloor-&gt;strike(), *<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;zeroInflationTermStructure(), <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        Option::Type capfloor = cpiCapFloor-&gt;type() == CapFloor::Cap ? Option::Call : Option::Put;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keyword">auto</span> inst = boost::make_shared&lt;CPICapFloor&gt;(capfloor, nominal, today, baseCpi, <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                bdc, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc, strikeValue, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a">inflationIndex</a>, obsLag);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        inst-&gt;setPricingEngine(engine);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="comment">// Build the helper using the NPV as the premium.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keyword">auto</span> premium = inst-&gt;NPV();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keyword">auto</span> <a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CpiCapFloorHelper&gt;(capfloor, baseCpi, <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc, strikeValue, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a">inflationIndex</a>, obsLag, premium);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// Add the helper&#39;s time to expiry.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keyword">auto</span> <a class="codeRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = <a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;instrument()-&gt;fixingDate();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keyword">auto</span> t = <a class="codeRef" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30">inflationTime</a>(fixingDate, *zts, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;interpolated());</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keyword">auto</span> p = expiryTimes.insert(t);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        QL_REQUIRE(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;ignoreDuplicateCalibrationExpiryTimes() || p.second,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                   <span class="stringliteral">&quot;InfJyBuilder: a CPI cap floor calibration &quot;</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;instrument with the expiry time, &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;, was already added.&quot;</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">if</span>(p.second)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            helpers.push_back(<a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: &quot;</span> &lt;&lt; (p.second ?</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                  <span class="stringliteral">&quot;added CPICapFloor helper&quot;</span> :</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                  <span class="stringliteral">&quot;skipped CPICapFloor helper due to duplicate expiry time (&quot;</span> + <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">std::to_string</a>(t) + <span class="stringliteral">&quot;)&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;             <span class="stringliteral">&quot;: index = &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;             <span class="stringliteral">&quot;, type = &quot;</span> &lt;&lt; cpiCapFloor-&gt;type() &lt;&lt;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;             <span class="stringliteral">&quot;, expiry = &quot;</span> &lt;&lt; io::iso_date(<a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>) &lt;&lt;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;             <span class="stringliteral">&quot;, base CPI = &quot;</span> &lt;&lt; baseCpi &lt;&lt;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;             <span class="stringliteral">&quot;, strike = &quot;</span> &lt;&lt; strikeValue &lt;&lt;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;             <span class="stringliteral">&quot;, obs lag = &quot;</span> &lt;&lt; obsLag &lt;&lt;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;             <span class="stringliteral">&quot;, market premium = &quot;</span> &lt;&lt; premium);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">// Populate the expiry times array with the unique sorted expiry times.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    expiries = Array(expiryTimes.begin(), expiryTimes.end());</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished building the CPI cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> helpers;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_cgraph">
<area shape="rect" title="Build a CPI cap floor calibration basket." alt="" coords="5,202,167,229"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="215,5,399,47"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="267,71,346,98"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="258,122,355,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="259,173,354,199"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="215,224,398,265"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="225,290,388,317"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="221,341,392,367"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="241,391,372,418"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="491,13,534,39"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="447,333,579,375"/>
</map>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a69c1e8a74b5a706e29821a070c83907d_icgraph">
<area shape="rect" title="Build a CPI cap floor calibration basket." alt="" coords="941,56,1103,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="743,56,893,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a62a24690024d3d23ae7d3f880eef8ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a24690024d3d23ae7d3f880eef8ef2">&#9670;&nbsp;</a></span>buildYoYCapFloorBasket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> buildYoYCapFloorBasket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>expiries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a YoY cap floor calibration basket. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00368">368</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                                                                                                     {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start building the YoY cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// Initial checks.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    QL_REQUIRE(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, <span class="stringliteral">&quot;InfJyBuilder: need a valid year on year inflation index &quot;</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                       &lt;&lt; <span class="stringliteral">&quot;to build a year on year cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keyword">auto</span> yoyTs = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;yoyInflationTermStructure();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    QL_REQUIRE(!yoyTs.empty(), <span class="stringliteral">&quot;InfJyBuilder: need a valid year on year term structure &quot;</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                   &lt;&lt; <span class="stringliteral">&quot;to build a year on year cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    QL_REQUIRE(!<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>.empty(), <span class="stringliteral">&quot;InfJyBuilder: need a valid year on year volatility &quot;</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                            &lt;&lt; <span class="stringliteral">&quot;structure to build a year on year cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">// Procedure is to create a YoY cap floor as described by each instrument in the calibration basket. We then value</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// each of the YoY cap floor instruments using market data and an engine and pass the NPV as the market premium to</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// helper that we create.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> helpers;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// Create the engine which depends on the type of the YoY volatility and the shift.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    boost::shared_ptr&lt;PricingEngine&gt; engine;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">auto</span> ovsType = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>-&gt;volatilityType();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (ovsType == Normal)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        engine = boost::make_shared&lt;YoYInflationBachelierCapFloorEngine&gt;(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ovsType == ShiftedLognormal &amp;&amp; close(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>-&gt;displacement(), 0.0))</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        engine = boost::make_shared&lt;YoYInflationBlackCapFloorEngine&gt;(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ovsType == ShiftedLognormal)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        engine =</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            boost::make_shared&lt;YoYInflationUnitDisplacedBlackCapFloorEngine&gt;(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;InfJyBuilder: can&#39;t create engine with yoy volatility type, &quot;</span> &lt;&lt; ovsType &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// YoY cap floor calibration instrument details. Assumed to equal those from the index and market structures.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// Some of these should possibly come from conventions. Also some variables used in the loop below.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    Natural settlementDays = 2;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keyword">auto</span> <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;fixingCalendar();</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    DayCounter dc = Thirty360(Thirty360::BondBasis);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">auto</span> bdc = Following;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">auto</span> obsLag = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a>-&gt;observationLag();</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// Avoid instruments with duplicate expiry times in the loop below</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    set&lt;Time, CloseCmp&gt; expiryTimes;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Reference calibration dates if any. If they are given, we only include one calibration instrument from each </span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// period in the grid. Logic copied from other builders.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keyword">auto</span> rcDates = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea">referenceCalibrationDates</a>();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keyword">auto</span> prevRcDate = Date::minDate();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// Add calibration instruments to the helpers vector.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ci = cb.instruments();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">for</span> (Size i = 0; i &lt; ci.size(); ++i) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keyword">auto</span> yoyCapFloor = boost::dynamic_pointer_cast&lt;YoYCapFloor&gt;(ci[i]);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        QL_REQUIRE(yoyCapFloor, <span class="stringliteral">&quot;InfJyBuilder: expected YoYCapFloor calibration instrument.&quot;</span>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">        /*! Get the configured strike.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">            FIXME If the strike is atm, the value will not be updated on evaluation date changes */</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        Date today = Settings::instance().evaluationDate();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        Date maturityDate = <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>.advance(<a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>.advance(today, settlementDays * Days), yoyCapFloor-&gt;tenor(), bdc);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        Real strikeValue = <a class="code" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea">yoyCapFloorStrikeValue</a>(yoyCapFloor-&gt;strike(), *yoyTs, maturityDate);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">// Build the YoY cap floor helper.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keyword">auto</span> quote = boost::make_shared&lt;SimpleQuote&gt;(0.01);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keyword">auto</span> <a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;YoYCapFloorHelper&gt;(Handle&lt;Quote&gt;(quote), yoyCapFloor-&gt;type(), strikeValue,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            settlementDays, yoyCapFloor-&gt;tenor(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, obsLag, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc, dc, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment">// Deal with reference calibration date grid stuff based on maturity of helper instrument.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keyword">auto</span> helperInst = <a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;yoyCapFloor();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keyword">auto</span> <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a> = helperInst-&gt;maturityDate();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keyword">auto</span> rcDate = lower_bound(rcDates.begin(), rcDates.end(), <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">if</span> (!(rcDate == rcDates.end() || *rcDate &gt; prevRcDate)) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            active[i] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> (rcDate != rcDates.end())</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            prevRcDate = *rcDate;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="comment">// Price the underlying helper instrument to get its fair premium.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        helperInst-&gt;setPricingEngine(engine);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// Update the helper&#39;s market quote with the fair rate.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        quote-&gt;setValue(helperInst-&gt;NPV());</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// Add the helper&#39;s time to expiry.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keyword">auto</span> <a class="codeRef" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> = helperInst-&gt;lastYoYInflationCoupon()-&gt;fixingDate();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keyword">auto</span> t = <a class="codeRef" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30">inflationTime</a>(fixingDate, *yoyTs, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;interpolated());</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keyword">auto</span> p = expiryTimes.insert(t);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        QL_REQUIRE(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;ignoreDuplicateCalibrationExpiryTimes() || p.second,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                   <span class="stringliteral">&quot;InfJyBuilder: a YoY cap floor calibration &quot;</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;instrument with the expiry time, &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;, was already added.&quot;</span>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160; </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="comment">// Add the helper to the calibration helpers.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span>(p.second)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            helpers.push_back(<a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: &quot;</span> &lt;&lt; (p.second ?</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                  <span class="stringliteral">&quot;added YoYCapFloor helper&quot;</span> :</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                  <span class="stringliteral">&quot;skipped YoYCapFloor helper due to duplicate expiry time (&quot;</span> + <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">std::to_string</a>(t) + <span class="stringliteral">&quot;)&quot;</span>) &lt;&lt;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="stringliteral">&quot;: index = &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="stringliteral">&quot;, type = &quot;</span> &lt;&lt; yoyCapFloor-&gt;type() &lt;&lt;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="stringliteral">&quot;, expiry = &quot;</span> &lt;&lt; io::iso_date(<a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>) &lt;&lt;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="stringliteral">&quot;, strike = &quot;</span> &lt;&lt; strikeValue &lt;&lt;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="stringliteral">&quot;, obs lag = &quot;</span> &lt;&lt; obsLag &lt;&lt;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="stringliteral">&quot;, market premium = &quot;</span> &lt;&lt; quote-&gt;value());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// Populate the expiry times array with the unique sorted expiry times.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    expiries = Array(expiryTimes.begin(), expiryTimes.end());</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished building the YoY cap floor calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> helpers;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_cgraph">
<area shape="rect" title="Build a YoY cap floor calibration basket." alt="" coords="5,144,172,171"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="275,5,353,32"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="267,56,361,83"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="223,107,405,149"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="229,173,399,200"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="249,224,379,251"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="220,275,408,317"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="456,166,588,207"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="501,283,543,309"/>
</map>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a62a24690024d3d23ae7d3f880eef8ef2_icgraph">
<area shape="rect" title="Build a YoY cap floor calibration basket." alt="" coords="941,56,1108,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="743,56,893,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a133d1dc488d0f63362752706f448007e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a133d1dc488d0f63362752706f448007e">&#9670;&nbsp;</a></span>buildYoYSwapBasket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> buildYoYSwapBasket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp;&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; bool &gt; &amp;&#160;</td>
          <td class="paramname"><em>active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>expiries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>forRealRateReversion</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a YoY swap calibration basket. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00483">483</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                                                                            {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start building the YoY swap calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// Initial checks.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    QL_REQUIRE(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, <span class="stringliteral">&quot;InfJyBuilder: need a valid year on year inflation index &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="stringliteral">&quot;to build a year on year swap calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">auto</span> yoyTs = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;yoyInflationTermStructure();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    QL_REQUIRE(!yoyTs.empty(), <span class="stringliteral">&quot;InfJyBuilder: need a valid year on year term structure &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="stringliteral">&quot;to build a year on year swap calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// Procedure is to create a YoY cap floor as described by each instrument in the calibration basket. We then value </span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">// each of the YoY cap floor instruments using market data and an engine and pass the NPV as the market premium to </span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// helper that we create.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> helpers;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// Create the engine</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keyword">auto</span> engine = boost::make_shared&lt;DiscountingSwapEngine&gt;(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// YoY swap calibration instrument details. Assumed to equal those from the index and market structures.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// Some of these should possibly come from conventions. Hardcoded some common values here.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// Also some variables used in the loop below.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    Natural settlementDays = 2;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">auto</span> <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;fixingCalendar();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">auto</span> dc = Thirty360(Thirty360::BondBasis);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keyword">auto</span> bdc = Following;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">auto</span> obsLag = yoyTs-&gt;observationLag();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// Avoid instruments with duplicate expiry times in the loop below</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    set&lt;Time, CloseCmp&gt; expiryTimes;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// Reference calibration dates if any. If they are given, we only include one calibration instrument from each </span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="comment">// period in the grid. Logic copied from other builders.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keyword">auto</span> rcDates = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea">referenceCalibrationDates</a>();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keyword">auto</span> prevRcDate = Date::minDate();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// Add calibration instruments to the helpers vector.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ci = cb.instruments();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">for</span> (Size i = 0; i &lt; ci.size(); ++i) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keyword">auto</span> yoySwap = boost::dynamic_pointer_cast&lt;YoYSwap&gt;(ci[i]);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        QL_REQUIRE(yoySwap, <span class="stringliteral">&quot;InfJyBuilder: expected YoYSwap calibration instrument.&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// Build the YoY helper.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keyword">auto</span> quote = boost::make_shared&lt;SimpleQuote&gt;(0.01);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keyword">auto</span> <a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;YoYSwapHelper&gt;(Handle&lt;Quote&gt;(quote), settlementDays, yoySwap-&gt;tenor(),</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                                        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">rateCurve_</a>, obsLag, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc, dc,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                                        <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc, dc, <a class="code" href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a>, bdc);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// Deal with reference calibration date grid stuff based on maturity of helper instrument.</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keyword">auto</span> helperInst = <a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;yoySwap();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keyword">auto</span> <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a> = helperInst-&gt;maturityDate();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keyword">auto</span> rcDate = lower_bound(rcDates.begin(), rcDates.end(), <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">if</span> (!(rcDate == rcDates.end() || *rcDate &gt; prevRcDate)) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            active[i] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span> (rcDate != rcDates.end())</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            prevRcDate = *rcDate;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="comment">// Price the underlying helper instrument to get its fair rate.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        helperInst-&gt;setPricingEngine(engine);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="comment">// Update the helper&#39;s market quote with the fair rate.</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        quote-&gt;setValue(helperInst-&gt;fairRate());</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="comment">// For JY calibration to YoY swaps, the parameter&#39;s time depends on whether you are calibrating the real rate </span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">// reversion or the real rate volatility (probably don&#39;t want to calibrate the inflation index vol to YoY </span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="comment">// swaps as it only shows up via the drift). If you are calibrating to real rate reversion, you want the time </span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="comment">// to the numerator index fixing date on the last YoY swaplet on the YoY leg. If you are calibrating to real </span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment">// rate volatility, you want the time to the denominator index fixing date on the last YoY swaplet on the YoY </span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="comment">// leg. We use numerator fixing date - 1 * Years here for this. You can see this from the parameter </span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">// dependencies in the YoY swaplet formula in Section 13 of the book (i.e. T vs. S).</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// If t is not positive, we log a message and skip this helper.</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        Time t = 0.0;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        QL_REQUIRE(!helperInst-&gt;yoyLeg().empty(), <span class="stringliteral">&quot;InfJyBuilder: expected YoYSwap to have non-empty YoY leg.&quot;</span>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keyword">auto</span> finalYoYCoupon = boost::dynamic_pointer_cast&lt;YoYInflationCoupon&gt;(helperInst-&gt;yoyLeg().back());</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        Date numFixingDate = finalYoYCoupon-&gt;fixingDate();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span> (forRealRateReversion) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            t = <a class="codeRef" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30">inflationTime</a>(numFixingDate, *yoyTs, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;interpolated());</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <span class="keyword">auto</span> denFixingDate = numFixingDate - 1 * Years;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            t = <a class="codeRef" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30">inflationTime</a>(denFixingDate, *yoyTs, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>-&gt;interpolated());</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">if</span> (t &lt;= 0) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;The year on year swap with maturity tenor, &quot;</span> &lt;&lt; yoySwap-&gt;tenor() &lt;&lt; <span class="stringliteral">&quot;, and date, &quot;</span> &lt;&lt; <a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a> &lt;&lt;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                <span class="stringliteral">&quot;, has a non-positive parameter time, &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;, so skipping this as a calibration instrument.&quot;</span>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">// Add the helper to the calibration helpers.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        helpers.push_back(<a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keyword">auto</span> p = expiryTimes.insert(t);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        QL_REQUIRE(p.second, <span class="stringliteral">&quot;InfJyBuilder: a YoY swap calibration instrument with the expiry &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="stringliteral">&quot;time, &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;, was already added.&quot;</span>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: added year on year swap helper&quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="stringliteral">&quot;: index = &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="stringliteral">&quot;, maturity = &quot;</span> &lt;&lt; io::iso_date(<a class="code" href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>) &lt;&lt;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="stringliteral">&quot;, obs lag = &quot;</span> &lt;&lt; obsLag &lt;&lt;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="stringliteral">&quot;, market rate = &quot;</span> &lt;&lt; quote-&gt;value());</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="comment">// Populate the expiry times array with the unique sorted expiry times.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    expiries = Array(expiryTimes.begin(), expiryTimes.end());</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished building the YoY swap calibration basket.&quot;</span>);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">return</span> helpers;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_cgraph">
<area shape="rect" title="Build a YoY swap calibration basket." alt="" coords="5,64,152,91"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="244,5,339,32"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="200,57,383,98"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="206,123,377,149"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="431,115,563,157"/>
</map>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a133d1dc488d0f63362752706f448007e_icgraph">
<area shape="rect" title="Build a YoY swap calibration basket." alt="" coords="941,56,1088,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="743,56,893,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a3bc0c8081ffc221edaa8f90c065a2747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc0c8081ffc221edaa8f90c065a2747">&#9670;&nbsp;</a></span>calibrationBasket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classore_1_1data_1_1_calibration_basket.html">CalibrationBasket</a> &amp; calibrationBasket </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>parameter</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find calibration basket with parameter value equal to <code>parameter</code>. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00599">599</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                                                                      {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cb : <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationBaskets()) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">if</span> (cb.parameter() == parameter) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keywordflow">return</span> cb;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    QL_FAIL(<span class="stringliteral">&quot;InfJyBuilder: unable to find calibration basket with parameter value equal to &#39;&quot;</span> &lt;&lt; parameter &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a3bc0c8081ffc221edaa8f90c065a2747_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a3bc0c8081ffc221edaa8f90c065a2747_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a3bc0c8081ffc221edaa8f90c065a2747_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a3bc0c8081ffc221edaa8f90c065a2747_icgraph">
<area shape="rect" title="Find calibration basket with parameter value equal to parameter." alt="" coords="743,56,865,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="ac38891d2ad44f9b6e02730f8d10b58d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac38891d2ad44f9b6e02730f8d10b58d8">&#9670;&nbsp;</a></span>createRealRateParam()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_lgm1f_parametrization.html">Lgm1fParametrization</a>&lt; ZeroInflationTermStructure &gt; &gt; createRealRateParam </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the real rate parameterisation. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00610">610</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                                                                                          {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start creating the real rate parameterisation.&quot;</span>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// Initial parameter setup as provided by the data_.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keyword">const</span> ReversionParameter&amp; rrReversion = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;realRateReversion();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">const</span> VolatilityParameter&amp; rrVolatility = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;realRateVolatility();</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    Array rrVolatilityTimes(rrVolatility.times().begin(), rrVolatility.times().end());</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    Array rrVolatilityValues(rrVolatility.values().begin(), rrVolatility.values().end());</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    Array rrReversionTimes(rrReversion.times().begin(), rrReversion.times().end());</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    Array rrReversionValues(rrReversion.values().begin(), rrReversion.values().end());</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// Perform checks and in the event of bootstrap calibration, may need to restructure the parameters.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e">setupParams</a>(rrReversion, rrReversionTimes, rrReversionValues, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">rrInstExpiries_</a>, <span class="stringliteral">&quot;RealRate reversion&quot;</span>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e">setupParams</a>(rrVolatility, rrVolatilityTimes, rrVolatilityValues, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">rrInstExpiries_</a>, <span class="stringliteral">&quot;RealRate volatility&quot;</span>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">// Create the JY parameterization.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keyword">using</span> RT = <a class="code" href="classore_1_1data_1_1_lgm_data.html#a85128cf8fffb22eea15b6db0929ffb43">LgmData::ReversionType</a>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keyword">using</span> VT = <a class="code" href="classore_1_1data_1_1_lgm_data.html#a8b2aa10016abb1ffb6f55484a04a5143">LgmData::VolatilityType</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// Real rate parameter constraints</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cc = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationConfiguration();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keyword">auto</span> rrVolConstraint = cc.constraint(<span class="stringliteral">&quot;RealRateVolatility&quot;</span>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keyword">auto</span> rrRevConstraint = cc.constraint(<span class="stringliteral">&quot;RealRateReversion&quot;</span>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">// Create the real rate portion of the parameterization</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keyword">using</span> QuantLib::ZeroInflationTermStructure;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    boost::shared_ptr&lt;QuantExt::Lgm1fParametrization&lt;ZeroInflationTermStructure&gt;&gt; realRateParam;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (rrReversion.reversionType() == RT::HullWhite &amp;&amp; rrVolatility.volatilityType() == VT::HullWhite) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keyword">using</span> <a class="codeRef" href="../qle/class_quant_ext_1_1_lgm1f_piecewise_constant_hull_white_adaptor.html">QuantExt::Lgm1fPiecewiseConstantHullWhiteAdaptor</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: real rate parameterization is Lgm1fPiecewiseConstantHullWhiteAdaptor&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        realRateParam = boost::make_shared&lt;Lgm1fPiecewiseConstantHullWhiteAdaptor&lt;ZeroInflationTermStructure&gt;&gt;(</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;currency(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;zeroInflationTermStructure(), rrVolatilityTimes,</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            rrVolatilityValues, rrReversionTimes, rrReversionValues, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), rrVolConstraint, rrRevConstraint);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rrReversion.reversionType() == RT::HullWhite &amp;&amp; rrVolatility.volatilityType() == VT::Hagan) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keyword">using</span> <a class="codeRef" href="../qle/class_quant_ext_1_1_lgm1f_piecewise_constant_parametrization.html">QuantExt::Lgm1fPiecewiseConstantParametrization</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: real rate parameterization is Lgm1fPiecewiseConstantParametrization&quot;</span>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        realRateParam = boost::make_shared&lt;Lgm1fPiecewiseConstantParametrization&lt;ZeroInflationTermStructure&gt;&gt;(</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;currency(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;zeroInflationTermStructure(), rrVolatilityTimes,</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            rrVolatilityValues, rrReversionTimes, rrReversionValues, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), rrVolConstraint, rrRevConstraint);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rrReversion.reversionType() == RT::Hagan &amp;&amp; rrVolatility.volatilityType() == VT::Hagan) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keyword">using</span> <a class="codeRef" href="../qle/class_quant_ext_1_1_lgm1f_piecewise_linear_parametrization.html">QuantExt::Lgm1fPiecewiseLinearParametrization</a>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: real rate parameterization is Lgm1fPiecewiseLinearParametrization&quot;</span>);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        realRateParam = boost::make_shared&lt;Lgm1fPiecewiseLinearParametrization&lt;ZeroInflationTermStructure&gt;&gt;(</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;currency(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;zeroInflationTermStructure(), rrVolatilityTimes,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            rrVolatilityValues, rrReversionTimes, rrReversionValues, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), rrVolConstraint, rrRevConstraint);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;InfJyBuilder: reversion type Hagan and volatility type HullWhite not supported.&quot;</span>);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    Time horizon = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;reversionTransformation().horizon();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (horizon &gt;= 0.0) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: apply shift horizon &quot;</span> &lt;&lt; horizon &lt;&lt; <span class="stringliteral">&quot; to the JY real rate parameterisation for index &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        realRateParam-&gt;shift() = horizon;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: ignoring negative horizon, &quot;</span> &lt;&lt; horizon &lt;&lt;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="stringliteral">&quot;, passed to the JY real rate parameterisation for index &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    Real scaling = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;reversionTransformation().scaling();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (scaling &gt; 0.0) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: apply scaling &quot;</span> &lt;&lt; scaling &lt;&lt; <span class="stringliteral">&quot; to the JY real rate parameterisation for index &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        realRateParam-&gt;scaling() = scaling;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Ignoring non-positive scaling, &quot;</span> &lt;&lt; scaling &lt;&lt;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="stringliteral">&quot;, passed to the JY real rate parameterisation for index &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished creating the real rate parameterisation.&quot;</span>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">return</span> realRateParam;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_cgraph">
<area shape="rect" title="Create the real rate parameterisation." alt="" coords="5,122,155,149"/>
<area shape="rect" href="classore_1_1data_1_1_reversion_parameter.html#a8c5dd13b5a108105c52d850a097f93c5" title=" " alt="" coords="203,5,400,47"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e" title=" " alt="" coords="252,122,351,149"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a23131baceb8e12f265f04d3d772fa628" title=" " alt="" coords="448,16,624,57"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#adaf95a566e294a0739abae733b5475ee" title=" " alt="" coords="448,212,624,253"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_parameter.html#a24ed2d5eca36f983090654744009e773" title=" " alt="" coords="206,224,397,265"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="448,81,624,123"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a8df044e9f3b4bd3e3e5c855a7f84adbb" title=" " alt="" coords="448,147,624,188"/>
</map>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_ac38891d2ad44f9b6e02730f8d10b58d8_icgraph">
<area shape="rect" title="Create the real rate parameterisation." alt="" coords="141,5,291,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="5,5,93,32"/>
</map>
</div>

</div>
</div>
<a id="aaeb4b90a6643bcae142fa5f3ed5dc0c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeb4b90a6643bcae142fa5f3ed5dc0c6">&#9670;&nbsp;</a></span>createIndexParam()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_quant_ext_1_1_fx_bs_parametrization.html">FxBsParametrization</a> &gt; createIndexParam </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the inflation index parameterisation. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00685">685</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                                                          {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start creating the index parameterisation.&quot;</span>);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// Initial parameter setup as provided by the data_.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keyword">const</span> VolatilityParameter&amp; idxVolatility = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;indexVolatility();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    Array idxVolatilityTimes(idxVolatility.times().begin(), idxVolatility.times().end());</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    Array idxVolatilityValues(idxVolatility.values().begin(), idxVolatility.values().end());</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// Perform checks and in the event of bootstrap calibration, may need to restructure the parameters.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e">setupParams</a>(idxVolatility, idxVolatilityTimes, idxVolatilityValues, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#ac0a558282c73c546091441cbc15b68a7">indexInstExpiries_</a>, <span class="stringliteral">&quot;Index volatility&quot;</span>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">// Create the index portion of the parameterization</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    boost::shared_ptr&lt;QuantExt::FxBsParametrization&gt; indexParam;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    Handle&lt;Quote&gt; baseCpiQuote(boost::make_shared&lt;SimpleQuote&gt;(</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;fixing(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;zeroInflationTermStructure()-&gt;baseDate())));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// Index volatility parameter constraints</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cc = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationConfiguration();</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keyword">auto</span> idxVolConstraint = cc.constraint(<span class="stringliteral">&quot;IndexVolatility&quot;</span>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">if</span> (idxVolatility.type() == <a class="code" href="namespaceore_1_1data.html#a3a023c0c27667e78ae521eb64f1c7c81aecc2ea45c147d52ddd30cebb41813bc0">ParamType::Piecewise</a>) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keyword">using</span> <a class="codeRef" href="../qle/class_quant_ext_1_1_fx_bs_piecewise_constant_parametrization.html">QuantExt::FxBsPiecewiseConstantParametrization</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: index volatility parameterization is FxBsPiecewiseConstantParametrization&quot;</span>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        indexParam = boost::make_shared&lt;FxBsPiecewiseConstantParametrization&gt;(</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;currency(), baseCpiQuote, idxVolatilityTimes, idxVolatilityValues, idxVolConstraint);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (idxVolatility.type() == <a class="code" href="namespaceore_1_1data.html#a3a023c0c27667e78ae521eb64f1c7c81acb17869fe51048b5a5c4c6106551a255">ParamType::Constant</a>) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keyword">using</span> <a class="codeRef" href="../qle/class_quant_ext_1_1_fx_bs_constant_parametrization.html">QuantExt::FxBsConstantParametrization</a>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: index volatility parameterization is FxBsConstantParametrization&quot;</span>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        indexParam = boost::make_shared&lt;FxBsConstantParametrization&gt;(</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">zeroInflationIndex_</a>-&gt;currency(), baseCpiQuote, idxVolatilityValues[0]);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;InfJyBuilder: index volatility parameterization needs to be Piecewise or Constant.&quot;</span>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished creating the index parameterisation.&quot;</span>);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> indexParam;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_cgraph">
<area shape="rect" title="Create the inflation index parameterisation." alt="" coords="5,118,132,145"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e" title=" " alt="" coords="180,93,279,119"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a23131baceb8e12f265f04d3d772fa628" title=" " alt="" coords="327,5,503,47"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a8df044e9f3b4bd3e3e5c855a7f84adbb" title=" " alt="" coords="327,136,503,177"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#adaf95a566e294a0739abae733b5475ee" title=" " alt="" coords="327,201,503,243"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="327,71,503,112"/>
</map>
</div>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_aaeb4b90a6643bcae142fa5f3ed5dc0c6_icgraph">
<area shape="rect" title="Create the inflation index parameterisation." alt="" coords="141,5,268,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="5,5,93,32"/>
</map>
</div>

</div>
</div>
<a id="abc7000ad61c727a1c92edf461dfeda9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc7000ad61c727a1c92edf461dfeda9e">&#9670;&nbsp;</a></span>setupParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void setupParams </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_model_parameter.html">ModelParameter</a> &amp;&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>times</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Array &amp;&#160;</td>
          <td class="paramname"><em>expiries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>paramName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform checks and possibly adjust the <code>times</code> and <code>values</code> array depending on calibration configuration. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00726">726</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                                          {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start setting up parameters for &quot;</span> &lt;&lt; paramName);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">if</span> (param.type() == <a class="code" href="namespaceore_1_1data.html#a3a023c0c27667e78ae521eb64f1c7c81acb17869fe51048b5a5c4c6106551a255">ParamType::Constant</a>) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        QL_REQUIRE(param.times().size() == 0, <span class="stringliteral">&quot;InfJyBuilder: parameter is constant so empty times expected&quot;</span>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        QL_REQUIRE(param.values().size() == 1, <span class="stringliteral">&quot;InfJyBuilder: parameter is constant so initial value array &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="stringliteral">&quot;should have 1 element.&quot;</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (param.type() == <a class="code" href="namespaceore_1_1data.html#a3a023c0c27667e78ae521eb64f1c7c81aecc2ea45c147d52ddd30cebb41813bc0">ParamType::Piecewise</a>) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> (param.calibrate() &amp;&amp; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;calibrationType() == <a class="code" href="namespaceore_1_1data.html#a18340f2f2342933b54b1dc8e6c0ed797a6699fc2680f2601917ba69358414fa51">CalibrationType::Bootstrap</a>) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            QL_REQUIRE(!expiries.empty(), <span class="stringliteral">&quot;InfJyBuilder: calibration instrument expiries are empty.&quot;</span>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            QL_REQUIRE(!values.empty(), <span class="stringliteral">&quot;InfJyBuilder: expected at least one initial value.&quot;</span>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: overriding initial times &quot;</span> &lt;&lt; times &lt;&lt; <span class="stringliteral">&quot; with option calibration instrument &quot;</span> &lt;&lt;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="stringliteral">&quot;expiries &quot;</span> &lt;&lt; expiries &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            times = Array(expiries.begin(), expiries.end() - 1);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            values = Array(times.size() + 1, values[0]);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            QL_REQUIRE(values.size() == times.size() + 1, <span class="stringliteral">&quot;InfJyBuilder: size of values grid, &quot;</span> &lt;&lt; values.size() &lt;&lt;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="stringliteral">&quot;, should be 1 greater than the size of the times grid, &quot;</span> &lt;&lt; times.size() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;Expected &quot;</span> &lt;&lt; paramName &lt;&lt; <span class="stringliteral">&quot; parameter to be Constant or Piecewise.&quot;</span>);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished setting up parameters for &quot;</span> &lt;&lt; paramName);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_cgraph">
<area shape="rect" title=" " alt="" coords="5,111,104,138"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="152,5,328,47"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a23131baceb8e12f265f04d3d772fa628" title=" " alt="" coords="152,71,328,112"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#a8df044e9f3b4bd3e3e5c855a7f84adbb" title=" " alt="" coords="152,136,328,177"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#adaf95a566e294a0739abae733b5475ee" title=" " alt="" coords="152,201,328,243"/>
</map>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_abc7000ad61c727a1c92edf461dfeda9e_icgraph">
<area shape="rect" title=" " alt="" coords="339,31,437,57"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#aaeb4b90a6643bcae142fa5f3ed5dc0c6" title="Create the inflation index parameterisation." alt="" coords="153,5,279,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ac38891d2ad44f9b6e02730f8d10b58d8" title="Create the real rate parameterisation." alt="" coords="141,56,291,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="5,31,93,57"/>
</map>
</div>

</div>
</div>
<a id="acc7b35fae386b8e18ed5b7a4bbe99cea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc7b35fae386b8e18ed5b7a4bbe99cea">&#9670;&nbsp;</a></span>referenceCalibrationDates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; Date &gt; referenceCalibrationDates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create the reference calibration dates. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00756">756</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                                                           {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start building reference date grid &#39;&quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0bc17d8c194cab073236cd2e1f224404">referenceCalibrationGrid_</a> &lt;&lt; <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    vector&lt;Date&gt; res;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0bc17d8c194cab073236cd2e1f224404">referenceCalibrationGrid_</a>.empty())</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        res = DateGrid(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0bc17d8c194cab073236cd2e1f224404">referenceCalibrationGrid_</a>).dates();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished building reference date grid.&quot;</span>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_cgraph">
<area shape="rect" title="Create the reference calibration dates." alt="" coords="5,13,176,39"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="224,5,356,47"/>
</map>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_acc7b35fae386b8e18ed5b7a4bbe99cea_icgraph">
<area shape="rect" title="Create the reference calibration dates." alt="" coords="1156,56,1327,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="944,5,1105,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="941,56,1108,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="951,107,1098,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="743,56,893,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="536,56,695,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="390,5,478,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,107,141,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,107,488,133"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,157,332,184"/>
</map>
</div>

</div>
</div>
<a id="a653cb2f17648c48732f61cf3ceb947fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a653cb2f17648c48732f61cf3ceb947fb">&#9670;&nbsp;</a></span>initialiseMarket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void initialiseMarket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to initialise market data members that may be needed for building calibration instruments. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00769">769</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                                    {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: start initialising market data members.&quot;</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">// Try catches are not nice but Market does not have a method for checking if a structure exists so it is </span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">// unfortunately necessary.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">cpiVolatility_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a>-&gt;cpiInflationCapFloorVolatilitySurface(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: the market does not have a CPI cap floor volatility surface.&quot;</span>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a> = *<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a>-&gt;yoyInflationIndex(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a>);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">marketObserver_</a>-&gt;registerWith(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">yoyInflationIndex_</a>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: the market does not have a YoY inflation index.&quot;</span>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">yoyVolatility_</a> = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">market_</a>-&gt;yoyCapFloorVol(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">data_</a>-&gt;index(), <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">configuration_</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: the market does not have a YoY cap floor volatility surface.&quot;</span>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;InfJyBuilder: finished initialising market data members.&quot;</span>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a653cb2f17648c48732f61cf3ceb947fb_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a653cb2f17648c48732f61cf3ceb947fb_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a653cb2f17648c48732f61cf3ceb947fb_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a653cb2f17648c48732f61cf3ceb947fb_icgraph">
<area shape="rect" title="Attempt to initialise market data members that may be needed for building calibration instruments." alt="" coords="141,5,251,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a77ef4b995a50b74ebba1339685f47995" title=" " alt="" coords="5,5,93,32"/>
</map>
</div>

</div>
</div>
<a id="a963ba81fda2b78c9565c4bbd02cd3504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963ba81fda2b78c9565c4bbd02cd3504">&#9670;&nbsp;</a></span>pricesChanged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool pricesChanged </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>updateCache</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns <code>true</code> if the market value of any of the calibration helpers has changed. If <code>updateCache</code> is <code>true</code>, the cached prices are updated if they have changed. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00797">797</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                                       {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">// Build the calibration instruments again before checking the market price below.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// Don&#39;t need to do this if updateCache is true, because only called above after buildCalibrationBaskets().</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">if</span> (!updateCache)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7">buildCalibrationBaskets</a>();</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// Resize the cache to match the number of calibration instruments</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keyword">auto</span> numInsts = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a>.size() + <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a>.size();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">priceCache_</a>.size() != numInsts)</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">priceCache_</a> = vector&lt;Real&gt;(numInsts, Null&lt;Real&gt;());</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// Check if any market prices have changed. Return true if they have and false if they have not.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="comment">// If asked to update the cached prices, via updateCache being true, update the prices, if necessary.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    Size ctr = 0;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; ci : boost::range::join(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">realRateBasket_</a>, <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">indexBasket_</a>)) {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keyword">auto</span> mp = <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785">marketPrice</a>(ci);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span> (!<a class="codeRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(<a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">priceCache_</a>[ctr], mp)) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">if</span> (updateCache)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                <a class="code" href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">priceCache_</a>[ctr] = mp;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        ctr++;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_cgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_cgraph">
<area shape="rect" title=" " alt="" coords="5,523,113,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7" title="Build any calibration baskets requested by the configuration i.e. via the data_ member." alt="" coords="161,472,320,499"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="189,523,292,549"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785" title="Return the market value of the given calibration helper." alt="" coords="195,573,287,600"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575" title="Build the calibration basket." alt="" coords="381,413,531,440"/>
<area shape="rect" href="classore_1_1data_1_1_model_parameter.html#aacf0933dd9d459ffbedbac265f3269b5" title=" " alt="" coords="368,465,544,506"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747" title="Find calibration basket with parameter value equal to parameter." alt="" coords="395,531,517,557"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d" title="Build a CPI cap floor calibration basket." alt="" coords="603,224,764,251"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a2d3d9b3795a151df5e33b31b2b5575cc" title=" " alt="" coords="825,443,1008,485"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2" title="Build a YoY cap floor calibration basket." alt="" coords="600,333,767,360"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e" title="Build a YoY swap calibration basket." alt="" coords="610,388,757,415"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#a644718bb2fb240de962dc3c9a1fdf0dc" title="Returns true if the calibration basket is empty." alt="" coords="592,490,775,531"/>
<area shape="rect" href="classore_1_1data_1_1_calibration_basket.html#aa525cac0662eacaed44a94894b9a002a" title=" " alt="" coords="592,555,775,597"/>
<area shape="rect" href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28" title="Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="825,107,1009,149"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370" title=" " alt="" coords="877,224,956,251"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a" title=" " alt="" coords="868,5,965,32"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30" title=" " alt="" coords="869,275,964,301"/>
<area shape="rect" href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039" title=" " alt="" coords="835,56,998,83"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea" title="Create the reference calibration dates." alt="" coords="831,392,1002,419"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="851,173,982,200"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a9af2048ec25ea1962eda9a08b70acbc3" title=" " alt="" coords="1103,224,1146,251"/>
<area shape="rect" href="classore_1_1data_1_1_date_grid.html#acb160a773a51bbd23047ca5e1c90ba2a" title=" " alt="" coords="1059,385,1191,426"/>
<area shape="rect" href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea" title="Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward." alt="" coords="823,326,1011,367"/>
</map>
</div>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a963ba81fda2b78c9565c4bbd02cd3504_icgraph">
<area shape="rect" title=" " alt="" coords="380,5,488,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,5,141,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,31,332,57"/>
</map>
</div>

</div>
</div>
<a id="a0ab42808dfdb4cbc27855eae7f89d785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ab42808dfdb4cbc27855eae7f89d785">&#9670;&nbsp;</a></span>marketPrice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Real marketPrice </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; QuantLib::CalibrationHelper &gt; &amp;&#160;</td>
          <td class="paramname"><em>helper</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the market value of the given calibration helper. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8cpp_source.html#l00826">826</a> of file <a class="el" href="infjybuilder_8cpp_source.html">infjybuilder.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> h = boost::dynamic_pointer_cast&lt;CpiCapFloorHelper&gt;(<a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">return</span> h-&gt;marketValue();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> h = boost::dynamic_pointer_cast&lt;YoYCapFloorHelper&gt;(<a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">return</span> h-&gt;marketValue();</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (boost::shared_ptr&lt;YoYSwapHelper&gt; h = boost::dynamic_pointer_cast&lt;YoYSwapHelper&gt;(<a class="codeRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">return</span> h-&gt;marketRate();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    QL_FAIL(<span class="stringliteral">&quot;InfJyBuilder: unrecognised calibration instrument for JY calibration.&quot;</span>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_inf_jy_builder_a0ab42808dfdb4cbc27855eae7f89d785_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_inf_jy_builder_a0ab42808dfdb4cbc27855eae7f89d785_icgraph" alt=""/></div>
<map name="classore_1_1data_1_1_inf_jy_builder_a0ab42808dfdb4cbc27855eae7f89d785_icgraph" id="aclassore_1_1data_1_1_inf_jy_builder_a0ab42808dfdb4cbc27855eae7f89d785_icgraph">
<area shape="rect" title="Return the market value of the given calibration helper." alt="" coords="536,5,628,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504" title=" " alt="" coords="380,5,488,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="5,5,141,32"/>
<area shape="rect" href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9" title="if false is returned, the model does not require a recalibration" alt="" coords="189,31,332,57"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a82226e669d4e6cd7376d1423c5b60077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82226e669d4e6cd7376d1423c5b60077">&#9670;&nbsp;</a></span>market_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1data_1_1_market.html">Market</a>&gt; market_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00073">73</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a0a4b08299a79a3b3b4d4eaad5bd28e99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a4b08299a79a3b3b4d4eaad5bd28e99">&#9670;&nbsp;</a></span>configuration_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string configuration_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00074">74</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="adafe7cfdf7d178aa1c949a02759b8fa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adafe7cfdf7d178aa1c949a02759b8fa5">&#9670;&nbsp;</a></span>data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1data_1_1_inf_jy_data.html">InfJyData</a>&gt; data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00075">75</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a0bc17d8c194cab073236cd2e1f224404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bc17d8c194cab073236cd2e1f224404">&#9670;&nbsp;</a></span>referenceCalibrationGrid_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string referenceCalibrationGrid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00076">76</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a72a5d2b5cf2cd645e147c6b898ec6483"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a5d2b5cf2cd645e147c6b898ec6483">&#9670;&nbsp;</a></span>parameterization_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="elRef" href="../qle/class_quant_ext_1_1_inf_jy_parameterization.html">QuantExt::InfJyParameterization</a>&gt; parameterization_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00078">78</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a53d6d3b4f4273e20b791c05b53261ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d6d3b4f4273e20b791c05b53261ad2">&#9670;&nbsp;</a></span>marketObserver_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1data_1_1_market_observer.html">MarketObserver</a>&gt; marketObserver_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00079">79</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a8ca075a069cbdaef300ed3c33643cbc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca075a069cbdaef300ed3c33643cbc7">&#9670;&nbsp;</a></span>rateCurve_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Handle&lt;YieldTermStructure&gt; rateCurve_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00082">82</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a3b4d7e0553841f69d5f75f3d3451a023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b4d7e0553841f69d5f75f3d3451a023">&#9670;&nbsp;</a></span>zeroInflationIndex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;QuantLib::ZeroInflationIndex&gt; zeroInflationIndex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00085">85</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="afd3cf0f8fb1df1e41b5ffa3465ce7d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">&#9670;&nbsp;</a></span>cpiVolatility_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Handle&lt;QuantLib::CPIVolatilitySurface&gt; cpiVolatility_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00088">88</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="afe1a37433919dbd599fcb9b992256145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe1a37433919dbd599fcb9b992256145">&#9670;&nbsp;</a></span>yoyInflationIndex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;QuantLib::YoYInflationIndex&gt; yoyInflationIndex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00089">89</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a2e4c56de13c681c63fe9a5d1b0a65387"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4c56de13c681c63fe9a5d1b0a65387">&#9670;&nbsp;</a></span>yoyVolatility_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Handle&lt;QuantLib::YoYOptionletVolatilitySurface&gt; yoyVolatility_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00090">90</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a6c3eda0b5404f3ff116648f3ba963630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c3eda0b5404f3ff116648f3ba963630">&#9670;&nbsp;</a></span>forceCalibration_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool forceCalibration_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00093">93</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a02893862c9291857eacb13b282763a19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02893862c9291857eacb13b282763a19">&#9670;&nbsp;</a></span>realRateBasket_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> realRateBasket_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calibration instruments to use for calibrating the real rate portion of the JY model. The basket is empty if we are not calibrating the real rate portion of the JY model. Depending on the calibration configuration, either the real rate reversion parameter or the real rate volatility parameter will be adjusted in order to match these instruments. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00100">100</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="ac0aba3b464ef608c3d87b3119c0ff4b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0aba3b464ef608c3d87b3119c0ff4b5">&#9670;&nbsp;</a></span>rrInstActive_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;bool&gt; rrInstActive_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00101">101</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="ae72eab70098c362118240f7f399929ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72eab70098c362118240f7f399929ae">&#9670;&nbsp;</a></span>rrInstExpiries_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Array rrInstExpiries_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00102">102</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="a9f41b27b8a702a1e17ce9f1dcc84420e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f41b27b8a702a1e17ce9f1dcc84420e">&#9670;&nbsp;</a></span>indexBasket_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">Helpers</a> indexBasket_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calibration instruments to use for calibrating the inflation index portion of the JY model. The basket is empty if we are not calibrating the inflation index portion of the JY model. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00107">107</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="af85c4827699d9287d8d2f19f48f4a9d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85c4827699d9287d8d2f19f48f4a9d4">&#9670;&nbsp;</a></span>indexInstActive_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;bool&gt; indexInstActive_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00108">108</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="ac0a558282c73c546091441cbc15b68a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a558282c73c546091441cbc15b68a7">&#9670;&nbsp;</a></span>indexInstExpiries_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Array indexInstExpiries_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00109">109</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
<a id="aef97893ccf18dc74bd1d845d0fde38b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef97893ccf18dc74bd1d845d0fde38b5">&#9670;&nbsp;</a></span>priceCache_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;QuantLib::Real&gt; priceCache_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cache the prices of all of the active calibration helper instruments. </p>

<p class="definition">Definition at line <a class="el" href="infjybuilder_8hpp_source.html#l00112">112</a> of file <a class="el" href="infjybuilder_8hpp_source.html">infjybuilder.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a2e4c56de13c681c63fe9a5d1b0a65387"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a2e4c56de13c681c63fe9a5d1b0a65387">ore::data::InfJyBuilder::yoyVolatility_</a></div><div class="ttdeci">QuantLib::Handle&lt; QuantLib::YoYOptionletVolatilitySurface &gt; yoyVolatility_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00090">infjybuilder.hpp:90</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a02893862c9291857eacb13b282763a19"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a02893862c9291857eacb13b282763a19">ore::data::InfJyBuilder::realRateBasket_</a></div><div class="ttdeci">Helpers realRateBasket_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00100">infjybuilder.hpp:100</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_acc7b35fae386b8e18ed5b7a4bbe99cea"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#acc7b35fae386b8e18ed5b7a4bbe99cea">ore::data::InfJyBuilder::referenceCalibrationDates</a></div><div class="ttdeci">std::vector&lt; QuantLib::Date &gt; referenceCalibrationDates() const</div><div class="ttdoc">Create the reference calibration dates.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00756">infjybuilder.cpp:756</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_lgm_data_html_a85128cf8fffb22eea15b6db0929ffb43"><div class="ttname"><a href="classore_1_1data_1_1_lgm_data.html#a85128cf8fffb22eea15b6db0929ffb43">ore::data::LgmData::ReversionType</a></div><div class="ttdeci">ReversionType</div><div class="ttdoc">Supported mean reversion types.</div><div class="ttdef"><b>Definition:</b> <a href="lgmdata_8hpp_source.html#l00098">lgmdata.hpp:98</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a53d6d3b4f4273e20b791c05b53261ad2"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a53d6d3b4f4273e20b791c05b53261ad2">ore::data::InfJyBuilder::marketObserver_</a></div><div class="ttdeci">boost::shared_ptr&lt; MarketObserver &gt; marketObserver_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00079">infjybuilder.hpp:79</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm1f_piecewise_constant_hull_white_adaptor_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm1f_piecewise_constant_hull_white_adaptor.html">QuantExt::Lgm1fPiecewiseConstantHullWhiteAdaptor</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_aaeb4b90a6643bcae142fa5f3ed5dc0c6"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#aaeb4b90a6643bcae142fa5f3ed5dc0c6">ore::data::InfJyBuilder::createIndexParam</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantExt::FxBsParametrization &gt; createIndexParam() const</div><div class="ttdoc">Create the inflation index parameterisation.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00685">infjybuilder.cpp:685</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_afe1a37433919dbd599fcb9b992256145"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#afe1a37433919dbd599fcb9b992256145">ore::data::InfJyBuilder::yoyInflationIndex_</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantLib::YoYInflationIndex &gt; yoyInflationIndex_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00089">infjybuilder.hpp:89</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_ac0a558282c73c546091441cbc15b68a7"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#ac0a558282c73c546091441cbc15b68a7">ore::data::InfJyBuilder::indexInstExpiries_</a></div><div class="ttdeci">QuantLib::Array indexInstExpiries_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00109">infjybuilder.hpp:109</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a653cb2f17648c48732f61cf3ceb947fb"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a653cb2f17648c48732f61cf3ceb947fb">ore::data::InfJyBuilder::initialiseMarket</a></div><div class="ttdeci">void initialiseMarket()</div><div class="ttdoc">Attempt to initialise market data members that may be needed for building calibration instruments.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00769">infjybuilder.cpp:769</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_ae72eab70098c362118240f7f399929ae"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#ae72eab70098c362118240f7f399929ae">ore::data::InfJyBuilder::rrInstExpiries_</a></div><div class="ttdeci">QuantLib::Array rrInstExpiries_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00102">infjybuilder.hpp:102</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a18340f2f2342933b54b1dc8e6c0ed797a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespaceore_1_1data.html#a18340f2f2342933b54b1dc8e6c0ed797a6adf97f83acf6453d4a6a4b1070f3754">ore::data::CalibrationType::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a1cab4fb6a720eff245acb9f3a7a9e7c5"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a></div><div class="ttdeci">Filter close_enough(const RandomVariable &amp;x, const RandomVariable &amp;y)</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_adaf4807ccbbad086444bca74bc236c28"><div class="ttname"><a href="namespaceore_1_1data.html#adaf4807ccbbad086444bca74bc236c28">ore::data::cpiCapFloorStrikeValue</a></div><div class="ttdeci">Real cpiCapFloorStrikeValue(const boost::shared_ptr&lt; BaseStrike &gt; &amp;strike, const boost::shared_ptr&lt; ZeroInflationTermStructure &gt; &amp;curve, const QuantLib::Date &amp;optionMaturityDate)</div><div class="ttdoc">Return a cpi cap/floor strike value, the input strike can be of type absolute or atm forward.</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00397">utilities.cpp:397</a></div></div>
<div class="ttc" id="apiecewiseatmoptionletcurve_8cpp_html_ac28af33f0db47fd24320c0ae0844971f"><div class="ttname"><a href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a></div><div class="ttdeci">QuantLib::BootstrapHelper&lt; QuantLib::OptionletVolatilityStructure &gt; helper</div></div>
<div class="ttc" id="alog_8hpp_html_a9622ca943201e814041f051b7a10b3ea"><div class="ttname"><a href="log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a></div><div class="ttdeci">#define WLOG(text)</div><div class="ttdoc">Logging Macro (Level = Warning)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00338">log.hpp:338</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a62a24690024d3d23ae7d3f880eef8ef2"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a62a24690024d3d23ae7d3f880eef8ef2">ore::data::InfJyBuilder::buildYoYCapFloorBasket</a></div><div class="ttdeci">Helpers buildYoYCapFloorBasket(const CalibrationBasket &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries) const</div><div class="ttdoc">Build a YoY cap floor calibration basket.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00368">infjybuilder.cpp:368</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm1f_piecewise_constant_parametrization_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm1f_piecewise_constant_parametrization.html">QuantExt::Lgm1fPiecewiseConstantParametrization</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_aef97893ccf18dc74bd1d845d0fde38b5"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#aef97893ccf18dc74bd1d845d0fde38b5">ore::data::InfJyBuilder::priceCache_</a></div><div class="ttdeci">std::vector&lt; QuantLib::Real &gt; priceCache_</div><div class="ttdoc">Cache the prices of all of the active calibration helper instruments.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00112">infjybuilder.hpp:112</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_af85c4827699d9287d8d2f19f48f4a9d4"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#af85c4827699d9287d8d2f19f48f4a9d4">ore::data::InfJyBuilder::indexInstActive_</a></div><div class="ttdeci">std::vector&lt; bool &gt; indexInstActive_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00108">infjybuilder.hpp:108</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a0a4b08299a79a3b3b4d4eaad5bd28e99"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a0a4b08299a79a3b3b4d4eaad5bd28e99">ore::data::InfJyBuilder::configuration_</a></div><div class="ttdeci">std::string configuration_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00074">infjybuilder.hpp:74</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_model_builder_html_ad4022a137ba10acf78529ed31f54e479"><div class="ttname"><a href="classore_1_1data_1_1_model_builder.html#ad4022a137ba10acf78529ed31f54e479">ore::data::ModelBuilder::forceRecalculate</a></div><div class="ttdeci">virtual void forceRecalculate()</div><div class="ttdoc">force recalibration of model</div><div class="ttdef"><b>Definition:</b> <a href="modelbuilder_8hpp_source.html#l00037">modelbuilder.hpp:37</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a82226e669d4e6cd7376d1423c5b60077"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a82226e669d4e6cd7376d1423c5b60077">ore::data::InfJyBuilder::market_</a></div><div class="ttdeci">boost::shared_ptr&lt; Market &gt; market_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00073">infjybuilder.hpp:73</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a04274cbe5a4625db825e42c300eef575"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a04274cbe5a4625db825e42c300eef575">ore::data::InfJyBuilder::buildCalibrationBasket</a></div><div class="ttdeci">Helpers buildCalibrationBasket(const CalibrationBasket &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries, bool forRealRateReversion=false) const</div><div class="ttdoc">Build the calibration basket.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00243">infjybuilder.cpp:243</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a133d1dc488d0f63362752706f448007e"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a133d1dc488d0f63362752706f448007e">ore::data::InfJyBuilder::buildYoYSwapBasket</a></div><div class="ttdeci">Helpers buildYoYSwapBasket(const CalibrationBasket &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries, bool forRealRateReversion=false) const</div><div class="ttdoc">Build a YoY swap calibration basket.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00483">infjybuilder.cpp:483</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a2581593e2b36910abee4f7e2cfda1039"><div class="ttname"><a href="namespaceore_1_1data.html#a2581593e2b36910abee4f7e2cfda1039">ore::data::optionMaturity</a></div><div class="ttdeci">Date optionMaturity(const boost::variant&lt; Date, Period &gt; &amp;maturity, const QuantLib::Calendar &amp;calendar, const QuantLib::Date &amp;referenceDate)</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00391">utilities.cpp:391</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a8ca075a069cbdaef300ed3c33643cbc7"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a8ca075a069cbdaef300ed3c33643cbc7">ore::data::InfJyBuilder::rateCurve_</a></div><div class="ttdeci">Handle&lt; YieldTermStructure &gt; rateCurve_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00082">infjybuilder.hpp:82</a></div></div>
<div class="ttc" id="alog_8hpp_html_a34c7c8cde9b91d2eee82d7b9a0b66fd5"><div class="ttname"><a href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a></div><div class="ttdeci">#define DLOG(text)</div><div class="ttdoc">Logging Macro (Level = Debug)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00342">log.hpp:342</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a9f41b27b8a702a1e17ce9f1dcc84420e"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a9f41b27b8a702a1e17ce9f1dcc84420e">ore::data::InfJyBuilder::indexBasket_</a></div><div class="ttdeci">Helpers indexBasket_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00107">infjybuilder.hpp:107</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a935e1c16b02ca6dbe5e1e5f32882b2c7"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a935e1c16b02ca6dbe5e1e5f32882b2c7">ore::data::InfJyBuilder::buildCalibrationBaskets</a></div><div class="ttdeci">void buildCalibrationBaskets() const</div><div class="ttdoc">Build any calibration baskets requested by the configuration i.e. via the data_ member.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00154">infjybuilder.cpp:154</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a963ba81fda2b78c9565c4bbd02cd3504"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a963ba81fda2b78c9565c4bbd02cd3504">ore::data::InfJyBuilder::pricesChanged</a></div><div class="ttdeci">bool pricesChanged(bool updateCache) const</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00797">infjybuilder.cpp:797</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_adafe7cfdf7d178aa1c949a02759b8fa5"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#adafe7cfdf7d178aa1c949a02759b8fa5">ore::data::InfJyBuilder::data_</a></div><div class="ttdeci">boost::shared_ptr&lt; InfJyData &gt; data_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00075">infjybuilder.hpp:75</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a18340f2f2342933b54b1dc8e6c0ed797a6699fc2680f2601917ba69358414fa51"><div class="ttname"><a href="namespaceore_1_1data.html#a18340f2f2342933b54b1dc8e6c0ed797a6699fc2680f2601917ba69358414fa51">ore::data::CalibrationType::Bootstrap</a></div><div class="ttdeci">@ Bootstrap</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_ade48cc2e594ab6101da51172394368d7"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#ade48cc2e594ab6101da51172394368d7">ore::data::InfJyBuilder::Helpers</a></div><div class="ttdeci">std::vector&lt; boost::shared_ptr&lt; QuantLib::CalibrationHelper &gt; &gt; Helpers</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00056">infjybuilder.hpp:56</a></div></div>
<div class="ttc" id="agroup__utilities_html_ga1b8cd9a976247da6df232ad48d4af190"><div class="ttname"><a href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a></div><div class="ttdeci">std::string to_string(const QuantLib::Date &amp;date)</div><div class="ttdoc">Convert QuantLib::Date to std::string.</div><div class="ttdef"><b>Definition:</b> <a href="to__string_8cpp_source.html#l00038">to_string.cpp:38</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm1f_piecewise_linear_parametrization_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_lgm1f_piecewise_linear_parametrization.html">QuantExt::Lgm1fPiecewiseLinearParametrization</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a0ab42808dfdb4cbc27855eae7f89d785"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a0ab42808dfdb4cbc27855eae7f89d785">ore::data::InfJyBuilder::marketPrice</a></div><div class="ttdeci">QuantLib::Real marketPrice(const boost::shared_ptr&lt; QuantLib::CalibrationHelper &gt; &amp;helper) const</div><div class="ttdoc">Return the market value of the given calibration helper.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00826">infjybuilder.cpp:826</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a6c3eda0b5404f3ff116648f3ba963630"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a6c3eda0b5404f3ff116648f3ba963630">ore::data::InfJyBuilder::forceCalibration_</a></div><div class="ttdeci">bool forceCalibration_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00093">infjybuilder.hpp:93</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a3bc0c8081ffc221edaa8f90c065a2747"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a3bc0c8081ffc221edaa8f90c065a2747">ore::data::InfJyBuilder::calibrationBasket</a></div><div class="ttdeci">const CalibrationBasket &amp; calibrationBasket(const std::string &amp;parameter) const</div><div class="ttdoc">Find calibration basket with parameter value equal to parameter.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00599">infjybuilder.cpp:599</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_fx_bs_constant_parametrization_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_fx_bs_constant_parametrization.html">QuantExt::FxBsConstantParametrization</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_afd3cf0f8fb1df1e41b5ffa3465ce7d6c"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#afd3cf0f8fb1df1e41b5ffa3465ce7d6c">ore::data::InfJyBuilder::cpiVolatility_</a></div><div class="ttdeci">QuantLib::Handle&lt; QuantLib::CPIVolatilitySurface &gt; cpiVolatility_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00088">infjybuilder.hpp:88</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_fx_bs_piecewise_constant_parametrization_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_fx_bs_piecewise_constant_parametrization.html">QuantExt::FxBsPiecewiseConstantParametrization</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_abc7000ad61c727a1c92edf461dfeda9e"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#abc7000ad61c727a1c92edf461dfeda9e">ore::data::InfJyBuilder::setupParams</a></div><div class="ttdeci">void setupParams(const ModelParameter &amp;param, QuantLib::Array &amp;times, QuantLib::Array &amp;values, const QuantLib::Array &amp;expiries, const std::string &amp;paramName) const</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00726">infjybuilder.cpp:726</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a83cbd1c07f17f2f51faea02f40eeaac9"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a83cbd1c07f17f2f51faea02f40eeaac9">ore::data::InfJyBuilder::requiresRecalibration</a></div><div class="ttdeci">bool requiresRecalibration() const override</div><div class="ttdoc">if false is returned, the model does not require a recalibration</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00131">infjybuilder.cpp:131</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a72a5d2b5cf2cd645e147c6b898ec6483"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a72a5d2b5cf2cd645e147c6b898ec6483">ore::data::InfJyBuilder::parameterization_</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantExt::InfJyParameterization &gt; parameterization_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00078">infjybuilder.hpp:78</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a1d8097d686d022bfc1405413cb49deea"><div class="ttname"><a href="namespaceore_1_1data.html#a1d8097d686d022bfc1405413cb49deea">ore::data::yoyCapFloorStrikeValue</a></div><div class="ttdeci">Real yoyCapFloorStrikeValue(const boost::shared_ptr&lt; BaseStrike &gt; &amp;strike, const boost::shared_ptr&lt; YoYInflationTermStructure &gt; &amp;curve, const QuantLib::Date &amp;optionMaturityDate)</div><div class="ttdoc">Return a yoy cap/floor strike value, the input strike can be of type absolute or atm forward.</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00412">utilities.cpp:412</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a0bc17d8c194cab073236cd2e1f224404"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a0bc17d8c194cab073236cd2e1f224404">ore::data::InfJyBuilder::referenceCalibrationGrid_</a></div><div class="ttdeci">std::string referenceCalibrationGrid_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00076">infjybuilder.hpp:76</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_lgm_data_html_a8b2aa10016abb1ffb6f55484a04a5143"><div class="ttname"><a href="classore_1_1data_1_1_lgm_data.html#a8b2aa10016abb1ffb6f55484a04a5143">ore::data::LgmData::VolatilityType</a></div><div class="ttdeci">VolatilityType</div><div class="ttdoc">Supported volatility types.</div><div class="ttdef"><b>Definition:</b> <a href="lgmdata_8hpp_source.html#l00109">lgmdata.hpp:109</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_ac38891d2ad44f9b6e02730f8d10b58d8"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#ac38891d2ad44f9b6e02730f8d10b58d8">ore::data::InfJyBuilder::createRealRateParam</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantExt::Lgm1fParametrization&lt; ZeroInflationTermStructure &gt; &gt; createRealRateParam() const</div><div class="ttdoc">Create the real rate parameterisation.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00610">infjybuilder.cpp:610</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_ae8fac71dd90c4bb15f1a7da184f39e30"><div class="ttname"><a href="../qle/namespace_quant_ext.html#ae8fac71dd90c4bb15f1a7da184f39e30">inflationTime</a></div><div class="ttdeci">Time inflationTime(const Date &amp;date, const boost::shared_ptr&lt; InflationTermStructure &gt; &amp;inflationTs, bool indexIsInterpolated, const DayCounter &amp;dayCounter)</div></div>
<div class="ttc" id="autilities_8cpp_html_a78752433f4fe4a459158fefc086335e5"><div class="ttname"><a href="utilities_8cpp.html#a78752433f4fe4a459158fefc086335e5">calendar</a></div><div class="ttdeci">Calendar calendar</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00385">utilities.cpp:385</a></div></div>
<div class="ttc" id="alog_8hpp_html_a99aeca53f904c71a68070e1f9d310232"><div class="ttname"><a href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a></div><div class="ttdeci">#define TLOG(text)</div><div class="ttdoc">Logging Macro (Level = Data)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00344">log.hpp:344</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a3a023c0c27667e78ae521eb64f1c7c81aecc2ea45c147d52ddd30cebb41813bc0"><div class="ttname"><a href="namespaceore_1_1data.html#a3a023c0c27667e78ae521eb64f1c7c81aecc2ea45c147d52ddd30cebb41813bc0">ore::data::ParamType::Piecewise</a></div><div class="ttdeci">@ Piecewise</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a3a023c0c27667e78ae521eb64f1c7c81acb17869fe51048b5a5c4c6106551a255"><div class="ttname"><a href="namespaceore_1_1data.html#a3a023c0c27667e78ae521eb64f1c7c81acb17869fe51048b5a5c4c6106551a255">ore::data::ParamType::Constant</a></div><div class="ttdeci">@ Constant</div></div>
<div class="ttc" id="alog_8hpp_html_a158e0f085ddedfe5c8ed069986039f50"><div class="ttname"><a href="log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a></div><div class="ttdeci">#define LOG(text)</div><div class="ttdoc">Logging Macro (Level = Notice)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00340">log.hpp:340</a></div></div>
<div class="ttc" id="autilities_8cpp_html_a13d7d92e74b3e8c94c52ca7a1262c55e"><div class="ttname"><a href="utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a></div><div class="ttdeci">Time maturity</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00065">utilities.cpp:65</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a3b4d7e0553841f69d5f75f3d3451a023"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a3b4d7e0553841f69d5f75f3d3451a023">ore::data::InfJyBuilder::zeroInflationIndex_</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; zeroInflationIndex_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00085">infjybuilder.hpp:85</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_a69c1e8a74b5a706e29821a070c83907d"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#a69c1e8a74b5a706e29821a070c83907d">ore::data::InfJyBuilder::buildCpiCapFloorBasket</a></div><div class="ttdeci">Helpers buildCpiCapFloorBasket(const CalibrationBasket &amp;cb, std::vector&lt; bool &gt; &amp;active, QuantLib::Array &amp;expiries) const</div><div class="ttdoc">Build a CPI cap floor calibration basket.</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00264">infjybuilder.cpp:264</a></div></div>
<div class="ttc" id="anamespace_quant_ext_1_1_zero_inflation_html_a57de786c1c8988b6da9d354282b4b370"><div class="ttname"><a href="../qle/namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a></div><div class="ttdeci">QuantLib::Date fixingDate(const QuantLib::Date &amp;d, const QuantLib::Period obsLag, const QuantLib::Frequency freq, bool interpolated)</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_ad22960d15d32d9e5be44c045744d8a3a"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#ad22960d15d32d9e5be44c045744d8a3a">ore::data::InfJyBuilder::inflationIndex</a></div><div class="ttdeci">std::string inflationIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8cpp_source.html#l00112">infjybuilder.cpp:112</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_inf_jy_builder_html_ac0aba3b464ef608c3d87b3119c0ff4b5"><div class="ttname"><a href="classore_1_1data_1_1_inf_jy_builder.html#ac0aba3b464ef608c3d87b3119c0ff4b5">ore::data::InfJyBuilder::rrInstActive_</a></div><div class="ttdeci">std::vector&lt; bool &gt; rrInstActive_</div><div class="ttdef"><b>Definition:</b> <a href="infjybuilder_8hpp_source.html#l00101">infjybuilder.hpp:101</a></div></div>
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.8.20
</small></address>
</body>
</html>
