<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREData: EquityVolCurve Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oredextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-data@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.10</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceore.html">ore</a></li><li class="navelem"><a class="el" href="namespaceore_1_1data.html">data</a></li><li class="navelem"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classore_1_1data_1_1_equity_vol_curve-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">EquityVolCurve Class Reference<div class="ingroups"><a class="el" href="group__marketdata.html">Market Data</a> &raquo; <a class="el" href="group__curves.html">Curves</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Wrapper class for building Equity volatility structures.  
 <a href="classore_1_1data_1_1_equity_vol_curve.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="equityvolcurve_8hpp_source.html">ored/marketdata/equityvolcurve.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for EquityVolCurve:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve__coll__graph.png" border="0" usemap="#a_equity_vol_curve_coll__map" alt="Collaboration graph"/></div>
<map name="a_equity_vol_curve_coll__map" id="a_equity_vol_curve_coll__map">
<area shape="rect" title="Wrapper class for building Equity volatility structures." alt="" coords="548,609,695,855"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_spec.html" title="Equity Volatility curve description." alt="" coords="5,404,203,547"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html" title="Curve Specification." alt="" coords="149,197,267,355"/>
<area shape="rect" title=" " alt="" coords="99,95,157,135"/>
<area shape="rect" title=" " alt="" coords="55,5,201,45"/>
<area shape="rect" title=" " alt="" coords="227,448,407,503"/>
<area shape="rect" title=" " alt="" coords="432,455,509,495"/>
<area shape="rect" title=" " alt="" coords="534,455,613,495"/>
<area shape="rect" title=" " alt="" coords="637,455,731,495"/>
<area shape="rect" title=" " alt="" coords="756,455,809,495"/>
<area shape="rect" title=" " alt="" coords="834,448,985,503"/>
<area shape="rect" title=" " alt="" coords="1009,448,1220,503"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors</div></td></tr>
<tr class="memitem:a84d6edb926e8848c0abf18b8af2e6747"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a84d6edb926e8848c0abf18b8af2e6747">EquityVolCurve</a> ()</td></tr>
<tr class="memdesc:a84d6edb926e8848c0abf18b8af2e6747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a84d6edb926e8848c0abf18b8af2e6747">More...</a><br /></td></tr>
<tr class="separator:a84d6edb926e8848c0abf18b8af2e6747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960740b1feac7968b0f3dab5a2a16a67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a960740b1feac7968b0f3dab5a2a16a67">EquityVolCurve</a> (Date asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;<a class="el" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>, const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;eqIndex, const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt; &gt; &amp;requiredEquityCurves={}, const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt; &gt; &amp;requiredEquityVolCurves={}, const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_f_x_vol_curve.html">FXVolCurve</a> &gt; &gt; &amp;requiredFxVolCurves={}, const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_correlation_curve.html">CorrelationCurve</a> &gt; &gt; &amp;requiredCorrelationCurves={}, const <a class="el" href="classore_1_1data_1_1_market.html">Market</a> *market=nullptr, const <a class="el" href="classbool.html">bool</a> <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a3987971ffc25c840ee49e2eca623218a">buildCalibrationInfo</a>=true)</td></tr>
<tr class="memdesc:a960740b1feac7968b0f3dab5a2a16a67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detailed constructor.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a960740b1feac7968b0f3dab5a2a16a67">More...</a><br /></td></tr>
<tr class="separator:a960740b1feac7968b0f3dab5a2a16a67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Inspectors</h2></td></tr>
<tr class="memitem:ad0a079fa8608dac9333770f2c345acb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad0a079fa8608dac9333770f2c345acb4">spec_</a></td></tr>
<tr class="separator:ad0a079fa8608dac9333770f2c345acb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e37c811c4794e4dded0233871bf813"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../qle/class_black_vol_term_structure.html">BlackVolTermStructure</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a></td></tr>
<tr class="separator:a19e37c811c4794e4dded0233871bf813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936be92f5f766489c24b9ce54d702b36"><td class="memItemLeft" align="right" valign="top">QuantLib::Calendar&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">calendar_</a></td></tr>
<tr class="separator:a936be92f5f766489c24b9ce54d702b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58abbb5a649fa48e14b30812991617dd"><td class="memItemLeft" align="right" valign="top">QuantLib::Currency&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a58abbb5a649fa48e14b30812991617dd">currency_</a></td></tr>
<tr class="separator:a58abbb5a649fa48e14b30812991617dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad54546634b68f067b0f3867f7283c998"><td class="memItemLeft" align="right" valign="top">QuantLib::DayCounter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad54546634b68f067b0f3867f7283c998">dayCounter_</a></td></tr>
<tr class="separator:ad54546634b68f067b0f3867f7283c998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e7c296e20653ab73fa6c3b2ebed22a"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a></td></tr>
<tr class="separator:a83e7c296e20653ab73fa6c3b2ebed22a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0ba496aadfdb4b5d3c4034bd4e50ad9"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_volatility_config.html">VolatilityConfig</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#af0ba496aadfdb4b5d3c4034bd4e50ad9">volatilityConfig_</a></td></tr>
<tr class="separator:af0ba496aadfdb4b5d3c4034bd4e50ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6406d74151328ae90b3ebeecaf0ba9a9"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="structore_1_1data_1_1_fx_eq_comm_vol_calibration_info.html">FxEqCommVolCalibrationInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a></td></tr>
<tr class="separator:a6406d74151328ae90b3ebeecaf0ba9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd0c02cca2c71f1da6bd117b3fe0663"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a> () const</td></tr>
<tr class="separator:accd0c02cca2c71f1da6bd117b3fe0663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf10cbffef109ac32266d9a7f6137992"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#aaf10cbffef109ac32266d9a7f6137992">buildVolatility</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_constant_volatility_config.html">ConstantVolatilityConfig</a> &amp;cvc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader)</td></tr>
<tr class="memdesc:aaf10cbffef109ac32266d9a7f6137992"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility structure from a single constant volatility quote.  <a href="classore_1_1data_1_1_equity_vol_curve.html#aaf10cbffef109ac32266d9a7f6137992">More...</a><br /></td></tr>
<tr class="separator:aaf10cbffef109ac32266d9a7f6137992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cfb7d35baac2dc7337911613ea7631d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a5cfb7d35baac2dc7337911613ea7631d">buildVolatility</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_curve_config.html">VolatilityCurveConfig</a> &amp;vcc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader)</td></tr>
<tr class="memdesc:a5cfb7d35baac2dc7337911613ea7631d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility curve from a 1-D curve of volatility quotes.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a5cfb7d35baac2dc7337911613ea7631d">More...</a><br /></td></tr>
<tr class="separator:a5cfb7d35baac2dc7337911613ea7631d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad54d635179f89d607a847dbfc152a2ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad54d635179f89d607a847dbfc152a2ce">buildVolatility</a> (const QuantLib::Date &amp;asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_strike_surface_config.html">VolatilityStrikeSurfaceConfig</a> &amp;vssc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:ad54d635179f89d607a847dbfc152a2ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface from a collection of expiry and absolute strike pairs.  <a href="classore_1_1data_1_1_equity_vol_curve.html#ad54d635179f89d607a847dbfc152a2ce">More...</a><br /></td></tr>
<tr class="separator:ad54d635179f89d607a847dbfc152a2ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be68b5b4869883a470161d420fef679"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a9be68b5b4869883a470161d420fef679">buildVolatility</a> (const QuantLib::Date &amp;asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_moneyness_surface_config.html">VolatilityMoneynessSurfaceConfig</a> &amp;vmsc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:a9be68b5b4869883a470161d420fef679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface from a collection of expiry and moneyness strike pairs.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a9be68b5b4869883a470161d420fef679">More...</a><br /></td></tr>
<tr class="separator:a9be68b5b4869883a470161d420fef679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff043fce577f592f6a660001d412371"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#afff043fce577f592f6a660001d412371">buildVolatility</a> (const QuantLib::Date &amp;asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_delta_surface_config.html">VolatilityDeltaSurfaceConfig</a> &amp;vdsc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:afff043fce577f592f6a660001d412371"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface from a collection of expiry and strike delta pairs.  <a href="classore_1_1data_1_1_equity_vol_curve.html#afff043fce577f592f6a660001d412371">More...</a><br /></td></tr>
<tr class="separator:afff043fce577f592f6a660001d412371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab94b867e9ffd452659ffc45508140bbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ab94b867e9ffd452659ffc45508140bbc">buildVolatility</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp;<a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>, const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;<a class="el" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>, const <a class="el" href="classore_1_1data_1_1_proxy_volatility_config.html">ProxyVolatilityConfig</a> &amp;epvc, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt; &gt; &amp;eqCurves, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt; &gt; &amp;eqVolCurves, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_f_x_vol_curve.html">FXVolCurve</a> &gt; &gt; &amp;fxVolCurves, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_correlation_curve.html">CorrelationCurve</a> &gt; &gt; &amp;requiredCorrelationCurves, const <a class="el" href="classore_1_1data_1_1_market.html">Market</a> *fxIndices=nullptr)</td></tr>
<tr class="memdesc:ab94b867e9ffd452659ffc45508140bbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface as a proxy from another volatility surface.  <a href="classore_1_1data_1_1_equity_vol_curve.html#ab94b867e9ffd452659ffc45508140bbc">More...</a><br /></td></tr>
<tr class="separator:ab94b867e9ffd452659ffc45508140bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3987971ffc25c840ee49e2eca623218a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a3987971ffc25c840ee49e2eca623218a">buildCalibrationInfo</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;<a class="el" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;config, const Handle&lt; QuantExt::EquityIndex2 &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:a3987971ffc25c840ee49e2eca623218a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the calibration info.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a3987971ffc25c840ee49e2eca623218a">More...</a><br /></td></tr>
<tr class="separator:a3987971ffc25c840ee49e2eca623218a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4700309ca6155ced2e5d380d5744369e"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr&lt; <a class="elRef" href="../qle/class_black_vol_term_structure.html">BlackVolTermStructure</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a4700309ca6155ced2e5d380d5744369e">volTermStructure</a> () const</td></tr>
<tr class="separator:a4700309ca6155ced2e5d380d5744369e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bcc2beb0a4e69b2194f13109f74ecd0"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr&lt; <a class="el" href="structore_1_1data_1_1_fx_eq_comm_vol_calibration_info.html">FxEqCommVolCalibrationInfo</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a2bcc2beb0a4e69b2194f13109f74ecd0">calibrationInfo</a> () const</td></tr>
<tr class="separator:a2bcc2beb0a4e69b2194f13109f74ecd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Wrapper class for building Equity volatility structures. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00044">44</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a84d6edb926e8848c0abf18b8af2e6747" name="a84d6edb926e8848c0abf18b8af2e6747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d6edb926e8848c0abf18b8af2e6747">&#9670;&#160;</a></span>EquityVolCurve() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00049">49</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a960740b1feac7968b0f3dab5a2a16a67" name="a960740b1feac7968b0f3dab5a2a16a67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a960740b1feac7968b0f3dab5a2a16a67">&#9670;&#160;</a></span>EquityVolCurve() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> </td>
          <td>(</td>
          <td class="paramtype">Date&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;&#160;</td>
          <td class="paramname"><em>curveConfigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredEquityCurves</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredEquityVolCurves</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_f_x_vol_curve.html">FXVolCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredFxVolCurves</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_correlation_curve.html">CorrelationCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredCorrelationCurves</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_market.html">Market</a> *&#160;</td>
          <td class="paramname"><em>market</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>buildCalibrationInfo</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detailed constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="accd0c02cca2c71f1da6bd117b3fe0663" name="accd0c02cca2c71f1da6bd117b3fe0663"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accd0c02cca2c71f1da6bd117b3fe0663">&#9670;&#160;</a></span>spec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp; spec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00062">62</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   62</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#ad0a079fa8608dac9333770f2c345acb4">spec_</a>; }</div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_ad0a079fa8608dac9333770f2c345acb4"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#ad0a079fa8608dac9333770f2c345acb4">ore::data::EquityVolCurve::spec_</a></div><div class="ttdeci">EquityVolatilityCurveSpec spec_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00106">equityvolcurve.hpp:106</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_accd0c02cca2c71f1da6bd117b3fe0663_icgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_accd0c02cca2c71f1da6bd117b3fe0663_icgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_equity_vol_curve_accd0c02cca2c71f1da6bd117b3fe0663_icgraph" id="aclassore_1_1data_1_1_equity_vol_curve_accd0c02cca2c71f1da6bd117b3fe0663_icgraph">
<area shape="rect" title=" " alt="" coords="152,5,203,31"/>
<area shape="rect" href="classore_1_1data_1_1_equity_vol_curve.html#ab94b867e9ffd452659ffc45508140bbc" title="Build a volatility surface as a proxy from another volatility surface." alt="" coords="5,5,104,31"/>
</map>
</div>

</div>
</div>
<a id="aaf10cbffef109ac32266d9a7f6137992" name="aaf10cbffef109ac32266d9a7f6137992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf10cbffef109ac32266d9a7f6137992">&#9670;&#160;</a></span>buildVolatility() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_constant_volatility_config.html">ConstantVolatilityConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>cvc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility structure from a single constant volatility quote. </p>

</div>
</div>
<a id="a5cfb7d35baac2dc7337911613ea7631d" name="a5cfb7d35baac2dc7337911613ea7631d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cfb7d35baac2dc7337911613ea7631d">&#9670;&#160;</a></span>buildVolatility() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_curve_config.html">VolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility curve from a 1-D curve of volatility quotes. </p>

</div>
</div>
<a id="ad54d635179f89d607a847dbfc152a2ce" name="ad54d635179f89d607a847dbfc152a2ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad54d635179f89d607a847dbfc152a2ce">&#9670;&#160;</a></span>buildVolatility() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_strike_surface_config.html">VolatilityStrikeSurfaceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vssc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface from a collection of expiry and absolute strike pairs. </p>

</div>
</div>
<a id="a9be68b5b4869883a470161d420fef679" name="a9be68b5b4869883a470161d420fef679"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be68b5b4869883a470161d420fef679">&#9670;&#160;</a></span>buildVolatility() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_moneyness_surface_config.html">VolatilityMoneynessSurfaceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vmsc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface from a collection of expiry and moneyness strike pairs. </p>

</div>
</div>
<a id="afff043fce577f592f6a660001d412371" name="afff043fce577f592f6a660001d412371"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afff043fce577f592f6a660001d412371">&#9670;&#160;</a></span>buildVolatility() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_delta_surface_config.html">VolatilityDeltaSurfaceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vdsc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; QuantExt::EquityIndex2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface from a collection of expiry and strike delta pairs. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8cpp_source.html#l00767">767</a> of file <a class="el" href="equityvolcurve_8cpp_source.html">equityvolcurve.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  769</span>                                                                                          {</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>    <span class="keyword">using </span>boost::adaptors::transformed;</div>
<div class="line"><span class="lineno">  772</span>    <span class="keyword">using </span>boost::algorithm::join;</div>
<div class="line"><span class="lineno">  773</span> </div>
<div class="line"><span class="lineno">  774</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: start building 2-D volatility delta strike surface&quot;</span>);</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>    QL_REQUIRE(vdsc.quoteType() == <a class="code hl_enumvalue" href="classore_1_1data_1_1_market_datum.html#aa5b3ec8bb6c730c38b87a73c11dec808a51c1258108cb3ef6a757d4e01db7f115">MarketDatum::QuoteType::RATE_LNVOL</a>,</div>
<div class="line"><span class="lineno">  777</span>               <span class="stringliteral">&quot;EquityVolCurve: only quote type&quot;</span></div>
<div class="line"><span class="lineno">  778</span>                   &lt;&lt; <span class="stringliteral">&quot; RATE_LNVOL is currently supported for a 2-D volatility delta strike surface.&quot;</span>);</div>
<div class="line"><span class="lineno">  779</span> </div>
<div class="line"><span class="lineno">  780</span>    <span class="comment">// Parse, sort and check the vector of configured put deltas</span></div>
<div class="line"><span class="lineno">  781</span>    vector&lt;Real&gt; putDeltas = parseVectorOfValues&lt;Real&gt;(vdsc.putDeltas(), &amp;parseReal);</div>
<div class="line"><span class="lineno">  782</span>    sort(putDeltas.begin(), putDeltas.end(), [](Real x, Real y) { return !close(x, y) &amp;&amp; x &lt; y; });</div>
<div class="line"><span class="lineno">  783</span>    QL_REQUIRE(adjacent_find(putDeltas.begin(), putDeltas.end(), [](Real x, Real y) { return close(x, y); }) ==</div>
<div class="line"><span class="lineno">  784</span>                   putDeltas.end(),</div>
<div class="line"><span class="lineno">  785</span>               <span class="stringliteral">&quot;EquityVolCurve: The configured put deltas contain duplicates&quot;</span>);</div>
<div class="line"><span class="lineno">  786</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Parsed &quot;</span> &lt;&lt; putDeltas.size() &lt;&lt; <span class="stringliteral">&quot; unique configured put deltas&quot;</span>);</div>
<div class="line"><span class="lineno">  787</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Put deltas are: &quot;</span> &lt;&lt; join(putDeltas | transformed([](Real d) { <span class="keywordflow">return</span> <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(d); }), <span class="stringliteral">&quot;,&quot;</span>));</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span>    <span class="comment">// Parse, sort descending and check the vector of configured call deltas</span></div>
<div class="line"><span class="lineno">  790</span>    vector&lt;Real&gt; callDeltas = parseVectorOfValues&lt;Real&gt;(vdsc.callDeltas(), &amp;parseReal);</div>
<div class="line"><span class="lineno">  791</span>    sort(callDeltas.begin(), callDeltas.end(), [](Real x, Real y) { return !close(x, y) &amp;&amp; x &gt; y; });</div>
<div class="line"><span class="lineno">  792</span>    QL_REQUIRE(adjacent_find(callDeltas.begin(), callDeltas.end(), [](Real x, Real y) { return close(x, y); }) ==</div>
<div class="line"><span class="lineno">  793</span>                   callDeltas.end(),</div>
<div class="line"><span class="lineno">  794</span>               <span class="stringliteral">&quot;EquityVolCurve: The configured call deltas contain duplicates&quot;</span>);</div>
<div class="line"><span class="lineno">  795</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Parsed &quot;</span> &lt;&lt; callDeltas.size() &lt;&lt; <span class="stringliteral">&quot; unique configured call deltas&quot;</span>);</div>
<div class="line"><span class="lineno">  796</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Call deltas are: &quot;</span> &lt;&lt; join(callDeltas | transformed([](Real d) { <span class="keywordflow">return</span> <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(d); }), <span class="stringliteral">&quot;,&quot;</span>));</div>
<div class="line"><span class="lineno">  797</span> </div>
<div class="line"><span class="lineno">  798</span>    <span class="comment">// Expiries may be configured with a wildcard or given explicitly</span></div>
<div class="line"><span class="lineno">  799</span>    <span class="keywordtype">bool</span> expWc = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  800</span>    <span class="keywordflow">if</span> (find(vdsc.expiries().begin(), vdsc.expiries().end(), <span class="stringliteral">&quot;*&quot;</span>) != vdsc.expiries().end()) {</div>
<div class="line"><span class="lineno">  801</span>        expWc = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  802</span>        QL_REQUIRE(vdsc.expiries().size() == 1, <span class="stringliteral">&quot;Wild card expiry specified but more expiries also specified.&quot;</span>);</div>
<div class="line"><span class="lineno">  803</span>        <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Have expiry wildcard pattern &quot;</span> &lt;&lt; vdsc.expiries()[0]);</div>
<div class="line"><span class="lineno">  804</span>    }</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    <span class="comment">// Map to hold the rows of the equity volatility matrix. The keys are the expiry dates and the values are the</span></div>
<div class="line"><span class="lineno">  807</span>    <span class="comment">// vectors of volatilities, one for each configured delta.</span></div>
<div class="line"><span class="lineno">  808</span>    map&lt;Date, vector&lt;Real&gt;&gt; surfaceData;</div>
<div class="line"><span class="lineno">  809</span> </div>
<div class="line"><span class="lineno">  810</span>    <span class="comment">// Number of strikes = number of put deltas + ATM + number of call deltas</span></div>
<div class="line"><span class="lineno">  811</span>    Size numStrikes = putDeltas.size() + 1 + callDeltas.size();</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span>    <span class="comment">// Count the number of quotes added. We check at the end that we have added all configured quotes.</span></div>
<div class="line"><span class="lineno">  814</span>    Size quotesAdded = 0;</div>
<div class="line"><span class="lineno">  815</span> </div>
<div class="line"><span class="lineno">  816</span>    <span class="comment">// Configured delta and Atm types.</span></div>
<div class="line"><span class="lineno">  817</span>    DeltaVolQuote::DeltaType deltaType = <a class="code hl_function" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">parseDeltaType</a>(vdsc.deltaType());</div>
<div class="line"><span class="lineno">  818</span>    DeltaVolQuote::AtmType atmType = <a class="code hl_function" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b">parseAtmType</a>(vdsc.atmType());</div>
<div class="line"><span class="lineno">  819</span>    boost::optional&lt;DeltaVolQuote::DeltaType&gt; atmDeltaType;</div>
<div class="line"><span class="lineno">  820</span>    <span class="keywordflow">if</span> (!vdsc.atmDeltaType().empty()) {</div>
<div class="line"><span class="lineno">  821</span>        atmDeltaType = <a class="code hl_function" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">parseDeltaType</a>(vdsc.atmDeltaType());</div>
<div class="line"><span class="lineno">  822</span>    }</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>    <span class="comment">// Populate the configured strikes.</span></div>
<div class="line"><span class="lineno">  825</span>    vector&lt;boost::shared_ptr&lt;BaseStrike&gt;&gt; <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>;</div>
<div class="line"><span class="lineno">  826</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pd : putDeltas) {</div>
<div class="line"><span class="lineno">  827</span>        <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.push_back(boost::make_shared&lt;DeltaStrike&gt;(deltaType, Option::Put, pd));</div>
<div class="line"><span class="lineno">  828</span>    }</div>
<div class="line"><span class="lineno">  829</span>    <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.push_back(boost::make_shared&lt;AtmStrike&gt;(atmType, atmDeltaType));</div>
<div class="line"><span class="lineno">  830</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cd : callDeltas) {</div>
<div class="line"><span class="lineno">  831</span>        <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.push_back(boost::make_shared&lt;DeltaStrike&gt;(deltaType, Option::Call, cd));</div>
<div class="line"><span class="lineno">  832</span>    }</div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span>    <span class="comment">// Read the quotes to fill the expiry dates and vols matrix.</span></div>
<div class="line"><span class="lineno">  835</span>    std::ostringstream ss;</div>
<div class="line"><span class="lineno">  836</span>    ss &lt;&lt; <a class="code hl_enumvalue" href="classore_1_1data_1_1_market_datum.html#a78a53e954df1d387bae9b3680287ec69a97f4c1bb2fed2f17f2f18f700295b22a">MarketDatum::InstrumentType::EQUITY_OPTION</a> &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; vdsc.quoteType() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; vc.curveID() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span></div>
<div class="line"><span class="lineno">  837</span>       &lt;&lt; vc.ccy() &lt;&lt; <span class="stringliteral">&quot;/*&quot;</span>;</div>
<div class="line"><span class="lineno">  838</span>    Wildcard w(ss.str());</div>
<div class="line"><span class="lineno">  839</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; md : loader.get(w, asof)) {</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>        QL_REQUIRE(md-&gt;asofDate() == asof, <span class="stringliteral">&quot;MarketDatum asofDate &#39;&quot;</span> &lt;&lt; md-&gt;asofDate() &lt;&lt; <span class="stringliteral">&quot;&#39; &lt;&gt; asof &#39;&quot;</span> &lt;&lt; asof &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>        <span class="keyword">auto</span> q = boost::dynamic_pointer_cast&lt;EquityOptionQuote&gt;(md);</div>
<div class="line"><span class="lineno">  844</span>        QL_REQUIRE(q, <span class="stringliteral">&quot;Internal error: could not downcast MarketDatum &#39;&quot;</span> &lt;&lt; md-&gt;name() &lt;&lt; <span class="stringliteral">&quot;&#39; to EquityOptionQuote&quot;</span>);</div>
<div class="line"><span class="lineno">  845</span>        QL_REQUIRE(q-&gt;eqName() == vc.curveID(),</div>
<div class="line"><span class="lineno">  846</span>            <span class="stringliteral">&quot;EquityOptionQuote eqName &#39;&quot;</span> &lt;&lt; q-&gt;eqName() &lt;&lt; <span class="stringliteral">&quot;&#39; &lt;&gt; EquityVolatilityCurveConfig curveID &#39;&quot;</span> &lt;&lt; vc.curveID() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  847</span>        QL_REQUIRE(q-&gt;ccy() == vc.ccy(),</div>
<div class="line"><span class="lineno">  848</span>            <span class="stringliteral">&quot;EquityOptionQuote ccy &#39;&quot;</span> &lt;&lt; q-&gt;ccy() &lt;&lt; <span class="stringliteral">&quot;&#39; &lt;&gt; EquityVolatilityCurveConfig ccy &#39;&quot;</span> &lt;&lt; vc.ccy() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  849</span>        QL_REQUIRE(q-&gt;quoteType() == vdsc.quoteType(),</div>
<div class="line"><span class="lineno">  850</span>            <span class="stringliteral">&quot;EquityOptionQuote quoteType &#39;&quot;</span> &lt;&lt; q-&gt;quoteType() &lt;&lt; <span class="stringliteral">&quot;&#39; &lt;&gt; VolatilityMoneynessSurfaceConfig quoteType &#39;&quot;</span> &lt;&lt; vdsc.quoteType() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>        <span class="comment">// Iterator to one of the configured strikes.</span></div>
<div class="line"><span class="lineno">  853</span>        vector&lt;boost::shared_ptr&lt;BaseStrike&gt;&gt;::iterator strikeIt;</div>
<div class="line"><span class="lineno">  854</span> </div>
<div class="line"><span class="lineno">  855</span>        <span class="keywordflow">if</span> (expWc) {</div>
<div class="line"><span class="lineno">  856</span>            <span class="comment">// Check if quote&#39;s strike is in the configured strikes and continue if it is not.</span></div>
<div class="line"><span class="lineno">  857</span>            strikeIt = find_if(<a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.begin(), <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.end(),</div>
<div class="line"><span class="lineno">  858</span>                               [&amp;q](boost::shared_ptr&lt;BaseStrike&gt; s) { return *s == *q-&gt;strike(); });</div>
<div class="line"><span class="lineno">  859</span>            <span class="keywordflow">if</span> (strikeIt == <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.end())</div>
<div class="line"><span class="lineno">  860</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  861</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  862</span>            <span class="comment">// If we have explicitly configured expiries and the quote is not in the configured quotes continue.</span></div>
<div class="line"><span class="lineno">  863</span>            <span class="keyword">auto</span> it = find(vc.quotes().begin(), vc.quotes().end(), q-&gt;name());</div>
<div class="line"><span class="lineno">  864</span>            <span class="keywordflow">if</span> (it == vc.quotes().end())</div>
<div class="line"><span class="lineno">  865</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  866</span> </div>
<div class="line"><span class="lineno">  867</span>            <span class="comment">// Check if quote&#39;s strike is in the configured strikes.</span></div>
<div class="line"><span class="lineno">  868</span>            <span class="comment">// It should be as we have selected from the explicitly configured quotes in the last step.</span></div>
<div class="line"><span class="lineno">  869</span>            strikeIt = find_if(<a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.begin(), <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.end(),</div>
<div class="line"><span class="lineno">  870</span>                               [&amp;q](boost::shared_ptr&lt;BaseStrike&gt; s) { return *s == *q-&gt;strike(); });</div>
<div class="line"><span class="lineno">  871</span>            QL_REQUIRE(strikeIt != <a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.end(),</div>
<div class="line"><span class="lineno">  872</span>                       <span class="stringliteral">&quot;EquityVolCurve: The quote &#39;&quot;</span></div>
<div class="line"><span class="lineno">  873</span>                           &lt;&lt; q-&gt;name()</div>
<div class="line"><span class="lineno">  874</span>                           &lt;&lt; <span class="stringliteral">&quot;&#39; is in the list of configured quotes but does not match any of the configured strikes&quot;</span>);</div>
<div class="line"><span class="lineno">  875</span>        }</div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>        <span class="comment">// Position of quote in vector of strikes</span></div>
<div class="line"><span class="lineno">  878</span>        Size pos = std::distance(<a class="code hl_variableRef" href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a>.begin(), strikeIt);</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>        <span class="comment">// Process the quote</span></div>
<div class="line"><span class="lineno">  881</span>        Date eDate;</div>
<div class="line"><span class="lineno">  882</span>        boost::shared_ptr&lt;Expiry&gt; expiry = <a class="code hl_function" href="namespaceore_1_1data.html#a6d93abc1828ab1f788a5b279d108ccf6">parseExpiry</a>(q-&gt;expiry());</div>
<div class="line"><span class="lineno">  883</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> expiryDate = boost::dynamic_pointer_cast&lt;ExpiryDate&gt;(expiry)) {</div>
<div class="line"><span class="lineno">  884</span>            eDate = expiryDate-&gt;expiryDate();</div>
<div class="line"><span class="lineno">  885</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> expiryPeriod = boost::dynamic_pointer_cast&lt;ExpiryPeriod&gt;(expiry)) {</div>
<div class="line"><span class="lineno">  886</span>            <span class="comment">// We may need more conventions here eventually.</span></div>
<div class="line"><span class="lineno">  887</span>            eDate = <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">calendar_</a>.adjust(asof + expiryPeriod-&gt;expiryPeriod());</div>
<div class="line"><span class="lineno">  888</span>        }</div>
<div class="line"><span class="lineno">  889</span> </div>
<div class="line"><span class="lineno">  890</span>        <span class="comment">// Add quote to surface</span></div>
<div class="line"><span class="lineno">  891</span>        <span class="keywordflow">if</span> (surfaceData.count(eDate) == 0)</div>
<div class="line"><span class="lineno">  892</span>            surfaceData[eDate] = vector&lt;Real&gt;(numStrikes, Null&lt;Real&gt;());</div>
<div class="line"><span class="lineno">  893</span> </div>
<div class="line"><span class="lineno">  894</span>        QL_REQUIRE(surfaceData[eDate][pos] == Null&lt;Real&gt;(),</div>
<div class="line"><span class="lineno">  895</span>                   <span class="stringliteral">&quot;EquityVolCurve: Quote &quot;</span> &lt;&lt; q-&gt;name() &lt;&lt; <span class="stringliteral">&quot; provides a duplicate quote for the date &quot;</span> &lt;&lt; io::iso_date(eDate)</div>
<div class="line"><span class="lineno">  896</span>                            &lt;&lt; <span class="stringliteral">&quot; and strike &quot;</span> &lt;&lt; *q-&gt;strike());</div>
<div class="line"><span class="lineno">  897</span>        surfaceData[eDate][pos] = q-&gt;quote()-&gt;value();</div>
<div class="line"><span class="lineno">  898</span>        quotesAdded++;</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>        <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Added quote &quot;</span> &lt;&lt; q-&gt;name() &lt;&lt; <span class="stringliteral">&quot;: (&quot;</span> &lt;&lt; io::iso_date(eDate) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; *q-&gt;strike() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; fixed</div>
<div class="line"><span class="lineno">  901</span>                            &lt;&lt; setprecision(9) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; q-&gt;quote()-&gt;value() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  902</span>    }</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: EquityVolCurve: added &quot;</span> &lt;&lt; quotesAdded &lt;&lt; <span class="stringliteral">&quot; quotes in building delta strike surface.&quot;</span>);</div>
<div class="line"><span class="lineno">  905</span> </div>
<div class="line"><span class="lineno">  906</span>    <span class="comment">// Check the data gathered.</span></div>
<div class="line"><span class="lineno">  907</span>    <span class="keywordflow">if</span> (expWc) {</div>
<div class="line"><span class="lineno">  908</span>        <span class="comment">// If the expiries were configured via a wildcard, check that no surfaceData element has a Null&lt;Real&gt;().</span></div>
<div class="line"><span class="lineno">  909</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : surfaceData) {</div>
<div class="line"><span class="lineno">  910</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; numStrikes; j++) {</div>
<div class="line"><span class="lineno">  911</span>                QL_REQUIRE(kv.second[j] != Null&lt;Real&gt;(), <span class="stringliteral">&quot;EquityVolCurve: Volatility for expiry date &quot;</span></div>
<div class="line"><span class="lineno">  912</span>                                                             &lt;&lt; io::iso_date(kv.first) &lt;&lt; <span class="stringliteral">&quot; and strike &quot;</span> &lt;&lt; *strikes[j]</div>
<div class="line"><span class="lineno">  913</span>                                                             &lt;&lt; <span class="stringliteral">&quot; not found. Cannot proceed with a sparse matrix.&quot;</span>);</div>
<div class="line"><span class="lineno">  914</span>            }</div>
<div class="line"><span class="lineno">  915</span>        }</div>
<div class="line"><span class="lineno">  916</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  917</span>        <span class="comment">// If expiries were configured explicitly, the number of configured quotes should equal the</span></div>
<div class="line"><span class="lineno">  918</span>        <span class="comment">// number of quotes added.</span></div>
<div class="line"><span class="lineno">  919</span>        QL_REQUIRE(vc.quotes().size() == quotesAdded,</div>
<div class="line"><span class="lineno">  920</span>                   <span class="stringliteral">&quot;EquityVolCurve: Found &quot;</span> &lt;&lt; quotesAdded &lt;&lt; <span class="stringliteral">&quot; quotes, but &quot;</span> &lt;&lt; vc.quotes().size() &lt;&lt; <span class="stringliteral">&quot; quotes required by config.&quot;</span>);</div>
<div class="line"><span class="lineno">  921</span>    }</div>
<div class="line"><span class="lineno">  922</span> </div>
<div class="line"><span class="lineno">  923</span>    <span class="comment">// Populate the matrix of volatilities and the expiry dates.</span></div>
<div class="line"><span class="lineno">  924</span>    vector&lt;Date&gt; expiryDates;</div>
<div class="line"><span class="lineno">  925</span>    Matrix vols(surfaceData.size(), numStrikes);</div>
<div class="line"><span class="lineno">  926</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> row : surfaceData | boost::adaptors::indexed(0)) {</div>
<div class="line"><span class="lineno">  927</span>        expiryDates.push_back(row.value().first);</div>
<div class="line"><span class="lineno">  928</span>        copy(row.value().second.begin(), row.value().second.end(), vols.row_begin(row.index()));</div>
<div class="line"><span class="lineno">  929</span>    }</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>    <span class="comment">// Need to multiply each put delta value by -1 before passing it to the BlackVolatilitySurfaceDelta ctor</span></div>
<div class="line"><span class="lineno">  932</span>    <span class="comment">// i.e. a put delta of 0.25 that is passed in to the config must be -0.25 when passed to the ctor.</span></div>
<div class="line"><span class="lineno">  933</span>    transform(putDeltas.begin(), putDeltas.end(), putDeltas.begin(), [](Real pd) { return -1.0 * pd; });</div>
<div class="line"><span class="lineno">  934</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Multiply put deltas by -1.0 before creating BlackVolatilitySurfaceDelta object.&quot;</span>);</div>
<div class="line"><span class="lineno">  935</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Put deltas are: &quot;</span> &lt;&lt; join(putDeltas | transformed([](Real d) { <span class="keywordflow">return</span> <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(d); }), <span class="stringliteral">&quot;,&quot;</span>));</div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>    <span class="comment">// Set the strike extrapolation which only matters if extrapolation is turned on for the whole surface.</span></div>
<div class="line"><span class="lineno">  938</span>    <span class="comment">// BlackVolatilitySurfaceDelta time extrapolation is hard-coded to constant in volatility.</span></div>
<div class="line"><span class="lineno">  939</span>    <span class="keywordtype">bool</span> flatExtrapolation = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  940</span>    <span class="keywordflow">if</span> (vdsc.extrapolation()) {</div>
<div class="line"><span class="lineno">  941</span> </div>
<div class="line"><span class="lineno">  942</span>        <span class="keyword">auto</span> strikeExtrapType = <a class="code hl_function" href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc">parseExtrapolation</a>(vdsc.strikeExtrapolation());</div>
<div class="line"><span class="lineno">  943</span>        <span class="keywordflow">if</span> (strikeExtrapType == <a class="code hl_enumvalue" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a57c68e2bc2b5b45f0ca5a4fa3f3c6874">Extrapolation::UseInterpolator</a>) {</div>
<div class="line"><span class="lineno">  944</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Strike extrapolation switched to using interpolator.&quot;</span>);</div>
<div class="line"><span class="lineno">  945</span>            flatExtrapolation = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  946</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strikeExtrapType == <a class="code hl_enumvalue" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a6adf97f83acf6453d4a6a4b1070f3754">Extrapolation::None</a>) {</div>
<div class="line"><span class="lineno">  947</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Strike extrapolation cannot be turned off on its own so defaulting to flat.&quot;</span>);</div>
<div class="line"><span class="lineno">  948</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strikeExtrapType == <a class="code hl_enumvalue" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d">Extrapolation::Flat</a>) {</div>
<div class="line"><span class="lineno">  949</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Strike extrapolation has been set to flat.&quot;</span>);</div>
<div class="line"><span class="lineno">  950</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  951</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Strike extrapolation &quot;</span> &lt;&lt; strikeExtrapType &lt;&lt; <span class="stringliteral">&quot; not expected so default to flat.&quot;</span>);</div>
<div class="line"><span class="lineno">  952</span>        }</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>        <span class="keyword">auto</span> timeExtrapType = <a class="code hl_function" href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc">parseExtrapolation</a>(vdsc.timeExtrapolation());</div>
<div class="line"><span class="lineno">  955</span>        <span class="keywordflow">if</span> (timeExtrapType != <a class="code hl_enumvalue" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d">Extrapolation::Flat</a>) {</div>
<div class="line"><span class="lineno">  956</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: BlackVolatilitySurfaceDelta only supports flat volatility extrapolation in the time direction&quot;</span>);</div>
<div class="line"><span class="lineno">  957</span>        }</div>
<div class="line"><span class="lineno">  958</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  959</span>        <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Extrapolation is turned off for the whole surface so the time and&quot;</span></div>
<div class="line"><span class="lineno">  960</span>             &lt;&lt; <span class="stringliteral">&quot; strike extrapolation settings are ignored&quot;</span>);</div>
<div class="line"><span class="lineno">  961</span>    }</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>    <span class="comment">// Time interpolation</span></div>
<div class="line"><span class="lineno">  964</span>    <span class="keywordflow">if</span> (vdsc.timeInterpolation() != <span class="stringliteral">&quot;Linear&quot;</span>) {</div>
<div class="line"><span class="lineno">  965</span>        <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: BlackVolatilitySurfaceDelta only supports linear time interpolation.&quot;</span>);</div>
<div class="line"><span class="lineno">  966</span>    }</div>
<div class="line"><span class="lineno">  967</span> </div>
<div class="line"><span class="lineno">  968</span>    <span class="comment">// Strike interpolation</span></div>
<div class="line"><span class="lineno">  969</span>    <a class="code hl_enumerationRef" href="../qle/class_quant_ext_1_1_interpolated_smile_section.html#aa0081e804011c551ea0f4a596a64b284">InterpolatedSmileSection::InterpolationMethod</a> im;</div>
<div class="line"><span class="lineno">  970</span>    <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;Linear&quot;</span>) {</div>
<div class="line"><span class="lineno">  971</span>        im = InterpolatedSmileSection::InterpolationMethod::Linear;</div>
<div class="line"><span class="lineno">  972</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;NaturalCubic&quot;</span>) {</div>
<div class="line"><span class="lineno">  973</span>        im = InterpolatedSmileSection::InterpolationMethod::NaturalCubic;</div>
<div class="line"><span class="lineno">  974</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;FinancialCubic&quot;</span>) {</div>
<div class="line"><span class="lineno">  975</span>        im = InterpolatedSmileSection::InterpolationMethod::FinancialCubic;</div>
<div class="line"><span class="lineno">  976</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;CubicSpline&quot;</span>) {</div>
<div class="line"><span class="lineno">  977</span>        im = InterpolatedSmileSection::InterpolationMethod::CubicSpline;</div>
<div class="line"><span class="lineno">  978</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  979</span>        im = InterpolatedSmileSection::InterpolationMethod::Linear;</div>
<div class="line"><span class="lineno">  980</span>        <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: BlackVolatilitySurfaceDelta does not support strike interpolation &#39;&quot;</span> &lt;&lt; vdsc.strikeInterpolation()</div>
<div class="line"><span class="lineno">  981</span>                                                                                   &lt;&lt; <span class="stringliteral">&quot;&#39; so setting it to linear.&quot;</span>);</div>
<div class="line"><span class="lineno">  982</span>    }</div>
<div class="line"><span class="lineno">  983</span> </div>
<div class="line"><span class="lineno">  984</span>    <span class="comment">// set max expiry date (used in buildCalibrationInfo())</span></div>
<div class="line"><span class="lineno">  985</span>    <span class="keywordflow">if</span> (!expiryDates.empty())</div>
<div class="line"><span class="lineno">  986</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a> = expiryDates.back();</div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Creating BlackVolatilitySurfaceDelta object&quot;</span>);</div>
<div class="line"><span class="lineno">  989</span>    <span class="keywordtype">bool</span> hasAtm = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  990</span>    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a> = boost::make_shared&lt;BlackVolatilitySurfaceDelta&gt;(</div>
<div class="line"><span class="lineno">  991</span>        asof, expiryDates, putDeltas, callDeltas, hasAtm, vols, <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#ad54546634b68f067b0f3867f7283c998">dayCounter_</a>, <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">calendar_</a>, eqIndex-&gt;equitySpot(),</div>
<div class="line"><span class="lineno">  992</span>        eqIndex-&gt;equityForecastCurve(), eqIndex-&gt;equityDividendCurve(), deltaType, atmType, atmDeltaType, 0 * Days,</div>
<div class="line"><span class="lineno">  993</span>        deltaType, atmType, atmDeltaType, im, flatExtrapolation);</div>
<div class="line"><span class="lineno">  994</span> </div>
<div class="line"><span class="lineno">  995</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Setting BlackVolatilitySurfaceDelta extrapolation to &quot;</span> &lt;&lt; <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(vdsc.extrapolation()));</div>
<div class="line"><span class="lineno">  996</span>    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;enableExtrapolation(vdsc.extrapolation());</div>
<div class="line"><span class="lineno">  997</span> </div>
<div class="line"><span class="lineno">  998</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: finished building 2-D volatility delta strike surface&quot;</span>);</div>
<div class="line"><span class="lineno">  999</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_interpolated_smile_section_html_aa0081e804011c551ea0f4a596a64b284"><div class="ttname"><a href="../qle/class_quant_ext_1_1_interpolated_smile_section.html#aa0081e804011c551ea0f4a596a64b284">QuantExt::InterpolatedSmileSection::InterpolationMethod</a></div><div class="ttdeci">InterpolationMethod</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a19e37c811c4794e4dded0233871bf813"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">ore::data::EquityVolCurve::vol_</a></div><div class="ttdeci">boost::shared_ptr&lt; BlackVolTermStructure &gt; vol_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00107">equityvolcurve.hpp:107</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a83e7c296e20653ab73fa6c3b2ebed22a"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">ore::data::EquityVolCurve::maxExpiry_</a></div><div class="ttdeci">QuantLib::Date maxExpiry_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00111">equityvolcurve.hpp:111</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a936be92f5f766489c24b9ce54d702b36"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">ore::data::EquityVolCurve::calendar_</a></div><div class="ttdeci">QuantLib::Calendar calendar_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00108">equityvolcurve.hpp:108</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_ad54546634b68f067b0f3867f7283c998"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#ad54546634b68f067b0f3867f7283c998">ore::data::EquityVolCurve::dayCounter_</a></div><div class="ttdeci">QuantLib::DayCounter dayCounter_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00110">equityvolcurve.hpp:110</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_market_datum_html_a78a53e954df1d387bae9b3680287ec69a97f4c1bb2fed2f17f2f18f700295b22a"><div class="ttname"><a href="classore_1_1data_1_1_market_datum.html#a78a53e954df1d387bae9b3680287ec69a97f4c1bb2fed2f17f2f18f700295b22a">ore::data::MarketDatum::InstrumentType::EQUITY_OPTION</a></div><div class="ttdeci">@ EQUITY_OPTION</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_market_datum_html_aa5b3ec8bb6c730c38b87a73c11dec808a51c1258108cb3ef6a757d4e01db7f115"><div class="ttname"><a href="classore_1_1data_1_1_market_datum.html#aa5b3ec8bb6c730c38b87a73c11dec808a51c1258108cb3ef6a757d4e01db7f115">ore::data::MarketDatum::QuoteType::RATE_LNVOL</a></div><div class="ttdeci">@ RATE_LNVOL</div></div>
<div class="ttc" id="agroup__utilities_html_ga1b8cd9a976247da6df232ad48d4af190"><div class="ttname"><a href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a></div><div class="ttdeci">std::string to_string(const QuantLib::Date &amp;date)</div><div class="ttdoc">Convert QuantLib::Date to std::string.</div><div class="ttdef"><b>Definition:</b> <a href="to__string_8cpp_source.html#l00038">to_string.cpp:38</a></div></div>
<div class="ttc" id="agroup__utilities_html_gac646d7e5cbc09cb6e4f094729a07558b"><div class="ttname"><a href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b">ore::data::parseAtmType</a></div><div class="ttdeci">DeltaVolQuote::AtmType parseAtmType(const std::string &amp;s)</div><div class="ttdoc">Convert text to QuantLib::DeltaVolQuote::AtmType.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l00692">parsers.cpp:692</a></div></div>
<div class="ttc" id="agroup__utilities_html_gafea498a41f014bd2031e10d3df7891a1"><div class="ttname"><a href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">ore::data::parseDeltaType</a></div><div class="ttdeci">DeltaVolQuote::DeltaType parseDeltaType(const std::string &amp;s)</div><div class="ttdoc">Convert text to QuantLib::DeltaVolQuote::DeltaType.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l00709">parsers.cpp:709</a></div></div>
<div class="ttc" id="alog_8hpp_html_a34c7c8cde9b91d2eee82d7b9a0b66fd5"><div class="ttname"><a href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a></div><div class="ttdeci">#define DLOG(text)</div><div class="ttdoc">Logging Macro (Level = Debug)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00368">log.hpp:368</a></div></div>
<div class="ttc" id="alog_8hpp_html_a99aeca53f904c71a68070e1f9d310232"><div class="ttname"><a href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a></div><div class="ttdeci">#define TLOG(text)</div><div class="ttdoc">Logging Macro (Level = Data)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00370">log.hpp:370</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a6d93abc1828ab1f788a5b279d108ccf6"><div class="ttname"><a href="namespaceore_1_1data.html#a6d93abc1828ab1f788a5b279d108ccf6">ore::data::parseExpiry</a></div><div class="ttdeci">boost::shared_ptr&lt; Expiry &gt; parseExpiry(const string &amp;strExpiry)</div><div class="ttdoc">Parse an Expiry from its string representation, strExpiry.</div><div class="ttdef"><b>Definition:</b> <a href="ored_2marketdata_2expiry_8cpp_source.html#l00110">expiry.cpp:110</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a8e2df513f6590afb6c85a22a458745c5a57c68e2bc2b5b45f0ca5a4fa3f3c6874"><div class="ttname"><a href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a57c68e2bc2b5b45f0ca5a4fa3f3c6874">ore::data::Extrapolation::UseInterpolator</a></div><div class="ttdeci">@ UseInterpolator</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a8e2df513f6590afb6c85a22a458745c5a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a6adf97f83acf6453d4a6a4b1070f3754">ore::data::Extrapolation::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d"><div class="ttname"><a href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d">ore::data::Extrapolation::Flat</a></div><div class="ttdeci">@ Flat</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_aec1b45a4f7d2f40e0800b91d415b94fc"><div class="ttname"><a href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc">ore::data::parseExtrapolation</a></div><div class="ttdeci">Extrapolation parseExtrapolation(const string &amp;s)</div><div class="ttdoc">Parse Extrapolation from string.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l00724">parsers.cpp:724</a></div></div>
<div class="ttc" id="atest_2analyticcashsettledeuropeanengine_8cpp_html_aa7b6f0cca80627aec257d302511d608c"><div class="ttname"><a href="../qle/test_2analyticcashsettledeuropeanengine_8cpp.html#aa7b6f0cca80627aec257d302511d608c">strikes</a></div><div class="ttdeci">vector&lt; Real &gt; strikes</div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_afff043fce577f592f6a660001d412371_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_afff043fce577f592f6a660001d412371_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_equity_vol_curve_afff043fce577f592f6a660001d412371_cgraph" id="aclassore_1_1data_1_1_equity_vol_curve_afff043fce577f592f6a660001d412371_cgraph">
<area shape="rect" title="Build a volatility surface from a collection of expiry and strike delta pairs." alt="" coords="5,642,104,667"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a90c9e6709d4483dd3115d3711b36e69e" title=" " alt="" coords="158,5,349,45"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#ac1df45ab0edf6303b3a7035109c56731" title=" " alt="" coords="173,69,334,109"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a4a120c3eea08f21c354237dd4faa3e0c" title=" " alt="" coords="170,133,337,173"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#a3d358ea6ebc33cd2ab59484401f77d54" title=" " alt="" coords="169,197,337,237"/>
<area shape="rect" href="classore_1_1data_1_1_curve_config.html#a469f15054f3eb55783dfeb953fdf4373" title=" " alt="" coords="179,261,328,301"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a1a94512029afb513f987537604e7e305" title=" " alt="" coords="170,325,337,365"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a8d9a468ec5da7bf937ed55a0fddff280" title=" " alt="" coords="173,389,334,429"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#a7dd47beba239c5ffec6a4a50f4110664" title=" " alt="" coords="166,453,341,493"/>
<area shape="rect" href="classore_1_1data_1_1_loader.html#a1b9199cf1feab53f4fda69ddccc4a63c" title="get quote by its unique name, throws if not existent, override in derived classes for performance" alt="" coords="180,518,327,543"/>
<area shape="rect" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b" title="Convert text to QuantLib::DeltaVolQuote::AtmType." alt="" coords="171,567,336,593"/>
<area shape="rect" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1" title="Convert text to QuantLib::DeltaVolQuote::DeltaType." alt="" coords="168,617,339,642"/>
<area shape="rect" href="namespaceore_1_1data.html#a6d93abc1828ab1f788a5b279d108ccf6" title="Parse an Expiry from its string representation, strExpiry." alt="" coords="178,666,329,691"/>
<area shape="rect" href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc" title="Parse Extrapolation from string." alt="" coords="159,715,348,741"/>
<area shape="rect" href="group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd" title="Convert text to Real." alt="" coords="184,789,323,814"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a33b74d1218630afe6949c5e2355f0569" title=" " alt="" coords="171,839,336,879"/>
<area shape="rect" href="classore_1_1data_1_1_curve_config.html#a69738e85aa491109ae0e57fd5833aebb" title="Return all the market quotes required for this config." alt="" coords="179,903,328,943"/>
<area shape="rect" href="classore_1_1data_1_1_quote_based_volatility_config.html#a385c53054b5d8a065ba24438db33e705" title=" " alt="" coords="152,967,355,1007"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#ab066a0686be5c8dc20430121a7c7147d" title=" " alt="" coords="166,1031,341,1071"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#aad34d8325ea5f1822af8c7a550880411" title=" " alt="" coords="166,1095,341,1135"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#af0ab27eac5840f868d415cb197da2cf5" title=" " alt="" coords="166,1159,341,1199"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#a13c055eb05fe7ed1272d0021b11a7d61" title=" " alt="" coords="166,1223,341,1263"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="188,1311,319,1337"/>
<area shape="rect" href="group__utilities.html#ga5816082aca07feca7ec905758bd09392" title="Convert text to QuantLib::Currency." alt="" coords="415,197,581,237"/>
<area shape="rect" href="classore_1_1data_1_1_loader.html#a0113deda97c9b9f64d1a436cda884a51" title="get all quotes, TODO change the return value to std::set" alt="" coords="434,511,562,551"/>
<area shape="rect" href="group__utilities.html#ga6477391407eac174ea49df689ecf1ab2" title="Convert text to QuantLib::Period or QuantLib::Date." alt="" coords="403,666,593,691"/>
<area shape="rect" href="group__utilities.html#ga59b5fdda574d90facae95dec2d13040d" title="Convert std::string to QuantLib::Date." alt="" coords="647,641,787,666"/>
<area shape="rect" href="group__utilities.html#ga8e0623e2cb01e250e9cfec4619256208" title="Convert text to QuantLib::Period." alt="" coords="641,690,792,715"/>
<area shape="rect" href="group__utilities.html#gaecd67eda4fb5f4859bb8f6d383547721" title="Convert text to QuantLib::Integer." alt="" coords="840,641,992,666"/>
</map>
</div>

</div>
</div>
<a id="ab94b867e9ffd452659ffc45508140bbc" name="ab94b867e9ffd452659ffc45508140bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab94b867e9ffd452659ffc45508140bbc">&#9670;&#160;</a></span>buildVolatility() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp;&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;&#160;</td>
          <td class="paramname"><em>curveConfigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_proxy_volatility_config.html">ProxyVolatilityConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>epvc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqCurves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqVolCurves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_f_x_vol_curve.html">FXVolCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>fxVolCurves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_correlation_curve.html">CorrelationCurve</a> &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredCorrelationCurves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_market.html">Market</a> *&#160;</td>
          <td class="paramname"><em>fxIndices</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface as a proxy from another volatility surface. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8cpp_source.html#l01001">1001</a> of file <a class="el" href="equityvolcurve_8cpp_source.html">equityvolcurve.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1007</span>                                                              {</div>
<div class="line"><span class="lineno"> 1008</span> </div>
<div class="line"><span class="lineno"> 1009</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: start building proxy vol surface&quot;</span>);</div>
<div class="line"><span class="lineno"> 1010</span>    <span class="comment">// get all the configurations and the curve needed for proxying</span></div>
<div class="line"><span class="lineno"> 1011</span>    <span class="keyword">auto</span> config = *<a class="code hl_variable" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityVolCurveConfig(<a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">curveConfigID</a>());</div>
<div class="line"><span class="lineno"> 1012</span>    </div>
<div class="line"><span class="lineno"> 1013</span>    <span class="keyword">auto</span> proxy = epvc.proxyVolatilityCurve();</div>
<div class="line"><span class="lineno"> 1014</span>    <span class="keyword">auto</span> eqConfig = *<a class="code hl_variable" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityCurveConfig(<a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">curveConfigID</a>());</div>
<div class="line"><span class="lineno"> 1015</span>    <span class="keyword">auto</span> proxyConfig = *<a class="code hl_variable" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityCurveConfig(proxy);</div>
<div class="line"><span class="lineno"> 1016</span>    <span class="keyword">auto</span> proxyVolConfig = *<a class="code hl_variable" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityVolCurveConfig(proxy);</div>
<div class="line"><span class="lineno"> 1017</span> </div>
<div class="line"><span class="lineno"> 1018</span>    <span class="comment">// create dummy specs to look up the required curves</span></div>
<div class="line"><span class="lineno"> 1019</span>    EquityCurveSpec eqSpec(eqConfig.currency(), <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">curveConfigID</a>());</div>
<div class="line"><span class="lineno"> 1020</span>    EquityCurveSpec proxySpec(proxyConfig.currency(), proxy);</div>
<div class="line"><span class="lineno"> 1021</span>    EquityVolatilityCurveSpec proxyVolSpec(proxyVolConfig.ccy(), proxy);</div>
<div class="line"><span class="lineno"> 1022</span> </div>
<div class="line"><span class="lineno"> 1023</span>    <span class="comment">// Get all necessary curves</span></div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keyword">auto</span> curve = eqCurves.find(eqSpec.name());</div>
<div class="line"><span class="lineno"> 1025</span>    QL_REQUIRE(curve != eqCurves.end(), <span class="stringliteral">&quot;EquityVolCurve: Failed to find equity curve, when building equity vol curve &quot;</span> &lt;&lt; <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">name</a>());</div>
<div class="line"><span class="lineno"> 1026</span>    <span class="keyword">auto</span> proxyCurve = eqCurves.find(proxySpec.name());</div>
<div class="line"><span class="lineno"> 1027</span>    QL_REQUIRE(proxyCurve != eqCurves.end(), <span class="stringliteral">&quot;EquityVolCurve: Failed to find equity curve for proxy &quot;</span></div>
<div class="line"><span class="lineno"> 1028</span>                                                 &lt;&lt; proxySpec.name() &lt;&lt; <span class="stringliteral">&quot;, when building equity vol curve &quot;</span></div>
<div class="line"><span class="lineno"> 1029</span>                                                 &lt;&lt; <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">name</a>());</div>
<div class="line"><span class="lineno"> 1030</span>    <span class="keyword">auto</span> proxyVolCurve = eqVolCurves.find(proxyVolSpec.name());</div>
<div class="line"><span class="lineno"> 1031</span>    QL_REQUIRE(proxyVolCurve != eqVolCurves.end(), <span class="stringliteral">&quot;EquityVolCurve: Failed to find equity vol curve for proxy &quot;</span></div>
<div class="line"><span class="lineno"> 1032</span>                                                       &lt;&lt; proxyVolSpec.name() &lt;&lt; <span class="stringliteral">&quot;, when building equity vol curve &quot;</span></div>
<div class="line"><span class="lineno"> 1033</span>                                                       &lt;&lt; <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">name</a>());</div>
<div class="line"><span class="lineno"> 1034</span> </div>
<div class="line"><span class="lineno"> 1035</span>    <span class="comment">// check the currency against the proxy surface currrency</span></div>
<div class="line"><span class="lineno"> 1036</span> </div>
<div class="line"><span class="lineno"> 1037</span>    boost::shared_ptr&lt;BlackVolTermStructure&gt; fxSurface;</div>
<div class="line"><span class="lineno"> 1038</span>    boost::shared_ptr&lt;FxIndex&gt; fxIndex;</div>
<div class="line"><span class="lineno"> 1039</span>    boost::shared_ptr&lt;QuantExt::CorrelationTermStructure&gt; correlation;</div>
<div class="line"><span class="lineno"> 1040</span>    <span class="keywordflow">if</span> (config.ccy() != proxyVolConfig.ccy() &amp;&amp; fxIndices != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1041</span>        QL_REQUIRE(!epvc.fxVolatilityCurve().empty(), <span class="stringliteral">&quot;EquityVolCurve: FXVolatilityCurve must be provided for Equity vol config &quot;</span> &lt;&lt; </div>
<div class="line"><span class="lineno"> 1042</span>            <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">curveConfigID</a>() &lt;&lt; <span class="stringliteral">&quot; as proxy currencies if different from equity currency.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1043</span>        QL_REQUIRE(!epvc.correlationCurve().empty(), <span class="stringliteral">&quot;EquityVolCurve: CorrelationCurve must be provided for Equity vol config &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno"> 1044</span>            <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">curveConfigID</a>() &lt;&lt; <span class="stringliteral">&quot; as proxy currencies if different from equity currency.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>        <span class="comment">// get the fx vol surface</span></div>
<div class="line"><span class="lineno"> 1047</span>        QL_REQUIRE(epvc.fxVolatilityCurve().size() == 6, <span class="stringliteral">&quot;EquityVolCurve: FXVolatilityCurve provided &quot;</span> &lt;&lt; epvc.fxVolatilityCurve() &lt;&lt;</div>
<div class="line"><span class="lineno"> 1048</span>            <span class="stringliteral">&quot; for Equity vol config &quot;</span> &lt;&lt; <a class="code hl_function" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">spec</a>.<a class="code hl_function" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">curveConfigID</a>() &lt;&lt; <span class="stringliteral">&quot; must be of length 6, and of form CC1CCY2 e.g EURUSD&quot;</span>);</div>
<div class="line"><span class="lineno"> 1049</span>        <span class="keywordtype">string</span> proxyVolForCcy = epvc.fxVolatilityCurve().substr(0, 3);</div>
<div class="line"><span class="lineno"> 1050</span>        <span class="keywordtype">string</span> proxyVolDomCcy = epvc.fxVolatilityCurve().substr(3, 3);</div>
<div class="line"><span class="lineno"> 1051</span>        FXVolatilityCurveSpec fxSpec(proxyVolForCcy, proxyVolDomCcy, epvc.fxVolatilityCurve());</div>
<div class="line"><span class="lineno"> 1052</span>        <span class="keyword">auto</span> volIt = fxVolCurves.find(fxSpec.name());</div>
<div class="line"><span class="lineno"> 1053</span>        <span class="keywordflow">if</span> (volIt == fxVolCurves.end())</div>
<div class="line"><span class="lineno"> 1054</span>            QL_FAIL(<span class="stringliteral">&quot;EquityVolCurve: cannot find required Fx volatility surface &quot;</span> &lt;&lt; fxSpec.name() &lt;&lt; <span class="stringliteral">&quot; to build proxy vol surface for &quot;</span> &lt;&lt; eqSpec.name());</div>
<div class="line"><span class="lineno"> 1055</span>        fxSurface = volIt-&gt;second-&gt;volTermStructure();</div>
<div class="line"><span class="lineno"> 1056</span> </div>
<div class="line"><span class="lineno"> 1057</span>        <span class="comment">// check if the fx vol surface needs to be inverted</span></div>
<div class="line"><span class="lineno"> 1058</span>        <span class="keywordflow">if</span> (proxyVolForCcy != proxyVolConfig.ccy()) {</div>
<div class="line"><span class="lineno"> 1059</span>            Handle&lt;BlackVolTermStructure&gt; hFx(fxSurface);</div>
<div class="line"><span class="lineno"> 1060</span>            fxSurface = boost::make_shared&lt;QuantExt::BlackInvertedVolTermStructure&gt;(hFx);</div>
<div class="line"><span class="lineno"> 1061</span>            fxSurface-&gt;enableExtrapolation();</div>
<div class="line"><span class="lineno"> 1062</span>        }</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>        fxIndex = fxIndices-&gt;fxIndex(proxyVolConfig.ccy() + config.ccy()).currentLink();</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>        CorrelationCurveSpec corrSpec(epvc.correlationCurve());</div>
<div class="line"><span class="lineno"> 1067</span>        <span class="keyword">auto</span> corrIt = requiredCorrelationCurves.find(corrSpec.name());</div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">if</span> (corrIt == requiredCorrelationCurves.end())</div>
<div class="line"><span class="lineno"> 1069</span>            QL_FAIL(<span class="stringliteral">&quot;EquityVolCurve: cannot find required correlation curve &quot;</span> &lt;&lt; epvc.correlationCurve() &lt;&lt; <span class="stringliteral">&quot; to build proxy vol surface for &quot;</span> &lt;&lt; eqSpec.name());</div>
<div class="line"><span class="lineno"> 1070</span>        correlation = corrIt-&gt;second-&gt;corrTermStructure();</div>
<div class="line"><span class="lineno"> 1071</span>    }</div>
<div class="line"><span class="lineno"> 1072</span> </div>
<div class="line"><span class="lineno"> 1073</span>    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a> = boost::make_shared&lt;BlackVolatilitySurfaceProxy&gt;(proxyVolCurve-&gt;second-&gt;volTermStructure(), curve-&gt;second-&gt;equityIndex(),</div>
<div class="line"><span class="lineno"> 1074</span>        proxyCurve-&gt;second-&gt;equityIndex(), fxSurface, fxIndex, correlation);</div>
<div class="line"><span class="lineno"> 1075</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_curve_spec_html_a15e57a287887def554123ab18355c33c"><div class="ttname"><a href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c">ore::data::CurveSpec::curveConfigID</a></div><div class="ttdeci">const std::string &amp; curveConfigID() const</div><div class="ttdef"><b>Definition:</b> <a href="curvespec_8hpp_source.html#l00083">curvespec.hpp:83</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_curve_spec_html_afa7a10b4b56522f03c698ac514b0f844"><div class="ttname"><a href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">ore::data::CurveSpec::name</a></div><div class="ttdeci">string name() const</div><div class="ttdoc">returns the unique curve name</div><div class="ttdef"><b>Definition:</b> <a href="curvespec_8hpp_source.html#l00078">curvespec.hpp:78</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_accd0c02cca2c71f1da6bd117b3fe0663"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663">ore::data::EquityVolCurve::spec</a></div><div class="ttdeci">const EquityVolatilityCurveSpec &amp; spec() const</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00062">equityvolcurve.hpp:62</a></div></div>
<div class="ttc" id="atest_2commodityvolcurve_8cpp_html_a96a582300d10244c7df851066de48438"><div class="ttname"><a href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a></div><div class="ttdeci">vector&lt; string &gt; curveConfigs</div><div class="ttdef"><b>Definition:</b> <a href="test_2commodityvolcurve_8cpp_source.html#l00525">commodityvolcurve.cpp:525</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_ab94b867e9ffd452659ffc45508140bbc_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_ab94b867e9ffd452659ffc45508140bbc_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_equity_vol_curve_ab94b867e9ffd452659ffc45508140bbc_cgraph" id="aclassore_1_1data_1_1_equity_vol_curve_ab94b867e9ffd452659ffc45508140bbc_cgraph">
<area shape="rect" title="Build a volatility surface as a proxy from another volatility surface." alt="" coords="5,311,104,336"/>
<area shape="rect" href="classore_1_1data_1_1_proxy_volatility_config.html#a202eea0c9db63c9182ad0fa06249a534" title=" " alt="" coords="159,87,325,127"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a15e57a287887def554123ab18355c33c" title=" " alt="" coords="171,151,313,191"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#a8d884a61027d5434d524779453a5b918" title=" " alt="" coords="177,239,307,279"/>
<area shape="rect" href="classore_1_1data_1_1_proxy_volatility_config.html#a2af3a0a0994bfd36ea63c3558f8234cf" title=" " alt="" coords="159,303,325,343"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844" title="returns the unique curve name" alt="" coords="171,367,313,407"/>
<area shape="rect" href="classore_1_1data_1_1_proxy_volatility_config.html#a62d0f9f8dea5b372303fdc2de239a5c3" title=" " alt="" coords="152,431,332,471"/>
<area shape="rect" href="classore_1_1data_1_1_equity_vol_curve.html#accd0c02cca2c71f1da6bd117b3fe0663" title=" " alt="" coords="217,496,267,521"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#aff00023d0e25ad7c0bf29e8cc97f9e00" title=" " alt="" coords="395,303,524,343"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#a2c559acede2b82e98252067757600b56" title=" " alt="" coords="629,199,759,239"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#ad39b58fb3758f6506ed0c8d59beeeb15" title=" " alt="" coords="395,239,524,279"/>
<area shape="rect" href="namespaceore_1_1data.html#a123e19b0fac4f5124a8c26bad300de0e" title=" " alt="" coords="874,7,1011,32"/>
<area shape="rect" href="group__utilities.html#gaf0c22b2380b7865d6513ec50a6990bad" title="Convert std::string to QuantExt::FxIndex." alt="" coords="380,117,539,143"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#a88d67016dee39ce8f4588deb0745460f" title=" " alt="" coords="1084,222,1244,262"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#a47ddd567f84d73e5f1c8201823356b1c" title=" " alt="" coords="1090,295,1238,335"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#a6ea1e978ddb0a43b487424e43d409021" title=" " alt="" coords="629,371,759,411"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#ad806378863fc47de6f5febb66f41715b" title=" " alt="" coords="1099,154,1229,194"/>
<area shape="rect" href="classore_1_1data_1_1_market.html#aee41b57076315adbef995006e81a8147" title=" " alt="" coords="878,206,1007,246"/>
<area shape="rect" href="namespaceore_1_1data.html#a924eb5d1881d31c82ac8abbdc15a5027" title=" " alt="" coords="587,93,801,119"/>
<area shape="rect" href="group__utilities.html#ga6e9e781a58e78200301c76161589fc7b" title="Convert text to QuantLib::Currency." alt="" coords="611,143,777,168"/>
<area shape="rect" href="group__utilities.html#gac0cf10eef45b9d706e29e7eb2ddddc90" title="check for pseudo currency = precious metal or crypto currency *‍/" alt="" coords="849,105,1036,131"/>
<area shape="rect" href="group__utilities.html#ga0f72d6fcccae10a674bdcd5095200f14" title="Convert text to QuantLib::Calendar." alt="" coords="861,56,1025,81"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a3d24768215bf6280c80eca3930ea3f55" title=" " alt="" coords="388,453,531,493"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a471fbcf9df5ab7ac2153495b4c8ac723" title=" " alt="" coords="388,367,531,407"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a0106d2fb6472e64456c6ebd018aa6300" title=" " alt="" coords="623,510,765,550"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="629,460,759,485"/>
</map>
</div>

</div>
</div>
<a id="a3987971ffc25c840ee49e2eca623218a" name="a3987971ffc25c840ee49e2eca623218a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3987971ffc25c840ee49e2eca623218a">&#9670;&#160;</a></span>buildCalibrationInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildCalibrationInfo </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;&#160;</td>
          <td class="paramname"><em>curveConfigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; QuantExt::EquityIndex2 &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build the calibration info. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8cpp_source.html#l01077">1077</a> of file <a class="el" href="equityvolcurve_8cpp_source.html">equityvolcurve.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1079</span>                                                                               {</div>
<div class="line"><span class="lineno"> 1080</span> </div>
<div class="line"><span class="lineno"> 1081</span>    <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Building calibration info for eq vol surface&quot;</span>);</div>
<div class="line"><span class="lineno"> 1082</span> </div>
<div class="line"><span class="lineno"> 1083</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1084</span> </div>
<div class="line"><span class="lineno"> 1085</span>        ReportConfig rc = <a class="code hl_function" href="namespaceore_1_1data.html#a5e51bfe798b6a12ac603d4578c144c6b">effectiveReportConfig</a>(<a class="code hl_variable" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.reportConfigEqVols(), config.reportConfig());</div>
<div class="line"><span class="lineno"> 1086</span> </div>
<div class="line"><span class="lineno"> 1087</span>        <span class="keywordtype">bool</span> reportOnDeltaGrid = *rc.reportOnDeltaGrid();</div>
<div class="line"><span class="lineno"> 1088</span>        <span class="keywordtype">bool</span> reportOnMoneynessGrid = *rc.reportOnMoneynessGrid();</div>
<div class="line"><span class="lineno"> 1089</span>        std::vector&lt;Real&gt; moneyness = *rc.moneyness();</div>
<div class="line"><span class="lineno"> 1090</span>        std::vector&lt;std::string&gt; deltas = *rc.deltas();</div>
<div class="line"><span class="lineno"> 1091</span>        std::vector&lt;Period&gt; expiries = *rc.expiries();</div>
<div class="line"><span class="lineno"> 1092</span> </div>
<div class="line"><span class="lineno"> 1093</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a> = boost::make_shared&lt;FxEqCommVolCalibrationInfo&gt;();</div>
<div class="line"><span class="lineno"> 1094</span> </div>
<div class="line"><span class="lineno"> 1095</span>        DeltaVolQuote::AtmType atmType = DeltaVolQuote::AtmType::AtmDeltaNeutral;</div>
<div class="line"><span class="lineno"> 1096</span>        DeltaVolQuote::DeltaType deltaType = DeltaVolQuote::DeltaType::Fwd;</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> vdsc = boost::dynamic_pointer_cast&lt;VolatilityDeltaSurfaceConfig&gt;(<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#af0ba496aadfdb4b5d3c4034bd4e50ad9">volatilityConfig_</a>)) {</div>
<div class="line"><span class="lineno"> 1099</span>            atmType = <a class="code hl_function" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b">parseAtmType</a>(vdsc-&gt;atmType());</div>
<div class="line"><span class="lineno"> 1100</span>            deltaType = <a class="code hl_function" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">parseDeltaType</a>(vdsc-&gt;deltaType());</div>
<div class="line"><span class="lineno"> 1101</span>        }</div>
<div class="line"><span class="lineno"> 1102</span> </div>
<div class="line"><span class="lineno"> 1103</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;dayCounter = config.dayCounter().empty() ? <span class="stringliteral">&quot;na&quot;</span> : config.dayCounter();</div>
<div class="line"><span class="lineno"> 1104</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;calendar = config.calendar().empty() ? <span class="stringliteral">&quot;na&quot;</span> : config.calendar();</div>
<div class="line"><span class="lineno"> 1105</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;atmType = <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(atmType);</div>
<div class="line"><span class="lineno"> 1106</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaType = <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(deltaType);</div>
<div class="line"><span class="lineno"> 1107</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;longTermAtmType = <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(atmType);</div>
<div class="line"><span class="lineno"> 1108</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;longTermDeltaType = <a class="code hl_function" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(deltaType);</div>
<div class="line"><span class="lineno"> 1109</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;switchTenor = <span class="stringliteral">&quot;na&quot;</span>;</div>
<div class="line"><span class="lineno"> 1110</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;riskReversalInFavorOf = <span class="stringliteral">&quot;na&quot;</span>;</div>
<div class="line"><span class="lineno"> 1111</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;butterflyStyle = <span class="stringliteral">&quot;na&quot;</span>;</div>
<div class="line"><span class="lineno"> 1112</span> </div>
<div class="line"><span class="lineno"> 1113</span>        std::vector&lt;Real&gt; times, forwards, rfDisc, divDisc;</div>
<div class="line"><span class="lineno"> 1114</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : expiries) {</div>
<div class="line"><span class="lineno"> 1115</span>            Date d = <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;optionDateFromTenor(p);</div>
<div class="line"><span class="lineno"> 1116</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;expiryDates.push_back(d);</div>
<div class="line"><span class="lineno"> 1117</span>            times.push_back(<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;dayCounter().empty() ? Actual365Fixed().yearFraction(asof, d)</div>
<div class="line"><span class="lineno"> 1118</span>                                                       : <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;timeFromReference(d));</div>
<div class="line"><span class="lineno"> 1119</span>            forwards.push_back(eqIndex-&gt;forecastFixing(d));</div>
<div class="line"><span class="lineno"> 1120</span>            rfDisc.push_back(eqIndex-&gt;equityForecastCurve()-&gt;discount(d));</div>
<div class="line"><span class="lineno"> 1121</span>            divDisc.push_back(eqIndex-&gt;equityDividendCurve()-&gt;discount(d));</div>
<div class="line"><span class="lineno"> 1122</span>        }</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;times = times;</div>
<div class="line"><span class="lineno"> 1125</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;forwards = forwards;</div>
<div class="line"><span class="lineno"> 1126</span> </div>
<div class="line"><span class="lineno"> 1127</span>        std::vector&lt;std::vector&lt;Real&gt;&gt; callPricesDelta(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1128</span>        std::vector&lt;std::vector&lt;Real&gt;&gt; callPricesMoneyness(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span>        <span class="keywordflow">if</span> (reportOnDeltaGrid) {</div>
<div class="line"><span class="lineno"> 1133</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltas = deltas;</div>
<div class="line"><span class="lineno"> 1134</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridStrikes =</div>
<div class="line"><span class="lineno"> 1135</span>                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1136</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridProb =</div>
<div class="line"><span class="lineno"> 1137</span>                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1138</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridImpliedVolatility =</div>
<div class="line"><span class="lineno"> 1139</span>                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1140</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridCallSpreadArbitrage =</div>
<div class="line"><span class="lineno"> 1141</span>                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(deltas.size(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1142</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridButterflyArbitrage =</div>
<div class="line"><span class="lineno"> 1143</span>                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(deltas.size(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1144</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Delta surface arbitrage analysis result (no calendar spread arbitrage included):&quot;</span>);</div>
<div class="line"><span class="lineno"> 1145</span>            Real maxTime = QL_MAX_REAL;</div>
<div class="line"><span class="lineno"> 1146</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a> != Date()) {</div>
<div class="line"><span class="lineno"> 1147</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;dayCounter().empty())</div>
<div class="line"><span class="lineno"> 1148</span>                    maxTime = Actual365Fixed().yearFraction(asof, <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a>);</div>
<div class="line"><span class="lineno"> 1149</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1150</span>                    maxTime = <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;timeFromReference(<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a>);</div>
<div class="line"><span class="lineno"> 1151</span>            }</div>
<div class="line"><span class="lineno"> 1152</span>            DeltaVolQuote::AtmType at;</div>
<div class="line"><span class="lineno"> 1153</span>            DeltaVolQuote::DeltaType dt;</div>
<div class="line"><span class="lineno"> 1154</span>            <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size(); ++i) {</div>
<div class="line"><span class="lineno"> 1155</span>                Real t = times[i];</div>
<div class="line"><span class="lineno"> 1156</span>                at = atmType;</div>
<div class="line"><span class="lineno"> 1157</span>                dt = deltaType;</div>
<div class="line"><span class="lineno"> 1158</span>                <span class="comment">// for times after the last quoted expiry we use artificial conventions to avoid problems with strike</span></div>
<div class="line"><span class="lineno"> 1159</span>                <span class="comment">// from delta conversions: we use fwd delta always and ATM DNS</span></div>
<div class="line"><span class="lineno"> 1160</span>                <span class="keywordflow">if</span> (t &gt; maxTime) {</div>
<div class="line"><span class="lineno"> 1161</span>                    at = DeltaVolQuote::AtmDeltaNeutral;</div>
<div class="line"><span class="lineno"> 1162</span>                    dt = DeltaVolQuote::Fwd;</div>
<div class="line"><span class="lineno"> 1163</span>                }</div>
<div class="line"><span class="lineno"> 1164</span>                <span class="keywordtype">bool</span> validSlice = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1165</span>                <span class="keywordflow">for</span> (Size j = 0; j &lt; deltas.size(); ++j) {</div>
<div class="line"><span class="lineno"> 1166</span>                    DeltaString d(deltas[j]);</div>
<div class="line"><span class="lineno"> 1167</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1168</span>                        Real strike;</div>
<div class="line"><span class="lineno"> 1169</span>                        <span class="keywordflow">if</span> (d.isAtm()) {</div>
<div class="line"><span class="lineno"> 1170</span>                            strike = <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a097163251a347e24846dd4f1b569493c">QuantExt::getAtmStrike</a>(dt, at, eqIndex-&gt;equitySpot()-&gt;value(), rfDisc[i],</div>
<div class="line"><span class="lineno"> 1171</span>                                                            divDisc[i], <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>, t);</div>
<div class="line"><span class="lineno"> 1172</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d.isCall()) {</div>
<div class="line"><span class="lineno"> 1173</span>                            strike = <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652">QuantExt::getStrikeFromDelta</a>(Option::Call, d.delta(), dt,</div>
<div class="line"><span class="lineno"> 1174</span>                                                                  eqIndex-&gt;equitySpot()-&gt;value(), rfDisc[i], divDisc[i],</div>
<div class="line"><span class="lineno"> 1175</span>                                                                  <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>, t);</div>
<div class="line"><span class="lineno"> 1176</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1177</span>                            strike =</div>
<div class="line"><span class="lineno"> 1178</span>                                <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652">QuantExt::getStrikeFromDelta</a>(Option::Put, d.delta(), dt, eqIndex-&gt;equitySpot()-&gt;value(),</div>
<div class="line"><span class="lineno"> 1179</span>                                                             rfDisc[i], divDisc[i], <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>, t);</div>
<div class="line"><span class="lineno"> 1180</span>                        }</div>
<div class="line"><span class="lineno"> 1181</span>                        Real stddev = std::sqrt(<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;blackVariance(t, strike));</div>
<div class="line"><span class="lineno"> 1182</span>                        callPricesDelta[i][j] = blackFormula(Option::Call, strike, forwards[i], stddev);</div>
<div class="line"><span class="lineno"> 1183</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridStrikes[i][j] = strike;</div>
<div class="line"><span class="lineno"> 1184</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridImpliedVolatility[i][j] = stddev / std::sqrt(t);</div>
<div class="line"><span class="lineno"> 1185</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno"> 1186</span>                        validSlice = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1187</span>                        <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: error for time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; delta &quot;</span> &lt;&lt; deltas[j] &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno"> 1188</span>                    }</div>
<div class="line"><span class="lineno"> 1189</span>                }</div>
<div class="line"><span class="lineno"> 1190</span>                <span class="keywordflow">if</span> (validSlice) {</div>
<div class="line"><span class="lineno"> 1191</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1192</span>                        <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_carr_madan_marginal_probability.html">QuantExt::CarrMadanMarginalProbability</a> cm(<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridStrikes[i], forwards[i],</div>
<div class="line"><span class="lineno"> 1193</span>                                                                  callPricesDelta[i]);</div>
<div class="line"><span class="lineno"> 1194</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridCallSpreadArbitrage[i] = cm.callSpreadArbitrage();</div>
<div class="line"><span class="lineno"> 1195</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridButterflyArbitrage[i] = cm.butterflyArbitrage();</div>
<div class="line"><span class="lineno"> 1196</span>                        <span class="keywordflow">if</span> (!cm.arbitrageFree())</div>
<div class="line"><span class="lineno"> 1197</span>                            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1198</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;deltaGridProb[i] = cm.density();</div>
<div class="line"><span class="lineno"> 1199</span>                        <a class="code hl_define" href="log_8hpp.html#a4cf6b52b5cb6fdd420eaad750cfc20cc">TLOGGERSTREAM</a>(<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#ab389c65095cf5cf8101a6244a48a4102">arbitrageAsString</a>(cm));</div>
<div class="line"><span class="lineno"> 1200</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno"> 1201</span>                        <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;error for time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno"> 1202</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1203</span>                        <a class="code hl_define" href="log_8hpp.html#a4cf6b52b5cb6fdd420eaad750cfc20cc">TLOGGERSTREAM</a>(<span class="stringliteral">&quot;..(invalid slice)..&quot;</span>);</div>
<div class="line"><span class="lineno"> 1204</span>                    }</div>
<div class="line"><span class="lineno"> 1205</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1206</span>                    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1207</span>                    <a class="code hl_define" href="log_8hpp.html#a4cf6b52b5cb6fdd420eaad750cfc20cc">TLOGGERSTREAM</a>(<span class="stringliteral">&quot;..(invalid slice)..&quot;</span>);</div>
<div class="line"><span class="lineno"> 1208</span>                }</div>
<div class="line"><span class="lineno"> 1209</span>            }</div>
<div class="line"><span class="lineno"> 1210</span>            <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Delta surface arbitrage analysis completed.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1211</span>        }</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>        <span class="keywordflow">if</span> (reportOnMoneynessGrid) {</div>
<div class="line"><span class="lineno"> 1214</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneyness = moneyness;</div>
<div class="line"><span class="lineno"> 1215</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridStrikes =</div>
<div class="line"><span class="lineno"> 1216</span>                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1217</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridProb =</div>
<div class="line"><span class="lineno"> 1218</span>                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1219</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridImpliedVolatility =</div>
<div class="line"><span class="lineno"> 1220</span>                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1221</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridCallSpreadArbitrage =</div>
<div class="line"><span class="lineno"> 1222</span>                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(moneyness.size(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1223</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridButterflyArbitrage =</div>
<div class="line"><span class="lineno"> 1224</span>                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(moneyness.size(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1225</span>            <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridCalendarArbitrage =</div>
<div class="line"><span class="lineno"> 1226</span>                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(moneyness.size(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno"> 1227</span>            <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size(); ++i) {</div>
<div class="line"><span class="lineno"> 1228</span>                Real t = times[i];</div>
<div class="line"><span class="lineno"> 1229</span>                <span class="keywordflow">for</span> (Size j = 0; j &lt; moneyness.size(); ++j) {</div>
<div class="line"><span class="lineno"> 1230</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1231</span>                        Real strike = moneyness[j] * forwards[i];</div>
<div class="line"><span class="lineno"> 1232</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridStrikes[i][j] = strike;</div>
<div class="line"><span class="lineno"> 1233</span>                        Real stddev = std::sqrt(<a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;blackVariance(t, strike));</div>
<div class="line"><span class="lineno"> 1234</span>                        callPricesMoneyness[i][j] = blackFormula(Option::Call, strike, forwards[i], stddev);</div>
<div class="line"><span class="lineno"> 1235</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridImpliedVolatility[i][j] = stddev / std::sqrt(t);</div>
<div class="line"><span class="lineno"> 1236</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno"> 1237</span>                        <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: error for time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; moneyness &quot;</span> &lt;&lt; moneyness[j] &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno"> 1238</span>                    }</div>
<div class="line"><span class="lineno"> 1239</span>                }</div>
<div class="line"><span class="lineno"> 1240</span>            }</div>
<div class="line"><span class="lineno"> 1241</span>            <span class="keywordflow">if</span> (!times.empty() &amp;&amp; !moneyness.empty()) {</div>
<div class="line"><span class="lineno"> 1242</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno"> 1243</span>                    <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_carr_madan_surface.html">QuantExt::CarrMadanSurface</a> cm(times, moneyness, eqIndex-&gt;equitySpot()-&gt;value(), forwards,</div>
<div class="line"><span class="lineno"> 1244</span>                                                  callPricesMoneyness);</div>
<div class="line"><span class="lineno"> 1245</span>                    <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size(); ++i) {</div>
<div class="line"><span class="lineno"> 1246</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridProb[i] = cm.timeSlices()[i].density();</div>
<div class="line"><span class="lineno"> 1247</span>                    }</div>
<div class="line"><span class="lineno"> 1248</span>                    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridCallSpreadArbitrage = cm.callSpreadArbitrage();</div>
<div class="line"><span class="lineno"> 1249</span>                    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridButterflyArbitrage = cm.butterflyArbitrage();</div>
<div class="line"><span class="lineno"> 1250</span>                    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;moneynessGridCalendarArbitrage = cm.calendarArbitrage();</div>
<div class="line"><span class="lineno"> 1251</span>                    <span class="keywordflow">if</span> (!cm.arbitrageFree())</div>
<div class="line"><span class="lineno"> 1252</span>                        <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1253</span>                    <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Moneyness surface Arbitrage analysis result:&quot;</span>);</div>
<div class="line"><span class="lineno"> 1254</span>                    <a class="code hl_define" href="log_8hpp.html#a4cf6b52b5cb6fdd420eaad750cfc20cc">TLOGGERSTREAM</a>(<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#ab389c65095cf5cf8101a6244a48a4102">arbitrageAsString</a>(cm));</div>
<div class="line"><span class="lineno"> 1255</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno"> 1256</span>                    <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: error: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno"> 1257</span>                    <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1258</span>                }</div>
<div class="line"><span class="lineno"> 1259</span>                <a class="code hl_define" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Moneyness surface Arbitrage analysis completed:&quot;</span>);</div>
<div class="line"><span class="lineno"> 1260</span>            }</div>
<div class="line"><span class="lineno"> 1261</span>        }</div>
<div class="line"><span class="lineno"> 1262</span> </div>
<div class="line"><span class="lineno"> 1263</span>        <a class="code hl_define" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;EquityVolCurve: Building calibration info for eq vol surface completed.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1264</span> </div>
<div class="line"><span class="lineno"> 1265</span>    } <span class="keywordflow">catch</span> (std::exception&amp; e) {</div>
<div class="line"><span class="lineno"> 1266</span>        QL_FAIL(<span class="stringliteral">&quot;EquityVolCurve: calibration info building failed: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno"> 1267</span>    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno"> 1268</span>        QL_FAIL(<span class="stringliteral">&quot;EquityVolCurve:  calibration info building failed: unknown error&quot;</span>);</div>
<div class="line"><span class="lineno"> 1269</span>    }</div>
<div class="line"><span class="lineno"> 1270</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_carr_madan_marginal_probability_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_carr_madan_marginal_probability.html">QuantExt::CarrMadanMarginalProbability</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_carr_madan_surface_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_carr_madan_surface.html">QuantExt::CarrMadanSurface</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a6406d74151328ae90b3ebeecaf0ba9a9"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">ore::data::EquityVolCurve::calibrationInfo_</a></div><div class="ttdeci">boost::shared_ptr&lt; FxEqCommVolCalibrationInfo &gt; calibrationInfo_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00113">equityvolcurve.hpp:113</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_af0ba496aadfdb4b5d3c4034bd4e50ad9"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#af0ba496aadfdb4b5d3c4034bd4e50ad9">ore::data::EquityVolCurve::volatilityConfig_</a></div><div class="ttdeci">boost::shared_ptr&lt; VolatilityConfig &gt; volatilityConfig_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00112">equityvolcurve.hpp:112</a></div></div>
<div class="ttc" id="alog_8hpp_html_a4cf6b52b5cb6fdd420eaad750cfc20cc"><div class="ttname"><a href="log_8hpp.html#a4cf6b52b5cb6fdd420eaad750cfc20cc">TLOGGERSTREAM</a></div><div class="ttdeci">#define TLOGGERSTREAM(text)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00447">log.hpp:447</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_a097163251a347e24846dd4f1b569493c"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a097163251a347e24846dd4f1b569493c">QuantExt::getAtmStrike</a></div><div class="ttdeci">Real getAtmStrike(DeltaVolQuote::DeltaType dt, DeltaVolQuote::AtmType at, Real spot, Real domDiscount, Real forDiscount, boost::shared_ptr&lt; BlackVolTermStructure &gt; vol, Real t, Real accuracy, Size maxIterations)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_ab389c65095cf5cf8101a6244a48a4102"><div class="ttname"><a href="../qle/namespace_quant_ext.html#ab389c65095cf5cf8101a6244a48a4102">QuantExt::arbitrageAsString</a></div><div class="ttdeci">std::string arbitrageAsString(const CarrMadanMarginalProbabilityClass &amp;cm)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_afbdda05b0f8c22a55596d604e3c1c652"><div class="ttname"><a href="../qle/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652">QuantExt::getStrikeFromDelta</a></div><div class="ttdeci">Real getStrikeFromDelta(Option::Type optionType, Real delta, DeltaVolQuote::DeltaType dt, Real spot, Real domDiscount, Real forDiscount, boost::shared_ptr&lt; BlackVolTermStructure &gt; vol, Real t, Real accuracy, Size maxIterations)</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a5e51bfe798b6a12ac603d4578c144c6b"><div class="ttname"><a href="namespaceore_1_1data.html#a5e51bfe798b6a12ac603d4578c144c6b">ore::data::effectiveReportConfig</a></div><div class="ttdeci">ReportConfig effectiveReportConfig(const ReportConfig &amp;globalConfig, const ReportConfig &amp;localConfig)</div><div class="ttdef"><b>Definition:</b> <a href="reportconfig_8cpp_source.html#l00109">reportconfig.cpp:109</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_a3987971ffc25c840ee49e2eca623218a_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_a3987971ffc25c840ee49e2eca623218a_cgraph" alt=""/></div>
<map name="aclassore_1_1data_1_1_equity_vol_curve_a3987971ffc25c840ee49e2eca623218a_cgraph" id="aclassore_1_1data_1_1_equity_vol_curve_a3987971ffc25c840ee49e2eca623218a_cgraph">
<area shape="rect" title="Build the calibration info." alt="" coords="5,797,136,823"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#ab389c65095cf5cf8101a6244a48a4102" title=" " alt="" coords="193,5,379,31"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_marginal_probability.html#a2c9e9c3980a73aa98162a2149d7b0604" title=" " alt="" coords="187,55,385,95"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_surface.html#a2c9e9c3980a73aa98162a2149d7b0604" title=" " alt="" coords="190,119,382,159"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_marginal_probability.html#a050154669e2d6571151716c8e7c0cb34" title=" " alt="" coords="187,183,385,223"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_surface.html#a08d0363135af67ef063a51bee340d460" title=" " alt="" coords="190,247,382,287"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#aba3cde563c1010662ce94c1c14bcbd11" title=" " alt="" coords="202,311,370,351"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_surface.html#a367f9077f0c218edcd60507be81bbac6" title=" " alt="" coords="190,375,382,415"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_marginal_probability.html#a8e9a460f12d8d5c9001a36bf087a6a8a" title=" " alt="" coords="184,439,388,479"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_surface.html#abdede4413de05babce69513924456c5b" title=" " alt="" coords="190,503,382,543"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#ab59528a5949beca4ed9c060d58605afb" title=" " alt="" coords="202,567,370,607"/>
<area shape="rect" href="classore_1_1data_1_1_delta_string.html#a397f8534c2b3d08642e5040c40426ab7" title=" " alt="" coords="213,631,359,671"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a4e7f096baca32e79358e09ada698bdce" title=" " alt="" coords="448,591,603,631"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_marginal_probability.html#ac92c479ebb5da27bcb6cf6f806bd3860" title=" " alt="" coords="187,1013,385,1053"/>
<area shape="rect" href="namespaceore_1_1data.html#a5e51bfe798b6a12ac603d4578c144c6b" title=" " alt="" coords="203,847,369,887"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a82578f32908fbaf6c03607239312437d" title=" " alt="" coords="448,655,603,695"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#aee007654632574a63d04e7c6d0bc048f" title=" " alt="" coords="448,719,603,759"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a13b426492274e696ee57b64ee0905f8b" title=" " alt="" coords="448,1103,603,1143"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a56ab5896ba11edc3f435cefc0c45085a" title=" " alt="" coords="440,1167,611,1207"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a097163251a347e24846dd4f1b569493c" title=" " alt="" coords="205,1077,367,1103"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652" title=" " alt="" coords="187,1127,385,1152"/>
<area shape="rect" href="classore_1_1data_1_1_delta_string.html#a33677d9992d9935c8dda721c7e90c488" title=" " alt="" coords="213,1177,359,1217"/>
<area shape="rect" href="classore_1_1data_1_1_delta_string.html#a24f2d93e33ef1aba7e9b5dbeda088e98" title=" " alt="" coords="213,1241,359,1281"/>
<area shape="rect" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b" title="Convert text to QuantLib::DeltaVolQuote::AtmType." alt="" coords="203,1305,369,1331"/>
<area shape="rect" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1" title="Convert text to QuantLib::DeltaVolQuote::DeltaType." alt="" coords="201,1355,371,1380"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#ab7e04e920649365f47da95adf40df527" title=" " alt="" coords="202,1405,370,1445"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_carr_madan_surface.html#af46a1928b8c0698f1b5208daca238413" title=" " alt="" coords="190,1469,382,1509"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="221,1557,351,1583"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a74e55eb606801e93e03464e36edc3954" title=" " alt="" coords="448,783,603,823"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a5552ccfe35e93f625d97ce7912182770" title=" " alt="" coords="436,847,615,887"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a3e27de23896c5cad96fe8b54be7efbfc" title=" " alt="" coords="448,911,603,951"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#af8d226e2763da6112782a272b6bf454b" title=" " alt="" coords="448,975,603,1015"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a17329bf807a1070ecbc7e03e3cc94df3" title=" " alt="" coords="448,1039,603,1079"/>
</map>
</div>

</div>
</div>
<a id="a4700309ca6155ced2e5d380d5744369e" name="a4700309ca6155ced2e5d380d5744369e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4700309ca6155ced2e5d380d5744369e">&#9670;&#160;</a></span>volTermStructure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt; <a class="elRef" href="../qle/class_black_vol_term_structure.html">BlackVolTermStructure</a> &gt; &amp; volTermStructure </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00100">100</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bcc2beb0a4e69b2194f13109f74ecd0" name="a2bcc2beb0a4e69b2194f13109f74ecd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bcc2beb0a4e69b2194f13109f74ecd0">&#9670;&#160;</a></span>calibrationInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt; <a class="el" href="structore_1_1data_1_1_fx_eq_comm_vol_calibration_info.html">FxEqCommVolCalibrationInfo</a> &gt; &amp; calibrationInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00101">101</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  101</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1data_1_1_equity_vol_curve.html#a6406d74151328ae90b3ebeecaf0ba9a9">calibrationInfo_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad0a079fa8608dac9333770f2c345acb4" name="ad0a079fa8608dac9333770f2c345acb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0a079fa8608dac9333770f2c345acb4">&#9670;&#160;</a></span>spec_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> spec_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00106">106</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a19e37c811c4794e4dded0233871bf813" name="a19e37c811c4794e4dded0233871bf813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e37c811c4794e4dded0233871bf813">&#9670;&#160;</a></span>vol_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="elRef" href="../qle/class_black_vol_term_structure.html">BlackVolTermStructure</a>&gt; vol_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00107">107</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a936be92f5f766489c24b9ce54d702b36" name="a936be92f5f766489c24b9ce54d702b36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936be92f5f766489c24b9ce54d702b36">&#9670;&#160;</a></span>calendar_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Calendar calendar_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00108">108</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a58abbb5a649fa48e14b30812991617dd" name="a58abbb5a649fa48e14b30812991617dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58abbb5a649fa48e14b30812991617dd">&#9670;&#160;</a></span>currency_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Currency currency_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00109">109</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="ad54546634b68f067b0f3867f7283c998" name="ad54546634b68f067b0f3867f7283c998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad54546634b68f067b0f3867f7283c998">&#9670;&#160;</a></span>dayCounter_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::DayCounter dayCounter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00110">110</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a83e7c296e20653ab73fa6c3b2ebed22a" name="a83e7c296e20653ab73fa6c3b2ebed22a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83e7c296e20653ab73fa6c3b2ebed22a">&#9670;&#160;</a></span>maxExpiry_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date maxExpiry_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00111">111</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="af0ba496aadfdb4b5d3c4034bd4e50ad9" name="af0ba496aadfdb4b5d3c4034bd4e50ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0ba496aadfdb4b5d3c4034bd4e50ad9">&#9670;&#160;</a></span>volatilityConfig_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1data_1_1_volatility_config.html">VolatilityConfig</a>&gt; volatilityConfig_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00112">112</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a6406d74151328ae90b3ebeecaf0ba9a9" name="a6406d74151328ae90b3ebeecaf0ba9a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6406d74151328ae90b3ebeecaf0ba9a9">&#9670;&#160;</a></span>calibrationInfo_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="structore_1_1data_1_1_fx_eq_comm_vol_calibration_info.html">FxEqCommVolCalibrationInfo</a>&gt; calibrationInfo_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00113">113</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
