<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>OREData: EquityVolCurve Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oredextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="/OREAnnotatedSource/ored/logo-data@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated source code - version 1.6</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceore.html">ore</a></li><li class="navelem"><a class="el" href="namespaceore_1_1data.html">data</a></li><li class="navelem"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classore_1_1data_1_1_equity_vol_curve-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">EquityVolCurve Class Reference<div class="ingroups"><a class="el" href="group__curves.html">Curves</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Wrapper class for building Equity volatility structures.  
 <a href="classore_1_1data_1_1_equity_vol_curve.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="equityvolcurve_8hpp_source.html">ored/marketdata/equityvolcurve.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for EquityVolCurve:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve__coll__graph.png" border="0" usemap="#a_equity_vol_curve_coll__map" alt="Collaboration graph"/></div>
<map name="_equity_vol_curve_coll__map" id="a_equity_vol_curve_coll__map">
<area shape="rect" title="Wrapper class for building Equity volatility structures." alt="" coords="371,729,517,997"/>
<area shape="rect" title=" " alt="" coords="5,545,96,623"/>
<area shape="rect" title=" " alt="" coords="123,545,197,623"/>
<area shape="rect" title=" " alt="" coords="221,538,395,630"/>
<area shape="rect" title=" " alt="" coords="419,545,469,623"/>
<area shape="rect" title=" " alt="" coords="493,538,669,630"/>
<area shape="rect" title=" " alt="" coords="694,545,767,623"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_spec.html" title="Equity Volatility curve description." alt="" coords="791,501,982,667"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html" title="Curve Specification." alt="" coords="909,272,1027,452"/>
<area shape="rect" title="STL class." alt="" coords="842,132,897,209"/>
<area shape="rect" title="STL class." alt="" coords="799,5,940,83"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Constructors</div></td></tr>
<tr class="memitem:a84d6edb926e8848c0abf18b8af2e6747"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a84d6edb926e8848c0abf18b8af2e6747">EquityVolCurve</a> ()</td></tr>
<tr class="memdesc:a84d6edb926e8848c0abf18b8af2e6747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a84d6edb926e8848c0abf18b8af2e6747">More...</a><br /></td></tr>
<tr class="separator:a84d6edb926e8848c0abf18b8af2e6747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f22dca4c3734bf89e2e071a5019060c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a6f22dca4c3734bf89e2e071a5019060c">EquityVolCurve</a> (Date asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;<a class="el" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>, const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;eqIndex, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt;&gt; &amp;requiredEquityCurves={}, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt;&gt; &amp;requiredEquityVolCurves={})</td></tr>
<tr class="memdesc:a6f22dca4c3734bf89e2e071a5019060c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detailed constructor.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a6f22dca4c3734bf89e2e071a5019060c">More...</a><br /></td></tr>
<tr class="separator:a6f22dca4c3734bf89e2e071a5019060c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Inspectors</h2></td></tr>
<tr class="memitem:ad0a079fa8608dac9333770f2c345acb4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad0a079fa8608dac9333770f2c345acb4">spec_</a></td></tr>
<tr class="separator:ad0a079fa8608dac9333770f2c345acb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19e37c811c4794e4dded0233871bf813"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../qle/db/de1/class_black_vol_term_structure.html">BlackVolTermStructure</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a></td></tr>
<tr class="separator:a19e37c811c4794e4dded0233871bf813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936be92f5f766489c24b9ce54d702b36"><td class="memItemLeft" align="right" valign="top">QuantLib::Calendar&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">calendar_</a></td></tr>
<tr class="separator:a936be92f5f766489c24b9ce54d702b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58abbb5a649fa48e14b30812991617dd"><td class="memItemLeft" align="right" valign="top">QuantLib::Currency&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a58abbb5a649fa48e14b30812991617dd">currency_</a></td></tr>
<tr class="separator:a58abbb5a649fa48e14b30812991617dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad54546634b68f067b0f3867f7283c998"><td class="memItemLeft" align="right" valign="top">QuantLib::DayCounter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad54546634b68f067b0f3867f7283c998">dayCounter_</a></td></tr>
<tr class="separator:ad54546634b68f067b0f3867f7283c998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e7c296e20653ab73fa6c3b2ebed22a"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a></td></tr>
<tr class="separator:a83e7c296e20653ab73fa6c3b2ebed22a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af31f7d903c66467a13d8fde901edd233"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="structore_1_1data_1_1_fx_eq_vol_calibration_info.html">FxEqVolCalibrationInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a></td></tr>
<tr class="separator:af31f7d903c66467a13d8fde901edd233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad060ef3791a6d6e103b84926d80ba63b"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a> () const</td></tr>
<tr class="separator:ad060ef3791a6d6e103b84926d80ba63b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf10cbffef109ac32266d9a7f6137992"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#aaf10cbffef109ac32266d9a7f6137992">buildVolatility</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_constant_volatility_config.html">ConstantVolatilityConfig</a> &amp;cvc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader)</td></tr>
<tr class="memdesc:aaf10cbffef109ac32266d9a7f6137992"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility structure from a single constant volatlity quote.  <a href="classore_1_1data_1_1_equity_vol_curve.html#aaf10cbffef109ac32266d9a7f6137992">More...</a><br /></td></tr>
<tr class="separator:aaf10cbffef109ac32266d9a7f6137992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cfb7d35baac2dc7337911613ea7631d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a5cfb7d35baac2dc7337911613ea7631d">buildVolatility</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_curve_config.html">VolatilityCurveConfig</a> &amp;vcc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader)</td></tr>
<tr class="memdesc:a5cfb7d35baac2dc7337911613ea7631d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility curve from a 1-D curve of volatlity quotes.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a5cfb7d35baac2dc7337911613ea7631d">More...</a><br /></td></tr>
<tr class="separator:a5cfb7d35baac2dc7337911613ea7631d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad447c8f63425cf2c83ba51fb76ffa07b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad447c8f63425cf2c83ba51fb76ffa07b">buildVolatility</a> (const QuantLib::Date &amp;asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_strike_surface_config.html">VolatilityStrikeSurfaceConfig</a> &amp;vssc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:ad447c8f63425cf2c83ba51fb76ffa07b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface from a collection of expiry and absolute strike pairs.  <a href="classore_1_1data_1_1_equity_vol_curve.html#ad447c8f63425cf2c83ba51fb76ffa07b">More...</a><br /></td></tr>
<tr class="separator:ad447c8f63425cf2c83ba51fb76ffa07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a552d06b39e76532c6a2ced382dfc15eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a552d06b39e76532c6a2ced382dfc15eb">buildVolatility</a> (const QuantLib::Date &amp;asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_moneyness_surface_config.html">VolatilityMoneynessSurfaceConfig</a> &amp;vssc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:a552d06b39e76532c6a2ced382dfc15eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface from a collection of expiry and moneyness strike pairs.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a552d06b39e76532c6a2ced382dfc15eb">More...</a><br /></td></tr>
<tr class="separator:a552d06b39e76532c6a2ced382dfc15eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0902647b276a7373f9a5ba45bbdbc111"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a0902647b276a7373f9a5ba45bbdbc111">buildVolatility</a> (const QuantLib::Date &amp;asof, <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;vc, const <a class="el" href="classore_1_1data_1_1_volatility_delta_surface_config.html">VolatilityDeltaSurfaceConfig</a> &amp;vdsc, const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;loader, const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:a0902647b276a7373f9a5ba45bbdbc111"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface from a collection of expiry and strike delta pairs.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a0902647b276a7373f9a5ba45bbdbc111">More...</a><br /></td></tr>
<tr class="separator:a0902647b276a7373f9a5ba45bbdbc111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ceb3593b7068eb3ec2a704015f3e054"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a2ceb3593b7068eb3ec2a704015f3e054">buildVolatility</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp;<a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>, const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;<a class="el" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt;&gt; &amp;eqCurves, const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt;&gt; &amp;eqVolCurves)</td></tr>
<tr class="memdesc:a2ceb3593b7068eb3ec2a704015f3e054"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a volatility surface as a proxy from another volatility surface.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a2ceb3593b7068eb3ec2a704015f3e054">More...</a><br /></td></tr>
<tr class="separator:a2ceb3593b7068eb3ec2a704015f3e054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988ced2514e21f8d3790a311eb203e83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a988ced2514e21f8d3790a311eb203e83">buildCalibrationInfo</a> (const QuantLib::Date &amp;asof, const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;<a class="el" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>, const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;config, const Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;eqIndex)</td></tr>
<tr class="memdesc:a988ced2514e21f8d3790a311eb203e83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build the calibration info.  <a href="classore_1_1data_1_1_equity_vol_curve.html#a988ced2514e21f8d3790a311eb203e83">More...</a><br /></td></tr>
<tr class="separator:a988ced2514e21f8d3790a311eb203e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe8dfe6422d30bfe1f1a3434b1bf8a8"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr&lt; <a class="elRef" href="../qle/db/de1/class_black_vol_term_structure.html">BlackVolTermStructure</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a4fe8dfe6422d30bfe1f1a3434b1bf8a8">volTermStructure</a> () const</td></tr>
<tr class="separator:a4fe8dfe6422d30bfe1f1a3434b1bf8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fe8dd48f3334c4ba3d834d3e1451cd2"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr&lt; <a class="el" href="structore_1_1data_1_1_fx_eq_vol_calibration_info.html">FxEqVolCalibrationInfo</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html#a1fe8dd48f3334c4ba3d834d3e1451cd2">calibrationInfo</a> () const</td></tr>
<tr class="separator:a1fe8dd48f3334c4ba3d834d3e1451cd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper class for building Equity volatility structures. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00043">43</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a84d6edb926e8848c0abf18b8af2e6747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84d6edb926e8848c0abf18b8af2e6747">&#9670;&nbsp;</a></span>EquityVolCurve() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00048">48</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f22dca4c3734bf89e2e071a5019060c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f22dca4c3734bf89e2e071a5019060c">&#9670;&nbsp;</a></span>EquityVolCurve() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> </td>
          <td>(</td>
          <td class="paramtype">Date&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a>&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;&#160;</td>
          <td class="paramname"><em>curveConfigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredEquityCurves</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>requiredEquityVolCurves</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detailed constructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad060ef3791a6d6e103b84926d80ba63b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad060ef3791a6d6e103b84926d80ba63b">&#9670;&nbsp;</a></span>spec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a>&amp; spec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00058">58</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad0a079fa8608dac9333770f2c345acb4">spec_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf10cbffef109ac32266d9a7f6137992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf10cbffef109ac32266d9a7f6137992">&#9670;&nbsp;</a></span>buildVolatility() <span class="overload">[1/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_constant_volatility_config.html">ConstantVolatilityConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>cvc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility structure from a single constant volatlity quote. </p>

</div>
</div>
<a id="a5cfb7d35baac2dc7337911613ea7631d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cfb7d35baac2dc7337911613ea7631d">&#9670;&nbsp;</a></span>buildVolatility() <span class="overload">[2/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_curve_config.html">VolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility curve from a 1-D curve of volatlity quotes. </p>

</div>
</div>
<a id="ad447c8f63425cf2c83ba51fb76ffa07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad447c8f63425cf2c83ba51fb76ffa07b">&#9670;&nbsp;</a></span>buildVolatility() <span class="overload">[3/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_strike_surface_config.html">VolatilityStrikeSurfaceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vssc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface from a collection of expiry and absolute strike pairs. </p>

</div>
</div>
<a id="a552d06b39e76532c6a2ced382dfc15eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a552d06b39e76532c6a2ced382dfc15eb">&#9670;&nbsp;</a></span>buildVolatility() <span class="overload">[4/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_moneyness_surface_config.html">VolatilityMoneynessSurfaceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vssc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface from a collection of expiry and moneyness strike pairs. </p>

</div>
</div>
<a id="a0902647b276a7373f9a5ba45bbdbc111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0902647b276a7373f9a5ba45bbdbc111">&#9670;&nbsp;</a></span>buildVolatility() <span class="overload">[5/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_volatility_delta_surface_config.html">VolatilityDeltaSurfaceConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>vdsc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_loader.html">Loader</a> &amp;&#160;</td>
          <td class="paramname"><em>loader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface from a collection of expiry and strike delta pairs. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8cpp_source.html#l00735">735</a> of file <a class="el" href="equityvolcurve_8cpp_source.html">equityvolcurve.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keyword">using</span> boost::adaptors::transformed;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keyword">using</span> boost::algorithm::join;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;EquityVolCurve: start building 2-D volatility delta strike surface&quot;</span>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    QL_REQUIRE(vc.quoteType() == <a class="code" href="classore_1_1data_1_1_market_datum.html#aa5b3ec8bb6c730c38b87a73c11dec808a51c1258108cb3ef6a757d4e01db7f115">MarketDatum::QuoteType::RATE_LNVOL</a>,</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;               <span class="stringliteral">&quot;EquityVolCurve: only quote type&quot;</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                   &lt;&lt; <span class="stringliteral">&quot; RATE_LNVOL is currently supported for a 2-D volatility delta strike surface.&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// Parse, sort and check the vector of configured put deltas</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    vector&lt;Real&gt; putDeltas = parseVectorOfValues&lt;Real&gt;(vdsc.putDeltas(), &amp;<a class="code" href="group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd">parseReal</a>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    sort(putDeltas.begin(), putDeltas.end(), [](Real x, Real y) { return !close(x, y) &amp;&amp; x &lt; y; });</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    QL_REQUIRE(adjacent_find(putDeltas.begin(), putDeltas.end(), [](Real x, Real y) { return close(x, y); }) ==</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                   putDeltas.end(),</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;               <span class="stringliteral">&quot;The configured put deltas contain duplicates&quot;</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Parsed &quot;</span> &lt;&lt; putDeltas.size() &lt;&lt; <span class="stringliteral">&quot; unique configured put deltas&quot;</span>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Put deltas are: &quot;</span> &lt;&lt; join(putDeltas | transformed([](Real d) { <span class="keywordflow">return</span> <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(d); }), <span class="stringliteral">&quot;,&quot;</span>));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">// Parse, sort descending and check the vector of configured call deltas</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    vector&lt;Real&gt; callDeltas = parseVectorOfValues&lt;Real&gt;(vdsc.callDeltas(), &amp;<a class="code" href="group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd">parseReal</a>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    sort(callDeltas.begin(), callDeltas.end(), [](Real x, Real y) { return !close(x, y) &amp;&amp; x &gt; y; });</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    QL_REQUIRE(adjacent_find(callDeltas.begin(), callDeltas.end(), [](Real x, Real y) { return close(x, y); }) ==</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                   callDeltas.end(),</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;               <span class="stringliteral">&quot;The configured call deltas contain duplicates&quot;</span>);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Parsed &quot;</span> &lt;&lt; callDeltas.size() &lt;&lt; <span class="stringliteral">&quot; unique configured call deltas&quot;</span>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Call deltas are: &quot;</span> &lt;&lt; join(callDeltas | transformed([](Real d) { <span class="keywordflow">return</span> <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(d); }), <span class="stringliteral">&quot;,&quot;</span>));</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// Expiries may be configured with a wildcard or given explicitly</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordtype">bool</span> expWc = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (find(vdsc.expiries().begin(), vdsc.expiries().end(), <span class="stringliteral">&quot;*&quot;</span>) != vdsc.expiries().end()) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        expWc = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        QL_REQUIRE(vdsc.expiries().size() == 1, <span class="stringliteral">&quot;Wild card expiry specified but more expiries also specified.&quot;</span>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Have expiry wildcard pattern &quot;</span> &lt;&lt; vdsc.expiries()[0]);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">// Map to hold the rows of the equity volatility matrix. The keys are the expiry dates and the values are the</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">// vectors of volatilities, one for each configured delta.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    map&lt;Date, vector&lt;Real&gt;&gt; surfaceData;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">// Number of strikes = number of put deltas + ATM + number of call deltas</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    Size numStrikes = putDeltas.size() + 1 + callDeltas.size();</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// Count the number of quotes added. We check at the end that we have added all configured quotes.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    Size quotesAdded = 0;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// Configured delta and Atm types.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    DeltaVolQuote::DeltaType deltaType = <a class="code" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">parseDeltaType</a>(vdsc.deltaType());</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    DeltaVolQuote::AtmType atmType = <a class="code" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b">parseAtmType</a>(vdsc.atmType());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    boost::optional&lt;DeltaVolQuote::DeltaType&gt; atmDeltaType;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (!vdsc.atmDeltaType().empty()) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        atmDeltaType = <a class="code" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">parseDeltaType</a>(vdsc.atmDeltaType());</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// Populate the configured strikes.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    vector&lt;boost::shared_ptr&lt;BaseStrike&gt;&gt; strikes;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; pd : putDeltas) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        strikes.push_back(boost::make_shared&lt;DeltaStrike&gt;(deltaType, Option::Put, pd));</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    strikes.push_back(boost::make_shared&lt;AtmStrike&gt;(atmType, atmDeltaType));</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cd : callDeltas) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        strikes.push_back(boost::make_shared&lt;DeltaStrike&gt;(deltaType, Option::Call, cd));</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">// Read the quotes to fill the expiry dates and vols matrix.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> boost::shared_ptr&lt;MarketDatum&gt;&amp; md : loader.loadQuotes(asof)) {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="comment">// Go to next quote if the market data point&#39;s date does not equal our asof.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">if</span> (md-&gt;asofDate() != asof)</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">// Go to next quote if not a commodity option quote.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="keyword">auto</span> q = boost::dynamic_pointer_cast&lt;EquityOptionQuote&gt;(md);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">if</span> (!q)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">// Go to next quote if not a equity name or currency do not match config.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span> (vc.curveID() != q-&gt;eqName() || vc.ccy() != q-&gt;ccy())</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="comment">// Iterator to one of the configured strikes.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        vector&lt;boost::shared_ptr&lt;BaseStrike&gt;&gt;::iterator strikeIt;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">if</span> (!expWc) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="comment">// If we have explicitly configured expiries and the quote is not in the configured quotes continue.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <span class="keyword">auto</span> it = find(vc.quotes().begin(), vc.quotes().end(), q-&gt;name());</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keywordflow">if</span> (it == vc.quotes().end())</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="comment">// Check if quote&#39;s strike is in the configured strikes.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="comment">// It should be as we have selected from the explicitly configured quotes in the last step.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            strikeIt = find_if(strikes.begin(), strikes.end(),</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                               [&amp;q](boost::shared_ptr&lt;BaseStrike&gt; s) { return *s == *q-&gt;strike(); });</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            QL_REQUIRE(strikeIt != strikes.end(),</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                       <span class="stringliteral">&quot;The quote &#39;&quot;</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                           &lt;&lt; q-&gt;name()</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                           &lt;&lt; <span class="stringliteral">&quot;&#39; is in the list of configured quotes but does not match any of the configured strikes&quot;</span>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="comment">// Check if quote&#39;s strike is in the configured strikes and continue if it is not.</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            strikeIt = find_if(strikes.begin(), strikes.end(),</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                               [&amp;q](boost::shared_ptr&lt;BaseStrike&gt; s) { return *s == *q-&gt;strike(); });</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keywordflow">if</span> (strikeIt == strikes.end())</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="comment">// Position of quote in vector of strikes</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        Size pos = std::distance(strikes.begin(), strikeIt);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="comment">// Process the quote</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        Date eDate;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        boost::shared_ptr&lt;Expiry&gt; expiry = <a class="code" href="namespaceore_1_1data.html#a6d93abc1828ab1f788a5b279d108ccf6">parseExpiry</a>(q-&gt;expiry());</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> expiryDate = boost::dynamic_pointer_cast&lt;ExpiryDate&gt;(expiry)) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            eDate = expiryDate-&gt;expiryDate();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> expiryPeriod = boost::dynamic_pointer_cast&lt;ExpiryPeriod&gt;(expiry)) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="comment">// We may need more conventions here eventually.</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            eDate = <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">calendar_</a>.adjust(asof + expiryPeriod-&gt;expiryPeriod());</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="comment">// Add quote to surface</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">if</span> (surfaceData.count(eDate) == 0)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            surfaceData[eDate] = vector&lt;Real&gt;(numStrikes, Null&lt;Real&gt;());</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        QL_REQUIRE(surfaceData[eDate][pos] == Null&lt;Real&gt;(),</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                   <span class="stringliteral">&quot;Quote &quot;</span> &lt;&lt; q-&gt;name() &lt;&lt; <span class="stringliteral">&quot; provides a duplicate quote for the date &quot;</span> &lt;&lt; io::iso_date(eDate)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot; and strike &quot;</span> &lt;&lt; *q-&gt;strike());</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        surfaceData[eDate][pos] = q-&gt;quote()-&gt;value();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        quotesAdded++;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Added quote &quot;</span> &lt;&lt; q-&gt;name() &lt;&lt; <span class="stringliteral">&quot;: (&quot;</span> &lt;&lt; io::iso_date(eDate) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; *q-&gt;strike() &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; fixed</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                            &lt;&lt; setprecision(9) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; q-&gt;quote()-&gt;value() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;EquityVolCurve: added &quot;</span> &lt;&lt; quotesAdded &lt;&lt; <span class="stringliteral">&quot; quotes in building delta strike surface.&quot;</span>);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Check the data gathered.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">if</span> (!expWc) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">// If expiries were configured explicitly, the number of configured quotes should equal the</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="comment">// number of quotes added.</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        QL_REQUIRE(vc.quotes().size() == quotesAdded,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                   <span class="stringliteral">&quot;Found &quot;</span> &lt;&lt; quotesAdded &lt;&lt; <span class="stringliteral">&quot; quotes, but &quot;</span> &lt;&lt; vc.quotes().size() &lt;&lt; <span class="stringliteral">&quot; quotes required by config.&quot;</span>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="comment">// If the expiries were configured via a wildcard, check that no surfaceData element has a Null&lt;Real&gt;().</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : surfaceData) {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <span class="keywordflow">for</span> (Size j = 0; j &lt; numStrikes; j++) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                QL_REQUIRE(kv.second[j] != Null&lt;Real&gt;(), <span class="stringliteral">&quot;Volatility for expiry date &quot;</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                                             &lt;&lt; io::iso_date(kv.first) &lt;&lt; <span class="stringliteral">&quot; and strike &quot;</span> &lt;&lt; *strikes[j]</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                                             &lt;&lt; <span class="stringliteral">&quot; not found. Cannot proceed with a sparse matrix.&quot;</span>);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        }</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">// Populate the matrix of volatilities and the expiry dates.</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    vector&lt;Date&gt; expiryDates;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    Matrix vols(surfaceData.size(), numStrikes);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> row : surfaceData | boost::adaptors::indexed(0)) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        expiryDates.push_back(row.value().first);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        copy(row.value().second.begin(), row.value().second.end(), vols.row_begin(row.index()));</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="comment">// Need to multiply each put delta value by -1 before passing it to the BlackVolatilitySurfaceDelta ctor</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// i.e. a put delta of 0.25 that is passed in to the config must be -0.25 when passed to the ctor.</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    transform(putDeltas.begin(), putDeltas.end(), putDeltas.begin(), [](Real pd) { return -1.0 * pd; });</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Multiply put deltas by -1.0 before creating BlackVolatilitySurfaceDelta object.&quot;</span>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Put deltas are: &quot;</span> &lt;&lt; join(putDeltas | transformed([](Real d) { <span class="keywordflow">return</span> <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(d); }), <span class="stringliteral">&quot;,&quot;</span>));</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// Set the strike extrapolation which only matters if extrapolation is turned on for the whole surface.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// BlackVolatilitySurfaceDelta time extrapolation is hard-coded to constant in volatility.</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">bool</span> flatExtrapolation = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (vdsc.extrapolation()) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keyword">auto</span> strikeExtrapType = <a class="code" href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc">parseExtrapolation</a>(vdsc.strikeExtrapolation());</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">if</span> (strikeExtrapType == Extrapolation::UseInterpolator) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Strike extrapolation switched to using interpolator.&quot;</span>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            flatExtrapolation = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strikeExtrapType == <a class="code" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a6adf97f83acf6453d4a6a4b1070f3754">Extrapolation::None</a>) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Strike extrapolation cannot be turned off on its own so defaulting to flat.&quot;</span>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strikeExtrapType == <a class="code" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d">Extrapolation::Flat</a>) {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Strike extrapolation has been set to flat.&quot;</span>);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Strike extrapolation &quot;</span> &lt;&lt; strikeExtrapType &lt;&lt; <span class="stringliteral">&quot; not expected so default to flat.&quot;</span>);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keyword">auto</span> timeExtrapType = <a class="code" href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc">parseExtrapolation</a>(vdsc.timeExtrapolation());</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="keywordflow">if</span> (timeExtrapType != <a class="code" href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d">Extrapolation::Flat</a>) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;BlackVolatilitySurfaceDelta only supports flat volatility extrapolation in the time direction&quot;</span>);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Extrapolation is turned off for the whole surface so the time and&quot;</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; strike extrapolation settings are ignored&quot;</span>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// Time interpolation</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">if</span> (vdsc.timeInterpolation() != <span class="stringliteral">&quot;Linear&quot;</span>) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;BlackVolatilitySurfaceDelta only supports linear time interpolation.&quot;</span>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// Strike interpolation</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="codeRef" href="../qle/dc/dc3/class_quant_ext_1_1_interpolated_smile_section.html#aa0081e804011c551ea0f4a596a64b284">InterpolatedSmileSection::InterpolationMethod</a> im;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;Linear&quot;</span>) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        im = InterpolatedSmileSection::InterpolationMethod::Linear;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;NaturalCubic&quot;</span>) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        im = InterpolatedSmileSection::InterpolationMethod::NaturalCubic;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vdsc.strikeInterpolation() == <span class="stringliteral">&quot;FinancialCubic&quot;</span>) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        im = InterpolatedSmileSection::InterpolationMethod::FinancialCubic;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        im = InterpolatedSmileSection::InterpolationMethod::Linear;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;BlackVolatilitySurfaceDelta does not support strike interpolation &#39;&quot;</span> &lt;&lt; vdsc.strikeInterpolation()</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                                                                                   &lt;&lt; <span class="stringliteral">&quot;&#39; so setting it to linear.&quot;</span>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="comment">// set max expiry date (used in buildCalibrationInfo())</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (!expiryDates.empty())</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a> = expiryDates.back();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Creating BlackVolatilitySurfaceDelta object&quot;</span>);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordtype">bool</span> hasAtm = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a> = boost::make_shared&lt;BlackVolatilitySurfaceDelta&gt;(</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        asof, expiryDates, putDeltas, callDeltas, hasAtm, vols, <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad54546634b68f067b0f3867f7283c998">dayCounter_</a>, <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">calendar_</a>, eqIndex-&gt;equitySpot(),</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        eqIndex-&gt;equityForecastCurve(), eqIndex-&gt;equityDividendCurve(), deltaType, atmType, atmDeltaType, 0 * Days,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        deltaType, atmType, atmDeltaType, im, flatExtrapolation);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Setting BlackVolatilitySurfaceDelta extrapolation to &quot;</span> &lt;&lt; <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(vdsc.extrapolation()));</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;enableExtrapolation(vdsc.extrapolation());</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;EquityVolCurve: finished building 2-D volatility delta strike surface&quot;</span>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_a0902647b276a7373f9a5ba45bbdbc111_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_a0902647b276a7373f9a5ba45bbdbc111_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_equity_vol_curve_a0902647b276a7373f9a5ba45bbdbc111_cgraph" id="aclassore_1_1data_1_1_equity_vol_curve_a0902647b276a7373f9a5ba45bbdbc111_cgraph">
<area shape="rect" title="Build a volatility surface from a collection of expiry and strike delta pairs." alt="" coords="5,670,104,697"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a90c9e6709d4483dd3115d3711b36e69e" title=" " alt="" coords="152,5,343,47"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#ac1df45ab0edf6303b3a7035109c56731" title=" " alt="" coords="167,71,328,112"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a4a120c3eea08f21c354237dd4faa3e0c" title=" " alt="" coords="164,136,331,177"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#aa4c9740c4e7802dd8e9d39fd2469cee4" title=" " alt="" coords="163,201,331,243"/>
<area shape="rect" href="classore_1_1data_1_1_curve_config.html#a745b9578f3aa0f77a9429764501e76bb" title=" " alt="" coords="173,267,322,308"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a1a94512029afb513f987537604e7e305" title=" " alt="" coords="164,332,331,373"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a8d9a468ec5da7bf937ed55a0fddff280" title=" " alt="" coords="167,397,328,439"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#a7dd47beba239c5ffec6a4a50f4110664" title=" " alt="" coords="160,463,335,504"/>
<area shape="rect" href="classore_1_1data_1_1_loader.html#a7cd1c3e189ac8d8764d2fd5e9399706f" title=" " alt="" coords="183,528,311,569"/>
<area shape="rect" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b" title="Convert text to QuantLib::DeltaVolQuote::AtmType." alt="" coords="165,594,330,621"/>
<area shape="rect" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1" title="Convert text to QuantLib::DeltaVolQuote::DeltaType." alt="" coords="162,645,333,671"/>
<area shape="rect" href="namespaceore_1_1data.html#a6d93abc1828ab1f788a5b279d108ccf6" title="Parse an Expiry from its string representation, strExpiry." alt="" coords="172,695,323,722"/>
<area shape="rect" href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc" title="Parse Extrapolation from string." alt="" coords="153,746,342,773"/>
<area shape="rect" href="group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd" title="Convert text to Real." alt="" coords="178,797,317,823"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_delta_surface_config.html#a33b74d1218630afe6949c5e2355f0569" title=" " alt="" coords="165,848,330,889"/>
<area shape="rect" href="classore_1_1data_1_1_curve_config.html#acb4109b171873c911dca4a2c9f037135" title="Return all the market quotes required for this config." alt="" coords="173,913,322,955"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#a422e72a3f8fbfdeb0cc3e232817fa3de" title=" " alt="" coords="163,979,331,1020"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#ab066a0686be5c8dc20430121a7c7147d" title=" " alt="" coords="160,1044,335,1085"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#aad34d8325ea5f1822af8c7a550880411" title=" " alt="" coords="160,1109,335,1151"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#af0ab27eac5840f868d415cb197da2cf5" title=" " alt="" coords="160,1175,335,1216"/>
<area shape="rect" href="classore_1_1data_1_1_volatility_surface_config.html#a13c055eb05fe7ed1272d0021b11a7d61" title=" " alt="" coords="160,1240,335,1281"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="182,1306,313,1333"/>
<area shape="rect" href="group__utilities.html#ga5816082aca07feca7ec905758bd09392" title="Convert text to QuantLib::Currency." alt="" coords="403,201,569,243"/>
<area shape="rect" href="group__utilities.html#ga080d530bfa54aa3f08b4644e775f13db" title="Convert text to QuantLib::Currency." alt="" coords="645,183,811,210"/>
<area shape="rect" href="group__utilities.html#ga230f6aa8195af722bc2393cf0cf6c1fa" title="Convert text to QuantLib::Currency for minor currencies e.g GBp &#45;&gt; GBPCurrency()" alt="" coords="629,234,827,261"/>
<area shape="rect" href="group__utilities.html#ga6477391407eac174ea49df689ecf1ab2" title="Convert text to QuantLib::Period or QuantLib::Date." alt="" coords="391,695,581,722"/>
<area shape="rect" href="group__utilities.html#ga59b5fdda574d90facae95dec2d13040d" title="Convert std::string to QuantLib::Date." alt="" coords="658,670,798,697"/>
<area shape="rect" href="group__utilities.html#ga8e0623e2cb01e250e9cfec4619256208" title="Convert text to QuantLib::Period." alt="" coords="653,721,803,747"/>
<area shape="rect" href="group__utilities.html#gaecd67eda4fb5f4859bb8f6d383547721" title="Convert text to QuantLib::Integer." alt="" coords="875,670,1027,697"/>
</map>
</div>

</div>
</div>
<a id="a2ceb3593b7068eb3ec2a704015f3e054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ceb3593b7068eb3ec2a704015f3e054">&#9670;&nbsp;</a></span>buildVolatility() <span class="overload">[6/6]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildVolatility </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> &amp;&#160;</td>
          <td class="paramname"><em>spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;&#160;</td>
          <td class="paramname"><em>curveConfigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_curve.html">EquityCurve</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>eqCurves</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const map&lt; string, boost::shared_ptr&lt; <a class="el" href="classore_1_1data_1_1_equity_vol_curve.html">EquityVolCurve</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>eqVolCurves</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a volatility surface as a proxy from another volatility surface. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8cpp_source.html#l00968">968</a> of file <a class="el" href="equityvolcurve_8cpp_source.html">equityvolcurve.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                                                                                      {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">// get all the configurations and the curve needed for proxying</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keyword">auto</span> config = *<a class="code" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityVolCurveConfig(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>.<a class="code" href="classore_1_1data_1_1_curve_spec.html#af40138bd8dabd4911947cc120ae18c20">curveConfigID</a>());</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keyword">auto</span> proxy = config.proxySurface();</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keyword">auto</span> eqConfig = *<a class="code" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityCurveConfig(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>.<a class="code" href="classore_1_1data_1_1_curve_spec.html#af40138bd8dabd4911947cc120ae18c20">curveConfigID</a>());</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keyword">auto</span> proxyConfig = *<a class="code" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityCurveConfig(proxy);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keyword">auto</span> proxyVolConfig = *<a class="code" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.equityVolCurveConfig(proxy);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="comment">// create dummy specs to look up the required curves</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    EquityCurveSpec eqSpec(eqConfig.currency(), <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>.<a class="code" href="classore_1_1data_1_1_curve_spec.html#af40138bd8dabd4911947cc120ae18c20">curveConfigID</a>());</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    EquityCurveSpec proxySpec(proxyConfig.currency(), proxy);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    EquityVolatilityCurveSpec proxyVolSpec(proxyVolConfig.ccy(), proxy);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">// Get all necessary curves</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keyword">auto</span> curve = eqCurves.find(eqSpec.name());</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    QL_REQUIRE(curve != eqCurves.end(), <span class="stringliteral">&quot;Failed to find equity curve, when building equity vol curve &quot;</span> &lt;&lt; <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>.<a class="code" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">name</a>());</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keyword">auto</span> proxyCurve = eqCurves.find(proxySpec.name());</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    QL_REQUIRE(proxyCurve != eqCurves.end(), <span class="stringliteral">&quot;Failed to find equity curve for proxy &quot;</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                                                 &lt;&lt; proxySpec.name() &lt;&lt; <span class="stringliteral">&quot;, when building equity vol curve &quot;</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                                                 &lt;&lt; <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>.<a class="code" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">name</a>());</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keyword">auto</span> proxyVolCurve = eqVolCurves.find(proxyVolSpec.name());</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    QL_REQUIRE(proxyVolCurve != eqVolCurves.end(), <span class="stringliteral">&quot;Failed to find equity vol curve for proxy &quot;</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                                                       &lt;&lt; proxyVolSpec.name() &lt;&lt; <span class="stringliteral">&quot;, when building equity vol curve &quot;</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                                                       &lt;&lt; <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">spec</a>.<a class="code" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">name</a>());</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a> = boost::make_shared&lt;EquityBlackVolatilitySurfaceProxy&gt;(</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        proxyVolCurve-&gt;second-&gt;volTermStructure(), curve-&gt;second-&gt;equityIndex(), proxyCurve-&gt;second-&gt;equityIndex());</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_a2ceb3593b7068eb3ec2a704015f3e054_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_a2ceb3593b7068eb3ec2a704015f3e054_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_equity_vol_curve_a2ceb3593b7068eb3ec2a704015f3e054_cgraph" id="aclassore_1_1data_1_1_equity_vol_curve_a2ceb3593b7068eb3ec2a704015f3e054_cgraph">
<area shape="rect" title="Build a volatility surface as a proxy from another volatility surface." alt="" coords="5,46,104,73"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#af40138bd8dabd4911947cc120ae18c20" title=" " alt="" coords="152,5,295,47"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844" title="returns the unique curve name" alt="" coords="152,71,295,112"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a3d24768215bf6280c80eca3930ea3f55" title=" " alt="" coords="343,37,485,79"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a471fbcf9df5ab7ac2153495b4c8ac723" title=" " alt="" coords="343,103,485,144"/>
<area shape="rect" href="classore_1_1data_1_1_curve_spec.html#a0106d2fb6472e64456c6ebd018aa6300" title=" " alt="" coords="533,8,676,49"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="539,74,670,101"/>
</map>
</div>

</div>
</div>
<a id="a988ced2514e21f8d3790a311eb203e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a988ced2514e21f8d3790a311eb203e83">&#9670;&nbsp;</a></span>buildCalibrationInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildCalibrationInfo </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_curve_configurations.html">CurveConfigurations</a> &amp;&#160;</td>
          <td class="paramname"><em>curveConfigs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1data_1_1_equity_volatility_curve_config.html">EquityVolatilityCurveConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; <a class="elRef" href="../qle/df/d71/class_quant_ext_1_1_equity_index.html">QuantExt::EquityIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>eqIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build the calibration info. </p>

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8cpp_source.html#l01002">1002</a> of file <a class="el" href="equityvolcurve_8cpp_source.html">equityvolcurve.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                                                              {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Building calibration info for eq vol surface&quot;</span>);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        ReportConfig rc = <a class="code" href="namespaceore_1_1data.html#a5e51bfe798b6a12ac603d4578c144c6b">effectiveReportConfig</a>(<a class="code" href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a>.reportConfigEqVols(), config.reportConfig());</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordtype">bool</span> reportOnDeltaGrid = *rc.reportOnDeltaGrid();</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordtype">bool</span> reportOnMoneynessGrid = *rc.reportOnMoneynessGrid();</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        std::vector&lt;Real&gt; moneyness = *rc.moneyness();</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        std::vector&lt;std::string&gt; deltas = *rc.deltas();</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        std::vector&lt;Period&gt; expiries = *rc.expiries();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a> = boost::make_shared&lt;FxEqVolCalibrationInfo&gt;();</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        DeltaVolQuote::AtmType atmType = DeltaVolQuote::AtmType::AtmDeltaNeutral;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        DeltaVolQuote::DeltaType deltaType = DeltaVolQuote::DeltaType::Fwd;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> vdsc = boost::dynamic_pointer_cast&lt;VolatilityDeltaSurfaceConfig&gt;(config.volatilityConfig())) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            atmType = <a class="code" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b">parseAtmType</a>(vdsc-&gt;atmType());</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            deltaType = <a class="code" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">parseDeltaType</a>(vdsc-&gt;deltaType());</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;dayCounter = config.dayCounter().empty() ? <span class="stringliteral">&quot;na&quot;</span> : config.dayCounter();</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;calendar = config.calendar().empty() ? <span class="stringliteral">&quot;na&quot;</span> : config.calendar();</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;atmType = <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(atmType);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaType = <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(deltaType);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;longTermAtmType = <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(atmType);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;longTermDeltaType = <a class="code" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a>(deltaType);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;switchTenor = <span class="stringliteral">&quot;na&quot;</span>;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;riskReversalInFavorOf = <span class="stringliteral">&quot;na&quot;</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;butterflyStyle = <span class="stringliteral">&quot;na&quot;</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        std::vector&lt;Real&gt; times, forwards, rfDisc, divDisc;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : expiries) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            Date d = <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;optionDateFromTenor(p);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;expiryDates.push_back(d);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            times.push_back(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;dayCounter().empty() ? Actual365Fixed().yearFraction(asof, d)</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                                                       : <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;timeFromReference(d));</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            forwards.push_back(eqIndex-&gt;fixing(d));</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            rfDisc.push_back(eqIndex-&gt;equityForecastCurve()-&gt;discount(d));</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            divDisc.push_back(eqIndex-&gt;equityDividendCurve()-&gt;discount(d));</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;times = times;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;forwards = forwards;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        std::vector&lt;std::vector&lt;Real&gt;&gt; callPricesDelta(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        std::vector&lt;std::vector&lt;Real&gt;&gt; callPricesMoneyness(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">if</span> (reportOnDeltaGrid) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltas = deltas;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridStrikes =</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridProb =</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridImpliedVolatility =</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(deltas.size(), 0.0));</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridCallSpreadArbitrage =</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(deltas.size(), <span class="keyword">true</span>));</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridButterflyArbitrage =</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(deltas.size(), <span class="keyword">true</span>));</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Delta surface arbitrage analysis result (no calendar spread arbitrage included):&quot;</span>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            Real maxTime = QL_MAX_REAL;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a> != Date()) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;dayCounter().empty())</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    maxTime = Actual365Fixed().yearFraction(asof, <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a>);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                    maxTime = <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;timeFromReference(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">maxExpiry_</a>);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            DeltaVolQuote::AtmType at;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            DeltaVolQuote::DeltaType dt;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size(); ++i) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                Real t = times[i];</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                at = atmType;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                dt = deltaType;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="comment">// for times after the last quoted expiry we use artificial conventions to avoid problems with strike</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <span class="comment">// from delta conversions: we use fwd delta always and ATM DNS</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                <span class="keywordflow">if</span> (t &gt; maxTime) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                    at = DeltaVolQuote::AtmDeltaNeutral;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    dt = DeltaVolQuote::Fwd;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                <span class="keywordtype">bool</span> validSlice = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                <span class="keywordflow">for</span> (Size j = 0; j &lt; deltas.size(); ++j) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    DeltaString d(deltas[j]);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                        Real strike;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                        <span class="keywordflow">if</span> (d.isAtm()) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                            strike = <a class="codeRef" href="../qle/d1/dc6/namespace_quant_ext.html#a097163251a347e24846dd4f1b569493c">QuantExt::getAtmStrike</a>(dt, at, eqIndex-&gt;equitySpot()-&gt;value(), rfDisc[i],</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                                            divDisc[i], <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>, t);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (d.isCall()) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                            strike = <a class="codeRef" href="../qle/d1/dc6/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652">QuantExt::getStrikeFromDelta</a>(Option::Call, d.delta(), dt,</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                                                                  eqIndex-&gt;equitySpot()-&gt;value(), rfDisc[i], divDisc[i],</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                                                                  <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>, t);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                            strike =</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                                <a class="codeRef" href="../qle/d1/dc6/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652">QuantExt::getStrikeFromDelta</a>(Option::Put, d.delta(), dt, eqIndex-&gt;equitySpot()-&gt;value(),</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                                                             rfDisc[i], divDisc[i], <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>, t);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                        }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                        Real stddev = std::sqrt(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;blackVariance(t, strike));</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                        callPricesDelta[i][j] = blackFormula(Option::Call, strike, forwards[i], stddev);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridStrikes[i][j] = strike;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridImpliedVolatility[i][j] = stddev / std::sqrt(t);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                        validSlice = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;error for time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; delta &quot;</span> &lt;&lt; deltas[j] &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                <span class="keywordflow">if</span> (validSlice) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                        <a class="codeRef" href="../qle/da/d92/class_quant_ext_1_1_carr_madan_marginal_probability.html">QuantExt::CarrMadanMarginalProbability</a> cm(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridStrikes[i], forwards[i],</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                                                                  callPricesDelta[i]);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridCallSpreadArbitrage[i] = cm.callSpreadArbitrage();</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridButterflyArbitrage[i] = cm.butterflyArbitrage();</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                        <span class="keywordflow">if</span> (!cm.arbitrageFree())</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;deltaGridProb[i] = cm.density();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                        <a class="code" href="log_8hpp.html#a289f4eeef089954bd7aaa415786a77c7">TLOGGERSTREAM</a> &lt;&lt; <a class="codeRef" href="../qle/d1/dc6/namespace_quant_ext.html#a44d34b1f4dcce259a9954648811d2875">arbitrageAsString</a>(cm);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;error for time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                        <a class="code" href="log_8hpp.html#a289f4eeef089954bd7aaa415786a77c7">TLOGGERSTREAM</a> &lt;&lt; <span class="stringliteral">&quot;..(invalid slice)..&quot;</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                    }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    <a class="code" href="log_8hpp.html#a289f4eeef089954bd7aaa415786a77c7">TLOGGERSTREAM</a> &lt;&lt; <span class="stringliteral">&quot;..(invalid slice)..&quot;</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Delta surface arbitrage analysis completed.&quot;</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">if</span> (reportOnMoneynessGrid) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneyness = moneyness;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridStrikes =</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridProb =</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridImpliedVolatility =</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                std::vector&lt;std::vector&lt;Real&gt;&gt;(times.size(), std::vector&lt;Real&gt;(moneyness.size(), 0.0));</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridCallSpreadArbitrage =</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(moneyness.size(), <span class="keyword">true</span>));</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridButterflyArbitrage =</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(moneyness.size(), <span class="keyword">true</span>));</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridCalendarArbitrage =</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                std::vector&lt;std::vector&lt;bool&gt;&gt;(times.size(), std::vector&lt;bool&gt;(moneyness.size(), <span class="keyword">true</span>));</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size(); ++i) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                Real t = times[i];</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="keywordflow">for</span> (Size j = 0; j &lt; moneyness.size(); ++j) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                        Real strike = moneyness[j] * forwards[i];</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridStrikes[i][j] = strike;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                        Real stddev = std::sqrt(<a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>-&gt;blackVariance(t, strike));</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                        callPricesMoneyness[i][j] = blackFormula(Option::Call, strike, forwards[i], stddev);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridImpliedVolatility[i][j] = stddev / std::sqrt(t);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                        <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;error for time &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; moneyness &quot;</span> &lt;&lt; moneyness[j] &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                    }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">if</span> (!times.empty() &amp;&amp; !moneyness.empty()) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                    <a class="codeRef" href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html">QuantExt::CarrMadanSurface</a> cm(times, moneyness, eqIndex-&gt;equitySpot()-&gt;value(), forwards,</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                                                  callPricesMoneyness);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                    <span class="keywordflow">for</span> (Size i = 0; i &lt; times.size(); ++i) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridProb[i] = cm.timeSlices()[i].density();</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridCallSpreadArbitrage = cm.callSpreadArbitrage();</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridButterflyArbitrage = cm.butterflyArbitrage();</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;moneynessGridCalendarArbitrage = cm.calendarArbitrage();</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    <span class="keywordflow">if</span> (!cm.arbitrageFree())</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                        <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                    <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Moneyness surface Arbitrage analysis result:&quot;</span>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                    <a class="code" href="log_8hpp.html#a289f4eeef089954bd7aaa415786a77c7">TLOGGERSTREAM</a> &lt;&lt; <a class="codeRef" href="../qle/d1/dc6/namespace_quant_ext.html#a44d34b1f4dcce259a9954648811d2875">arbitrageAsString</a>(cm);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;error: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                    <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>-&gt;isArbitrageFree = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                <a class="code" href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Moneyness surface Arbitrage analysis completed:&quot;</span>);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <a class="code" href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Building calibration info for eq vol surface completed.&quot;</span>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; </div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    } <span class="keywordflow">catch</span> (std::exception&amp; e) {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;eq vol curve calibration info building failed: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        QL_FAIL(<span class="stringliteral">&quot;eq vol curve calibration info building failed: unknown error&quot;</span>);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1data_1_1_equity_vol_curve_a988ced2514e21f8d3790a311eb203e83_cgraph.png" border="0" usemap="#aclassore_1_1data_1_1_equity_vol_curve_a988ced2514e21f8d3790a311eb203e83_cgraph" alt=""/></div>
<map name="classore_1_1data_1_1_equity_vol_curve_a988ced2514e21f8d3790a311eb203e83_cgraph" id="aclassore_1_1data_1_1_equity_vol_curve_a988ced2514e21f8d3790a311eb203e83_cgraph">
<area shape="rect" title="Build the calibration info." alt="" coords="5,849,136,876"/>
<area shape="rect" target="_parent" href="../qle/d1/dc6/namespace_quant_ext.html#a44d34b1f4dcce259a9954648811d2875" title=" " alt="" coords="225,5,347,32"/>
<area shape="rect" target="_parent" href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html#a2c9e9c3980a73aa98162a2149d7b0604" title=" " alt="" coords="190,57,382,98"/>
<area shape="rect" target="_parent" href="../qle/da/d92/class_quant_ext_1_1_carr_madan_marginal_probability.html#a2c9e9c3980a73aa98162a2149d7b0604" title=" " alt="" coords="187,122,385,163"/>
<area shape="rect" target="_parent" href="../qle/da/d92/class_quant_ext_1_1_carr_madan_marginal_probability.html#a050154669e2d6571151716c8e7c0cb34" title=" " alt="" coords="187,187,385,229"/>
<area shape="rect" target="_parent" href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html#a08d0363135af67ef063a51bee340d460" title=" " alt="" coords="190,253,382,294"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#a5e369e6f69094c7dead708130aa9607e" title=" " alt="" coords="202,318,370,359"/>
<area shape="rect" target="_parent" href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html#a367f9077f0c218edcd60507be81bbac6" title=" " alt="" coords="190,383,382,425"/>
<area shape="rect" target="_parent" href="../qle/da/d92/class_quant_ext_1_1_carr_madan_marginal_probability.html#a8e9a460f12d8d5c9001a36bf087a6a8a" title=" " alt="" coords="184,449,388,490"/>
<area shape="rect" target="_parent" href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html#abdede4413de05babce69513924456c5b" title=" " alt="" coords="190,514,382,555"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#a450b09881e41a3f598c4bfe68a131ee8" title=" " alt="" coords="202,579,370,621"/>
<area shape="rect" href="classore_1_1data_1_1_delta_string.html#a397f8534c2b3d08642e5040c40426ab7" title=" " alt="" coords="213,645,359,686"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a996b42875bc11b048506ec1b79bd7b77" title=" " alt="" coords="444,705,599,746"/>
<area shape="rect" target="_parent" href="../qle/da/d92/class_quant_ext_1_1_carr_madan_marginal_probability.html#ac92c479ebb5da27bcb6cf6f806bd3860" title=" " alt="" coords="187,1031,385,1073"/>
<area shape="rect" href="namespaceore_1_1data.html#a5e51bfe798b6a12ac603d4578c144c6b" title=" " alt="" coords="203,813,369,854"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#ab92eb9477209904e6fca7e4e77520ec3" title=" " alt="" coords="444,770,599,811"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#a22ae3f7c7fc64b9116df042f6d9319d0" title=" " alt="" coords="444,835,599,877"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#af989e4d5ffa701cb67c8ee2f52c64eba" title=" " alt="" coords="444,902,599,943"/>
<area shape="rect" href="classore_1_1data_1_1_report_config.html#aeeabd15c642e19562d2b437bae82896f" title=" " alt="" coords="436,969,607,1010"/>
<area shape="rect" target="_parent" href="../qle/d1/dc6/namespace_quant_ext.html#a097163251a347e24846dd4f1b569493c" title=" " alt="" coords="205,1097,367,1124"/>
<area shape="rect" target="_parent" href="../qle/d1/dc6/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652" title=" " alt="" coords="187,1148,385,1175"/>
<area shape="rect" href="classore_1_1data_1_1_delta_string.html#a33677d9992d9935c8dda721c7e90c488" title=" " alt="" coords="213,1199,359,1241"/>
<area shape="rect" href="classore_1_1data_1_1_delta_string.html#a24f2d93e33ef1aba7e9b5dbeda088e98" title=" " alt="" coords="213,1265,359,1306"/>
<area shape="rect" href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b" title="Convert text to QuantLib::DeltaVolQuote::AtmType." alt="" coords="203,1331,369,1357"/>
<area shape="rect" href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1" title="Convert text to QuantLib::DeltaVolQuote::DeltaType." alt="" coords="201,1381,371,1408"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#a8c670fa143c07ea5ed6e31838d1291ae" title=" " alt="" coords="202,1433,370,1474"/>
<area shape="rect" target="_parent" href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html#af46a1928b8c0698f1b5208daca238413" title=" " alt="" coords="190,1498,382,1539"/>
<area shape="rect" href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title="Convert QuantLib::Date to std::string." alt="" coords="221,1564,351,1591"/>
<area shape="rect" href="classore_1_1data_1_1_equity_volatility_curve_config.html#ab46755cff8b6e23c2edbfd6be6daac4a" title=" " alt="" coords="196,1615,376,1657"/>
</map>
</div>

</div>
</div>
<a id="a4fe8dfe6422d30bfe1f1a3434b1bf8a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fe8dfe6422d30bfe1f1a3434b1bf8a8">&#9670;&nbsp;</a></span>volTermStructure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt;<a class="elRef" href="../qle/db/de1/class_black_vol_term_structure.html">BlackVolTermStructure</a>&gt;&amp; volTermStructure </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00093">93</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">vol_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1fe8dd48f3334c4ba3d834d3e1451cd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fe8dd48f3334c4ba3d834d3e1451cd2">&#9670;&nbsp;</a></span>calibrationInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt;<a class="el" href="structore_1_1data_1_1_fx_eq_vol_calibration_info.html">FxEqVolCalibrationInfo</a>&gt;&amp; calibrationInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00094">94</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">calibrationInfo_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad0a079fa8608dac9333770f2c345acb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0a079fa8608dac9333770f2c345acb4">&#9670;&nbsp;</a></span>spec_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1data_1_1_equity_volatility_curve_spec.html">EquityVolatilityCurveSpec</a> spec_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00097">97</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a19e37c811c4794e4dded0233871bf813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e37c811c4794e4dded0233871bf813">&#9670;&nbsp;</a></span>vol_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="elRef" href="../qle/db/de1/class_black_vol_term_structure.html">BlackVolTermStructure</a>&gt; vol_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00098">98</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a936be92f5f766489c24b9ce54d702b36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936be92f5f766489c24b9ce54d702b36">&#9670;&nbsp;</a></span>calendar_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Calendar calendar_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00099">99</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a58abbb5a649fa48e14b30812991617dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58abbb5a649fa48e14b30812991617dd">&#9670;&nbsp;</a></span>currency_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Currency currency_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00100">100</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="ad54546634b68f067b0f3867f7283c998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad54546634b68f067b0f3867f7283c998">&#9670;&nbsp;</a></span>dayCounter_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::DayCounter dayCounter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00101">101</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="a83e7c296e20653ab73fa6c3b2ebed22a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83e7c296e20653ab73fa6c3b2ebed22a">&#9670;&nbsp;</a></span>maxExpiry_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date maxExpiry_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00102">102</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
<a id="af31f7d903c66467a13d8fde901edd233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af31f7d903c66467a13d8fde901edd233">&#9670;&nbsp;</a></span>calibrationInfo_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="structore_1_1data_1_1_fx_eq_vol_calibration_info.html">FxEqVolCalibrationInfo</a>&gt; calibrationInfo_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="equityvolcurve_8hpp_source.html#l00103">103</a> of file <a class="el" href="equityvolcurve_8hpp_source.html">equityvolcurve.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aclassore_1_1data_1_1_curve_spec_html_afa7a10b4b56522f03c698ac514b0f844"><div class="ttname"><a href="classore_1_1data_1_1_curve_spec.html#afa7a10b4b56522f03c698ac514b0f844">ore::data::CurveSpec::name</a></div><div class="ttdeci">string name() const</div><div class="ttdoc">returns the unique curve name</div><div class="ttdef"><b>Definition:</b> <a href="curvespec_8hpp_source.html#l00078">curvespec.hpp:78</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a8e2df513f6590afb6c85a22a458745c5a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a6adf97f83acf6453d4a6a4b1070f3754">ore::data::Extrapolation::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_ad060ef3791a6d6e103b84926d80ba63b"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#ad060ef3791a6d6e103b84926d80ba63b">ore::data::EquityVolCurve::spec</a></div><div class="ttdeci">const EquityVolatilityCurveSpec &amp; spec() const</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00058">equityvolcurve.hpp:58</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_curve_spec_html_af40138bd8dabd4911947cc120ae18c20"><div class="ttname"><a href="classore_1_1data_1_1_curve_spec.html#af40138bd8dabd4911947cc120ae18c20">ore::data::CurveSpec::curveConfigID</a></div><div class="ttdeci">const std::string &amp; curveConfigID() const</div><div class="ttdef"><b>Definition:</b> <a href="curvespec_8hpp_source.html#l00083">curvespec.hpp:83</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d"><div class="ttname"><a href="namespaceore_1_1data.html#a8e2df513f6590afb6c85a22a458745c5a745e3db6a7ffd50e1a72b39482f0882d">ore::data::Extrapolation::Flat</a></div><div class="ttdeci">@ Flat</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_af31f7d903c66467a13d8fde901edd233"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#af31f7d903c66467a13d8fde901edd233">ore::data::EquityVolCurve::calibrationInfo_</a></div><div class="ttdeci">boost::shared_ptr&lt; FxEqVolCalibrationInfo &gt; calibrationInfo_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00103">equityvolcurve.hpp:103</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a19e37c811c4794e4dded0233871bf813"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a19e37c811c4794e4dded0233871bf813">ore::data::EquityVolCurve::vol_</a></div><div class="ttdeci">boost::shared_ptr&lt; BlackVolTermStructure &gt; vol_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00098">equityvolcurve.hpp:98</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a6d93abc1828ab1f788a5b279d108ccf6"><div class="ttname"><a href="namespaceore_1_1data.html#a6d93abc1828ab1f788a5b279d108ccf6">ore::data::parseExpiry</a></div><div class="ttdeci">boost::shared_ptr&lt; Expiry &gt; parseExpiry(const string &amp;strExpiry)</div><div class="ttdoc">Parse an Expiry from its string representation, strExpiry.</div><div class="ttdef"><b>Definition:</b> <a href="ored_2marketdata_2expiry_8cpp_source.html#l00110">expiry.cpp:110</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_a097163251a347e24846dd4f1b569493c"><div class="ttname"><a href="../qle/d1/dc6/namespace_quant_ext.html#a097163251a347e24846dd4f1b569493c">QuantExt::getAtmStrike</a></div><div class="ttdeci">Real getAtmStrike(DeltaVolQuote::DeltaType dt, DeltaVolQuote::AtmType at, Real spot, Real domDiscount, Real forDiscount, boost::shared_ptr&lt; BlackVolTermStructure &gt; vol, Real t, Real accuracy, Size maxIterations)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_interpolated_smile_section_html_aa0081e804011c551ea0f4a596a64b284"><div class="ttname"><a href="../qle/dc/dc3/class_quant_ext_1_1_interpolated_smile_section.html#aa0081e804011c551ea0f4a596a64b284">QuantExt::InterpolatedSmileSection::InterpolationMethod</a></div><div class="ttdeci">InterpolationMethod</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_market_datum_html_aa5b3ec8bb6c730c38b87a73c11dec808a51c1258108cb3ef6a757d4e01db7f115"><div class="ttname"><a href="classore_1_1data_1_1_market_datum.html#aa5b3ec8bb6c730c38b87a73c11dec808a51c1258108cb3ef6a757d4e01db7f115">ore::data::MarketDatum::QuoteType::RATE_LNVOL</a></div><div class="ttdeci">@ RATE_LNVOL</div></div>
<div class="ttc" id="alog_8hpp_html_a289f4eeef089954bd7aaa415786a77c7"><div class="ttname"><a href="log_8hpp.html#a289f4eeef089954bd7aaa415786a77c7">TLOGGERSTREAM</a></div><div class="ttdeci">#define TLOGGERSTREAM</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00381">log.hpp:381</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a83e7c296e20653ab73fa6c3b2ebed22a"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a83e7c296e20653ab73fa6c3b2ebed22a">ore::data::EquityVolCurve::maxExpiry_</a></div><div class="ttdeci">QuantLib::Date maxExpiry_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00102">equityvolcurve.hpp:102</a></div></div>
<div class="ttc" id="alog_8hpp_html_a34c7c8cde9b91d2eee82d7b9a0b66fd5"><div class="ttname"><a href="log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a></div><div class="ttdeci">#define DLOG(text)</div><div class="ttdoc">Logging Macro (Level = Debug)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00310">log.hpp:310</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_ad0a079fa8608dac9333770f2c345acb4"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#ad0a079fa8608dac9333770f2c345acb4">ore::data::EquityVolCurve::spec_</a></div><div class="ttdeci">EquityVolatilityCurveSpec spec_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00097">equityvolcurve.hpp:97</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_afbdda05b0f8c22a55596d604e3c1c652"><div class="ttname"><a href="../qle/d1/dc6/namespace_quant_ext.html#afbdda05b0f8c22a55596d604e3c1c652">QuantExt::getStrikeFromDelta</a></div><div class="ttdeci">Real getStrikeFromDelta(Option::Type optionType, Real delta, DeltaVolQuote::DeltaType dt, Real spot, Real domDiscount, Real forDiscount, boost::shared_ptr&lt; BlackVolTermStructure &gt; vol, Real t, Real accuracy, Size maxIterations)</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_ad54546634b68f067b0f3867f7283c998"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#ad54546634b68f067b0f3867f7283c998">ore::data::EquityVolCurve::dayCounter_</a></div><div class="ttdeci">QuantLib::DayCounter dayCounter_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00101">equityvolcurve.hpp:101</a></div></div>
<div class="ttc" id="agroup__utilities_html_ga1b8cd9a976247da6df232ad48d4af190"><div class="ttname"><a href="group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">ore::data::to_string</a></div><div class="ttdeci">std::string to_string(const QuantLib::Date &amp;date)</div><div class="ttdoc">Convert QuantLib::Date to std::string.</div><div class="ttdef"><b>Definition:</b> <a href="to__string_8cpp_source.html#l00037">to_string.cpp:37</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_a44d34b1f4dcce259a9954648811d2875"><div class="ttname"><a href="../qle/d1/dc6/namespace_quant_ext.html#a44d34b1f4dcce259a9954648811d2875">arbitrageAsString</a></div><div class="ttdeci">std::string arbitrageAsString(const CarrMadanMarginalProbability &amp;cm)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_carr_madan_marginal_probability_html"><div class="ttname"><a href="../qle/da/d92/class_quant_ext_1_1_carr_madan_marginal_probability.html">QuantExt::CarrMadanMarginalProbability</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_equity_vol_curve_html_a936be92f5f766489c24b9ce54d702b36"><div class="ttname"><a href="classore_1_1data_1_1_equity_vol_curve.html#a936be92f5f766489c24b9ce54d702b36">ore::data::EquityVolCurve::calendar_</a></div><div class="ttdeci">QuantLib::Calendar calendar_</div><div class="ttdef"><b>Definition:</b> <a href="equityvolcurve_8hpp_source.html#l00099">equityvolcurve.hpp:99</a></div></div>
<div class="ttc" id="alog_8hpp_html_a99aeca53f904c71a68070e1f9d310232"><div class="ttname"><a href="log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a></div><div class="ttdeci">#define TLOG(text)</div><div class="ttdoc">Logging Macro (Level = Data)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00312">log.hpp:312</a></div></div>
<div class="ttc" id="agroup__utilities_html_gafea498a41f014bd2031e10d3df7891a1"><div class="ttname"><a href="group__utilities.html#gafea498a41f014bd2031e10d3df7891a1">ore::data::parseDeltaType</a></div><div class="ttdeci">DeltaVolQuote::DeltaType parseDeltaType(const std::string &amp;s)</div><div class="ttdoc">Convert text to QuantLib::DeltaVolQuote::DeltaType.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l01066">parsers.cpp:1066</a></div></div>
<div class="ttc" id="atest_2commodityvolcurve_8cpp_html_a96a582300d10244c7df851066de48438"><div class="ttname"><a href="test_2commodityvolcurve_8cpp.html#a96a582300d10244c7df851066de48438">curveConfigs</a></div><div class="ttdeci">vector&lt; string &gt; curveConfigs</div><div class="ttdef"><b>Definition:</b> <a href="test_2commodityvolcurve_8cpp_source.html#l00523">commodityvolcurve.cpp:523</a></div></div>
<div class="ttc" id="alog_8hpp_html_a158e0f085ddedfe5c8ed069986039f50"><div class="ttname"><a href="log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a></div><div class="ttdeci">#define LOG(text)</div><div class="ttdoc">Logging Macro (Level = Notice)</div><div class="ttdef"><b>Definition:</b> <a href="log_8hpp_source.html#l00308">log.hpp:308</a></div></div>
<div class="ttc" id="agroup__utilities_html_gad1db2a68f9a73667c3b4084d63955bdd"><div class="ttname"><a href="group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd">ore::data::parseReal</a></div><div class="ttdeci">Real parseReal(const string &amp;s)</div><div class="ttdoc">Convert text to Real.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l00137">parsers.cpp:137</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_aec1b45a4f7d2f40e0800b91d415b94fc"><div class="ttname"><a href="namespaceore_1_1data.html#aec1b45a4f7d2f40e0800b91d415b94fc">ore::data::parseExtrapolation</a></div><div class="ttdeci">Extrapolation parseExtrapolation(const string &amp;s)</div><div class="ttdoc">Parse Extrapolation from string.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l01081">parsers.cpp:1081</a></div></div>
<div class="ttc" id="agroup__utilities_html_gac646d7e5cbc09cb6e4f094729a07558b"><div class="ttname"><a href="group__utilities.html#gac646d7e5cbc09cb6e4f094729a07558b">ore::data::parseAtmType</a></div><div class="ttdeci">DeltaVolQuote::AtmType parseAtmType(const std::string &amp;s)</div><div class="ttdoc">Convert text to QuantLib::DeltaVolQuote::AtmType.</div><div class="ttdef"><b>Definition:</b> <a href="parsers_8cpp_source.html#l01049">parsers.cpp:1049</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a5e51bfe798b6a12ac603d4578c144c6b"><div class="ttname"><a href="namespaceore_1_1data.html#a5e51bfe798b6a12ac603d4578c144c6b">ore::data::effectiveReportConfig</a></div><div class="ttdeci">ReportConfig effectiveReportConfig(const ReportConfig &amp;globalConfig, const ReportConfig &amp;localConfig)</div><div class="ttdef"><b>Definition:</b> <a href="reportconfig_8cpp_source.html#l00077">reportconfig.cpp:77</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_carr_madan_surface_html"><div class="ttname"><a href="../qle/d5/db7/class_quant_ext_1_1_carr_madan_surface.html">QuantExt::CarrMadanSurface</a></div></div>
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.8.20
</small></address>
</body>
</html>
