<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>QuantExt: QuantExt::ZeroInflation Namespace Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quantextextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-qle@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.8</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_quant_ext.html">QuantExt</a></li><li class="navelem"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html">ZeroInflation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">QuantExt::ZeroInflation Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5c8be70c07bf0be9c109aa98e019eb36"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html#a5c8be70c07bf0be9c109aa98e019eb36">lastAvailableFixing</a> (const QuantLib::ZeroInflationIndex &amp;index, const QuantLib::Date &amp;asof)</td></tr>
<tr class="memdesc:a5c8be70c07bf0be9c109aa98e019eb36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if today - availabilityLag is already known, otherwise return the fixingDate of the previous fixing.  <a href="namespace_quant_ext_1_1_zero_inflation.html#a5c8be70c07bf0be9c109aa98e019eb36">More...</a><br /></td></tr>
<tr class="separator:a5c8be70c07bf0be9c109aa98e019eb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a175dbaddef873f2bc75f6441e6d60446"><td class="memItemLeft" align="right" valign="top">QuantLib::Rate&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html#a175dbaddef873f2bc75f6441e6d60446">cpiFixing</a> (const boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; &amp;index, const QuantLib::Date &amp;maturity, const QuantLib::Period &amp;obsLag, <a class="el" href="classbool.html">bool</a> interpolated)</td></tr>
<tr class="memdesc:a175dbaddef873f2bc75f6441e6d60446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a CPI fixing giving an zeroIndex, with interpolation if needed.  <a href="namespace_quant_ext_1_1_zero_inflation.html#a175dbaddef873f2bc75f6441e6d60446">More...</a><br /></td></tr>
<tr class="separator:a175dbaddef873f2bc75f6441e6d60446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25ecff8f28b3770a39eb188d995664d6"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html#a25ecff8f28b3770a39eb188d995664d6">curveBaseDate</a> (const <a class="el" href="classbool.html">bool</a> baseDateLastKnownFixing, const QuantLib::Date &amp;refDate, const QuantLib::Period obsLagCurve, const QuantLib::Frequency curveFreq, const boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; &amp;index)</td></tr>
<tr class="memdesc:a25ecff8f28b3770a39eb188d995664d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">derives the zero inflation curve base date based on the useLastKnownFixing rule  <a href="namespace_quant_ext_1_1_zero_inflation.html#a25ecff8f28b3770a39eb188d995664d6">More...</a><br /></td></tr>
<tr class="separator:a25ecff8f28b3770a39eb188d995664d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57de786c1c8988b6da9d354282b4b370"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html#a57de786c1c8988b6da9d354282b4b370">fixingDate</a> (const QuantLib::Date &amp;d, const QuantLib::Period obsLag, const QuantLib::Frequency freq, <a class="el" href="classbool.html">bool</a> interpolated)</td></tr>
<tr class="separator:a57de786c1c8988b6da9d354282b4b370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10dee34c320e67a0cff096bb37ed8935"><td class="memItemLeft" align="right" valign="top">QuantLib::Rate&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html#a10dee34c320e67a0cff096bb37ed8935">guessCurveBaseRate</a> (const <a class="el" href="classbool.html">bool</a> baseDateLastKnownFixing, const QuantLib::Date &amp;swapStart, const QuantLib::Period &amp;swapTenor, const QuantLib::DayCounter &amp;swapZCLegDayCounter, const QuantLib::Period &amp;swapObsLag, const QuantLib::Rate zeroCouponRate, const QuantLib::Period &amp;curveObsLag, const QuantLib::DayCounter &amp;curveDayCounter, const boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; &amp;index, const <a class="el" href="classbool.html">bool</a> interpolated)</td></tr>
<tr class="separator:a10dee34c320e67a0cff096bb37ed8935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e7470dcdc1728ec6bca3266b35c85a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_quant_ext_1_1_zero_inflation.html#ad1e7470dcdc1728ec6bca3266b35c85a">isCPIVolSurfaceLogNormal</a> (const boost::shared_ptr&lt; QuantLib::CPIVolatilitySurface &gt; &amp;surface)</td></tr>
<tr class="separator:ad1e7470dcdc1728ec6bca3266b35c85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5c8be70c07bf0be9c109aa98e019eb36" name="a5c8be70c07bf0be9c109aa98e019eb36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c8be70c07bf0be9c109aa98e019eb36">&#9670;&#160;</a></span>lastAvailableFixing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date lastAvailableFixing </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ZeroInflationIndex &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if today - availabilityLag is already known, otherwise return the fixingDate of the previous fixing. </p>

<p class="definition">Definition at line <a class="el" href="inflation_8cpp_source.html#l00120">120</a> of file <a class="el" href="inflation_8cpp_source.html">inflation.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>                                                                                                    {</div>
<div class="line"><span class="lineno">  121</span>    Date availbilityLagFixingDate = inflationPeriod(asof - index.availabilityLag(), index.frequency()).first;</div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">if</span> (index.hasHistoricalFixing(availbilityLagFixingDate)) {</div>
<div class="line"><span class="lineno">  123</span>        <span class="keywordflow">return</span> availbilityLagFixingDate;</div>
<div class="line"><span class="lineno">  124</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  125</span>        <span class="comment">// The fixing for the inflation period before the availability lag should be there</span></div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">return</span> inflationPeriod(availbilityLagFixingDate - 1 * QuantLib::Days, index.frequency()).first;</div>
<div class="line"><span class="lineno">  127</span>    }</div>
<div class="line"><span class="lineno">  128</span>}</div>
</div><!-- fragment --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespace_quant_ext_1_1_zero_inflation_a5c8be70c07bf0be9c109aa98e019eb36_icgraph.png" border="0" usemap="#anamespace_quant_ext_1_1_zero_inflation_a5c8be70c07bf0be9c109aa98e019eb36_icgraph" alt=""/></div>
<map name="anamespace_quant_ext_1_1_zero_inflation_a5c8be70c07bf0be9c109aa98e019eb36_icgraph" id="anamespace_quant_ext_1_1_zero_inflation_a5c8be70c07bf0be9c109aa98e019eb36_icgraph">
<area shape="rect" title="Check if today &#45; availabilityLag is already known, otherwise return the fixingDate of the previous fi..." alt="" coords="513,42,643,67"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_cap_floor_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="267,5,465,45"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a25ecff8f28b3770a39eb188d995664d6" title="derives the zero inflation curve base date based on the useLastKnownFixing rule" alt="" coords="311,70,421,95"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a10dee34c320e67a0cff096bb37ed8935" title=" " alt="" coords="39,41,185,66"/>
<area shape="rect" href="class_quant_ext_1_1_piecewise_zero_inflation_curve.html#a58aeb3a25a805aeb92fa226691265d42" title=" " alt="" coords="5,91,219,131"/>
</map>
</div>

</div>
</div>
<a id="a175dbaddef873f2bc75f6441e6d60446" name="a175dbaddef873f2bc75f6441e6d60446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a175dbaddef873f2bc75f6441e6d60446">&#9670;&#160;</a></span>cpiFixing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Rate cpiFixing </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>maturity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Period &amp;&#160;</td>
          <td class="paramname"><em>obsLag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>interpolated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a CPI fixing giving an zeroIndex, with interpolation if needed. </p>

<p class="definition">Definition at line <a class="el" href="inflation_8cpp_source.html#l00130">130</a> of file <a class="el" href="inflation_8cpp_source.html">inflation.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  131</span>                                                                          {</div>
<div class="line"><span class="lineno">  132</span>    QuantLib::CPI::InterpolationType interpolation = interpolated ? QuantLib::CPI::Linear : QuantLib::CPI::Flat;</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">return</span> QuantLib::CPI::laggedFixing(index, maturity, obsLag, interpolation);</div>
<div class="line"><span class="lineno">  134</span>}</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespace_quant_ext_1_1_zero_inflation_a175dbaddef873f2bc75f6441e6d60446_icgraph.png" border="0" usemap="#anamespace_quant_ext_1_1_zero_inflation_a175dbaddef873f2bc75f6441e6d60446_icgraph" alt=""/></div>
<map name="anamespace_quant_ext_1_1_zero_inflation_a175dbaddef873f2bc75f6441e6d60446_icgraph" id="anamespace_quant_ext_1_1_zero_inflation_a175dbaddef873f2bc75f6441e6d60446_icgraph">
<area shape="rect" title="Computes a CPI fixing giving an zeroIndex, with interpolation if needed." alt="" coords="543,141,617,166"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_price_volatility_surface.html#a6f314c2aeb2a14c9f3410cd047f9fd13" title=" " alt="" coords="299,5,486,45"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_price_volatility_surface.html#ab70ba7568101279de9c54797c4c2f87f" title="CPI fixing on the baseDate of the surface." alt="" coords="299,69,486,109"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_cap_floor_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="293,133,492,173"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a10dee34c320e67a0cff096bb37ed8935" title=" " alt="" coords="319,198,466,223"/>
<area shape="rect" href="class_quant_ext_1_1_stripped_c_p_i_volatility_surface.html#a33f04fb3ac37abe7c9c6032cff611745" title=" " alt="" coords="291,248,495,288"/>
<area shape="rect" href="class_quant_ext_1_1_stripped_c_p_i_volatility_surface.html#abea95fc571491c768a25822f428aa072" title=" " alt="" coords="5,248,243,288"/>
</map>
</div>

</div>
</div>
<a id="a25ecff8f28b3770a39eb188d995664d6" name="a25ecff8f28b3770a39eb188d995664d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25ecff8f28b3770a39eb188d995664d6">&#9670;&#160;</a></span>curveBaseDate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date curveBaseDate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>baseDateLastKnownFixing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>refDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Period&#160;</td>
          <td class="paramname"><em>obsLagCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Frequency&#160;</td>
          <td class="paramname"><em>curveFreq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>derives the zero inflation curve base date based on the useLastKnownFixing rule </p>

<p class="definition">Definition at line <a class="el" href="inflation_8cpp_source.html#l00136">136</a> of file <a class="el" href="inflation_8cpp_source.html">inflation.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  138</span>                                                                                       {</div>
<div class="line"><span class="lineno">  139</span>    <span class="keywordflow">if</span> (baseDateLastKnownFixing) {</div>
<div class="line"><span class="lineno">  140</span>        QL_REQUIRE(index, <span class="stringliteral">&quot;can not compute curve base date based on the last known index fixing if no index provided&quot;</span>);</div>
<div class="line"><span class="lineno">  141</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="namespace_quant_ext_1_1_zero_inflation.html#a5c8be70c07bf0be9c109aa98e019eb36">lastAvailableFixing</a>(*index, refDate);</div>
<div class="line"><span class="lineno">  142</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">return</span> QuantLib::inflationPeriod(refDate - obsLagCurve, curveFreq).first;</div>
<div class="line"><span class="lineno">  144</span>    }</div>
<div class="line"><span class="lineno">  145</span>}</div>
<div class="ttc" id="anamespace_quant_ext_1_1_zero_inflation_html_a5c8be70c07bf0be9c109aa98e019eb36"><div class="ttname"><a href="namespace_quant_ext_1_1_zero_inflation.html#a5c8be70c07bf0be9c109aa98e019eb36">QuantExt::ZeroInflation::lastAvailableFixing</a></div><div class="ttdeci">QuantLib::Date lastAvailableFixing(const QuantLib::ZeroInflationIndex &amp;index, const QuantLib::Date &amp;asof)</div><div class="ttdoc">Check if today - availabilityLag is already known, otherwise return the fixingDate of the previous fi...</div><div class="ttdef"><b>Definition:</b> <a href="inflation_8cpp_source.html#l00120">inflation.cpp:120</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_cgraph.png" border="0" usemap="#anamespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_cgraph" alt=""/></div>
<map name="anamespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_cgraph" id="anamespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_cgraph">
<area shape="rect" title="derives the zero inflation curve base date based on the useLastKnownFixing rule" alt="" coords="5,5,115,31"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a5c8be70c07bf0be9c109aa98e019eb36" title="Check if today &#45; availabilityLag is already known, otherwise return the fixingDate of the previous fi..." alt="" coords="163,5,292,31"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_icgraph.png" border="0" usemap="#anamespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_icgraph" alt=""/></div>
<map name="anamespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_icgraph" id="anamespace_quant_ext_1_1_zero_inflation_a25ecff8f28b3770a39eb188d995664d6_icgraph">
<area shape="rect" title="derives the zero inflation curve base date based on the useLastKnownFixing rule" alt="" coords="267,35,376,60"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a10dee34c320e67a0cff096bb37ed8935" title=" " alt="" coords="39,5,185,31"/>
<area shape="rect" href="class_quant_ext_1_1_piecewise_zero_inflation_curve.html#a58aeb3a25a805aeb92fa226691265d42" title=" " alt="" coords="5,55,219,95"/>
</map>
</div>

</div>
</div>
<a id="a57de786c1c8988b6da9d354282b4b370" name="a57de786c1c8988b6da9d354282b4b370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57de786c1c8988b6da9d354282b4b370">&#9670;&#160;</a></span>fixingDate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date fixingDate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Period&#160;</td>
          <td class="paramname"><em>obsLag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Frequency&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>interpolated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >computes the fixingDate for ZC CPI <a class="el" href="class_swap.html">Swap</a> following the rule for an interpolated index it is d - obsLag but for an interpolated index the fixing date is per definition on the start of the inflation period in which d - obsLag falls </p>

<p class="definition">Definition at line <a class="el" href="inflation_8cpp_source.html#l00147">147</a> of file <a class="el" href="inflation_8cpp_source.html">inflation.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  148</span>                                             {</div>
<div class="line"><span class="lineno">  149</span>    Date obsDate = d - obsLag;</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">if</span> (!interpolated)</div>
<div class="line"><span class="lineno">  151</span>        obsDate = QuantLib::inflationPeriod(obsDate, freq).first;</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">return</span> obsDate;</div>
<div class="line"><span class="lineno">  153</span>}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespace_quant_ext_1_1_zero_inflation_a57de786c1c8988b6da9d354282b4b370_icgraph.png" border="0" usemap="#anamespace_quant_ext_1_1_zero_inflation_a57de786c1c8988b6da9d354282b4b370_icgraph" alt=""/></div>
<map name="anamespace_quant_ext_1_1_zero_inflation_a57de786c1c8988b6da9d354282b4b370_icgraph" id="anamespace_quant_ext_1_1_zero_inflation_a57de786c1c8988b6da9d354282b4b370_icgraph">
<area shape="rect" title=" " alt="" coords="543,109,621,134"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_cap_floor_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="293,5,492,45"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_volatility_surface.html#ab877ab2bf308e3cc3b711b2f7e72cb3d" title="Computes the expiry time from the capFloorStartDate()" alt="" coords="293,69,493,109"/>
<area shape="rect" href="class_quant_ext_1_1_stripped_c_p_i_volatility_surface.html#a33f04fb3ac37abe7c9c6032cff611745" title=" " alt="" coords="291,133,495,173"/>
<area shape="rect" href="class_quant_ext_1_1_c_p_i_price_volatility_surface.html#a1127cccc9668a02247dc139d27121708" title=" " alt="" coords="299,197,487,237"/>
<area shape="rect" href="class_quant_ext_1_1_stripped_c_p_i_volatility_surface.html#abea95fc571491c768a25822f428aa072" title=" " alt="" coords="5,133,243,173"/>
</map>
</div>

</div>
</div>
<a id="a10dee34c320e67a0cff096bb37ed8935" name="a10dee34c320e67a0cff096bb37ed8935"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10dee34c320e67a0cff096bb37ed8935">&#9670;&#160;</a></span>guessCurveBaseRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Rate guessCurveBaseRate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>baseDateLastKnownFixing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>swapStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Period &amp;&#160;</td>
          <td class="paramname"><em>swapTenor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::DayCounter &amp;&#160;</td>
          <td class="paramname"><em>swapZCLegDayCounter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Period &amp;&#160;</td>
          <td class="paramname"><em>swapObsLag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Rate&#160;</td>
          <td class="paramname"><em>zeroCouponRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::Period &amp;&#160;</td>
          <td class="paramname"><em>curveObsLag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QuantLib::DayCounter &amp;&#160;</td>
          <td class="paramname"><em>curveDayCounter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; QuantLib::ZeroInflationIndex &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>interpolated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Computes the base rate for curve construction so that zero inflation rate is constant up to the first pillar Accounts for the acctual accrued inflation between the ZCIIS base date and the curve base date (e.g. last published fixing date) If curve base date and ZCIIS are the same, then the base rate is the ZCIIS rate </p>

<p class="definition">Definition at line <a class="el" href="inflation_8cpp_source.html#l00155">155</a> of file <a class="el" href="inflation_8cpp_source.html">inflation.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  159</span>                                                                                                                     {</div>
<div class="line"><span class="lineno">  160</span>    </div>
<div class="line"><span class="lineno">  161</span>    <span class="comment">// If the baseDate in Curve is today - obsLag then the quoted zeroRate should be used</span></div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> (!baseDateLastKnownFixing &amp;&amp; swapObsLag == curveObsLag)</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">return</span> zeroCouponRate;</div>
<div class="line"><span class="lineno">  164</span>    </div>
<div class="line"><span class="lineno">  165</span>    QL_REQUIRE(index, <span class="stringliteral">&quot;can not compute base cpi of the zero coupon swap&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span>    <span class="comment">// Otherwise we need to take into account the accrued inflation between rate helper base date and curve base date</span></div>
<div class="line"><span class="lineno">  167</span>    <span class="comment">// Check if historical fixings available</span></div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  169</span>        checkIfFixingAvailable(swapStart, swapObsLag, interpolated, *index);</div>
<div class="line"><span class="lineno">  170</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  171</span>        QL_FAIL(<span class="stringliteral">&quot;Can not estimate the curve base date, got &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno">  172</span>    }</div>
<div class="line"><span class="lineno">  173</span> </div>
<div class="line"><span class="lineno">  174</span>    Date swapBaseDate = swapStart - swapObsLag;</div>
<div class="line"><span class="lineno">  175</span>    Date swapMaturity = swapStart + swapTenor;</div>
<div class="line"><span class="lineno">  176</span>    Date swapObservationDate = swapMaturity - swapObsLag;</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="comment">// TODO check historical fixings available</span></div>
<div class="line"><span class="lineno">  179</span>    Rate instrumentBaseCPI = cpiFixing(index, swapStart, swapObsLag, interpolated);</div>
<div class="line"><span class="lineno">  180</span>    Time timeFromSwapBase =</div>
<div class="line"><span class="lineno">  181</span>        inflationYearFraction(index-&gt;frequency(), interpolated, swapZCLegDayCounter, swapBaseDate, swapObservationDate);</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="keyword">auto</span> fwdCPI = instrumentBaseCPI * std::pow(1 + zeroCouponRate, timeFromSwapBase);</div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    Date curveBaseDt = curveBaseDate(baseDateLastKnownFixing, QuantLib::Settings::instance().evaluationDate(), curveObsLag,</div>
<div class="line"><span class="lineno">  186</span>                                     index-&gt;frequency(), index);</div>
<div class="line"><span class="lineno">  187</span>    </div>
<div class="line"><span class="lineno">  188</span>    <span class="keywordtype">double</span> curveBaseFixing = index-&gt;fixing(curveBaseDt);</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="keywordflow">if</span> (!interpolated) {</div>
<div class="line"><span class="lineno">  191</span>        Time timeFromCurveBase =</div>
<div class="line"><span class="lineno">  192</span>            inflationYearFraction(index-&gt;frequency(), interpolated, curveDayCounter, curveBaseDt,</div>
<div class="line"><span class="lineno">  193</span>                                                       swapObservationDate);</div>
<div class="line"><span class="lineno">  194</span> </div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">return</span> std::pow(fwdCPI / curveBaseFixing, 1.0 / timeFromCurveBase) - 1.0;</div>
<div class="line"><span class="lineno">  196</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  197</span>        <span class="comment">// Compute the interpolated  fixing of the ZCIIS at maturity</span></div>
<div class="line"><span class="lineno">  198</span>        <span class="keyword">auto</span> fixingPeriod = inflationPeriod(swapObservationDate, index-&gt;frequency());</div>
<div class="line"><span class="lineno">  199</span>        <span class="keyword">auto</span> paymentPeriod = inflationPeriod(swapMaturity, index-&gt;frequency());</div>
<div class="line"><span class="lineno">  200</span>        <span class="comment">// Fixing times from curve base date</span></div>
<div class="line"><span class="lineno">  201</span>        Time timeToFixing1 =</div>
<div class="line"><span class="lineno">  202</span>            inflationYearFraction(index-&gt;frequency(), <span class="keyword">false</span>, curveDayCounter, curveBaseDt, fixingPeriod.first);</div>
<div class="line"><span class="lineno">  203</span>        Time timeToFixing2 = inflationYearFraction(index-&gt;frequency(), <span class="keyword">false</span>, curveDayCounter, curveBaseDt,</div>
<div class="line"><span class="lineno">  204</span>                                        fixingPeriod.second + 1 * Days);</div>
<div class="line"><span class="lineno">  205</span> </div>
<div class="line"><span class="lineno">  206</span>        <span class="comment">// Time interpolation</span></div>
<div class="line"><span class="lineno">  207</span>        Time timeToPayment = inflationYearFraction(index-&gt;frequency(), <span class="keyword">true</span>, curveDayCounter, curveBaseDt, swapMaturity);</div>
<div class="line"><span class="lineno">  208</span>        Time timeToStartPaymentPeriod =</div>
<div class="line"><span class="lineno">  209</span>            inflationYearFraction(index-&gt;frequency(), <span class="keyword">false</span>, curveDayCounter, curveBaseDt, paymentPeriod.first);</div>
<div class="line"><span class="lineno">  210</span>        Time timeToEndPaymenetPeriod = inflationYearFraction(index-&gt;frequency(), <span class="keyword">false</span>, curveDayCounter, curveBaseDt,</div>
<div class="line"><span class="lineno">  211</span>                                        paymentPeriod.second + 1 * Days);</div>
<div class="line"><span class="lineno">  212</span>        Time interpolationFactor =</div>
<div class="line"><span class="lineno">  213</span>            (timeToPayment - timeToStartPaymentPeriod) / (timeToEndPaymenetPeriod - timeToStartPaymentPeriod);</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>        <span class="comment">// Root search for a constant rate that the interpolation of both cpi matches the forward cpi</span></div>
<div class="line"><span class="lineno">  216</span>        Real target = fwdCPI / curveBaseFixing;</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        std::function&lt;double(<span class="keywordtype">double</span>)&gt; objectiveFunction = [&amp;timeToFixing1, &amp;timeToFixing2, &amp;interpolationFactor,</div>
<div class="line"><span class="lineno">  219</span>                                                           &amp;target](Rate r) {</div>
<div class="line"><span class="lineno">  220</span>            <span class="keywordflow">return</span> target - (std::pow(1 + r, timeToFixing1) +</div>
<div class="line"><span class="lineno">  221</span>                             (std::pow(1 + r, timeToFixing2) - std::pow(1 + r, timeToFixing1)) * interpolationFactor);</div>
<div class="line"><span class="lineno">  222</span>        };</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>        Rate guess = std::pow(fwdCPI / curveBaseFixing, 1.0 / timeToFixing2) - 1.0;</div>
<div class="line"><span class="lineno">  225</span>        Rate r = guess;</div>
<div class="line"><span class="lineno">  226</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  227</span>            QuantLib::Brent solver;</div>
<div class="line"><span class="lineno">  228</span>            r = solver.solve(objectiveFunction, 1e-8, guess, -0.1, 0.2);</div>
<div class="line"><span class="lineno">  229</span>        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  230</span>            r = guess;</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordflow">return</span> r;</div>
<div class="line"><span class="lineno">  233</span>    }</div>
<div class="line"><span class="lineno">  234</span>}</div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="namespace_quant_ext_1_1_zero_inflation_a10dee34c320e67a0cff096bb37ed8935_cgraph.png" border="0" usemap="#anamespace_quant_ext_1_1_zero_inflation_a10dee34c320e67a0cff096bb37ed8935_cgraph" alt=""/></div>
<map name="anamespace_quant_ext_1_1_zero_inflation_a10dee34c320e67a0cff096bb37ed8935_cgraph" id="anamespace_quant_ext_1_1_zero_inflation_a10dee34c320e67a0cff096bb37ed8935_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,152,56"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a175dbaddef873f2bc75f6441e6d60446" title="Computes a CPI fixing giving an zeroIndex, with interpolation if needed." alt="" coords="217,5,292,31"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a25ecff8f28b3770a39eb188d995664d6" title="derives the zero inflation curve base date based on the useLastKnownFixing rule" alt="" coords="200,55,309,80"/>
<area shape="rect" href="namespace_quant_ext_1_1_zero_inflation.html#a5c8be70c07bf0be9c109aa98e019eb36" title="Check if today &#45; availabilityLag is already known, otherwise return the fixingDate of the previous fi..." alt="" coords="357,55,487,80"/>
</map>
</div>

</div>
</div>
<a id="ad1e7470dcdc1728ec6bca3266b35c85a" name="ad1e7470dcdc1728ec6bca3266b35c85a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1e7470dcdc1728ec6bca3266b35c85a">&#9670;&#160;</a></span>isCPIVolSurfaceLogNormal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> isCPIVolSurfaceLogNormal </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; QuantLib::CPIVolatilitySurface &gt; &amp;&#160;</td>
          <td class="paramname"><em>surface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >checks if the vols are normal or lognormal if the volsurface is not derived from <a class="el" href="class_quant_ext_1_1_c_p_i_volatility_surface.html">QuantExt::CPIVolatilitySurface</a> we default to lognormal vols </p>

<p class="definition">Definition at line <a class="el" href="inflation_8cpp_source.html#l00236">236</a> of file <a class="el" href="inflation_8cpp_source.html">inflation.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  236</span>                                                                                            {</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> qvs = boost::dynamic_pointer_cast&lt;QuantExt::CPIVolatilitySurface&gt;(surface)) {</div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">return</span> qvs-&gt;isLogNormal();</div>
<div class="line"><span class="lineno">  239</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  240</span>        <span class="comment">// QuantLib::CPIVolatilitySurface doesn&#39;t support volType so assume it&#39;s log normal</span></div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
