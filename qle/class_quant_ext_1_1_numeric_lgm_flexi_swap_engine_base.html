<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>QuantExt: NumericLgmFlexiSwapEngineBase Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quantextextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-qle@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.8.12</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_quant_ext.html">QuantExt</a></li><li class="navelem"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html">NumericLgmFlexiSwapEngineBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">NumericLgmFlexiSwapEngineBase Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Numerical engine for flexi swaps in the LGM model.  
 <a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="numericlgmflexiswapengine_8hpp_source.html">qle/pricingengines/numericlgmflexiswapengine.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for NumericLgmFlexiSwapEngineBase:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base__inherit__graph.png" border="0" usemap="#a_numeric_lgm_flexi_swap_engine_base_inherit__map" alt="Inheritance graph"/></div>
<map name="a_numeric_lgm_flexi_swap_engine_base_inherit__map" id="a_numeric_lgm_flexi_swap_engine_base_inherit__map">
<area shape="rect" title="Numerical engine for flexi swaps in the LGM model." alt="" coords="139,269,369,735"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_bgs_flexi_swap_engine.html" title="Numerical engine for balance guaranteed swaps using a flexi swap proxy in the LGM model." alt="" coords="5,783,247,881"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine.html" title=" " alt="" coords="271,797,493,867"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html" title="Numerical convolution solver for the LGM model." alt="" coords="169,5,339,221"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for NumericLgmFlexiSwapEngineBase:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base__coll__graph.png" border="0" usemap="#a_numeric_lgm_flexi_swap_engine_base_coll__map" alt="Collaboration graph"/></div>
<map name="a_numeric_lgm_flexi_swap_engine_base_coll__map" id="a_numeric_lgm_flexi_swap_engine_base_coll__map">
<area shape="rect" title="Numerical engine for flexi swaps in the LGM model." alt="" coords="1058,596,1287,695"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html" title="Numerical convolution solver for the LGM model." alt="" coords="260,381,435,495"/>
<area shape="rect" title=" " alt="" coords="304,211,495,265"/>
<area shape="rect" title=" " alt="" coords="169,218,209,258"/>
<area shape="rect" title=" " alt="" coords="231,108,283,148"/>
<area shape="rect" title=" " alt="" coords="519,218,629,258"/>
<area shape="rect" title=" " alt="" coords="1526,108,1617,148"/>
<area shape="rect" title=" " alt="" coords="1643,218,1753,258"/>
<area shape="rect" title=" " alt="" coords="1462,218,1574,258"/>
<area shape="rect" title=" " alt="" coords="1880,218,1988,258"/>
<area shape="rect" title=" " alt="" coords="1552,5,1591,45"/>
<area shape="rect" title=" " alt="" coords="629,418,831,458"/>
<area shape="rect" title=" " alt="" coords="697,218,763,258"/>
<area shape="rect" title=" " alt="" coords="855,418,960,458"/>
<area shape="rect" title=" " alt="" coords="985,418,1147,458"/>
<area shape="rect" title=" " alt="" coords="1171,411,1390,465"/>
<area shape="rect" title=" " alt="" coords="1415,418,1469,458"/>
<area shape="rect" title=" " alt="" coords="1679,108,1733,148"/>
<area shape="rect" title=" " alt="" coords="1408,108,1463,148"/>
<area shape="rect" title=" " alt="" coords="1840,418,1895,458"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="1909,108,1959,148"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2a3c0067e44c5ef3210a256d06c16b0f"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a> { <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810">SwaptionArray</a>
, <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">SingleSwaptions</a>
, <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d">Automatic</a>
 }</td></tr>
<tr class="separator:a2a3c0067e44c5ef3210a256d06c16b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a114d83c9ef1870b6199991e2af6fe057"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a114d83c9ef1870b6199991e2af6fe057">NumericLgmFlexiSwapEngineBase</a> (const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_quant_ext_1_1_linear_gauss_markov_model.html">LinearGaussMarkovModel</a> &gt; &amp;<a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>, const Real <a class="el" href="struct_quant_ext_1_1_cross_asset_analytics_1_1sy.html">sy</a>, const Size ny, const Real <a class="el" href="struct_quant_ext_1_1_cross_asset_analytics_1_1sx.html">sx</a>, const Size nx, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;(), const <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a> method=<a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d">Method::Automatic</a>, const Real singleSwaptionThreshold=20.0)</td></tr>
<tr class="separator:a114d83c9ef1870b6199991e2af6fe057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_quant_ext_1_1_lgm_convolution_solver')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html">LgmConvolutionSolver</a></td></tr>
<tr class="memitem:a41957497756b1fe64600d4b7ed1d5db3 inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#a41957497756b1fe64600d4b7ed1d5db3">LgmConvolutionSolver</a> (const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_quant_ext_1_1_linear_gauss_markov_model.html">LinearGaussMarkovModel</a> &gt; &amp;<a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>, const Real <a class="el" href="struct_quant_ext_1_1_cross_asset_analytics_1_1sy.html">sy</a>, const Size ny, const Real <a class="el" href="struct_quant_ext_1_1_cross_asset_analytics_1_1sx.html">sx</a>, const Size nx)</td></tr>
<tr class="memdesc:a41957497756b1fe64600d4b7ed1d5db3 inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="mdescLeft">&#160;</td><td class="mdescRight">Numerical convolution solver for the LGM model.  <a href="class_quant_ext_1_1_lgm_convolution_solver.html#a41957497756b1fe64600d4b7ed1d5db3">More...</a><br /></td></tr>
<tr class="separator:a41957497756b1fe64600d4b7ed1d5db3 inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaaf32c43925e8a0f85bbba660146b8d inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memItemLeft" align="right" valign="top">Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a> () const</td></tr>
<tr class="separator:afaaf32c43925e8a0f85bbba660146b8d inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde16d3ed3d86d7b1342d6a096e24bbe inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#abde16d3ed3d86d7b1342d6a096e24bbe">stateGrid</a> (const Real t) const</td></tr>
<tr class="separator:abde16d3ed3d86d7b1342d6a096e24bbe inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f915cec0eebc3293bf9b4d8cefd504 inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memTemplParams" colspan="2">template&lt;typename ValueType  = Real&gt; </td></tr>
<tr class="memitem:a03f915cec0eebc3293bf9b4d8cefd504 inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memTemplItemLeft" align="right" valign="top">std::vector&lt; ValueType &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a> (const std::vector&lt; ValueType &gt; &amp;v, const Real t1, const Real t0, const ValueType zero=ValueType(0.0)) const</td></tr>
<tr class="separator:a03f915cec0eebc3293bf9b4d8cefd504 inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc1c17de9c90bbc66a43865efb06846a inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memItemLeft" align="right" valign="top">const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_quant_ext_1_1_linear_gauss_markov_model.html">LinearGaussMarkovModel</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a> () const</td></tr>
<tr class="separator:abc1c17de9c90bbc66a43865efb06846a inherit pub_methods_class_quant_ext_1_1_lgm_convolution_solver"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2f41f97fea6d79639717490cc553ff17"><td class="memItemLeft" align="right" valign="top">std::pair&lt; Real, Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2f41f97fea6d79639717490cc553ff17">calculate</a> () const</td></tr>
<tr class="separator:a2f41f97fea6d79639717490cc553ff17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90870e80e6c1e191dbb75d4c357e0b95"><td class="memItemLeft" align="right" valign="top">Real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a90870e80e6c1e191dbb75d4c357e0b95">underlyingValue</a> (const Real, const Real, const Date &amp;, const Size, const Size, const Real, const Real) const</td></tr>
<tr class="separator:a90870e80e6c1e191dbb75d4c357e0b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a18034fc7c25b1c2e98bb801604e22ba4"><td class="memItemLeft" align="right" valign="top">const Handle&lt; YieldTermStructure &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a></td></tr>
<tr class="separator:a18034fc7c25b1c2e98bb801604e22ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83deab085cf156983d95c1876504521d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a83deab085cf156983d95c1876504521d">method_</a></td></tr>
<tr class="separator:a83deab085cf156983d95c1876504521d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0234bdef8d4a7c21713b1a54452ed20"><td class="memItemLeft" align="right" valign="top">const Real&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae0234bdef8d4a7c21713b1a54452ed20">singleSwaptionThreshold_</a></td></tr>
<tr class="separator:ae0234bdef8d4a7c21713b1a54452ed20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64d1e952d4e8e7b806c7f49fd254db9a"><td class="memItemLeft" align="right" valign="top">QuantLib::ext::shared_ptr&lt; IborIndex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a64d1e952d4e8e7b806c7f49fd254db9a">iborModelIndex_</a></td></tr>
<tr class="separator:a64d1e952d4e8e7b806c7f49fd254db9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a284d9775638f13f6d0f8fef977c1e6b9"><td class="memItemLeft" align="right" valign="top">QuantLib::ext::shared_ptr&lt; <a class="el" href="class_quant_ext_1_1_lgm_implied_yield_term_structure.html">LgmImpliedYieldTermStructure</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a284d9775638f13f6d0f8fef977c1e6b9">iborModelCurve_</a></td></tr>
<tr class="separator:a284d9775638f13f6d0f8fef977c1e6b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2112c634d0ddbd04001b51e8bdcb26df"><td class="memItemLeft" align="right" valign="top">VanillaSwap::Type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2112c634d0ddbd04001b51e8bdcb26df">type</a></td></tr>
<tr class="separator:a2112c634d0ddbd04001b51e8bdcb26df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa57270e35f9b4d8542059b7b0534ab10"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a></td></tr>
<tr class="separator:aa57270e35f9b4d8542059b7b0534ab10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc58dbec6941293b8a6869a124734079"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#acc58dbec6941293b8a6869a124734079">floatingNominal</a></td></tr>
<tr class="separator:acc58dbec6941293b8a6869a124734079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac087ed31c7c86f346a554482c05e01bd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ac087ed31c7c86f346a554482c05e01bd">fixedResetDates</a></td></tr>
<tr class="separator:ac087ed31c7c86f346a554482c05e01bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ae1b87c848fe690cc0fb8aae7a1ad53"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a9ae1b87c848fe690cc0fb8aae7a1ad53">fixedPayDates</a></td></tr>
<tr class="separator:a9ae1b87c848fe690cc0fb8aae7a1ad53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b3c69bb089af944f809949cc9b5f34"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Time &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af1b3c69bb089af944f809949cc9b5f34">floatingAccrualTimes</a></td></tr>
<tr class="separator:af1b3c69bb089af944f809949cc9b5f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c1a8eb80d3c37a524935c7519d008e0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a0c1a8eb80d3c37a524935c7519d008e0">floatingResetDates</a></td></tr>
<tr class="separator:a0c1a8eb80d3c37a524935c7519d008e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732fd5612eea5324a0246b31f7119141"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a732fd5612eea5324a0246b31f7119141">floatingFixingDates</a></td></tr>
<tr class="separator:a732fd5612eea5324a0246b31f7119141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affddd738e0a1ca4074d4742686ce7e7c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#affddd738e0a1ca4074d4742686ce7e7c">floatingPayDates</a></td></tr>
<tr class="separator:affddd738e0a1ca4074d4742686ce7e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b796aad3df6d60ab2749eb66836af6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af3b796aad3df6d60ab2749eb66836af6">fixedCoupons</a></td></tr>
<tr class="separator:af3b796aad3df6d60ab2749eb66836af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af08093a0e2486feda329fb4bbaf33540"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af08093a0e2486feda329fb4bbaf33540">fixedRate</a></td></tr>
<tr class="separator:af08093a0e2486feda329fb4bbaf33540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a282d2a9b1b6300c02b5d2fcc17f4ca9e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a282d2a9b1b6300c02b5d2fcc17f4ca9e">floatingGearings</a></td></tr>
<tr class="separator:a282d2a9b1b6300c02b5d2fcc17f4ca9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a471724b9fe9e8a286b02b02cc2222ffd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a471724b9fe9e8a286b02b02cc2222ffd">floatingSpreads</a></td></tr>
<tr class="separator:a471724b9fe9e8a286b02b02cc2222ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c36d046ee4525e3489c8da129c2fa2"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a08c36d046ee4525e3489c8da129c2fa2">cappedRate</a></td></tr>
<tr class="separator:a08c36d046ee4525e3489c8da129c2fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cb0c24aad30ad58129aaf794e615a7d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a8cb0c24aad30ad58129aaf794e615a7d">flooredRate</a></td></tr>
<tr class="separator:a8cb0c24aad30ad58129aaf794e615a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f96326e1598927863981facf1f31e5"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae2f96326e1598927863981facf1f31e5">floatingCoupons</a></td></tr>
<tr class="separator:ae2f96326e1598927863981facf1f31e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cea277d2c14875a44f436707bdfa49"><td class="memItemLeft" align="right" valign="top">QuantLib::ext::shared_ptr&lt; IborIndex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a27cea277d2c14875a44f436707bdfa49">iborIndex</a></td></tr>
<tr class="separator:a27cea277d2c14875a44f436707bdfa49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9797ad8824b9724fd3ab9f7fdaaa551"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae9797ad8824b9724fd3ab9f7fdaaa551">lowerNotionalBound</a></td></tr>
<tr class="separator:ae9797ad8824b9724fd3ab9f7fdaaa551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad28f0d497ad750b9bd6d75e79681a493"><td class="memItemLeft" align="right" valign="top">QuantLib::Position::Type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ad28f0d497ad750b9bd6d75e79681a493">optionPosition</a></td></tr>
<tr class="separator:ad28f0d497ad750b9bd6d75e79681a493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62a9f75b27ccb4761f1ef16048d43e0"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classbool.html">bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae62a9f75b27ccb4761f1ef16048d43e0">notionalCanBeDecreased</a></td></tr>
<tr class="separator:ae62a9f75b27ccb4761f1ef16048d43e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Numerical engine for flexi swaps in the LGM model. </p>
<p >This is a modifed version of qle/pricingengines/numericlgmswaptionengine.hpp Reference: F. Jamshidian, Replication of Flexi-swaps, January 2005</p>
<p >There are two implementations of the rollback</p>
<p >a) SingleSwaptions: price each swaption on its own, using the grid rollback b) SwaptionArray: price all swaptions simultaneously by rolling back suitable Arrays instead of Reals</p>
<p >For a large swaption basket b) is faster than a). The two methods can be specified explicitly or the Automatic mode can be used which uses a) if the "effective number
of full swaptions" is below the given singleSwaptionThreshold and b) otherwise.</p>
<p >Here, the effective number of full swaptions is defined to be the sum of event dates of all the swaptions in the basket divided by the number of event dates of the full underlying. </p>

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00056">56</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a2a3c0067e44c5ef3210a256d06c16b0f" name="a2a3c0067e44c5ef3210a256d06c16b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3c0067e44c5ef3210a256d06c16b0f">&#9670;&#160;</a></span>Method</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810" name="a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810"></a>SwaptionArray&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a" name="a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a"></a>SingleSwaptions&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d" name="a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d"></a>Automatic&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00058">58</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{ <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810">SwaptionArray</a>, <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">SingleSwaptions</a>, <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d">Automatic</a> };</div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d">QuantExt::NumericLgmFlexiSwapEngineBase::Method::Automatic</a></div><div class="ttdeci">@ Automatic</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810">QuantExt::NumericLgmFlexiSwapEngineBase::Method::SwaptionArray</a></div><div class="ttdeci">@ SwaptionArray</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">QuantExt::NumericLgmFlexiSwapEngineBase::Method::SingleSwaptions</a></div><div class="ttdeci">@ SingleSwaptions</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a114d83c9ef1870b6199991e2af6fe057" name="a114d83c9ef1870b6199991e2af6fe057"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a114d83c9ef1870b6199991e2af6fe057">&#9670;&#160;</a></span>NumericLgmFlexiSwapEngineBase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html">NumericLgmFlexiSwapEngineBase</a> </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_quant_ext_1_1_linear_gauss_markov_model.html">LinearGaussMarkovModel</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>sy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Size&#160;</td>
          <td class="paramname"><em>ny</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>sx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Size&#160;</td>
          <td class="paramname"><em>nx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; YieldTermStructure &gt; &amp;&#160;</td>
          <td class="paramname"><em>discountCurve</em> = <code>Handle&lt;YieldTermStructure&gt;()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a>&#160;</td>
          <td class="paramname"><em>method</em> = <code><a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d">Method::Automatic</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>singleSwaptionThreshold</em> = <code>20.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8cpp_source.html#l00039">39</a> of file <a class="el" href="numericlgmflexiswapengine_8cpp_source.html">numericlgmflexiswapengine.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>    : <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a41957497756b1fe64600d4b7ed1d5db3">LgmConvolutionSolver</a>(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>, sy, ny, sx, nx), <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>(discountCurve), <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a83deab085cf156983d95c1876504521d">method_</a>(method),</div>
<div class="line"><span class="lineno">   44</span>      <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae0234bdef8d4a7c21713b1a54452ed20">singleSwaptionThreshold_</a>(singleSwaptionThreshold) {}</div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_convolution_solver_html_a41957497756b1fe64600d4b7ed1d5db3"><div class="ttname"><a href="class_quant_ext_1_1_lgm_convolution_solver.html#a41957497756b1fe64600d4b7ed1d5db3">QuantExt::LgmConvolutionSolver::LgmConvolutionSolver</a></div><div class="ttdeci">LgmConvolutionSolver(const QuantLib::ext::shared_ptr&lt; LinearGaussMarkovModel &gt; &amp;model, const Real sy, const Size ny, const Real sx, const Size nx)</div><div class="ttdoc">Numerical convolution solver for the LGM model.</div><div class="ttdef"><b>Definition:</b> <a href="lgmconvolutionsolver_8cpp_source.html#l00030">lgmconvolutionsolver.cpp:30</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_convolution_solver_html_abc1c17de9c90bbc66a43865efb06846a"><div class="ttname"><a href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">QuantExt::LgmConvolutionSolver::model</a></div><div class="ttdeci">const QuantLib::ext::shared_ptr&lt; LinearGaussMarkovModel &gt; &amp; model() const</div><div class="ttdef"><b>Definition:</b> <a href="lgmconvolutionsolver_8hpp_source.html#l00053">lgmconvolutionsolver.hpp:53</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a18034fc7c25b1c2e98bb801604e22ba4"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">QuantExt::NumericLgmFlexiSwapEngineBase::discountCurve_</a></div><div class="ttdeci">const Handle&lt; YieldTermStructure &gt; discountCurve_</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00070">numericlgmflexiswapengine.hpp:70</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a83deab085cf156983d95c1876504521d"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a83deab085cf156983d95c1876504521d">QuantExt::NumericLgmFlexiSwapEngineBase::method_</a></div><div class="ttdeci">const Method method_</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00071">numericlgmflexiswapengine.hpp:71</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_ae0234bdef8d4a7c21713b1a54452ed20"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae0234bdef8d4a7c21713b1a54452ed20">QuantExt::NumericLgmFlexiSwapEngineBase::singleSwaptionThreshold_</a></div><div class="ttdeci">const Real singleSwaptionThreshold_</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00072">numericlgmflexiswapengine.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2f41f97fea6d79639717490cc553ff17" name="a2f41f97fea6d79639717490cc553ff17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f41f97fea6d79639717490cc553ff17">&#9670;&#160;</a></span>calculate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; Real, Real &gt; calculate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8cpp_source.html#l00069">69</a> of file <a class="el" href="numericlgmflexiswapengine_8cpp_source.html">numericlgmflexiswapengine.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>                                                                   {</div>
<div class="line"><span class="lineno">   70</span> </div>
<div class="line"><span class="lineno">   71</span>    Date today = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;parametrization()-&gt;termStructure()-&gt;referenceDate();</div>
<div class="line"><span class="lineno">   72</span>    Real phi = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ad28f0d497ad750b9bd6d75e79681a493">optionPosition</a> == Position::Long ? 1.0 : -1.0;</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>    <span class="comment">// the event times are the floating leg&#39;s fixing times &gt; 0 and zero itself, also mark those events where a notional</span></div>
<div class="line"><span class="lineno">   75</span>    <span class="comment">// decrease is admissable we might miss some payments, those are handled below</span></div>
<div class="line"><span class="lineno">   76</span>    QL_REQUIRE(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>.size() &gt; 0, <span class="stringliteral">&quot;NumericLgmFlexiSwapEngine::calculate(): fixed nominal size is zero&quot;</span>);</div>
<div class="line"><span class="lineno">   77</span>    QL_REQUIRE(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#acc58dbec6941293b8a6869a124734079">floatingNominal</a>.size() &gt; 0, <span class="stringliteral">&quot;NumericLgmFlexiSwapEngine::calculate(): floating nominal size is zero&quot;</span>);</div>
<div class="line"><span class="lineno">   78</span>    Size legRatio = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#acc58dbec6941293b8a6869a124734079">floatingNominal</a>.size() / <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>.size(); <span class="comment">// we know there is no remainder</span></div>
<div class="line"><span class="lineno">   79</span>    std::vector&lt;Real&gt; times;</div>
<div class="line"><span class="lineno">   80</span>    std::vector&lt;Date&gt; dates;</div>
<div class="line"><span class="lineno">   81</span>    std::vector&lt;Size&gt; fixCpnIndex, fltCpnIndex; <span class="comment">// argument&#39;s vector index per event date / time</span></div>
<div class="line"><span class="lineno">   82</span>    std::vector&lt;Real&gt; fixPayTime, fltPayTime;   <span class="comment">// per event date / time</span></div>
<div class="line"><span class="lineno">   83</span>    Size firstAliveIndex = Null&lt;Size&gt;();</div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a732fd5612eea5324a0246b31f7119141">floatingFixingDates</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">   85</span>        Date d = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a732fd5612eea5324a0246b31f7119141">floatingFixingDates</a>[i];</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">if</span> (d &gt; today) {</div>
<div class="line"><span class="lineno">   87</span>            <span class="keywordflow">if</span> (firstAliveIndex == Null&lt;Size&gt;())</div>
<div class="line"><span class="lineno">   88</span>                firstAliveIndex = i;</div>
<div class="line"><span class="lineno">   89</span>            times.push_back(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;parametrization()-&gt;termStructure()-&gt;timeFromReference(d));</div>
<div class="line"><span class="lineno">   90</span>            dates.push_back(d);</div>
<div class="line"><span class="lineno">   91</span>            fltCpnIndex.push_back(i);</div>
<div class="line"><span class="lineno">   92</span>            fltPayTime.push_back(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;parametrization()-&gt;termStructure()-&gt;timeFromReference(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#affddd738e0a1ca4074d4742686ce7e7c">floatingPayDates</a>[i]));</div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">if</span> (i % legRatio == 0) {</div>
<div class="line"><span class="lineno">   94</span>                Size idx = <span class="keyword">static_cast&lt;</span>Size<span class="keyword">&gt;</span>(i / legRatio);</div>
<div class="line"><span class="lineno">   95</span>                fixCpnIndex.push_back(idx);</div>
<div class="line"><span class="lineno">   96</span>                fixPayTime.push_back(</div>
<div class="line"><span class="lineno">   97</span>                    <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;parametrization()-&gt;termStructure()-&gt;timeFromReference(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a9ae1b87c848fe690cc0fb8aae7a1ad53">fixedPayDates</a>[idx]));</div>
<div class="line"><span class="lineno">   98</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   99</span>                fixCpnIndex.push_back(Null&lt;Size&gt;());</div>
<div class="line"><span class="lineno">  100</span>                fixPayTime.push_back(Null&lt;Real&gt;());</div>
<div class="line"><span class="lineno">  101</span>            }</div>
<div class="line"><span class="lineno">  102</span>        }</div>
<div class="line"><span class="lineno">  103</span>    }</div>
<div class="line"><span class="lineno">  104</span> </div>
<div class="line"><span class="lineno">  105</span>    <span class="keywordtype">int</span> n = times.size();</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">// construct swaption basket</span></div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    std::vector&lt;Real&gt; swaptionVolTmp;</div>
<div class="line"><span class="lineno">  110</span>    std::vector&lt;Size&gt; swaptionStartIdx, swaptionEndIdx;</div>
<div class="line"><span class="lineno">  111</span>    <span class="comment">// skip indices where there is no optionality (and the notional might also still increase)</span></div>
<div class="line"><span class="lineno">  112</span>    <span class="comment">// or where the lower notional bound is ignored, because the corresponding option date is in the past</span></div>
<div class="line"><span class="lineno">  113</span>    Size i = 0;</div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">while</span> (i &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>.size() &amp;&amp;</div>
<div class="line"><span class="lineno">  115</span>           (QuantLib::close_enough(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>[i], <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae9797ad8824b9724fd3ab9f7fdaaa551">lowerNotionalBound</a>[i]) || i * legRatio &lt; firstAliveIndex))</div>
<div class="line"><span class="lineno">  116</span>        ++i;</div>
<div class="line"><span class="lineno">  117</span>    Size firstIndex = i;</div>
<div class="line"><span class="lineno">  118</span>    <span class="keywordflow">for</span> (; i &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">  119</span>        <span class="comment">// volume attach and detach points for which we have to generate swaptions</span></div>
<div class="line"><span class="lineno">  120</span>        Real currentVolUpper =</div>
<div class="line"><span class="lineno">  121</span>            i == firstIndex ? <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>[firstIndex] : std::min(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae9797ad8824b9724fd3ab9f7fdaaa551">lowerNotionalBound</a>[i - 1], <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>[i]);</div>
<div class="line"><span class="lineno">  122</span>        Real currentVolLower = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae9797ad8824b9724fd3ab9f7fdaaa551">lowerNotionalBound</a>[i];</div>
<div class="line"><span class="lineno">  123</span>        <span class="keywordflow">if</span> (!QuantLib::close_enough(currentVolUpper, currentVolLower)) {</div>
<div class="line"><span class="lineno">  124</span>            <span class="keywordflow">for</span> (Size j = i; j &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>.size(); ++j) {</div>
<div class="line"><span class="lineno">  125</span>                Real nextNotional = j == <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>.size() - 1 ? 0.0 : <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>[j + 1];</div>
<div class="line"><span class="lineno">  126</span>                <span class="keywordflow">if</span> (nextNotional &lt; currentVolUpper &amp;&amp; !QuantLib::close_enough(currentVolLower, currentVolUpper)) {</div>
<div class="line"><span class="lineno">  127</span>                    Real tmpVol = std::min(currentVolUpper - nextNotional, currentVolUpper - currentVolLower);</div>
<div class="line"><span class="lineno">  128</span>                    <span class="keywordflow">if</span> (!QuantLib::close_enough(tmpVol, 0.0)) {</div>
<div class="line"><span class="lineno">  129</span>                        swaptionStartIdx.push_back(i);</div>
<div class="line"><span class="lineno">  130</span>                        swaptionEndIdx.push_back(j + 1);</div>
<div class="line"><span class="lineno">  131</span>                        swaptionVolTmp.push_back(tmpVol);</div>
<div class="line"><span class="lineno">  132</span>                        currentVolUpper = std::max(nextNotional, currentVolLower);</div>
<div class="line"><span class="lineno">  133</span>                    }</div>
<div class="line"><span class="lineno">  134</span>                }</div>
<div class="line"><span class="lineno">  135</span>            }</div>
<div class="line"><span class="lineno">  136</span>            QL_REQUIRE(QuantLib::close_enough(currentVolUpper, currentVolLower),</div>
<div class="line"><span class="lineno">  137</span>                       <span class="stringliteral">&quot;NumericLgmFlexiSwapEngine:calculate(): currentVolUpper (&quot;</span></div>
<div class="line"><span class="lineno">  138</span>                           &lt;&lt; currentVolUpper &lt;&lt; <span class="stringliteral">&quot;) does not match currentVolLower (&quot;</span> &lt;&lt; currentVolLower</div>
<div class="line"><span class="lineno">  139</span>                           &lt;&lt; <span class="stringliteral">&quot;), this is unexpected&quot;</span>);</div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="line"><span class="lineno">  141</span>    }</div>
<div class="line"><span class="lineno">  142</span> </div>
<div class="line"><span class="lineno">  143</span>    <span class="keywordtype">int</span> m = swaptionVolTmp.size(); <span class="comment">// number of generated swaptions</span></div>
<div class="line"><span class="lineno">  144</span> </div>
<div class="line"><span class="lineno">  145</span>    <span class="comment">// compute equivalent number of swaptions with full grid, decide on whether to price a swaption array</span></div>
<div class="line"><span class="lineno">  146</span>    <span class="comment">// or a series of single swaptions</span></div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>    Real fullGridSwaptions = 0.0;</div>
<div class="line"><span class="lineno">  149</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m; ++i) {</div>
<div class="line"><span class="lineno">  150</span>        fullGridSwaptions += <span class="keyword">static_cast&lt;</span>Size<span class="keyword">&gt;</span>(swaptionEndIdx[i] - swaptionStartIdx[i]);</div>
<div class="line"><span class="lineno">  151</span>    }</div>
<div class="line"><span class="lineno">  152</span>    fullGridSwaptions /= <span class="keyword">static_cast&lt;</span>Real<span class="keyword">&gt;</span>(n);</div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_enumeration" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a> effectiveMethod =</div>
<div class="line"><span class="lineno">  154</span>        <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a83deab085cf156983d95c1876504521d">method_</a> != <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa086247a9b57fde6eefee2a0c4752242d">Method::Automatic</a></div>
<div class="line"><span class="lineno">  155</span>            ? <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a83deab085cf156983d95c1876504521d">method_</a></div>
<div class="line"><span class="lineno">  156</span>            : (fullGridSwaptions &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae0234bdef8d4a7c21713b1a54452ed20">singleSwaptionThreshold_</a> ? <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a> : <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810">Method::SwaptionArray</a>);</div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// if we do not have any swaptions, swaption array is the only method that works (and which is fast also,</span></div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// since the operations on empty arrays do not cost much)</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">if</span> (m == 0)</div>
<div class="line"><span class="lineno">  160</span>        effectiveMethod = <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0fa178dda255f798e6ab7288ceebd0a0810">Method::SwaptionArray</a>;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="comment">// per event date, per swaption, indicator if coupon belongs to underlying</span></div>
<div class="line"><span class="lineno">  163</span>    std::vector&lt;Array&gt; underlyingMultiplier(n, Array(m, 0.0));</div>
<div class="line"><span class="lineno">  164</span>    <span class="comment">// per event date, per swaption, indicator if exercise is possible</span></div>
<div class="line"><span class="lineno">  165</span>    std::vector&lt;Array&gt; exerciseIndicator(n, Array(m, 0.0));</div>
<div class="line"><span class="lineno">  166</span>    <span class="comment">// per swaption, its notional</span></div>
<div class="line"><span class="lineno">  167</span>    Array notionals(m);</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m; ++i) {</div>
<div class="line"><span class="lineno">  170</span>        notionals[i] = swaptionVolTmp[i];</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">for</span> (Size j = swaptionStartIdx[i]; j &lt; swaptionEndIdx[i]; ++j) {</div>
<div class="line"><span class="lineno">  172</span>            Size index = j * legRatio;</div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae62a9f75b27ccb4761f1ef16048d43e0">notionalCanBeDecreased</a>[j] &amp;&amp; index &gt;= firstAliveIndex) {</div>
<div class="line"><span class="lineno">  174</span>                index -= firstAliveIndex;</div>
<div class="line"><span class="lineno">  175</span>                exerciseIndicator[index][i] = 1.0;</div>
<div class="line"><span class="lineno">  176</span>                <span class="keywordflow">for</span> (Size k = 0; k &lt; legRatio; ++k) {</div>
<div class="line"><span class="lineno">  177</span>                    underlyingMultiplier[index + k][i] = swaptionVolTmp[i];</div>
<div class="line"><span class="lineno">  178</span>                }</div>
<div class="line"><span class="lineno">  179</span>            }</div>
<div class="line"><span class="lineno">  180</span>        }</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <span class="comment">// model linked ibor index curve</span></div>
<div class="line"><span class="lineno">  184</span> </div>
<div class="line"><span class="lineno">  185</span>    <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a284d9775638f13f6d0f8fef977c1e6b9">iborModelCurve_</a> = QuantLib::ext::make_shared&lt;LgmImpliedYtsFwdFwdCorrected&gt;(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>(), <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a27cea277d2c14875a44f436707bdfa49">iborIndex</a>-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  186</span>    <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a64d1e952d4e8e7b806c7f49fd254db9a">iborModelIndex_</a> = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a27cea277d2c14875a44f436707bdfa49">iborIndex</a>-&gt;clone(Handle&lt;YieldTermStructure&gt;(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a284d9775638f13f6d0f8fef977c1e6b9">iborModelCurve_</a>));</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="comment">// x grid for each expiry</span></div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    <span class="comment">// underlying u and continuation value v for single swaption (_s) and array swaption (_a) approach)</span></div>
<div class="line"><span class="lineno">  191</span>    std::vector&lt;Array&gt; u_a, v_a;</div>
<div class="line"><span class="lineno">  192</span>    std::vector&lt;Real&gt; u_s, v_s;</div>
<div class="line"><span class="lineno">  193</span>    <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a>) {</div>
<div class="line"><span class="lineno">  194</span>        u_s.resize(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(), 0.0);</div>
<div class="line"><span class="lineno">  195</span>        v_s.resize(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(), 0.0);</div>
<div class="line"><span class="lineno">  196</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  197</span>        u_a.resize(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(), Array(m, 0.0));</div>
<div class="line"><span class="lineno">  198</span>        v_a.resize(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(), Array(m, 0.0));</div>
<div class="line"><span class="lineno">  199</span>    }</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    Real undValAll0 = 0.0;    <span class="comment">// underlying value valued on the grid</span></div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordtype">int</span> undValAllIdx = n + 1; <span class="comment">// index until which we have collected the underlying coupons</span></div>
<div class="line"><span class="lineno">  203</span>    Array value0(m, 0.0);     <span class="comment">// option values</span></div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">// loop over swaption for single swaptions method, otherwise this is one loop</span></div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sw = (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a> ? m - 1 : 0); sw &gt;= 0; --sw) {</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>        <span class="comment">// per grid index underlying value (independent of swaptions, just to collect the underlying value)</span></div>
<div class="line"><span class="lineno">  209</span>        std::vector&lt;Real&gt; uAll(<a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(), 0.0);</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span>        <span class="comment">// init at last grid point</span></div>
<div class="line"><span class="lineno">  212</span>        <span class="comment">// determine last time index for relevant swaption if in single swaption mode</span></div>
<div class="line"><span class="lineno">  213</span>        <span class="comment">// for the first swaption we start at the maximum always to make sure we collect</span></div>
<div class="line"><span class="lineno">  214</span>        <span class="comment">// all coupons for the underlying value</span></div>
<div class="line"><span class="lineno">  215</span>        <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a> &amp;&amp; sw != m - 1) {</div>
<div class="line"><span class="lineno">  216</span>            QL_REQUIRE(swaptionEndIdx[sw] * legRatio &gt;= firstAliveIndex,</div>
<div class="line"><span class="lineno">  217</span>                       <span class="stringliteral">&quot;swaptionEndIndex[&quot;</span> &lt;&lt; sw &lt;&lt; <span class="stringliteral">&quot;] * legRatio (&quot;</span> &lt;&lt; legRatio &lt;&lt; <span class="stringliteral">&quot;) &lt; firstAliveIndex (&quot;</span></div>
<div class="line"><span class="lineno">  218</span>                                           &lt;&lt; firstAliveIndex &lt;&lt; <span class="stringliteral">&quot;) - this is unexpected.&quot;</span>);</div>
<div class="line"><span class="lineno">  219</span>            n = swaptionEndIdx[sw] * legRatio - firstAliveIndex;</div>
<div class="line"><span class="lineno">  220</span>        }</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>        <span class="keyword">auto</span> states = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abde16d3ed3d86d7b1342d6a096e24bbe">stateGrid</a>(times[n - 1]);</div>
<div class="line"><span class="lineno">  223</span>        <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(); ++k) {</div>
<div class="line"><span class="lineno">  224</span>            Real tmp = <a class="code hl_function" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a90870e80e6c1e191dbb75d4c357e0b95">underlyingValue</a>(states[k], times[n - 1], dates[n - 1], fltCpnIndex[n - 1], fixCpnIndex[n - 1],</div>
<div class="line"><span class="lineno">  225</span>                                       fltPayTime[n - 1], fixPayTime[n - 1]);</div>
<div class="line"><span class="lineno">  226</span>            <span class="comment">// we can use the floating notional for both legs, since they have a consistent notional by construction</span></div>
<div class="line"><span class="lineno">  227</span>            <span class="keywordflow">if</span> (n &lt; undValAllIdx) {</div>
<div class="line"><span class="lineno">  228</span>                uAll[k] = tmp * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#acc58dbec6941293b8a6869a124734079">floatingNominal</a>[fltCpnIndex[n - 1]];</div>
<div class="line"><span class="lineno">  229</span>            }</div>
<div class="line"><span class="lineno">  230</span>            <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a>) {</div>
<div class="line"><span class="lineno">  231</span>                u_s[k] = tmp * underlyingMultiplier[n - 1][sw];</div>
<div class="line"><span class="lineno">  232</span>                v_s[k] = exerciseIndicator[n - 1][sw] * std::max(-phi * u_s[k], 0.0);</div>
<div class="line"><span class="lineno">  233</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  234</span>                u_a[k] = tmp * underlyingMultiplier[n - 1];</div>
<div class="line"><span class="lineno">  235</span>                v_a[k] = exerciseIndicator[n - 1] * <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(-phi * u_a[k], 0.0);</div>
<div class="line"><span class="lineno">  236</span>            }</div>
<div class="line"><span class="lineno">  237</span>        }</div>
<div class="line"><span class="lineno">  238</span> </div>
<div class="line"><span class="lineno">  239</span>        <span class="comment">// roll back to first positive event time (in single swaption mode this might be &gt; 1 though)</span></div>
<div class="line"><span class="lineno">  240</span>        <span class="comment">// for the last swaption we roll back to 1 in every case to make sure that we collect all</span></div>
<div class="line"><span class="lineno">  241</span>        <span class="comment">// coupons for the underlying value</span></div>
<div class="line"><span class="lineno">  242</span> </div>
<div class="line"><span class="lineno">  243</span>        <span class="keywordtype">int</span> minIndex = 0;</div>
<div class="line"><span class="lineno">  244</span>        <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a> &amp;&amp; sw != 0) {</div>
<div class="line"><span class="lineno">  245</span>            QL_REQUIRE(swaptionStartIdx[sw] * legRatio &gt;= firstAliveIndex,</div>
<div class="line"><span class="lineno">  246</span>                       <span class="stringliteral">&quot;swaptionStartIndex[&quot;</span> &lt;&lt; sw &lt;&lt; <span class="stringliteral">&quot;] * legRatio (&quot;</span> &lt;&lt; legRatio &lt;&lt; <span class="stringliteral">&quot;) &lt; firstAliveIndex (&quot;</span></div>
<div class="line"><span class="lineno">  247</span>                                             &lt;&lt; firstAliveIndex &lt;&lt; <span class="stringliteral">&quot;) - this is unexpected.&quot;</span>);</div>
<div class="line"><span class="lineno">  248</span>            minIndex = swaptionStartIdx[sw] * legRatio - firstAliveIndex;</div>
<div class="line"><span class="lineno">  249</span>        }</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = n - 1; j &gt; minIndex; j--) {</div>
<div class="line"><span class="lineno">  252</span>            <span class="comment">// rollback</span></div>
<div class="line"><span class="lineno">  253</span>            <span class="keyword">auto</span> states = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abde16d3ed3d86d7b1342d6a096e24bbe">stateGrid</a>(times[j - 1]);</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a>) {</div>
<div class="line"><span class="lineno">  255</span>                u_s = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(u_s, times[j], times[j - 1]);</div>
<div class="line"><span class="lineno">  256</span>                v_s = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(v_s, times[j], times[j - 1]);</div>
<div class="line"><span class="lineno">  257</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  258</span>                u_a = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(u_a, times[j], times[j - 1], Array(m, 0.0));</div>
<div class="line"><span class="lineno">  259</span>                v_a = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(v_a, times[j], times[j - 1], Array(m, 0.0));</div>
<div class="line"><span class="lineno">  260</span>            }</div>
<div class="line"><span class="lineno">  261</span>            <span class="keywordflow">if</span> (j &lt; undValAllIdx) {</div>
<div class="line"><span class="lineno">  262</span>                uAll = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(uAll, times[j], times[j - 1]);</div>
<div class="line"><span class="lineno">  263</span>            }</div>
<div class="line"><span class="lineno">  264</span>            <span class="comment">// update</span></div>
<div class="line"><span class="lineno">  265</span>            <span class="keywordflow">for</span> (Size k = 0; k &lt; <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">gridSize</a>(); ++k) {</div>
<div class="line"><span class="lineno">  266</span>                Real tmp = <a class="code hl_function" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a90870e80e6c1e191dbb75d4c357e0b95">underlyingValue</a>(states[k], times[j - 1], dates[j - 1], fltCpnIndex[j - 1],</div>
<div class="line"><span class="lineno">  267</span>                                           fixCpnIndex[j - 1], fltPayTime[j - 1], fixPayTime[j - 1]);</div>
<div class="line"><span class="lineno">  268</span>                uAll[k] += (j &lt; undValAllIdx ? tmp * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#acc58dbec6941293b8a6869a124734079">floatingNominal</a>[fltCpnIndex[j - 1]] : 0.0);</div>
<div class="line"><span class="lineno">  269</span>                <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a>) {</div>
<div class="line"><span class="lineno">  270</span>                    u_s[k] += tmp * underlyingMultiplier[j - 1][sw];</div>
<div class="line"><span class="lineno">  271</span>                    v_s[k] = exerciseIndicator[j - 1][sw] * std::max(v_s[k], -phi * u_s[k]) +</div>
<div class="line"><span class="lineno">  272</span>                             (1.0 - exerciseIndicator[j - 1][sw]) * v_s[k];</div>
<div class="line"><span class="lineno">  273</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  274</span>                    u_a[k] += tmp * underlyingMultiplier[j - 1];</div>
<div class="line"><span class="lineno">  275</span>                    v_a[k] = exerciseIndicator[j - 1] * <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(v_a[k], -phi * u_a[k]) +</div>
<div class="line"><span class="lineno">  276</span>                             (1.0 - exerciseIndicator[j - 1]) * v_a[k];</div>
<div class="line"><span class="lineno">  277</span>                }</div>
<div class="line"><span class="lineno">  278</span>            } <span class="comment">// for k (lgm grid)</span></div>
<div class="line"><span class="lineno">  279</span>        }     <span class="comment">// for j (options)</span></div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>        <span class="comment">// roll back to time zero</span></div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a>) {</div>
<div class="line"><span class="lineno">  284</span>            v_s = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(v_s, times[minIndex], 0.0);</div>
<div class="line"><span class="lineno">  285</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  286</span>            v_a = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(v_a, times[minIndex], 0.0, Array(m, 0.0));</div>
<div class="line"><span class="lineno">  287</span>        }</div>
<div class="line"><span class="lineno">  288</span>        uAll = <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">rollback</a>(uAll, times[minIndex], 0.0);</div>
<div class="line"><span class="lineno">  289</span> </div>
<div class="line"><span class="lineno">  290</span>        <span class="comment">// update undValAllIndx</span></div>
<div class="line"><span class="lineno">  291</span>        undValAllIdx = minIndex + 1;</div>
<div class="line"><span class="lineno">  292</span> </div>
<div class="line"><span class="lineno">  293</span>        <span class="comment">// populate option values</span></div>
<div class="line"><span class="lineno">  294</span>        <span class="keywordflow">if</span> (effectiveMethod == <a class="code hl_enumvalue" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0faddb4a7c74ea5d587735d87b47ab4c57a">Method::SingleSwaptions</a>)</div>
<div class="line"><span class="lineno">  295</span>            value0[sw] = v_s[0];</div>
<div class="line"><span class="lineno">  296</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  297</span>            value0 = v_a[0];</div>
<div class="line"><span class="lineno">  298</span> </div>
<div class="line"><span class="lineno">  299</span>        <span class="comment">// update underlying value</span></div>
<div class="line"><span class="lineno">  300</span>        undValAll0 += uAll[0];</div>
<div class="line"><span class="lineno">  301</span> </div>
<div class="line"><span class="lineno">  302</span>    } <span class="comment">// for swaptions (in single swaption mode, otherwise this is a loop that runs once only)</span></div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    <span class="comment">// handle coupons we omitted above and add them to underlying value</span></div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>    Size minFltCpnIdx = fltCpnIndex.empty() ? 0 : *std::min_element(fltCpnIndex.begin(), fltCpnIndex.end());</div>
<div class="line"><span class="lineno">  307</span>    Size minFixCpnIdx = fixCpnIndex.empty() ? 0 : *std::min_element(fixCpnIndex.begin(), fixCpnIndex.end());</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af3b796aad3df6d60ab2749eb66836af6">fixedCoupons</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">  310</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a9ae1b87c848fe690cc0fb8aae7a1ad53">fixedPayDates</a>[i] &gt; today &amp;&amp; i &lt; minFixCpnIdx) {</div>
<div class="line"><span class="lineno">  311</span>            undValAll0 += (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2112c634d0ddbd04001b51e8bdcb26df">type</a> == VanillaSwap::Payer ? -1.0 : 1.0) * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af3b796aad3df6d60ab2749eb66836af6">fixedCoupons</a>[i] *</div>
<div class="line"><span class="lineno">  312</span>                          (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>.empty() ? <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;parametrization()-&gt;termStructure() : <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>)</div>
<div class="line"><span class="lineno">  313</span>                              -&gt;discount(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a9ae1b87c848fe690cc0fb8aae7a1ad53">fixedPayDates</a>[i]);</div>
<div class="line"><span class="lineno">  314</span>        }</div>
<div class="line"><span class="lineno">  315</span>    }</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae2f96326e1598927863981facf1f31e5">floatingCoupons</a>.size(); ++i) {</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#affddd738e0a1ca4074d4742686ce7e7c">floatingPayDates</a>[i] &gt; today &amp;&amp; i &lt; minFltCpnIdx) {</div>
<div class="line"><span class="lineno">  319</span>            QL_REQUIRE(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae2f96326e1598927863981facf1f31e5">floatingCoupons</a>[i] != Null&lt;Real&gt;(),</div>
<div class="line"><span class="lineno">  320</span>                       <span class="stringliteral">&quot;NumericLgmFlexiSwapEngineBase: no floating coupon provided for fixing date &quot;</span></div>
<div class="line"><span class="lineno">  321</span>                           &lt;&lt; <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a732fd5612eea5324a0246b31f7119141">floatingFixingDates</a>[i]);</div>
<div class="line"><span class="lineno">  322</span>            undValAll0 += (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2112c634d0ddbd04001b51e8bdcb26df">type</a> == VanillaSwap::Payer ? 1.0 : -1.0) * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae2f96326e1598927863981facf1f31e5">floatingCoupons</a>[i] *</div>
<div class="line"><span class="lineno">  323</span>                          (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>.empty() ? <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;parametrization()-&gt;termStructure() : <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>)</div>
<div class="line"><span class="lineno">  324</span>                              -&gt;discount(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#affddd738e0a1ca4074d4742686ce7e7c">floatingPayDates</a>[i]);</div>
<div class="line"><span class="lineno">  325</span>        }</div>
<div class="line"><span class="lineno">  326</span>    }</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="comment">// sum over option values</span></div>
<div class="line"><span class="lineno">  329</span>    Real sumOptions = std::accumulate(value0.begin(), value0.end(), 0.0);</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>    <span class="comment">// debug logging</span></div>
<div class="line"><span class="lineno">  332</span>    <span class="comment">// std::cerr &lt;&lt; &quot;Flexi-Swap pricing engine log:\n&quot;;</span></div>
<div class="line"><span class="lineno">  333</span>    <span class="comment">// std::cerr &lt;&lt; &quot;===========================\n&quot;;</span></div>
<div class="line"><span class="lineno">  334</span>    <span class="comment">// std::cerr &lt;&lt; &quot;underlying value = &quot; &lt;&lt; undValAll0 &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  335</span>    <span class="comment">// std::cerr &lt;&lt; &quot;option value     = &quot; &lt;&lt; phi * sumOptions &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  336</span>    <span class="comment">// std::cerr &lt;&lt; &quot;===========================\n&quot;;</span></div>
<div class="line"><span class="lineno">  337</span>    <span class="comment">// std::cerr &lt;&lt; &quot;swaption basket (&quot; &lt;&lt; m &lt;&lt; &quot;):\n&quot;;</span></div>
<div class="line"><span class="lineno">  338</span>    <span class="comment">// Real sumNot = 0.0;</span></div>
<div class="line"><span class="lineno">  339</span>    <span class="comment">// for (Size i = 0; i &lt; m; ++i) {</span></div>
<div class="line"><span class="lineno">  340</span>    <span class="comment">//     std::cerr &lt;&lt; &quot;swaption #&quot; &lt;&lt; i &lt;&lt; &quot; (start,end)=(&quot; &lt;&lt; swaptionStartIdx[i] &lt;&lt; &quot;,&quot; &lt;&lt; swaptionEndIdx[i]</span></div>
<div class="line"><span class="lineno">  341</span>    <span class="comment">//               &lt;&lt; &quot;) notional = &quot; &lt;&lt; notionals[i] &lt;&lt; &quot; NPV = &quot; &lt;&lt; phi * value0[i] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  342</span>    <span class="comment">//     sumNot += notionals[i];</span></div>
<div class="line"><span class="lineno">  343</span>    <span class="comment">// }</span></div>
<div class="line"><span class="lineno">  344</span>    <span class="comment">// std::cerr &lt;&lt; &quot;sum of swaption notional = &quot; &lt;&lt; sumNot &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  345</span>    <span class="comment">// std::cerr &lt;&lt; &quot;number of equivalent full swaptions = &quot; &lt;&lt; fullGridSwaptions</span></div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">//           &lt;&lt; &quot;, singleSwaptionThreshold = &quot; &lt;&lt; singleSwaptionThreshold_ &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="comment">// std::cerr &lt;&lt; &quot;method = &quot; &lt;&lt; static_cast&lt;int&gt;(method_) &lt;&lt; &quot; (0=array, 1=single, 2=auto)\n&quot;;</span></div>
<div class="line"><span class="lineno">  348</span>    <span class="comment">// details</span></div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">// std::cerr &lt;&lt; &quot;===========================\n&quot;;</span></div>
<div class="line"><span class="lineno">  350</span>    <span class="comment">// std::cerr &lt;&lt; &quot;times  underlying  exercise\n&quot;;</span></div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">// for (Size i = 0; i &lt; times.size(); ++i) {</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="comment">//     std::cerr &lt;&lt; times[i] &lt;&lt; &quot; &quot; &lt;&lt; underlyingMultiplier[i] &lt;&lt; &quot; &quot; &lt;&lt; exerciseIndicator[i] &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line"><span class="lineno">  353</span>    <span class="comment">// }</span></div>
<div class="line"><span class="lineno">  354</span>    <span class="comment">// end details</span></div>
<div class="line"><span class="lineno">  355</span>    <span class="comment">// std::cerr &lt;&lt; &quot;Flex-Swap pricing engine log end&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><span class="lineno">  356</span>    <span class="comment">// end logging</span></div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">return</span> std::make_pair(phi * sumOptions + undValAll0, undValAll0);</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>} <span class="comment">// NumericLgmFlexiSwapEngineBase::calculate()</span></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_convolution_solver_html_a03f915cec0eebc3293bf9b4d8cefd504"><div class="ttname"><a href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504">QuantExt::LgmConvolutionSolver::rollback</a></div><div class="ttdeci">std::vector&lt; ValueType &gt; rollback(const std::vector&lt; ValueType &gt; &amp;v, const Real t1, const Real t0, const ValueType zero=ValueType(0.0)) const</div><div class="ttdef"><b>Definition:</b> <a href="lgmconvolutionsolver_8hpp_source.html#l00065">lgmconvolutionsolver.hpp:65</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_convolution_solver_html_abde16d3ed3d86d7b1342d6a096e24bbe"><div class="ttname"><a href="class_quant_ext_1_1_lgm_convolution_solver.html#abde16d3ed3d86d7b1342d6a096e24bbe">QuantExt::LgmConvolutionSolver::stateGrid</a></div><div class="ttdeci">std::vector&lt; Real &gt; stateGrid(const Real t) const</div><div class="ttdef"><b>Definition:</b> <a href="lgmconvolutionsolver_8cpp_source.html#l00065">lgmconvolutionsolver.cpp:65</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_convolution_solver_html_afaaf32c43925e8a0f85bbba660146b8d"><div class="ttname"><a href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d">QuantExt::LgmConvolutionSolver::gridSize</a></div><div class="ttdeci">Size gridSize() const</div><div class="ttdef"><b>Definition:</b> <a href="lgmconvolutionsolver_8hpp_source.html#l00042">lgmconvolutionsolver.hpp:42</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a2112c634d0ddbd04001b51e8bdcb26df"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2112c634d0ddbd04001b51e8bdcb26df">QuantExt::NumericLgmFlexiSwapEngineBase::type</a></div><div class="ttdeci">VanillaSwap::Type type</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00077">numericlgmflexiswapengine.hpp:77</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a27cea277d2c14875a44f436707bdfa49"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a27cea277d2c14875a44f436707bdfa49">QuantExt::NumericLgmFlexiSwapEngineBase::iborIndex</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; IborIndex &gt; iborIndex</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00092">numericlgmflexiswapengine.hpp:92</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a284d9775638f13f6d0f8fef977c1e6b9"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a284d9775638f13f6d0f8fef977c1e6b9">QuantExt::NumericLgmFlexiSwapEngineBase::iborModelCurve_</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; LgmImpliedYieldTermStructure &gt; iborModelCurve_</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00075">numericlgmflexiswapengine.hpp:75</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a2a3c0067e44c5ef3210a256d06c16b0f"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">QuantExt::NumericLgmFlexiSwapEngineBase::Method</a></div><div class="ttdeci">Method</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00058">numericlgmflexiswapengine.hpp:58</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a64d1e952d4e8e7b806c7f49fd254db9a"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a64d1e952d4e8e7b806c7f49fd254db9a">QuantExt::NumericLgmFlexiSwapEngineBase::iborModelIndex_</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; IborIndex &gt; iborModelIndex_</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00074">numericlgmflexiswapengine.hpp:74</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a732fd5612eea5324a0246b31f7119141"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a732fd5612eea5324a0246b31f7119141">QuantExt::NumericLgmFlexiSwapEngineBase::floatingFixingDates</a></div><div class="ttdeci">std::vector&lt; Date &gt; floatingFixingDates</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00083">numericlgmflexiswapengine.hpp:83</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a90870e80e6c1e191dbb75d4c357e0b95"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a90870e80e6c1e191dbb75d4c357e0b95">QuantExt::NumericLgmFlexiSwapEngineBase::underlyingValue</a></div><div class="ttdeci">Real underlyingValue(const Real, const Real, const Date &amp;, const Size, const Size, const Real, const Real) const</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8cpp_source.html#l00046">numericlgmflexiswapengine.cpp:46</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a9ae1b87c848fe690cc0fb8aae7a1ad53"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a9ae1b87c848fe690cc0fb8aae7a1ad53">QuantExt::NumericLgmFlexiSwapEngineBase::fixedPayDates</a></div><div class="ttdeci">std::vector&lt; Date &gt; fixedPayDates</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00080">numericlgmflexiswapengine.hpp:80</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_aa57270e35f9b4d8542059b7b0534ab10"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">QuantExt::NumericLgmFlexiSwapEngineBase::fixedNominal</a></div><div class="ttdeci">std::vector&lt; Real &gt; fixedNominal</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00078">numericlgmflexiswapengine.hpp:78</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_acc58dbec6941293b8a6869a124734079"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#acc58dbec6941293b8a6869a124734079">QuantExt::NumericLgmFlexiSwapEngineBase::floatingNominal</a></div><div class="ttdeci">std::vector&lt; Real &gt; floatingNominal</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00078">numericlgmflexiswapengine.hpp:78</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_ad28f0d497ad750b9bd6d75e79681a493"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ad28f0d497ad750b9bd6d75e79681a493">QuantExt::NumericLgmFlexiSwapEngineBase::optionPosition</a></div><div class="ttdeci">QuantLib::Position::Type optionPosition</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00094">numericlgmflexiswapengine.hpp:94</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_ae2f96326e1598927863981facf1f31e5"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae2f96326e1598927863981facf1f31e5">QuantExt::NumericLgmFlexiSwapEngineBase::floatingCoupons</a></div><div class="ttdeci">std::vector&lt; Real &gt; floatingCoupons</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00091">numericlgmflexiswapengine.hpp:91</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_ae62a9f75b27ccb4761f1ef16048d43e0"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae62a9f75b27ccb4761f1ef16048d43e0">QuantExt::NumericLgmFlexiSwapEngineBase::notionalCanBeDecreased</a></div><div class="ttdeci">std::vector&lt; bool &gt; notionalCanBeDecreased</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00095">numericlgmflexiswapengine.hpp:95</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_ae9797ad8824b9724fd3ab9f7fdaaa551"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#ae9797ad8824b9724fd3ab9f7fdaaa551">QuantExt::NumericLgmFlexiSwapEngineBase::lowerNotionalBound</a></div><div class="ttdeci">std::vector&lt; Real &gt; lowerNotionalBound</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00093">numericlgmflexiswapengine.hpp:93</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_af3b796aad3df6d60ab2749eb66836af6"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af3b796aad3df6d60ab2749eb66836af6">QuantExt::NumericLgmFlexiSwapEngineBase::fixedCoupons</a></div><div class="ttdeci">std::vector&lt; Real &gt; fixedCoupons</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00085">numericlgmflexiswapengine.hpp:85</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_affddd738e0a1ca4074d4742686ce7e7c"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#affddd738e0a1ca4074d4742686ce7e7c">QuantExt::NumericLgmFlexiSwapEngineBase::floatingPayDates</a></div><div class="ttdeci">std::vector&lt; Date &gt; floatingPayDates</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00084">numericlgmflexiswapengine.hpp:84</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_ac0bb3279caaa02e9f9dd6e85a687cba8"><div class="ttname"><a href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">QuantExt::max</a></div><div class="ttdeci">CompiledFormula max(CompiledFormula x, const CompiledFormula &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="compiledformula_8cpp_source.html#l00159">compiledformula.cpp:159</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_cgraph" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_cgraph">
<area shape="rect" title=" " alt="" coords="5,150,80,175"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html#afaaf32c43925e8a0f85bbba660146b8d" title=" " alt="" coords="128,5,304,45"/>
<area shape="rect" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8" title=" " alt="" coords="161,70,271,95"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a" title=" " alt="" coords="352,171,528,211"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html#a03f915cec0eebc3293bf9b4d8cefd504" title=" " alt="" coords="128,171,304,211"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html#abde16d3ed3d86d7b1342d6a096e24bbe" title=" " alt="" coords="128,285,304,325"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a90870e80e6c1e191dbb75d4c357e0b95" title=" " alt="" coords="159,235,273,261"/>
<area shape="rect" href="namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="357,293,523,318"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_icgraph" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a2f41f97fea6d79639717490cc553ff17_icgraph">
<area shape="rect" title=" " alt="" coords="263,45,337,70"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_bgs_flexi_swap_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="5,5,215,45"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="17,69,203,109"/>
</map>
</div>

</div>
</div>
<a id="a90870e80e6c1e191dbb75d4c357e0b95" name="a90870e80e6c1e191dbb75d4c357e0b95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90870e80e6c1e191dbb75d4c357e0b95">&#9670;&#160;</a></span>underlyingValue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Real underlyingValue </td>
          <td>(</td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Date &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Size&#160;</td>
          <td class="paramname"><em>fltIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Size&#160;</td>
          <td class="paramname"><em>fixIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>fltPayTime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>fixPayTime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8cpp_source.html#l00046">46</a> of file <a class="el" href="numericlgmflexiswapengine_8cpp_source.html">numericlgmflexiswapengine.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   48</span>                                                                                 {</div>
<div class="line"><span class="lineno">   49</span>    Real val = 0.0;</div>
<div class="line"><span class="lineno">   50</span>    Real om = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2112c634d0ddbd04001b51e8bdcb26df">type</a> == VanillaSwap::Payer ? -1.0 : 1.0;</div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordflow">if</span> (fixIndex != Null&lt;Size&gt;()) {</div>
<div class="line"><span class="lineno">   52</span>        <span class="keywordflow">if</span> (!QuantLib::close_enough(<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>[fixIndex], 0.0))</div>
<div class="line"><span class="lineno">   53</span>            val = om * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af3b796aad3df6d60ab2749eb66836af6">fixedCoupons</a>[fixIndex] / <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#aa57270e35f9b4d8542059b7b0534ab10">fixedNominal</a>[fixIndex] *</div>
<div class="line"><span class="lineno">   54</span>                  <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;reducedDiscountBond(t, fixPayTime, x, <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>);</div>
<div class="line"><span class="lineno">   55</span>    }</div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span> (fltIndex != Null&lt;Size&gt;()) {</div>
<div class="line"><span class="lineno">   57</span>        <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a284d9775638f13f6d0f8fef977c1e6b9">iborModelCurve_</a>-&gt;move(d, x);</div>
<div class="line"><span class="lineno">   58</span>        Real fixing = <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a282d2a9b1b6300c02b5d2fcc17f4ca9e">floatingGearings</a>[fltIndex] * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a64d1e952d4e8e7b806c7f49fd254db9a">iborModelIndex_</a>-&gt;fixing(d) + <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a471724b9fe9e8a286b02b02cc2222ffd">floatingSpreads</a>[fltIndex];</div>
<div class="line"><span class="lineno">   59</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a08c36d046ee4525e3489c8da129c2fa2">cappedRate</a>[fltIndex] != Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">   60</span>            fixing = std::min(fixing, <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a08c36d046ee4525e3489c8da129c2fa2">cappedRate</a>[fltIndex]);</div>
<div class="line"><span class="lineno">   61</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a8cb0c24aad30ad58129aaf794e615a7d">flooredRate</a>[fltIndex] != Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">   62</span>            fixing = std::max(fixing, <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a8cb0c24aad30ad58129aaf794e615a7d">flooredRate</a>[fltIndex]);</div>
<div class="line"><span class="lineno">   63</span>        val += -om * fixing * <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af1b3c69bb089af944f809949cc9b5f34">floatingAccrualTimes</a>[fltIndex] *</div>
<div class="line"><span class="lineno">   64</span>               <a class="code hl_function" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a">model</a>()-&gt;reducedDiscountBond(t, fltPayTime, x, <a class="code hl_variable" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a18034fc7c25b1c2e98bb801604e22ba4">discountCurve_</a>);</div>
<div class="line"><span class="lineno">   65</span>    }</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">return</span> val;</div>
<div class="line"><span class="lineno">   67</span>} <span class="comment">// NumericLgmFlexiSwapEngineBase::underlyingValue()</span></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a08c36d046ee4525e3489c8da129c2fa2"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a08c36d046ee4525e3489c8da129c2fa2">QuantExt::NumericLgmFlexiSwapEngineBase::cappedRate</a></div><div class="ttdeci">std::vector&lt; Real &gt; cappedRate</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00089">numericlgmflexiswapengine.hpp:89</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a282d2a9b1b6300c02b5d2fcc17f4ca9e"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a282d2a9b1b6300c02b5d2fcc17f4ca9e">QuantExt::NumericLgmFlexiSwapEngineBase::floatingGearings</a></div><div class="ttdeci">std::vector&lt; Real &gt; floatingGearings</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00087">numericlgmflexiswapengine.hpp:87</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a471724b9fe9e8a286b02b02cc2222ffd"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a471724b9fe9e8a286b02b02cc2222ffd">QuantExt::NumericLgmFlexiSwapEngineBase::floatingSpreads</a></div><div class="ttdeci">std::vector&lt; Real &gt; floatingSpreads</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00088">numericlgmflexiswapengine.hpp:88</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_a8cb0c24aad30ad58129aaf794e615a7d"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a8cb0c24aad30ad58129aaf794e615a7d">QuantExt::NumericLgmFlexiSwapEngineBase::flooredRate</a></div><div class="ttdeci">std::vector&lt; Real &gt; flooredRate</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00090">numericlgmflexiswapengine.hpp:90</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_html_af1b3c69bb089af944f809949cc9b5f34"><div class="ttname"><a href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#af1b3c69bb089af944f809949cc9b5f34">QuantExt::NumericLgmFlexiSwapEngineBase::floatingAccrualTimes</a></div><div class="ttdeci">std::vector&lt; Time &gt; floatingAccrualTimes</div><div class="ttdef"><b>Definition:</b> <a href="numericlgmflexiswapengine_8hpp_source.html#l00081">numericlgmflexiswapengine.hpp:81</a></div></div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_cgraph" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_cgraph">
<area shape="rect" title=" " alt="" coords="5,13,120,38"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_convolution_solver.html#abc1c17de9c90bbc66a43865efb06846a" title=" " alt="" coords="168,5,344,45"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_icgraph" id="aclass_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base_a90870e80e6c1e191dbb75d4c357e0b95_icgraph">
<area shape="rect" title=" " alt="" coords="385,45,500,70"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2f41f97fea6d79639717490cc553ff17" title=" " alt="" coords="263,45,337,70"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_bgs_flexi_swap_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="5,5,215,45"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="17,69,203,109"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a18034fc7c25b1c2e98bb801604e22ba4" name="a18034fc7c25b1c2e98bb801604e22ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18034fc7c25b1c2e98bb801604e22ba4">&#9670;&#160;</a></span>discountCurve_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Handle&lt;YieldTermStructure&gt; discountCurve_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00070">70</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a83deab085cf156983d95c1876504521d" name="a83deab085cf156983d95c1876504521d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83deab085cf156983d95c1876504521d">&#9670;&#160;</a></span>method_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_quant_ext_1_1_numeric_lgm_flexi_swap_engine_base.html#a2a3c0067e44c5ef3210a256d06c16b0f">Method</a> method_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00071">71</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="ae0234bdef8d4a7c21713b1a54452ed20" name="ae0234bdef8d4a7c21713b1a54452ed20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0234bdef8d4a7c21713b1a54452ed20">&#9670;&#160;</a></span>singleSwaptionThreshold_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const Real singleSwaptionThreshold_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00072">72</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a64d1e952d4e8e7b806c7f49fd254db9a" name="a64d1e952d4e8e7b806c7f49fd254db9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64d1e952d4e8e7b806c7f49fd254db9a">&#9670;&#160;</a></span>iborModelIndex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::ext::shared_ptr&lt;IborIndex&gt; iborModelIndex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00074">74</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a284d9775638f13f6d0f8fef977c1e6b9" name="a284d9775638f13f6d0f8fef977c1e6b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a284d9775638f13f6d0f8fef977c1e6b9">&#9670;&#160;</a></span>iborModelCurve_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::ext::shared_ptr&lt;<a class="el" href="class_quant_ext_1_1_lgm_implied_yield_term_structure.html">LgmImpliedYieldTermStructure</a>&gt; iborModelCurve_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00075">75</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a2112c634d0ddbd04001b51e8bdcb26df" name="a2112c634d0ddbd04001b51e8bdcb26df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2112c634d0ddbd04001b51e8bdcb26df">&#9670;&#160;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VanillaSwap::Type type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00077">77</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="aa57270e35f9b4d8542059b7b0534ab10" name="aa57270e35f9b4d8542059b7b0534ab10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa57270e35f9b4d8542059b7b0534ab10">&#9670;&#160;</a></span>fixedNominal</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; fixedNominal</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00078">78</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="acc58dbec6941293b8a6869a124734079" name="acc58dbec6941293b8a6869a124734079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc58dbec6941293b8a6869a124734079">&#9670;&#160;</a></span>floatingNominal</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; floatingNominal</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00078">78</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="ac087ed31c7c86f346a554482c05e01bd" name="ac087ed31c7c86f346a554482c05e01bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac087ed31c7c86f346a554482c05e01bd">&#9670;&#160;</a></span>fixedResetDates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Date&gt; fixedResetDates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00079">79</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a9ae1b87c848fe690cc0fb8aae7a1ad53" name="a9ae1b87c848fe690cc0fb8aae7a1ad53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ae1b87c848fe690cc0fb8aae7a1ad53">&#9670;&#160;</a></span>fixedPayDates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Date&gt; fixedPayDates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00080">80</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="af1b3c69bb089af944f809949cc9b5f34" name="af1b3c69bb089af944f809949cc9b5f34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b3c69bb089af944f809949cc9b5f34">&#9670;&#160;</a></span>floatingAccrualTimes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Time&gt; floatingAccrualTimes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00081">81</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a0c1a8eb80d3c37a524935c7519d008e0" name="a0c1a8eb80d3c37a524935c7519d008e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c1a8eb80d3c37a524935c7519d008e0">&#9670;&#160;</a></span>floatingResetDates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Date&gt; floatingResetDates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00082">82</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a732fd5612eea5324a0246b31f7119141" name="a732fd5612eea5324a0246b31f7119141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a732fd5612eea5324a0246b31f7119141">&#9670;&#160;</a></span>floatingFixingDates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Date&gt; floatingFixingDates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00083">83</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="affddd738e0a1ca4074d4742686ce7e7c" name="affddd738e0a1ca4074d4742686ce7e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affddd738e0a1ca4074d4742686ce7e7c">&#9670;&#160;</a></span>floatingPayDates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Date&gt; floatingPayDates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00084">84</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="af3b796aad3df6d60ab2749eb66836af6" name="af3b796aad3df6d60ab2749eb66836af6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b796aad3df6d60ab2749eb66836af6">&#9670;&#160;</a></span>fixedCoupons</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; fixedCoupons</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00085">85</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="af08093a0e2486feda329fb4bbaf33540" name="af08093a0e2486feda329fb4bbaf33540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af08093a0e2486feda329fb4bbaf33540">&#9670;&#160;</a></span>fixedRate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; fixedRate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00086">86</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a282d2a9b1b6300c02b5d2fcc17f4ca9e" name="a282d2a9b1b6300c02b5d2fcc17f4ca9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a282d2a9b1b6300c02b5d2fcc17f4ca9e">&#9670;&#160;</a></span>floatingGearings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; floatingGearings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00087">87</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a471724b9fe9e8a286b02b02cc2222ffd" name="a471724b9fe9e8a286b02b02cc2222ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a471724b9fe9e8a286b02b02cc2222ffd">&#9670;&#160;</a></span>floatingSpreads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; floatingSpreads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00088">88</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a08c36d046ee4525e3489c8da129c2fa2" name="a08c36d046ee4525e3489c8da129c2fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08c36d046ee4525e3489c8da129c2fa2">&#9670;&#160;</a></span>cappedRate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; cappedRate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00089">89</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a8cb0c24aad30ad58129aaf794e615a7d" name="a8cb0c24aad30ad58129aaf794e615a7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cb0c24aad30ad58129aaf794e615a7d">&#9670;&#160;</a></span>flooredRate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; flooredRate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00090">90</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="ae2f96326e1598927863981facf1f31e5" name="ae2f96326e1598927863981facf1f31e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2f96326e1598927863981facf1f31e5">&#9670;&#160;</a></span>floatingCoupons</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; floatingCoupons</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00091">91</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="a27cea277d2c14875a44f436707bdfa49" name="a27cea277d2c14875a44f436707bdfa49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27cea277d2c14875a44f436707bdfa49">&#9670;&#160;</a></span>iborIndex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::ext::shared_ptr&lt;IborIndex&gt; iborIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00092">92</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="ae9797ad8824b9724fd3ab9f7fdaaa551" name="ae9797ad8824b9724fd3ab9f7fdaaa551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9797ad8824b9724fd3ab9f7fdaaa551">&#9670;&#160;</a></span>lowerNotionalBound</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Real&gt; lowerNotionalBound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00093">93</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="ad28f0d497ad750b9bd6d75e79681a493" name="ad28f0d497ad750b9bd6d75e79681a493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad28f0d497ad750b9bd6d75e79681a493">&#9670;&#160;</a></span>optionPosition</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Position::Type optionPosition</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00094">94</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
<a id="ae62a9f75b27ccb4761f1ef16048d43e0" name="ae62a9f75b27ccb4761f1ef16048d43e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62a9f75b27ccb4761f1ef16048d43e0">&#9670;&#160;</a></span>notionalCanBeDecreased</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classbool.html">bool</a>&gt; notionalCanBeDecreased</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="numericlgmflexiswapengine_8hpp_source.html#l00095">95</a> of file <a class="el" href="numericlgmflexiswapengine_8hpp_source.html">numericlgmflexiswapengine.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
