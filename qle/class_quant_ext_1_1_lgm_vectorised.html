<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>QuantExt: LgmVectorised Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quantextextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-qle@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.8.12</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_quant_ext.html">QuantExt</a></li><li class="navelem"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_quant_ext_1_1_lgm_vectorised-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">LgmVectorised Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lgmvectorised_8hpp_source.html">qle/models/lgmvectorised.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for LgmVectorised:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised__coll__graph.png" border="0" usemap="#a_lgm_vectorised_coll__map" alt="Collaboration graph"/></div>
<map name="a_lgm_vectorised_coll__map" id="a_lgm_vectorised_coll__map">
<area shape="rect" title=" " alt="" coords="5,123,175,339"/>
<area shape="rect" title=" " alt="" coords="6,5,174,60"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afe7d7c9c2b9ea397bb372c5522539710"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#afe7d7c9c2b9ea397bb372c5522539710">LgmVectorised</a> ()=default</td></tr>
<tr class="separator:afe7d7c9c2b9ea397bb372c5522539710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3888891a56121eaedcac532cf877033a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a3888891a56121eaedcac532cf877033a">LgmVectorised</a> (const QuantLib::ext::shared_ptr&lt; <a class="el" href="namespace_quant_ext.html#a661007f9056ea816680cc0d655388978">IrLgm1fParametrization</a> &gt; &amp;p)</td></tr>
<tr class="separator:a3888891a56121eaedcac532cf877033a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afcf0b0560e9c4ccab4a2646b271798"><td class="memItemLeft" align="right" valign="top">QuantLib::ext::shared_ptr&lt; <a class="el" href="namespace_quant_ext.html#a661007f9056ea816680cc0d655388978">IrLgm1fParametrization</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a3afcf0b0560e9c4ccab4a2646b271798">parametrization</a> () const</td></tr>
<tr class="separator:a3afcf0b0560e9c4ccab4a2646b271798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86173b3bbe1056659300044528205102"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102">numeraire</a> (const Time t, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;()) const</td></tr>
<tr class="separator:a86173b3bbe1056659300044528205102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15fad90a72085470b1ed2e93a9f23b2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a15fad90a72085470b1ed2e93a9f23b2d">discountBond</a> (const Time t, const Time T, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;()) const</td></tr>
<tr class="separator:a15fad90a72085470b1ed2e93a9f23b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8160c533ebc94797675516989155ed2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a> (const Time t, const Time T, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;()) const</td></tr>
<tr class="separator:aa8160c533ebc94797675516989155ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b80dad112b6d73c1e9efc601ea5e23a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a8b80dad112b6d73c1e9efc601ea5e23a">discountBondOption</a> (Option::Type type, const Real K, const Time t, const Time S, const Time T, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve) const</td></tr>
<tr class="separator:a8b80dad112b6d73c1e9efc601ea5e23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bdba94d68d2c05b5230a7cb05f9e993"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">fixing</a> (const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_interest_rate_index.html">InterestRateIndex</a> &gt; &amp;index, const Date &amp;fixingDate, const Time t, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x) const</td></tr>
<tr class="separator:a8bdba94d68d2c05b5230a7cb05f9e993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab696389cb4dde7085ec0fdcb4032c7a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#ab696389cb4dde7085ec0fdcb4032c7a9">compoundedOnRate</a> (const QuantLib::ext::shared_ptr&lt; OvernightIndex &gt; &amp;index, const std::vector&lt; Date &gt; &amp;fixingDates, const std::vector&lt; Date &gt; &amp;valueDates, const std::vector&lt; Real &gt; &amp;dt, const Natural rateCutoff, const <a class="el" href="classbool.html">bool</a> includeSpread, const Real spread, const Real gearing, const Period lookback, Real cap, Real floor, const <a class="el" href="classbool.html">bool</a> localCapFloor, const <a class="el" href="classbool.html">bool</a> nakedOption, const Time t, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x) const</td></tr>
<tr class="separator:ab696389cb4dde7085ec0fdcb4032c7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4886c78cc16c7230f212693bdfffa165"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a4886c78cc16c7230f212693bdfffa165">averagedOnRate</a> (const QuantLib::ext::shared_ptr&lt; OvernightIndex &gt; &amp;index, const std::vector&lt; Date &gt; &amp;fixingDates, const std::vector&lt; Date &gt; &amp;valueDates, const std::vector&lt; Real &gt; &amp;dt, const Natural rateCutoff, const <a class="el" href="classbool.html">bool</a> includeSpread, const Real spread, const Real gearing, const Period lookback, Real cap, Real floor, const <a class="el" href="classbool.html">bool</a> localCapFloor, const <a class="el" href="classbool.html">bool</a> nakedOption, const Time t, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x) const</td></tr>
<tr class="separator:a4886c78cc16c7230f212693bdfffa165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ceed19800a9fed0b76bb155afd766d8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a5ceed19800a9fed0b76bb155afd766d8">averagedBmaRate</a> (const QuantLib::ext::shared_ptr&lt; BMAIndex &gt; &amp;index, const std::vector&lt; Date &gt; &amp;fixingDates, const Date &amp;accrualStartDate, const Date &amp;accrualEndDate, const <a class="el" href="classbool.html">bool</a> includeSpread, const Real spread, const Real gearing, Real cap, Real floor, const <a class="el" href="classbool.html">bool</a> nakedOption, const Time t, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x) const</td></tr>
<tr class="separator:a5ceed19800a9fed0b76bb155afd766d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc7a1dc536a3f23356efe08b07a0bdf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#abdc7a1dc536a3f23356efe08b07a0bdf">subPeriodsRate</a> (const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_interest_rate_index.html">InterestRateIndex</a> &gt; &amp;index, const std::vector&lt; Date &gt; &amp;fixingDates, const Time t, const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;x) const</td></tr>
<tr class="separator:abdc7a1dc536a3f23356efe08b07a0bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a13290c6c07084662a1e3059cec92fd87"><td class="memItemLeft" align="right" valign="top">QuantLib::ext::shared_ptr&lt; <a class="el" href="namespace_quant_ext.html#a661007f9056ea816680cc0d655388978">IrLgm1fParametrization</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a></td></tr>
<tr class="separator:a13290c6c07084662a1e3059cec92fd87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="lgmvectorised_8hpp_source.html#l00037">37</a> of file <a class="el" href="lgmvectorised_8hpp_source.html">lgmvectorised.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afe7d7c9c2b9ea397bb372c5522539710" name="afe7d7c9c2b9ea397bb372c5522539710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe7d7c9c2b9ea397bb372c5522539710">&#9670;&#160;</a></span>LgmVectorised() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3888891a56121eaedcac532cf877033a" name="a3888891a56121eaedcac532cf877033a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3888891a56121eaedcac532cf877033a">&#9670;&#160;</a></span>LgmVectorised() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_quant_ext_1_1_lgm_vectorised.html">LgmVectorised</a> </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; <a class="el" href="namespace_quant_ext.html#a661007f9056ea816680cc0d655388978">IrLgm1fParametrization</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8hpp_source.html#l00040">40</a> of file <a class="el" href="lgmvectorised_8hpp_source.html">lgmvectorised.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>: <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>(p) {}</div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_a13290c6c07084662a1e3059cec92fd87"><div class="ttname"><a href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">QuantExt::LgmVectorised::p_</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; IrLgm1fParametrization &gt; p_</div><div class="ttdef"><b>Definition:</b> <a href="lgmvectorised_8hpp_source.html#l00091">lgmvectorised.hpp:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3afcf0b0560e9c4ccab4a2646b271798" name="a3afcf0b0560e9c4ccab4a2646b271798"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3afcf0b0560e9c4ccab4a2646b271798">&#9670;&#160;</a></span>parametrization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::ext::shared_ptr&lt; <a class="el" href="namespace_quant_ext.html#a661007f9056ea816680cc0d655388978">IrLgm1fParametrization</a> &gt; parametrization </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8hpp_source.html#l00042">42</a> of file <a class="el" href="lgmvectorised_8hpp_source.html">lgmvectorised.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>; }</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a3afcf0b0560e9c4ccab4a2646b271798_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a3afcf0b0560e9c4ccab4a2646b271798_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a3afcf0b0560e9c4ccab4a2646b271798_icgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a3afcf0b0560e9c4ccab4a2646b271798_icgraph">
<area shape="rect" title=" " alt="" coords="749,77,860,102"/>
<area shape="rect" href="namespace_quant_ext.html#a24af572dd193d1e1df179671bd5e8972" title=" " alt="" coords="543,77,701,102"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_multi_leg_option_engine_base.html#a082ff96da379d5e17436372ccb3c0972" title=" " alt="" coords="284,69,495,109"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_multi_leg_option_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="27,5,214,45"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_swaption_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="15,69,226,109"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_nonstandard_swaption_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="5,133,236,173"/>
</map>
</div>

</div>
</div>
<a id="a86173b3bbe1056659300044528205102" name="a86173b3bbe1056659300044528205102"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86173b3bbe1056659300044528205102">&#9670;&#160;</a></span>numeraire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> numeraire </td>
          <td>(</td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; YieldTermStructure &gt; &amp;&#160;</td>
          <td class="paramname"><em>discountCurve</em> = <code>Handle&lt;YieldTermStructure&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00032">32</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>                                                                                               {</div>
<div class="line"><span class="lineno">   34</span>    QL_REQUIRE(t &gt;= 0.0, <span class="stringliteral">&quot;t (&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) &gt;= 0 required in LGMVectorised::numeraire&quot;</span>);</div>
<div class="line"><span class="lineno">   35</span>    RandomVariable Ht(x.size(), <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;H(t));</div>
<div class="line"><span class="lineno">   36</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f">exp</a>(Ht * x + RandomVariable(x.size(), 0.5 * <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;zeta(t)) * Ht * Ht) /</div>
<div class="line"><span class="lineno">   37</span>           RandomVariable(x.size(),</div>
<div class="line"><span class="lineno">   38</span>                          (discountCurve.empty() ? <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;discount(t) : discountCurve-&gt;discount(t)));</div>
<div class="line"><span class="lineno">   39</span>}</div>
<div class="ttc" id="anamespace_quant_ext_html_a346be0ea720c31fdc928ba2bdb67826f"><div class="ttname"><a href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f">QuantExt::exp</a></div><div class="ttdeci">CompiledFormula exp(CompiledFormula x)</div><div class="ttdef"><b>Definition:</b> <a href="compiledformula_8cpp_source.html#l00151">compiledformula.cpp:151</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,84,60"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="169,5,275,31"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="132,55,312,95"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_icgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a86173b3bbe1056659300044528205102_icgraph">
<area shape="rect" title=" " alt="" coords="947,80,1025,105"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2" title=" " alt="" coords="749,80,899,105"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a5ceed19800a9fed0b76bb155afd766d8" title=" " alt="" coords="326,32,453,57"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a4886c78cc16c7230f212693bdfffa165" title=" " alt="" coords="563,31,681,56"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#ab696389cb4dde7085ec0fdcb4032c7a9" title=" " alt="" coords="552,80,692,105"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993" title=" " alt="" coords="596,129,648,155"/>
<area shape="rect" href="namespace_quant_ext.html#a24af572dd193d1e1df179671bd5e8972" title=" " alt="" coords="543,180,701,205"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#abdc7a1dc536a3f23356efe08b07a0bdf" title=" " alt="" coords="332,127,447,152"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_multi_leg_option_engine_base.html#a082ff96da379d5e17436372ccb3c0972" title=" " alt="" coords="284,177,495,217"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_multi_leg_option_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="27,113,214,153"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_swaption_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="15,177,226,217"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_nonstandard_swaption_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="5,241,236,281"/>
</map>
</div>

</div>
</div>
<a id="a15fad90a72085470b1ed2e93a9f23b2d" name="a15fad90a72085470b1ed2e93a9f23b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15fad90a72085470b1ed2e93a9f23b2d">&#9670;&#160;</a></span>discountBond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> discountBond </td>
          <td>(</td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; YieldTermStructure &gt; &amp;&#160;</td>
          <td class="paramname"><em>discountCurve</em> = <code>Handle&lt;YieldTermStructure&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00041">41</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>                                                                                                  {</div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">if</span> (QuantLib::close_enough(t, T))</div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">return</span> RandomVariable(x.size(), 1.0);</div>
<div class="line"><span class="lineno">   45</span>    QL_REQUIRE(T &gt;= t &amp;&amp; t &gt;= 0.0, <span class="stringliteral">&quot;T(&quot;</span> &lt;&lt; T &lt;&lt; <span class="stringliteral">&quot;) &gt;= t(&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) &gt;= 0 required in LGMVectorised::discountBond&quot;</span>);</div>
<div class="line"><span class="lineno">   46</span>    RandomVariable Ht(x.size(), <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;H(t));</div>
<div class="line"><span class="lineno">   47</span>    RandomVariable HT(x.size(), <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;H(T));</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">return</span> RandomVariable(x.size(),</div>
<div class="line"><span class="lineno">   49</span>                          (discountCurve.empty() ? <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;discount(T) / <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;discount(t)</div>
<div class="line"><span class="lineno">   50</span>                                                 : discountCurve-&gt;discount(T) / discountCurve-&gt;discount(t))) *</div>
<div class="line"><span class="lineno">   51</span>           <a class="code hl_function" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f">exp</a>(-(HT - Ht) * x - RandomVariable(x.size(), 0.5 * <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;zeta(t)) * (HT * HT - Ht * Ht));</div>
<div class="line"><span class="lineno">   52</span>}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,107,60"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="191,5,298,31"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="155,55,335,95"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_icgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a15fad90a72085470b1ed2e93a9f23b2d_icgraph">
<area shape="rect" title=" " alt="" coords="192,5,293,31"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a8b80dad112b6d73c1e9efc601ea5e23a" title=" " alt="" coords="5,5,144,31"/>
</map>
</div>

</div>
</div>
<a id="aa8160c533ebc94797675516989155ed2" name="aa8160c533ebc94797675516989155ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8160c533ebc94797675516989155ed2">&#9670;&#160;</a></span>reducedDiscountBond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> reducedDiscountBond </td>
          <td>(</td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; YieldTermStructure &gt; &amp;&#160;</td>
          <td class="paramname"><em>discountCurve</em> = <code>Handle&lt;YieldTermStructure&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00054">54</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   55</span>                                                                                                         {</div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span> (QuantLib::close_enough(t, T))</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">return</span> RandomVariable(x.size(), 1.0) / <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102">numeraire</a>(t, x, discountCurve);</div>
<div class="line"><span class="lineno">   58</span>    QL_REQUIRE(T &gt;= t &amp;&amp; t &gt;= 0.0,</div>
<div class="line"><span class="lineno">   59</span>               <span class="stringliteral">&quot;T(&quot;</span> &lt;&lt; T &lt;&lt; <span class="stringliteral">&quot;) &gt;= t(&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) &gt;= 0 required in LGMVectorised::reducedDiscountBond&quot;</span>);</div>
<div class="line"><span class="lineno">   60</span>    RandomVariable HT(x.size(), <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;H(T));</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">return</span> RandomVariable(x.size(),</div>
<div class="line"><span class="lineno">   62</span>                          (discountCurve.empty() ? <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;discount(T) : discountCurve-&gt;discount(T))) *</div>
<div class="line"><span class="lineno">   63</span>           <a class="code hl_function" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f">exp</a>(-HT * x - RandomVariable(x.size(), 0.5 * <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;zeta(t)) * HT * HT);</div>
<div class="line"><span class="lineno">   64</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_a86173b3bbe1056659300044528205102"><div class="ttname"><a href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102">QuantExt::LgmVectorised::numeraire</a></div><div class="ttdeci">RandomVariable numeraire(const Time t, const RandomVariable &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;()) const</div><div class="ttdef"><b>Definition:</b> <a href="lgmvectorised_8cpp_source.html#l00032">lgmvectorised.cpp:32</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_cgraph">
<area shape="rect" title=" " alt="" coords="5,44,155,69"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="366,5,473,31"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102" title=" " alt="" coords="203,44,281,69"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="329,66,509,106"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_icgraph" id="aclass_quant_ext_1_1_lgm_vectorised_aa8160c533ebc94797675516989155ed2_icgraph">
<area shape="rect" title=" " alt="" coords="749,80,899,105"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a5ceed19800a9fed0b76bb155afd766d8" title=" " alt="" coords="326,32,453,57"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a4886c78cc16c7230f212693bdfffa165" title=" " alt="" coords="563,31,681,56"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#ab696389cb4dde7085ec0fdcb4032c7a9" title=" " alt="" coords="552,80,692,105"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993" title=" " alt="" coords="596,129,648,155"/>
<area shape="rect" href="namespace_quant_ext.html#a24af572dd193d1e1df179671bd5e8972" title=" " alt="" coords="543,180,701,205"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#abdc7a1dc536a3f23356efe08b07a0bdf" title=" " alt="" coords="332,127,447,152"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_multi_leg_option_engine_base.html#a082ff96da379d5e17436372ccb3c0972" title=" " alt="" coords="284,177,495,217"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_multi_leg_option_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="27,113,214,153"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_swaption_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="15,177,226,217"/>
<area shape="rect" href="class_quant_ext_1_1_numeric_lgm_nonstandard_swaption_engine.html#a61eb1a24e5329ccc296715a40dc3a19a" title=" " alt="" coords="5,241,236,281"/>
</map>
</div>

</div>
</div>
<a id="a8b80dad112b6d73c1e9efc601ea5e23a" name="a8b80dad112b6d73c1e9efc601ea5e23a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b80dad112b6d73c1e9efc601ea5e23a">&#9670;&#160;</a></span>discountBondOption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> discountBondOption </td>
          <td>(</td>
          <td class="paramtype">Option::Type&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>K</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>S</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Handle&lt; YieldTermStructure &gt; &amp;&#160;</td>
          <td class="paramname"><em>discountCurve</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00066">66</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                                                                                        {</div>
<div class="line"><span class="lineno">   69</span>    QL_REQUIRE(T &gt; S &amp;&amp; S &gt;= t &amp;&amp; t &gt;= 0.0,</div>
<div class="line"><span class="lineno">   70</span>               <span class="stringliteral">&quot;T(&quot;</span> &lt;&lt; T &lt;&lt; <span class="stringliteral">&quot;) &gt; S(&quot;</span> &lt;&lt; S &lt;&lt; <span class="stringliteral">&quot;) &gt;= t(&quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot;) &gt;= 0 required in LGMVectorised::discountBondOption&quot;</span>);</div>
<div class="line"><span class="lineno">   71</span>    RandomVariable w(x.size(), type == Option::Call ? 1.0 : -1.0);</div>
<div class="line"><span class="lineno">   72</span>    RandomVariable pS = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a15fad90a72085470b1ed2e93a9f23b2d">discountBond</a>(t, S, x, discountCurve);</div>
<div class="line"><span class="lineno">   73</span>    RandomVariable pT = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a15fad90a72085470b1ed2e93a9f23b2d">discountBond</a>(t, T, x, discountCurve);</div>
<div class="line"><span class="lineno">   74</span>    <span class="comment">// slight generalization of Lichters, Stamm, Gallagher 11.2.1</span></div>
<div class="line"><span class="lineno">   75</span>    <span class="comment">// with t &lt; S, SSRN: https://ssrn.com/abstract=2246054</span></div>
<div class="line"><span class="lineno">   76</span>    RandomVariable sigma(x.size(), std::sqrt(<a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;zeta(t)) * (<a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;H(T) - <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;H(S)));</div>
<div class="line"><span class="lineno">   77</span>    RandomVariable dp =</div>
<div class="line"><span class="lineno">   78</span>        <a class="code hl_function" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c">log</a>(pT / (RandomVariable(x.size(), K) * pS)) / sigma + RandomVariable(x.size(), 0.5) * sigma * sigma;</div>
<div class="line"><span class="lineno">   79</span>    RandomVariable dm = dp - sigma;</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">return</span> w * (pT * <a class="code hl_function" href="namespace_quant_ext.html#a996549ffc162c8e74914ca768833bba4">normalCdf</a>(w * dp) - pS * RandomVariable(x.size(), K) * <a class="code hl_function" href="namespace_quant_ext.html#a996549ffc162c8e74914ca768833bba4">normalCdf</a>(w * dm));</div>
<div class="line"><span class="lineno">   81</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_a15fad90a72085470b1ed2e93a9f23b2d"><div class="ttname"><a href="class_quant_ext_1_1_lgm_vectorised.html#a15fad90a72085470b1ed2e93a9f23b2d">QuantExt::LgmVectorised::discountBond</a></div><div class="ttdeci">RandomVariable discountBond(const Time t, const Time T, const RandomVariable &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;()) const</div><div class="ttdef"><b>Definition:</b> <a href="lgmvectorised_8cpp_source.html#l00041">lgmvectorised.cpp:41</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_a996549ffc162c8e74914ca768833bba4"><div class="ttname"><a href="namespace_quant_ext.html#a996549ffc162c8e74914ca768833bba4">QuantExt::normalCdf</a></div><div class="ttdeci">RandomVariable normalCdf(RandomVariable x)</div><div class="ttdef"><b>Definition:</b> <a href="qle_2math_2randomvariable_8cpp_source.html#l00810">randomvariable.cpp:810</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_adc7ed752d78c94fc73b18b4ed6ffeb6c"><div class="ttname"><a href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c">QuantExt::log</a></div><div class="ttdeci">CompiledFormula log(CompiledFormula x)</div><div class="ttdef"><b>Definition:</b> <a href="compiledformula_8cpp_source.html#l00154">compiledformula.cpp:154</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a8b80dad112b6d73c1e9efc601ea5e23a_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a8b80dad112b6d73c1e9efc601ea5e23a_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a8b80dad112b6d73c1e9efc601ea5e23a_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a8b80dad112b6d73c1e9efc601ea5e23a_cgraph">
<area shape="rect" title=" " alt="" coords="5,88,144,113"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a15fad90a72085470b1ed2e93a9f23b2d" title=" " alt="" coords="213,12,314,37"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="383,55,563,95"/>
<area shape="rect" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c" title=" " alt="" coords="212,113,315,139"/>
<area shape="rect" href="namespace_quant_ext.html#a996549ffc162c8e74914ca768833bba4" title=" " alt="" coords="192,163,335,188"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="419,5,526,31"/>
</map>
</div>

</div>
</div>
<a id="a8bdba94d68d2c05b5230a7cb05f9e993" name="a8bdba94d68d2c05b5230a7cb05f9e993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bdba94d68d2c05b5230a7cb05f9e993">&#9670;&#160;</a></span>fixing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> fixing </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_interest_rate_index.html">InterestRateIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Date &amp;&#160;</td>
          <td class="paramname"><em>fixingDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00083">83</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>                                                                                  {</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">// handle case where fixing is deterministic</span></div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">if</span> (fixingDate &lt;= today)</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">return</span> RandomVariable(x.size(), index-&gt;fixing(fixingDate));</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <span class="comment">// handle stochastic fixing</span></div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> ibor = QuantLib::ext::dynamic_pointer_cast&lt;IborIndex&gt;(index)) {</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>        <span class="comment">// Ibor Index</span></div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>        Date d1 = ibor-&gt;valueDate(fixingDate);</div>
<div class="line"><span class="lineno">   99</span>        Date d2 = ibor-&gt;maturityDate(d1);</div>
<div class="line"><span class="lineno">  100</span>        Time T1 = std::max(t, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(d1));</div>
<div class="line"><span class="lineno">  101</span>        Time T2 = std::max(T1, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(d2));</div>
<div class="line"><span class="lineno">  102</span>        Time dt = ibor-&gt;dayCounter().yearFraction(d1, d2);</div>
<div class="line"><span class="lineno">  103</span>        <span class="comment">// reducedDiscountBond is faster to compute, there we use this here instead of discountBond</span></div>
<div class="line"><span class="lineno">  104</span>        RandomVariable disc1 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T1, x, ibor-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  105</span>        RandomVariable disc2 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T2, x, ibor-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">return</span> (disc1 / disc2 - RandomVariable(x.size(), 1.0)) / RandomVariable(x.size(), dt);</div>
<div class="line"><span class="lineno">  107</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> swap = QuantLib::ext::dynamic_pointer_cast&lt;SwapIndex&gt;(index)) {</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>        <span class="comment">// Swap Index</span></div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>        <span class="keyword">auto</span> swapDiscountCurve =</div>
<div class="line"><span class="lineno">  112</span>            swap-&gt;exogenousDiscount() ? swap-&gt;discountingTermStructure() : swap-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno">  113</span>        Leg floatingLeg, fixedLeg;</div>
<div class="line"><span class="lineno">  114</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> ois = QuantLib::ext::dynamic_pointer_cast&lt;OvernightIndexedSwapIndex&gt;(index)) {</div>
<div class="line"><span class="lineno">  115</span>            <span class="keyword">auto</span> underlying = ois-&gt;underlyingSwap(fixingDate);</div>
<div class="line"><span class="lineno">  116</span>            floatingLeg = underlying-&gt;overnightLeg();</div>
<div class="line"><span class="lineno">  117</span>            fixedLeg = underlying-&gt;fixedLeg();</div>
<div class="line"><span class="lineno">  118</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  119</span>            <span class="keyword">auto</span> underlying = swap-&gt;underlyingSwap(fixingDate);</div>
<div class="line"><span class="lineno">  120</span>            floatingLeg = underlying-&gt;floatingLeg();</div>
<div class="line"><span class="lineno">  121</span>            fixedLeg = underlying-&gt;fixedLeg();</div>
<div class="line"><span class="lineno">  122</span>        }</div>
<div class="line"><span class="lineno">  123</span>        RandomVariable numerator(x.size(), 0.0), denominator(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; c : floatingLeg) {</div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordflow">if</span> (<span class="keyword">auto</span> cpn = QuantLib::ext::dynamic_pointer_cast&lt;IborCoupon&gt;(c)) {</div>
<div class="line"><span class="lineno">  126</span>                Date fixingValueDate = swap-&gt;iborIndex()-&gt;fixingCalendar().advance(</div>
<div class="line"><span class="lineno">  127</span>                    cpn-&gt;fixingDate(), swap-&gt;iborIndex()-&gt;fixingDays(), Days);</div>
<div class="line"><span class="lineno">  128</span>                Date fixingEndDate = cpn-&gt;fixingEndDate();</div>
<div class="line"><span class="lineno">  129</span>                Time T1 = std::max(t, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(fixingValueDate));</div>
<div class="line"><span class="lineno">  130</span>                Time T2 = std::max(</div>
<div class="line"><span class="lineno">  131</span>                    T1, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(fixingEndDate)); <span class="comment">// accounts for QL_INDEXED_COUPON</span></div>
<div class="line"><span class="lineno">  132</span>                Time T3 = std::max(T2, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(cpn-&gt;date()));</div>
<div class="line"><span class="lineno">  133</span>                RandomVariable disc1 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T1, x, swap-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  134</span>                RandomVariable disc2 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T2, x, swap-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  135</span>                Real adjFactor =</div>
<div class="line"><span class="lineno">  136</span>                    cpn-&gt;dayCounter().yearFraction(cpn-&gt;accrualStartDate(), cpn-&gt;accrualEndDate(),</div>
<div class="line"><span class="lineno">  137</span>                                                   cpn-&gt;referencePeriodStart(), cpn-&gt;referencePeriodEnd()) /</div>
<div class="line"><span class="lineno">  138</span>                    swap-&gt;iborIndex()-&gt;dayCounter().yearFraction(fixingValueDate, fixingEndDate);</div>
<div class="line"><span class="lineno">  139</span>                RandomVariable tmp = disc1 / disc2 - RandomVariable(x.size(), 1.0);</div>
<div class="line"><span class="lineno">  140</span>                <span class="keywordflow">if</span> (!QuantLib::close_enough(adjFactor, 1.0)) {</div>
<div class="line"><span class="lineno">  141</span>                    tmp *= RandomVariable(x.size(), adjFactor);</div>
<div class="line"><span class="lineno">  142</span>                }</div>
<div class="line"><span class="lineno">  143</span>                numerator += tmp * <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T3, x, swapDiscountCurve);</div>
<div class="line"><span class="lineno">  144</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> cpn = QuantLib::ext::dynamic_pointer_cast&lt;OvernightIndexedCoupon&gt;(c)) {</div>
<div class="line"><span class="lineno">  145</span>                Date start = cpn-&gt;valueDates().front();</div>
<div class="line"><span class="lineno">  146</span>                Date end = cpn-&gt;valueDates().back();</div>
<div class="line"><span class="lineno">  147</span>                Time T1 = std::max(t, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(start));</div>
<div class="line"><span class="lineno">  148</span>                Time T2 = std::max(T1, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(end));</div>
<div class="line"><span class="lineno">  149</span>                Time T3 = std::max(T2, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(cpn-&gt;date()));</div>
<div class="line"><span class="lineno">  150</span>                RandomVariable disc1 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T1, x, swap-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  151</span>                RandomVariable disc2 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T2, x, swap-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno">  152</span>                Real adjFactor =</div>
<div class="line"><span class="lineno">  153</span>                    cpn-&gt;dayCounter().yearFraction(cpn-&gt;accrualStartDate(), cpn-&gt;accrualEndDate(),</div>
<div class="line"><span class="lineno">  154</span>                                                   cpn-&gt;referencePeriodStart(), cpn-&gt;referencePeriodEnd()) /</div>
<div class="line"><span class="lineno">  155</span>                    swap-&gt;iborIndex()-&gt;dayCounter().yearFraction(start, end);</div>
<div class="line"><span class="lineno">  156</span>                RandomVariable tmp;</div>
<div class="line"><span class="lineno">  157</span>                <span class="keywordflow">if</span> (cpn-&gt;averagingMethod() == RateAveraging::Compound) {</div>
<div class="line"><span class="lineno">  158</span>                    tmp = disc1 / disc2 - RandomVariable(x.size(), 1.0);</div>
<div class="line"><span class="lineno">  159</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cpn-&gt;averagingMethod() == RateAveraging::Simple) {</div>
<div class="line"><span class="lineno">  160</span>                    tmp = <a class="code hl_function" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c">QuantExt::log</a>(disc1 / disc2);</div>
<div class="line"><span class="lineno">  161</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  162</span>                    QL_FAIL(<span class="stringliteral">&quot;LgmVectorised::fixing(): RateAveraging &#39;&quot;</span></div>
<div class="line"><span class="lineno">  163</span>                            &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(cpn-&gt;averagingMethod())</div>
<div class="line"><span class="lineno">  164</span>                            &lt;&lt; <span class="stringliteral">&quot;&#39; not handled - internal error, contact dev.&quot;</span>);</div>
<div class="line"><span class="lineno">  165</span>                }</div>
<div class="line"><span class="lineno">  166</span>                <span class="keywordflow">if</span> (!QuantLib::close_enough(adjFactor, 1.0)) {</div>
<div class="line"><span class="lineno">  167</span>                    tmp *= RandomVariable(x.size(), adjFactor);</div>
<div class="line"><span class="lineno">  168</span>                }</div>
<div class="line"><span class="lineno">  169</span>                numerator += tmp * <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T3, x, swapDiscountCurve);</div>
<div class="line"><span class="lineno">  170</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  171</span>                QL_FAIL(<span class="stringliteral">&quot;LgmVectorised::fixing(): expected ibor coupon&quot;</span>);</div>
<div class="line"><span class="lineno">  172</span>            }</div>
<div class="line"><span class="lineno">  173</span>        }</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; c : fixedLeg) {</div>
<div class="line"><span class="lineno">  175</span>            <span class="keyword">auto</span> cpn = QuantLib::ext::dynamic_pointer_cast&lt;FixedRateCoupon&gt;(c);</div>
<div class="line"><span class="lineno">  176</span>            QL_REQUIRE(cpn, <span class="stringliteral">&quot;LgmVectorised::fixing(): expected fixed coupon&quot;</span>);</div>
<div class="line"><span class="lineno">  177</span>            Date d = cpn-&gt;date();</div>
<div class="line"><span class="lineno">  178</span>            Time T = std::max(t, <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(d));</div>
<div class="line"><span class="lineno">  179</span>            denominator +=</div>
<div class="line"><span class="lineno">  180</span>                <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T, x, swapDiscountCurve) * RandomVariable(x.size(), cpn-&gt;accrualPeriod());</div>
<div class="line"><span class="lineno">  181</span>        }</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">return</span> numerator / denominator;</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  185</span>        QL_FAIL(<span class="stringliteral">&quot;LgmVectorised::fixing(): index (&#39;&quot;</span> &lt;&lt; index-&gt;name() &lt;&lt; <span class="stringliteral">&quot;&#39;) must be ibor or swap index&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>    }</div>
<div class="line"><span class="lineno">  187</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_aa8160c533ebc94797675516989155ed2"><div class="ttname"><a href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">QuantExt::LgmVectorised::reducedDiscountBond</a></div><div class="ttdeci">RandomVariable reducedDiscountBond(const Time t, const Time T, const RandomVariable &amp;x, const Handle&lt; YieldTermStructure &gt; &amp;discountCurve=Handle&lt; YieldTermStructure &gt;()) const</div><div class="ttdef"><b>Definition:</b> <a href="lgmvectorised_8cpp_source.html#l00054">lgmvectorised.cpp:54</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_cgraph">
<area shape="rect" title=" " alt="" coords="5,59,57,84"/>
<area shape="rect" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c" title=" " alt="" coords="129,9,231,35"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2" title=" " alt="" coords="105,59,255,84"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="429,77,609,117"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="466,5,573,31"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102" title=" " alt="" coords="303,33,381,59"/>
</map>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_icgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_icgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_icgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a8bdba94d68d2c05b5230a7cb05f9e993_icgraph">
<area shape="rect" title=" " alt="" coords="180,31,232,56"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a5ceed19800a9fed0b76bb155afd766d8" title=" " alt="" coords="5,5,132,31"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#abdc7a1dc536a3f23356efe08b07a0bdf" title=" " alt="" coords="11,55,126,80"/>
</map>
</div>

</div>
</div>
<a id="ab696389cb4dde7085ec0fdcb4032c7a9" name="ab696389cb4dde7085ec0fdcb4032c7a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab696389cb4dde7085ec0fdcb4032c7a9">&#9670;&#160;</a></span>compoundedOnRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> compoundedOnRate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; OvernightIndex &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Date &gt; &amp;&#160;</td>
          <td class="paramname"><em>fixingDates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Date &gt; &amp;&#160;</td>
          <td class="paramname"><em>valueDates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Natural&#160;</td>
          <td class="paramname"><em>rateCutoff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>includeSpread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>spread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>gearing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Period&#160;</td>
          <td class="paramname"><em>lookback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>localCapFloor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>nakedOption</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00189">189</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>                                                                              {</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    QL_REQUIRE(!includeSpread || QuantLib::close_enough(gearing, 1.0),</div>
<div class="line"><span class="lineno">  198</span>               <span class="stringliteral">&quot;LgmVectorised::compoundedOnRate(): if include spread = true, only a gearing 1.0 is allowed - scale &quot;</span></div>
<div class="line"><span class="lineno">  199</span>               <span class="stringliteral">&quot;the notional in this case instead.&quot;</span>);</div>
<div class="line"><span class="lineno">  200</span> </div>
<div class="line"><span class="lineno">  201</span>    QL_REQUIRE(rateCutoff &lt; dt.size(), <span class="stringliteral">&quot;LgmVectorised::compoundedOnRate(): rate cutoff (&quot;</span></div>
<div class="line"><span class="lineno">  202</span>                                           &lt;&lt; rateCutoff &lt;&lt; <span class="stringliteral">&quot;) must be less than number of fixings in period (&quot;</span></div>
<div class="line"><span class="lineno">  203</span>                                           &lt;&lt; dt.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  204</span> </div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">/* We allow the observation time t to be later than the value dates for which to project ON fixings.</span></div>
<div class="line"><span class="lineno">  206</span><span class="comment">       In this case we project the period from the first (future) value date to the last value date starting</span></div>
<div class="line"><span class="lineno">  207</span><span class="comment">       from t, but use the actual portion of the underlying curve.</span></div>
<div class="line"><span class="lineno">  208</span><span class="comment">       As a refinement, we might consider to scale x down to the volatility corresponding to the first future</span></div>
<div class="line"><span class="lineno">  209</span><span class="comment">       value date as well (TODO) - this is all experimental and an approximation to meet the requirements of</span></div>
<div class="line"><span class="lineno">  210</span><span class="comment">       an 1D backward solver, i.e. to be able to price e.g. Bermudan OIS swaptions in an efficient way. */</span></div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">// the following is similar to the code in the overnight index coupon pricer</span></div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>    Size i = 0, n = dt.size();</div>
<div class="line"><span class="lineno">  215</span>    Size nCutoff = n - rateCutoff;</div>
<div class="line"><span class="lineno">  216</span>    Real compoundFactor = 1.0, compoundFactorWithoutSpread = 1.0;</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>    <span class="keywordflow">while</span> (i &lt; n &amp;&amp; fixingDates[std::min(i, nCutoff)] &lt; today) {</div>
<div class="line"><span class="lineno">  221</span>        Rate pastFixing = IndexManager::instance().getHistory(index-&gt;name())[fixingDates[std::min(i, nCutoff)]];</div>
<div class="line"><span class="lineno">  222</span>        QL_REQUIRE(pastFixing != Null&lt;Real&gt;(), <span class="stringliteral">&quot;LgmVectorised::compoundedOnRate(): Missing &quot;</span></div>
<div class="line"><span class="lineno">  223</span>                                                   &lt;&lt; index-&gt;name() &lt;&lt; <span class="stringliteral">&quot; fixing for &quot;</span></div>
<div class="line"><span class="lineno">  224</span>                                                   &lt;&lt; fixingDates[std::min(i, nCutoff)]);</div>
<div class="line"><span class="lineno">  225</span>        <span class="keywordflow">if</span> (includeSpread) {</div>
<div class="line"><span class="lineno">  226</span>            compoundFactorWithoutSpread *= (1.0 + pastFixing * dt[i]);</div>
<div class="line"><span class="lineno">  227</span>            pastFixing += spread;</div>
<div class="line"><span class="lineno">  228</span>        }</div>
<div class="line"><span class="lineno">  229</span>        compoundFactor *= (1.0 + pastFixing * dt[i]);</div>
<div class="line"><span class="lineno">  230</span>        ++i;</div>
<div class="line"><span class="lineno">  231</span>    }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordflow">if</span> (i &lt; n &amp;&amp; fixingDates[std::min(i, nCutoff)] == today) {</div>
<div class="line"><span class="lineno">  234</span>        Rate pastFixing = IndexManager::instance().getHistory(index-&gt;name())[fixingDates[std::min(i, nCutoff)]];</div>
<div class="line"><span class="lineno">  235</span>        <span class="keywordflow">if</span> (pastFixing != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">if</span> (includeSpread) {</div>
<div class="line"><span class="lineno">  237</span>                compoundFactorWithoutSpread *= (1.0 + pastFixing * dt[i]);</div>
<div class="line"><span class="lineno">  238</span>                pastFixing += spread;</div>
<div class="line"><span class="lineno">  239</span>            }</div>
<div class="line"><span class="lineno">  240</span>            compoundFactor *= (1.0 + pastFixing * dt[i]);</div>
<div class="line"><span class="lineno">  241</span>            ++i;</div>
<div class="line"><span class="lineno">  242</span>        }</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>    RandomVariable compoundFactorLgm(x.size(), compoundFactor),</div>
<div class="line"><span class="lineno">  246</span>        compoundFactorWithoutSpreadLgm(x.size(), compoundFactorWithoutSpread);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="keywordflow">if</span> (i &lt; n) {</div>
<div class="line"><span class="lineno">  249</span>        Handle&lt;YieldTermStructure&gt; curve = index-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno">  250</span>        QL_REQUIRE(!curve.empty(),</div>
<div class="line"><span class="lineno">  251</span>                   <span class="stringliteral">&quot;LgmVectorised::compoundedOnRate(): null term structure set to this instance of &quot;</span> &lt;&lt; index-&gt;name());</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>        DiscountFactor startDiscount = curve-&gt;discount(valueDates[i]);</div>
<div class="line"><span class="lineno">  254</span>        DiscountFactor endDiscount = curve-&gt;discount(valueDates[std::max(nCutoff, i)]);</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>        <span class="keywordflow">if</span> (nCutoff &lt; n) {</div>
<div class="line"><span class="lineno">  257</span>            DiscountFactor discountCutoffDate =</div>
<div class="line"><span class="lineno">  258</span>                curve-&gt;discount(valueDates[nCutoff] + 1) / curve-&gt;discount(valueDates[nCutoff]);</div>
<div class="line"><span class="lineno">  259</span>            endDiscount *= std::pow(discountCutoffDate, valueDates[n] - valueDates[nCutoff]);</div>
<div class="line"><span class="lineno">  260</span>        }</div>
<div class="line"><span class="lineno">  261</span> </div>
<div class="line"><span class="lineno">  262</span>        <span class="comment">// the times associated to the projection on the T0 curve</span></div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>        Real T1 = <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(valueDates[i]);</div>
<div class="line"><span class="lineno">  265</span>        Real T2 = <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(valueDates[n]);</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>        <span class="comment">// the times we use for the projection in the LGM model, if t &gt; T1 they are displaced by (t-T1)</span></div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>        Real T1_lgm = T1, T2_lgm = T2;</div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">if</span> (t &gt; T1) {</div>
<div class="line"><span class="lineno">  271</span>            T1_lgm += t - T1;</div>
<div class="line"><span class="lineno">  272</span>            T2_lgm += t - T1;</div>
<div class="line"><span class="lineno">  273</span>        }</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <span class="comment">// the discount factors estimated in the lgm model</span></div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>        RandomVariable disc1 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T1_lgm, x, curve);</div>
<div class="line"><span class="lineno">  278</span>        RandomVariable disc2 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T2_lgm, x, curve);</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>        <span class="comment">// apply a correction to the discount factors</span></div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>        disc1 *= RandomVariable(x.size(), startDiscount / curve-&gt;discount(T1_lgm));</div>
<div class="line"><span class="lineno">  283</span>        disc2 *= RandomVariable(x.size(), endDiscount / curve-&gt;discount(T2_lgm));</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>        <span class="comment">// continue with the usual computation</span></div>
<div class="line"><span class="lineno">  286</span> </div>
<div class="line"><span class="lineno">  287</span>        compoundFactorLgm *= disc1 / disc2;</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">if</span> (includeSpread) {</div>
<div class="line"><span class="lineno">  290</span>            compoundFactorWithoutSpreadLgm *= disc1 / disc2;</div>
<div class="line"><span class="lineno">  291</span>            Real tau =</div>
<div class="line"><span class="lineno">  292</span>                index-&gt;dayCounter().yearFraction(valueDates[i], valueDates.back()) / (valueDates.back() - valueDates[i]);</div>
<div class="line"><span class="lineno">  293</span>            compoundFactorLgm *= RandomVariable(</div>
<div class="line"><span class="lineno">  294</span>                x.size(), std::pow(1.0 + tau * spread, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(valueDates.back() - valueDates[i])));</div>
<div class="line"><span class="lineno">  295</span>        }</div>
<div class="line"><span class="lineno">  296</span>    }</div>
<div class="line"><span class="lineno">  297</span> </div>
<div class="line"><span class="lineno">  298</span>    Rate tau = index-&gt;dayCounter().yearFraction(valueDates.front(), valueDates.back());</div>
<div class="line"><span class="lineno">  299</span>    RandomVariable rate = (compoundFactorLgm - RandomVariable(x.size(), 1.0)) / RandomVariable(x.size(), tau);</div>
<div class="line"><span class="lineno">  300</span>    RandomVariable swapletRate = RandomVariable(x.size(), gearing) * rate;</div>
<div class="line"><span class="lineno">  301</span>    RandomVariable effectiveSpread, effectiveIndexFixing;</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">if</span> (!includeSpread) {</div>
<div class="line"><span class="lineno">  303</span>        swapletRate += RandomVariable(x.size(), spread);</div>
<div class="line"><span class="lineno">  304</span>        effectiveSpread = RandomVariable(x.size(), spread);</div>
<div class="line"><span class="lineno">  305</span>        effectiveIndexFixing = rate;</div>
<div class="line"><span class="lineno">  306</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  307</span>        effectiveSpread =</div>
<div class="line"><span class="lineno">  308</span>            rate - (compoundFactorWithoutSpreadLgm - RandomVariable(x.size(), 1.0)) / RandomVariable(x.size(), tau);</div>
<div class="line"><span class="lineno">  309</span>        effectiveIndexFixing = rate - effectiveSpread;</div>
<div class="line"><span class="lineno">  310</span>    }</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">if</span> (cap == Null&lt;Real&gt;() &amp;&amp; floor == Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">  313</span>        <span class="keywordflow">return</span> swapletRate;</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>    <span class="comment">// handle cap / floor - we compute the intrinsic value only</span></div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">if</span> (gearing &lt; 0.0) {</div>
<div class="line"><span class="lineno">  318</span>        std::swap(cap, floor);</div>
<div class="line"><span class="lineno">  319</span>    }</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">if</span> (nakedOption)</div>
<div class="line"><span class="lineno">  322</span>        swapletRate = RandomVariable(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    RandomVariable floorletRate(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  325</span>    RandomVariable capletRate(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordflow">if</span> (floor != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  328</span>        <span class="comment">// ignore localCapFloor, treat as global</span></div>
<div class="line"><span class="lineno">  329</span>        RandomVariable effectiveStrike =</div>
<div class="line"><span class="lineno">  330</span>            (RandomVariable(x.size(), floor) - effectiveSpread) / RandomVariable(x.size(), gearing);</div>
<div class="line"><span class="lineno">  331</span>        floorletRate = RandomVariable(x.size(), gearing) *</div>
<div class="line"><span class="lineno">  332</span>                       <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(RandomVariable(x.size(), 0.0), effectiveStrike - effectiveIndexFixing);</div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span> (cap != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  336</span>        RandomVariable effectiveStrike =</div>
<div class="line"><span class="lineno">  337</span>            (RandomVariable(x.size(), cap) - effectiveSpread) / RandomVariable(x.size(), gearing);</div>
<div class="line"><span class="lineno">  338</span>        capletRate = RandomVariable(x.size(), gearing) *</div>
<div class="line"><span class="lineno">  339</span>                     <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(RandomVariable(x.size(), 0.0), effectiveIndexFixing - effectiveStrike);</div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">if</span> (nakedOption &amp;&amp; floor == Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">  341</span>            capletRate = -capletRate;</div>
<div class="line"><span class="lineno">  342</span>    }</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordflow">return</span> swapletRate + floorletRate - capletRate;</div>
<div class="line"><span class="lineno">  345</span>}</div>
<div class="ttc" id="anamespace_quant_ext_html_ac0bb3279caaa02e9f9dd6e85a687cba8"><div class="ttname"><a href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">QuantExt::max</a></div><div class="ttdeci">CompiledFormula max(CompiledFormula x, const CompiledFormula &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="compiledformula_8cpp_source.html#l00159">compiledformula.cpp:159</a></div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_ab696389cb4dde7085ec0fdcb4032c7a9_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_ab696389cb4dde7085ec0fdcb4032c7a9_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_ab696389cb4dde7085ec0fdcb4032c7a9_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_ab696389cb4dde7085ec0fdcb4032c7a9_cgraph">
<area shape="rect" title=" " alt="" coords="5,59,145,84"/>
<area shape="rect" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8" title=" " alt="" coords="213,9,323,35"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2" title=" " alt="" coords="193,59,343,84"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="517,77,697,117"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="554,5,661,31"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102" title=" " alt="" coords="391,33,469,59"/>
</map>
</div>

</div>
</div>
<a id="a4886c78cc16c7230f212693bdfffa165" name="a4886c78cc16c7230f212693bdfffa165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4886c78cc16c7230f212693bdfffa165">&#9670;&#160;</a></span>averagedOnRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> averagedOnRate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; OvernightIndex &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Date &gt; &amp;&#160;</td>
          <td class="paramname"><em>fixingDates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Date &gt; &amp;&#160;</td>
          <td class="paramname"><em>valueDates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Real &gt; &amp;&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Natural&#160;</td>
          <td class="paramname"><em>rateCutoff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>includeSpread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>spread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>gearing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Period&#160;</td>
          <td class="paramname"><em>lookback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>localCapFloor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>nakedOption</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00347">347</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  352</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    QL_REQUIRE(!includeSpread || QuantLib::close_enough(gearing, 1.0),</div>
<div class="line"><span class="lineno">  355</span>               <span class="stringliteral">&quot;LgmVectorised::averageOnRate(): if include spread = true, only a gearing 1.0 is allowed - scale &quot;</span></div>
<div class="line"><span class="lineno">  356</span>               <span class="stringliteral">&quot;the notional in this case instead.&quot;</span>);</div>
<div class="line"><span class="lineno">  357</span> </div>
<div class="line"><span class="lineno">  358</span>    QL_REQUIRE(rateCutoff &lt; dt.size(), <span class="stringliteral">&quot;LgmVectorised::averageOnRate(): rate cutoff (&quot;</span></div>
<div class="line"><span class="lineno">  359</span>                                           &lt;&lt; rateCutoff &lt;&lt; <span class="stringliteral">&quot;) must be less than number of fixings in period (&quot;</span></div>
<div class="line"><span class="lineno">  360</span>                                           &lt;&lt; dt.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    <span class="comment">/* Same comment on t as in compoundedOnRate() above applies here */</span></div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">// the following is similar to the code in the overnight index coupon pricer</span></div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>    Size i = 0, n = dt.size();</div>
<div class="line"><span class="lineno">  367</span>    Size nCutoff = n - rateCutoff;</div>
<div class="line"><span class="lineno">  368</span>    Real accumulatedRate = 0.0;</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>    <span class="keywordflow">while</span> (i &lt; n &amp;&amp; fixingDates[std::min(i, nCutoff)] &lt; today) {</div>
<div class="line"><span class="lineno">  373</span>        Rate pastFixing = IndexManager::instance().getHistory(index-&gt;name())[fixingDates[std::min(i, nCutoff)]];</div>
<div class="line"><span class="lineno">  374</span>        QL_REQUIRE(pastFixing != Null&lt;Real&gt;(), <span class="stringliteral">&quot;LgmVectorised::averageOnRate(): Missing &quot;</span></div>
<div class="line"><span class="lineno">  375</span>                                                   &lt;&lt; index-&gt;name() &lt;&lt; <span class="stringliteral">&quot; fixing for &quot;</span></div>
<div class="line"><span class="lineno">  376</span>                                                   &lt;&lt; fixingDates[std::min(i, nCutoff)]);</div>
<div class="line"><span class="lineno">  377</span>        accumulatedRate += pastFixing * dt[i];</div>
<div class="line"><span class="lineno">  378</span>        ++i;</div>
<div class="line"><span class="lineno">  379</span>    }</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <span class="keywordflow">if</span> (i &lt; n &amp;&amp; fixingDates[std::min(i, nCutoff)] == today) {</div>
<div class="line"><span class="lineno">  382</span>        Rate pastFixing = IndexManager::instance().getHistory(index-&gt;name())[fixingDates[std::min(i, nCutoff)]];</div>
<div class="line"><span class="lineno">  383</span>        <span class="keywordflow">if</span> (pastFixing != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  384</span>            accumulatedRate += pastFixing * dt[i];</div>
<div class="line"><span class="lineno">  385</span>            ++i;</div>
<div class="line"><span class="lineno">  386</span>        }</div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>    RandomVariable accumulatedRateLgm(x.size(), accumulatedRate);</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>    <span class="keywordflow">if</span> (i &lt; n) {</div>
<div class="line"><span class="lineno">  392</span>        Handle&lt;YieldTermStructure&gt; curve = index-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno">  393</span>        QL_REQUIRE(!curve.empty(),</div>
<div class="line"><span class="lineno">  394</span>                   <span class="stringliteral">&quot;LgmVectorised::averageOnRate(): null term structure set to this instance of &quot;</span> &lt;&lt; index-&gt;name());</div>
<div class="line"><span class="lineno">  395</span> </div>
<div class="line"><span class="lineno">  396</span>        DiscountFactor startDiscount = curve-&gt;discount(valueDates[i]);</div>
<div class="line"><span class="lineno">  397</span>        DiscountFactor endDiscount = curve-&gt;discount(valueDates[std::max(nCutoff, i)]);</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>        <span class="keywordflow">if</span> (nCutoff &lt; n) {</div>
<div class="line"><span class="lineno">  400</span>            DiscountFactor discountCutoffDate =</div>
<div class="line"><span class="lineno">  401</span>                curve-&gt;discount(valueDates[nCutoff] + 1) / curve-&gt;discount(valueDates[nCutoff]);</div>
<div class="line"><span class="lineno">  402</span>            endDiscount *= std::pow(discountCutoffDate, valueDates[n] - valueDates[nCutoff]);</div>
<div class="line"><span class="lineno">  403</span>        }</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>        <span class="comment">// the times associated to the projection on the T0 curve</span></div>
<div class="line"><span class="lineno">  406</span> </div>
<div class="line"><span class="lineno">  407</span>        Real T1 = <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(valueDates[i]);</div>
<div class="line"><span class="lineno">  408</span>        Real T2 = <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(valueDates[n]);</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>        <span class="comment">// the times we use for the projection in the LGM model, if t &gt; T1 they are displaced by (t-T1)</span></div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>        Real T1_lgm = T1, T2_lgm = T2;</div>
<div class="line"><span class="lineno">  413</span>        <span class="keywordflow">if</span> (t &gt; T1) {</div>
<div class="line"><span class="lineno">  414</span>            T1_lgm += t - T1;</div>
<div class="line"><span class="lineno">  415</span>            T2_lgm += t - T1;</div>
<div class="line"><span class="lineno">  416</span>        }</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>        <span class="comment">// the discount factors estimated in the lgm model</span></div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>        RandomVariable disc1 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T1_lgm, x, curve);</div>
<div class="line"><span class="lineno">  421</span>        RandomVariable disc2 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T2_lgm, x, curve);</div>
<div class="line"><span class="lineno">  422</span> </div>
<div class="line"><span class="lineno">  423</span>        <span class="comment">// apply a correction to the discount factors</span></div>
<div class="line"><span class="lineno">  424</span> </div>
<div class="line"><span class="lineno">  425</span>        disc1 *= RandomVariable(x.size(), startDiscount / curve-&gt;discount(T1_lgm));</div>
<div class="line"><span class="lineno">  426</span>        disc2 *= RandomVariable(x.size(), endDiscount / curve-&gt;discount(T2_lgm));</div>
<div class="line"><span class="lineno">  427</span> </div>
<div class="line"><span class="lineno">  428</span>        <span class="comment">// continue with the usual computation</span></div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>        accumulatedRateLgm += <a class="code hl_function" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c">log</a>(disc1 / disc2);</div>
<div class="line"><span class="lineno">  431</span>    }</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    Rate tau = index-&gt;dayCounter().yearFraction(valueDates.front(), valueDates.back());</div>
<div class="line"><span class="lineno">  434</span>    RandomVariable rate =</div>
<div class="line"><span class="lineno">  435</span>        RandomVariable(x.size(), gearing / tau) * accumulatedRateLgm + RandomVariable(x.size(), spread);</div>
<div class="line"><span class="lineno">  436</span> </div>
<div class="line"><span class="lineno">  437</span>    <span class="keywordflow">if</span> (cap == Null&lt;Real&gt;() &amp;&amp; floor == Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">  438</span>        <span class="keywordflow">return</span> rate;</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <span class="comment">// handle cap / floor - we compute the intrinsic value only</span></div>
<div class="line"><span class="lineno">  441</span> </div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordflow">if</span> (gearing &lt; 0.0) {</div>
<div class="line"><span class="lineno">  443</span>        std::swap(cap, floor);</div>
<div class="line"><span class="lineno">  444</span>    }</div>
<div class="line"><span class="lineno">  445</span> </div>
<div class="line"><span class="lineno">  446</span>    RandomVariable forwardRate = (rate - RandomVariable(x.size(), spread)) / RandomVariable(x.size(), gearing);</div>
<div class="line"><span class="lineno">  447</span>    RandomVariable floorletRate(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  448</span>    RandomVariable capletRate(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>    <span class="keywordflow">if</span> (nakedOption)</div>
<div class="line"><span class="lineno">  451</span>        rate = RandomVariable(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <span class="keywordflow">if</span> (floor != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  454</span>        <span class="comment">// ignore localCapFloor, treat as global</span></div>
<div class="line"><span class="lineno">  455</span>        RandomVariable effectiveStrike = RandomVariable(x.size(), (floor - spread) / gearing);</div>
<div class="line"><span class="lineno">  456</span>        floorletRate =</div>
<div class="line"><span class="lineno">  457</span>            RandomVariable(x.size(), gearing) * <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(RandomVariable(x.size(), 0.0), effectiveStrike - forwardRate);</div>
<div class="line"><span class="lineno">  458</span>    }</div>
<div class="line"><span class="lineno">  459</span> </div>
<div class="line"><span class="lineno">  460</span>    <span class="keywordflow">if</span> (cap != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  461</span>        RandomVariable effectiveStrike = RandomVariable(x.size(), (cap - spread) / gearing);</div>
<div class="line"><span class="lineno">  462</span>        capletRate =</div>
<div class="line"><span class="lineno">  463</span>            RandomVariable(x.size(), gearing) * <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(RandomVariable(x.size(), 0.0), forwardRate - effectiveStrike);</div>
<div class="line"><span class="lineno">  464</span>        <span class="keywordflow">if</span> (nakedOption &amp;&amp; floor == Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">  465</span>            capletRate = -capletRate;</div>
<div class="line"><span class="lineno">  466</span>    }</div>
<div class="line"><span class="lineno">  467</span> </div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">return</span> rate + floorletRate - capletRate;</div>
<div class="line"><span class="lineno">  469</span>}</div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a4886c78cc16c7230f212693bdfffa165_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a4886c78cc16c7230f212693bdfffa165_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a4886c78cc16c7230f212693bdfffa165_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a4886c78cc16c7230f212693bdfffa165_cgraph">
<area shape="rect" title=" " alt="" coords="5,80,123,105"/>
<area shape="rect" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c" title=" " alt="" coords="194,5,297,31"/>
<area shape="rect" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8" title=" " alt="" coords="190,55,301,80"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2" title=" " alt="" coords="171,104,320,129"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="495,122,675,162"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="531,51,638,76"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102" title=" " alt="" coords="368,79,447,104"/>
</map>
</div>

</div>
</div>
<a id="a5ceed19800a9fed0b76bb155afd766d8" name="a5ceed19800a9fed0b76bb155afd766d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ceed19800a9fed0b76bb155afd766d8">&#9670;&#160;</a></span>averagedBmaRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> averagedBmaRate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; BMAIndex &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Date &gt; &amp;&#160;</td>
          <td class="paramname"><em>fixingDates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Date &amp;&#160;</td>
          <td class="paramname"><em>accrualStartDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Date &amp;&#160;</td>
          <td class="paramname"><em>accrualEndDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>includeSpread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>spread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Real&#160;</td>
          <td class="paramname"><em>gearing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>nakedOption</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00471">471</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  475</span>                                                                                           {</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>    <span class="comment">// similar to AverageBMACouponPricer</span></div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>    Natural cutoffDays = 0;</div>
<div class="line"><span class="lineno">  480</span>    Date startDate = accrualStartDate - cutoffDays;</div>
<div class="line"><span class="lineno">  481</span>    Date endDate = accrualEndDate - cutoffDays;</div>
<div class="line"><span class="lineno">  482</span>    Date d1 = startDate, d2 = startDate;</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>    QL_REQUIRE(!fixingDates.empty(), <span class="stringliteral">&quot;LgmVectorised::averagedBmaRate(): fixing date list empty&quot;</span>);</div>
<div class="line"><span class="lineno">  485</span>    QL_REQUIRE(index-&gt;valueDate(fixingDates.front()) &lt;= startDate,</div>
<div class="line"><span class="lineno">  486</span>               <span class="stringliteral">&quot;LgmVectorised::averagedBmaRate(): first fixing date valid after period start&quot;</span>);</div>
<div class="line"><span class="lineno">  487</span>    QL_REQUIRE(index-&gt;valueDate(fixingDates.back()) &gt;= endDate,</div>
<div class="line"><span class="lineno">  488</span>               <span class="stringliteral">&quot;LgmVectorised::averagedBmaRate(): last fixing date valid before period end&quot;</span>);</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>    Handle&lt;YieldTermStructure&gt; curve = index-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno">  491</span>    QL_REQUIRE(!curve.empty(),</div>
<div class="line"><span class="lineno">  492</span>               <span class="stringliteral">&quot;LgmVectorised::averagedBmaRate(): null term structure set to this instance of &quot;</span> &lt;&lt; index-&gt;name());</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>    RandomVariable avgBMA(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; fixingDates.size() - 1; ++i) {</div>
<div class="line"><span class="lineno">  499</span>        Date valueDate = index-&gt;valueDate(fixingDates[i]);</div>
<div class="line"><span class="lineno">  500</span>        Date nextValueDate = index-&gt;valueDate(fixingDates[i + 1]);</div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordflow">if</span> (fixingDates[i] &gt;= endDate || valueDate &gt;= endDate)</div>
<div class="line"><span class="lineno">  502</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  503</span>        <span class="keywordflow">if</span> (fixingDates[i + 1] &lt; startDate || nextValueDate &lt;= startDate)</div>
<div class="line"><span class="lineno">  504</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  505</span> </div>
<div class="line"><span class="lineno">  506</span>        d2 = std::min(nextValueDate, endDate);</div>
<div class="line"><span class="lineno">  507</span>        RandomVariable <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">fixing</a>;</div>
<div class="line"><span class="lineno">  508</span>        <span class="keywordflow">if</span> (fixingDates[i] &lt;= today) {</div>
<div class="line"><span class="lineno">  509</span>            <span class="comment">// past fixing or forecast today&#39;s fixing on T0 curve (which is ok, since model independent)</span></div>
<div class="line"><span class="lineno">  510</span>            <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">fixing</a> = RandomVariable(x.size(), index-&gt;fixing(fixingDates[i]));</div>
<div class="line"><span class="lineno">  511</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>            Date start = index-&gt;fixingCalendar().advance(fixingDates[i], 1, Days);</div>
<div class="line"><span class="lineno">  514</span>            Date end = index-&gt;maturityDate(start);</div>
<div class="line"><span class="lineno">  515</span>            DiscountFactor startDiscount = curve-&gt;discount(start);</div>
<div class="line"><span class="lineno">  516</span>            DiscountFactor endDiscount = curve-&gt;discount(end);</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>            <span class="comment">// the times associated to the projection on the T0 curve</span></div>
<div class="line"><span class="lineno">  519</span> </div>
<div class="line"><span class="lineno">  520</span>            Real T1 = <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(start);</div>
<div class="line"><span class="lineno">  521</span>            Real T2 = <a class="code hl_variable" href="class_quant_ext_1_1_lgm_vectorised.html#a13290c6c07084662a1e3059cec92fd87">p_</a>-&gt;termStructure()-&gt;timeFromReference(end);</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>            <span class="comment">// the times we use for the projection in the LGM model, if t &gt; T1 they are displaced by (t-T1)</span></div>
<div class="line"><span class="lineno">  524</span> </div>
<div class="line"><span class="lineno">  525</span>            Real T1_lgm = T1, T2_lgm = T2;</div>
<div class="line"><span class="lineno">  526</span>            <span class="keywordflow">if</span> (t &gt; T1) {</div>
<div class="line"><span class="lineno">  527</span>                T1_lgm += t - T1;</div>
<div class="line"><span class="lineno">  528</span>                T2_lgm += t - T1;</div>
<div class="line"><span class="lineno">  529</span>            }</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>            <span class="comment">// the discount factors estimated in the lgm model</span></div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>            RandomVariable disc1 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T1_lgm, x, curve);</div>
<div class="line"><span class="lineno">  534</span>            RandomVariable disc2 = <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2">reducedDiscountBond</a>(t, T2_lgm, x, curve);</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>            <span class="comment">// apply a correction to the discount factors</span></div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>            disc1 *= RandomVariable(x.size(), startDiscount / curve-&gt;discount(T1_lgm));</div>
<div class="line"><span class="lineno">  539</span>            disc2 *= RandomVariable(x.size(), endDiscount / curve-&gt;discount(T2_lgm));</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>            <span class="comment">// estimate the fixing</span></div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>            <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">fixing</a> = (disc1 / disc2 - RandomVariable(x.size(), 1.0)) /</div>
<div class="line"><span class="lineno">  544</span>                     RandomVariable(x.size(), index-&gt;dayCounter().yearFraction(start, end));</div>
<div class="line"><span class="lineno">  545</span>        }</div>
<div class="line"><span class="lineno">  546</span> </div>
<div class="line"><span class="lineno">  547</span>        avgBMA += <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">fixing</a> * RandomVariable(x.size(), (d2 - d1));</div>
<div class="line"><span class="lineno">  548</span>        d1 = d2;</div>
<div class="line"><span class="lineno">  549</span>    }</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>    avgBMA *= RandomVariable(x.size(), gearing / (endDate - startDate));</div>
<div class="line"><span class="lineno">  552</span>    avgBMA += RandomVariable(x.size(), spread);</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">if</span> (cap == Null&lt;Real&gt;() &amp;&amp; floor == Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">  555</span>        <span class="keywordflow">return</span> avgBMA;</div>
<div class="line"><span class="lineno">  556</span> </div>
<div class="line"><span class="lineno">  557</span>    <span class="comment">// handle cap / floor - we compute the intrinsic value only</span></div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>    <span class="keywordflow">if</span> (gearing &lt; 0.0) {</div>
<div class="line"><span class="lineno">  560</span>        std::swap(cap, floor);</div>
<div class="line"><span class="lineno">  561</span>    }</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    RandomVariable forwardRate = (avgBMA - RandomVariable(x.size(), spread)) / RandomVariable(x.size(), gearing);</div>
<div class="line"><span class="lineno">  564</span>    RandomVariable floorletRate(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  565</span>    RandomVariable capletRate(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  566</span> </div>
<div class="line"><span class="lineno">  567</span>    <span class="keywordflow">if</span> (nakedOption)</div>
<div class="line"><span class="lineno">  568</span>        avgBMA = RandomVariable(x.size(), 0.0);</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    <span class="keywordflow">if</span> (floor != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  571</span>        <span class="comment">// ignore localCapFloor, treat as global</span></div>
<div class="line"><span class="lineno">  572</span>        RandomVariable effectiveStrike = RandomVariable(x.size(), (floor - spread) / gearing);</div>
<div class="line"><span class="lineno">  573</span>        floorletRate =</div>
<div class="line"><span class="lineno">  574</span>            RandomVariable(x.size(), gearing) * <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(RandomVariable(x.size(), 0.0), effectiveStrike - forwardRate);</div>
<div class="line"><span class="lineno">  575</span>    }</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">if</span> (cap != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  578</span>        RandomVariable effectiveStrike = RandomVariable(x.size(), (cap - spread) / gearing);</div>
<div class="line"><span class="lineno">  579</span>        capletRate =</div>
<div class="line"><span class="lineno">  580</span>            RandomVariable(x.size(), gearing) * <a class="code hl_function" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8">max</a>(RandomVariable(x.size(), 0.0), forwardRate - effectiveStrike);</div>
<div class="line"><span class="lineno">  581</span>        <span class="keywordflow">if</span> (nakedOption &amp;&amp; floor == Null&lt;Real&gt;())</div>
<div class="line"><span class="lineno">  582</span>            capletRate = -capletRate;</div>
<div class="line"><span class="lineno">  583</span>    }</div>
<div class="line"><span class="lineno">  584</span> </div>
<div class="line"><span class="lineno">  585</span>    <span class="keywordflow">return</span> avgBMA + floorletRate - capletRate;</div>
<div class="line"><span class="lineno">  586</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_lgm_vectorised_html_a8bdba94d68d2c05b5230a7cb05f9e993"><div class="ttname"><a href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">QuantExt::LgmVectorised::fixing</a></div><div class="ttdeci">RandomVariable fixing(const QuantLib::ext::shared_ptr&lt; InterestRateIndex &gt; &amp;index, const Date &amp;fixingDate, const Time t, const RandomVariable &amp;x) const</div><div class="ttdef"><b>Definition:</b> <a href="lgmvectorised_8cpp_source.html#l00083">lgmvectorised.cpp:83</a></div></div>
</div><!-- fragment --><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_a5ceed19800a9fed0b76bb155afd766d8_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_a5ceed19800a9fed0b76bb155afd766d8_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_a5ceed19800a9fed0b76bb155afd766d8_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_a5ceed19800a9fed0b76bb155afd766d8_cgraph">
<area shape="rect" title=" " alt="" coords="5,104,132,129"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993" title=" " alt="" coords="209,78,261,104"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2" title=" " alt="" coords="339,129,488,154"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="663,108,843,148"/>
<area shape="rect" href="namespace_quant_ext.html#ac0bb3279caaa02e9f9dd6e85a687cba8" title=" " alt="" coords="180,180,291,205"/>
<area shape="rect" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c" title=" " alt="" coords="362,28,465,53"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="699,194,806,220"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102" title=" " alt="" coords="536,180,615,205"/>
</map>
</div>

</div>
</div>
<a id="abdc7a1dc536a3f23356efe08b07a0bdf" name="abdc7a1dc536a3f23356efe08b07a0bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdc7a1dc536a3f23356efe08b07a0bdf">&#9670;&#160;</a></span>subPeriodsRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> subPeriodsRate </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::ext::shared_ptr&lt; <a class="el" href="class_interest_rate_index.html">InterestRateIndex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; Date &gt; &amp;&#160;</td>
          <td class="paramname"><em>fixingDates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Time&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_quant_ext_1_1_random_variable.html">RandomVariable</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8cpp_source.html#l00588">588</a> of file <a class="el" href="lgmvectorised_8cpp_source.html">lgmvectorised.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  590</span>                                                                            {</div>
<div class="line"><span class="lineno">  591</span> </div>
<div class="line"><span class="lineno">  592</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993">fixing</a>(index, fixingDates.front(), t, x);</div>
<div class="line"><span class="lineno">  593</span>}</div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_quant_ext_1_1_lgm_vectorised_abdc7a1dc536a3f23356efe08b07a0bdf_cgraph.png" border="0" usemap="#aclass_quant_ext_1_1_lgm_vectorised_abdc7a1dc536a3f23356efe08b07a0bdf_cgraph" alt=""/></div>
<map name="aclass_quant_ext_1_1_lgm_vectorised_abdc7a1dc536a3f23356efe08b07a0bdf_cgraph" id="aclass_quant_ext_1_1_lgm_vectorised_abdc7a1dc536a3f23356efe08b07a0bdf_cgraph">
<area shape="rect" title=" " alt="" coords="5,59,120,84"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a8bdba94d68d2c05b5230a7cb05f9e993" title=" " alt="" coords="168,59,220,84"/>
<area shape="rect" href="namespace_quant_ext.html#adc7ed752d78c94fc73b18b4ed6ffeb6c" title=" " alt="" coords="291,9,394,35"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#aa8160c533ebc94797675516989155ed2" title=" " alt="" coords="268,59,417,84"/>
<area shape="rect" href="struct_quant_ext_1_1_random_variable.html#acce0ab2cacc475b2434f24c65c91685a" title=" " alt="" coords="592,77,772,117"/>
<area shape="rect" href="namespace_quant_ext.html#a346be0ea720c31fdc928ba2bdb67826f" title=" " alt="" coords="629,5,735,31"/>
<area shape="rect" href="class_quant_ext_1_1_lgm_vectorised.html#a86173b3bbe1056659300044528205102" title=" " alt="" coords="465,33,544,59"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a13290c6c07084662a1e3059cec92fd87" name="a13290c6c07084662a1e3059cec92fd87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13290c6c07084662a1e3059cec92fd87">&#9670;&#160;</a></span>p_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::ext::shared_ptr&lt;<a class="el" href="namespace_quant_ext.html#a661007f9056ea816680cc0d655388978">IrLgm1fParametrization</a>&gt; p_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="lgmvectorised_8hpp_source.html#l00091">91</a> of file <a class="el" href="lgmvectorised_8hpp_source.html">lgmvectorised.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
