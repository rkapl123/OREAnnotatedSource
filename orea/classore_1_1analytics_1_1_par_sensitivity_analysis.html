<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREAnalytics: ParSensitivityAnalysis Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oreaextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-analytics@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.10</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceore.html">ore</a></li><li class="navelem"><a class="el" href="namespaceore_1_1analytics.html">analytics</a></li><li class="navelem"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html">ParSensitivityAnalysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classore_1_1analytics_1_1_par_sensitivity_analysis-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ParSensitivityAnalysis Class Reference<div class="ingroups"><a class="el" href="group__simulation.html">Simulation</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Par Sensitivity Analysis.  
 <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">orea/engine/parsensitivityanalysis.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for ParSensitivityAnalysis:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis__coll__graph.png" border="0" usemap="#a_par_sensitivity_analysis_coll__map" alt="Collaboration graph"/></div>
<map name="a_par_sensitivity_analysis_coll__map" id="a_par_sensitivity_analysis_coll__map">
<area shape="rect" title="Par Sensitivity Analysis." alt="" coords="4447,3257,4689,3679"/>
<area shape="rect" title=" " alt="" coords="105,2128,159,2168"/>
<area shape="rect" title=" " alt="" coords="183,2121,406,2175"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html" title="Description of sensitivity shift scenarios." alt="" coords="1841,1101,2047,3195"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_x_m_l_serializable.html" title=" " alt="" coords="1965,676,2113,819"/>
<area shape="rect" title=" " alt="" coords="2711,705,2892,789"/>
<area shape="rect" title=" " alt="" coords="1885,108,1944,148"/>
<area shape="rect" title=" " alt="" coords="800,713,981,782"/>
<area shape="rect" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html" title=" " alt="" coords="1117,211,1227,280"/>
<area shape="rect" title=" " alt="" coords="2505,705,2687,789"/>
<area shape="rect" title=" " alt="" coords="1326,713,1514,782"/>
<area shape="rect" title=" " alt="" coords="1043,713,1224,782"/>
<area shape="rect" title=" " alt="" coords="1759,713,1940,782"/>
<area shape="rect" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cds_vol_shift_data.html" title=" " alt="" coords="1666,350,1787,390"/>
<area shape="rect" title=" " alt="" coords="1548,713,1735,782"/>
<area shape="rect" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_base_correlation_shift_data.html" title=" " alt="" coords="1471,350,1641,390"/>
<area shape="rect" title=" " alt="" coords="2335,727,2481,767"/>
<area shape="rect" title=" " alt="" coords="2137,727,2311,767"/>
<area shape="rect" href="classore_1_1analytics_1_1_risk_factor_key.html" title="Data types stored in the scenario class." alt="" coords="6335,485,6470,569"/>
<area shape="rect" title=" " alt="" coords="3159,720,3305,775"/>
<area shape="rect" title=" " alt="" coords="4047,727,4174,767"/>
<area shape="rect" title=" " alt="" coords="1841,5,1988,45"/>
<area shape="rect" title=" " alt="" coords="2353,493,2530,562"/>
<area shape="rect" title=" " alt="" coords="3611,507,3709,547"/>
<area shape="rect" title=" " alt="" coords="3582,705,3781,789"/>
<area shape="rect" title=" " alt="" coords="4993,713,5181,782"/>
<area shape="rect" title=" " alt="" coords="5573,705,5729,789"/>
<area shape="rect" title=" " alt="" coords="6046,713,6215,782"/>
<area shape="rect" title=" " alt="" coords="7083,713,7296,782"/>
<area shape="rect" title=" " alt="" coords="7465,705,7639,789"/>
<area shape="rect" title=" " alt="" coords="6417,713,6581,782"/>
<area shape="rect" title=" " alt="" coords="6612,705,6836,789"/>
<area shape="rect" title=" " alt="" coords="4722,2106,4865,2190"/>
<area shape="rect" title=" " alt="" coords="6875,705,7029,789"/>
<area shape="rect" title=" " alt="" coords="3875,350,3914,390"/>
<area shape="rect" title=" " alt="" coords="4000,507,4077,547"/>
<area shape="rect" title=" " alt="" coords="3034,5,3073,45"/>
<area shape="rect" title=" " alt="" coords="596,108,687,148"/>
<area shape="rect" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_spot_shift_data.html" title=" " alt="" coords="919,421,1025,461"/>
<area shape="rect" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html" title=" " alt="" coords="1104,343,1224,397"/>
<area shape="rect" title=" " alt="" coords="802,108,854,148"/>
<area shape="rect" title=" " alt="" coords="982,225,1093,265"/>
<area shape="rect" title=" " alt="" coords="2082,493,2259,562"/>
<area shape="rect" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data.html" title=" " alt="" coords="1206,507,1378,547"/>
<area shape="rect" title=" " alt="" coords="1371,225,1493,265"/>
<area shape="rect" title=" " alt="" coords="1215,108,1278,148"/>
<area shape="rect" title=" " alt="" coords="200,218,341,273"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="648,225,699,265"/>
<area shape="rect" title=" " alt="" coords="111,108,254,148"/>
<area shape="rect" title=" " alt="" coords="159,5,206,45"/>
<area shape="rect" title=" " alt="" coords="2917,720,3059,775"/>
<area shape="rect" title=" " alt="" coords="2607,507,2684,547"/>
<area shape="rect" title=" " alt="" coords="4590,720,4725,775"/>
<area shape="rect" title=" " alt="" coords="4333,720,4520,775"/>
<area shape="rect" title=" " alt="" coords="3737,493,3925,562"/>
<area shape="rect" title=" " alt="" coords="4040,350,4117,390"/>
<area shape="rect" title=" " alt="" coords="6377,350,6429,390"/>
<area shape="rect" title=" " alt="" coords="5170,507,5342,547"/>
<area shape="rect" title=" " alt="" coords="5366,500,5517,555"/>
<area shape="rect" title=" " alt="" coords="6030,507,6231,547"/>
<area shape="rect" title=" " alt="" coords="7563,500,7743,555"/>
<area shape="rect" title=" " alt="" coords="7768,500,7931,555"/>
<area shape="rect" title=" " alt="" coords="6793,507,6983,547"/>
<area shape="rect" title=" " alt="" coords="7147,500,7365,555"/>
<area shape="rect" title=" " alt="" coords="4869,507,4947,547"/>
<area shape="rect" title=" " alt="" coords="7389,500,7539,555"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:abe637de864ef34aa2842b582cf4680b4"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::pair&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt;, Real &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abe637de864ef34aa2842b582cf4680b4">ParContainer</a></td></tr>
<tr class="separator:abe637de864ef34aa2842b582cf4680b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a00b6a31b896194f07ec98eb458be8f6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d">ParSensitivityAnalysis</a> (const QuantLib::Date &amp;<a class="el" href="test_2scenarioshiftcalculator_8cpp.html#a652b8805d9b88185e25574d4820660c4">asof</a>, const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">ore::analytics::ScenarioSimMarketParameters</a> &gt; &amp;simMarketParams, const <a class="el" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html">ore::analytics::SensitivityScenarioData</a> &amp;sensitivityData, const string &amp;marketConfiguration=&quot;&quot;, const <a class="el" href="classbool.html">bool</a> continueOnError=false, const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt; &amp;<a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afbc2e170697d8df9e2e11aaa9c200816">typesDisabled</a>={})</td></tr>
<tr class="memdesc:a00b6a31b896194f07ec98eb458be8f6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d">More...</a><br /></td></tr>
<tr class="separator:a00b6a31b896194f07ec98eb458be8f6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada299256f8f47d1874acd87e24d4ceaf"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ada299256f8f47d1874acd87e24d4ceaf">~ParSensitivityAnalysis</a> ()</td></tr>
<tr class="separator:ada299256f8f47d1874acd87e24d4ceaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15667fb454f6579571357dcefa65a559"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559">computeParInstrumentSensitivities</a> (const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market.html">ore::analytics::ScenarioSimMarket</a> &gt; &amp;simMarket)</td></tr>
<tr class="memdesc:a15667fb454f6579571357dcefa65a559"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute par instrument sensitivities.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559">More...</a><br /></td></tr>
<tr class="separator:a15667fb454f6579571357dcefa65a559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8092eccb5ce3a742bec7c90e7599fe71"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abe637de864ef34aa2842b582cf4680b4">ParContainer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8092eccb5ce3a742bec7c90e7599fe71">parSensitivities</a> () const</td></tr>
<tr class="memdesc:a8092eccb5ce3a742bec7c90e7599fe71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return computed par sensitivities. Empty if they have not been computed yet.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8092eccb5ce3a742bec7c90e7599fe71">More...</a><br /></td></tr>
<tr class="separator:a8092eccb5ce3a742bec7c90e7599fe71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28915bb1dca6668799c336ea3a953e45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a28915bb1dca6668799c336ea3a953e45">alignPillars</a> ()</td></tr>
<tr class="memdesc:a28915bb1dca6668799c336ea3a953e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">align pillars in scenario simulation market parameters with those of the par instruments  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a28915bb1dca6668799c336ea3a953e45">More...</a><br /></td></tr>
<tr class="separator:a28915bb1dca6668799c336ea3a953e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc5a644a73ad885cb0dcf9ff06495ab"><td class="memItemLeft" align="right" valign="top">const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9bc5a644a73ad885cb0dcf9ff06495ab">relevantRiskFactors</a> () const</td></tr>
<tr class="memdesc:a9bc5a644a73ad885cb0dcf9ff06495ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">get / set the relevant scenarios (if empty, these are ignored)  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9bc5a644a73ad885cb0dcf9ff06495ab">More...</a><br /></td></tr>
<tr class="separator:a9bc5a644a73ad885cb0dcf9ff06495ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45e6d7030b16a8f4ccff9de74ddd3bc9"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a45e6d7030b16a8f4ccff9de74ddd3bc9">relevantRiskFactors</a> ()</td></tr>
<tr class="separator:a45e6d7030b16a8f4ccff9de74ddd3bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab397fee73d59f20038b686d3eeff9af3"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, std::pair&lt; QuantLib::Real, QuantLib::Real &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab397fee73d59f20038b686d3eeff9af3">shiftSizes</a> () const</td></tr>
<tr class="memdesc:ab397fee73d59f20038b686d3eeff9af3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the zero rate and par rate absolute shift size for each risk factor key.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab397fee73d59f20038b686d3eeff9af3">More...</a><br /></td></tr>
<tr class="separator:ab397fee73d59f20038b686d3eeff9af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201ef82fb3cbbcfea680dd06dcde5fb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a201ef82fb3cbbcfea680dd06dcde5fb3">disable</a> (const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt; &amp;<a class="elRef" href="../ored/namespaceore_1_1data.html#a8889e35af3fc04877d0070383d8ee48c">types</a>)</td></tr>
<tr class="separator:a201ef82fb3cbbcfea680dd06dcde5fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc2e170697d8df9e2e11aaa9c200816"><td class="memItemLeft" align="right" valign="top">const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afbc2e170697d8df9e2e11aaa9c200816">typesDisabled</a> () const</td></tr>
<tr class="memdesc:afbc2e170697d8df9e2e11aaa9c200816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the set of key types disabled for this instance of <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html" title="Par Sensitivity Analysis.">ParSensitivityAnalysis</a>.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afbc2e170697d8df9e2e11aaa9c200816">More...</a><br /></td></tr>
<tr class="separator:afbc2e170697d8df9e2e11aaa9c200816"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:adc1ea5d86780f6a6557b3bb6cf84926e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e">isParType</a> (<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> type)</td></tr>
<tr class="memdesc:adc1ea5d86780f6a6557b3bb6cf84926e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if risk factor type is applicable for par conversion.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e">More...</a><br /></td></tr>
<tr class="separator:adc1ea5d86780f6a6557b3bb6cf84926e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aaf3b4fed233991ba67fc00a89e8fcd57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aaf3b4fed233991ba67fc00a89e8fcd57">augmentRelevantRiskFactors</a> ()</td></tr>
<tr class="memdesc:aaf3b4fed233991ba67fc00a89e8fcd57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Augment relevant risk factors.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aaf3b4fed233991ba67fc00a89e8fcd57">More...</a><br /></td></tr>
<tr class="separator:aaf3b4fed233991ba67fc00a89e8fcd57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ca088a3dab4c18db2c047232a89780"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780">createParInstruments</a> (const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market.html">ore::analytics::ScenarioSimMarket</a> &gt; &amp;simMarket)</td></tr>
<tr class="memdesc:a03ca088a3dab4c18db2c047232a89780"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create par instruments.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780">More...</a><br /></td></tr>
<tr class="separator:a03ca088a3dab4c18db2c047232a89780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc5dd9703405793fd837d16b467ba2a8"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8">makeDeposit</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions)</td></tr>
<tr class="memdesc:abc5dd9703405793fd837d16b467ba2a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Deposit for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8">More...</a><br /></td></tr>
<tr class="separator:abc5dd9703405793fd837d16b467ba2a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59b12d3c4bc46e5912a4c7b7ef76307"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307">makeFRA</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions)</td></tr>
<tr class="memdesc:ac59b12d3c4bc46e5912a4c7b7ef76307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create FRA for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307">More...</a><br /></td></tr>
<tr class="separator:ac59b12d3c4bc46e5912a4c7b7ef76307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4856e81fa16c1c0f4c30fe20863df8"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8">makeSwap</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, <a class="el" href="classbool.html">bool</a> singleCurve, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:a7c4856e81fa16c1c0f4c30fe20863df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8">More...</a><br /></td></tr>
<tr class="separator:a7c4856e81fa16c1c0f4c30fe20863df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8398135369084ed1a6d98a5c34816e4a"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a">makeOIS</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, <a class="el" href="classbool.html">bool</a> singleCurve, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:a8398135369084ed1a6d98a5c34816e4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create OIS <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a">More...</a><br /></td></tr>
<tr class="separator:a8398135369084ed1a6d98a5c34816e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ed6e6816f20d1b60164edb508bdb98"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98">makeTenorBasisSwap</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string ccy, string shortIndexName, string longIndexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:a10ed6e6816f20d1b60164edb508bdb98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Basis <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98">More...</a><br /></td></tr>
<tr class="separator:a10ed6e6816f20d1b60164edb508bdb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84f6a45da03b18ad06f2e6059576d335"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; QuantLib::CapFloor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335">makeCapFloor</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string ccy, string indexName, Period term, Real strike, <a class="el" href="classbool.html">bool</a> generatePillar, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:a84f6a45da03b18ad06f2e6059576d335"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335">More...</a><br /></td></tr>
<tr class="separator:a84f6a45da03b18ad06f2e6059576d335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a8cff443db13bb49f84bb402091baae"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae">makeCrossCcyBasisSwap</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string baseCcy, string ccy, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies)</td></tr>
<tr class="memdesc:a0a8cff443db13bb49f84bb402091baae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Cross Ccy Basis <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae">More...</a><br /></td></tr>
<tr class="separator:a0a8cff443db13bb49f84bb402091baae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b2d757640f779381349d234d4627a6"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6">makeFxForward</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string baseCcy, string ccy, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies)</td></tr>
<tr class="memdesc:a36b2d757640f779381349d234d4627a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6">More...</a><br /></td></tr>
<tr class="separator:a36b2d757640f779381349d234d4627a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab159350c50880e88ef534864f9466b26"><td class="memItemLeft" align="right" valign="top">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26">makeCDS</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string <a class="elRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a>, string ccy, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:ab159350c50880e88ef534864f9466b26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create CDS for implying par rate sensitivity from Hazard Rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26">More...</a><br /></td></tr>
<tr class="separator:ab159350c50880e88ef534864f9466b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e7d23239efd7bda0bd107f0c568a2f"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; QuantLib::Instrument &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f">makeZeroInflationSwap</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string indexName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, <a class="el" href="classbool.html">bool</a> singleCurve, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:a15e7d23239efd7bda0bd107f0c568a2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Zero <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f">More...</a><br /></td></tr>
<tr class="separator:a15e7d23239efd7bda0bd107f0c568a2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a39605391eba53ee7e55cb504808a9e"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; QuantLib::Instrument &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e">makeYoyInflationSwap</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;market, string indexName, Period term, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;conventions, <a class="el" href="classbool.html">bool</a> singleCurve, <a class="el" href="classbool.html">bool</a> fromZero, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</td></tr>
<tr class="memdesc:a9a39605391eba53ee7e55cb504808a9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create YoY <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from yoy rate sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e">More...</a><br /></td></tr>
<tr class="separator:a9a39605391eba53ee7e55cb504808a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2abfe3c79d6b13d1865f82b9bae2ea65"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; QuantLib::YoYInflationCapFloor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65">makeYoYCapFloor</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">Market</a> &gt; &amp;market, string indexName, Period term, Real strike, const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;convention, <a class="el" href="classbool.html">bool</a> singleCurve, <a class="el" href="classbool.html">bool</a> fromZero, const std::string &amp;expDiscountCurve, const <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &amp;key)</td></tr>
<tr class="memdesc:a2abfe3c79d6b13d1865f82b9bae2ea65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65">More...</a><br /></td></tr>
<tr class="separator:a2abfe3c79d6b13d1865f82b9bae2ea65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d0c14ef75a713f89ee3117e3c0f304"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304">populateShiftSizes</a> (const <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &amp;key, QuantLib::Real parRate, const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market.html">ore::analytics::ScenarioSimMarket</a> &gt; &amp;simMarket)</td></tr>
<tr class="memdesc:a25d0c14ef75a713f89ee3117e3c0f304"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate <code>shiftSizes_</code> for <code>key</code> given the implied fair par rate <code>parRate</code>.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304">More...</a><br /></td></tr>
<tr class="separator:a25d0c14ef75a713f89ee3117e3c0f304"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6e6cc380f7abdcf2e6796314ea24ea2d"><td class="memItemLeft" align="right" valign="top">QuantLib::Date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a></td></tr>
<tr class="memdesc:a6e6cc380f7abdcf2e6796314ea24ea2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">As of date for the calculation of the par sensitivities.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">More...</a><br /></td></tr>
<tr class="separator:a6e6cc380f7abdcf2e6796314ea24ea2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30e27b616a36ee9a9ca6cf1ff5e27ff0"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">ore::analytics::ScenarioSimMarketParameters</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a></td></tr>
<tr class="memdesc:a30e27b616a36ee9a9ca6cf1ff5e27ff0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulation market parameters.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">More...</a><br /></td></tr>
<tr class="separator:a30e27b616a36ee9a9ca6cf1ff5e27ff0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a184eac3915c598c873e4d46604638085"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html">ore::analytics::SensitivityScenarioData</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a></td></tr>
<tr class="memdesc:a184eac3915c598c873e4d46604638085"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sensitivity data.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">More...</a><br /></td></tr>
<tr class="separator:a184eac3915c598c873e4d46604638085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2afaeb949d17f1fc1f707c5ff3980648"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abe637de864ef34aa2842b582cf4680b4">ParContainer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">parSensi_</a></td></tr>
<tr class="memdesc:a2afaeb949d17f1fc1f707c5ff3980648"><td class="mdescLeft">&#160;</td><td class="mdescRight">sensitivity of par rates w.r.t. raw rate shifts (including optionlet/cap volatility)  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">More...</a><br /></td></tr>
<tr class="separator:a2afaeb949d17f1fc1f707c5ff3980648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0ef5ade6c2998be146020771cfca68c"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, boost::shared_ptr&lt; Instrument &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a></td></tr>
<tr class="memdesc:af0ef5ade6c2998be146020771cfca68c"><td class="mdescLeft">&#160;</td><td class="mdescRight">par helpers (all except cap/floors)  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">More...</a><br /></td></tr>
<tr class="separator:af0ef5ade6c2998be146020771cfca68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853d60aaf4f6828fc8e5c14d05e5235e"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, boost::shared_ptr&lt; QuantLib::CapFloor &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a></td></tr>
<tr class="memdesc:a853d60aaf4f6828fc8e5c14d05e5235e"><td class="mdescLeft">&#160;</td><td class="mdescRight">par helpers: IR cap / floors  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">More...</a><br /></td></tr>
<tr class="separator:a853d60aaf4f6828fc8e5c14d05e5235e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d4e59f5de6fbf2e1eb409d8b151378b"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt; YieldTermStructure &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">parCapsYts_</a></td></tr>
<tr class="separator:a0d4e59f5de6fbf2e1eb409d8b151378b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f99fe37fb27e159c5d2a0b43a48a33a"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt; OptionletVolatilityStructure &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9f99fe37fb27e159c5d2a0b43a48a33a">parCapsVts_</a></td></tr>
<tr class="separator:a9f99fe37fb27e159c5d2a0b43a48a33a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a06da0074bff9283d5f77ddf26bf30"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, boost::shared_ptr&lt; QuantLib::YoYInflationCapFloor &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a></td></tr>
<tr class="memdesc:af5a06da0074bff9283d5f77ddf26bf30"><td class="mdescLeft">&#160;</td><td class="mdescRight">par helpers: YoY cap / floors  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">More...</a><br /></td></tr>
<tr class="separator:af5a06da0074bff9283d5f77ddf26bf30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887e465357d20ecffc6a1398c6f5bde3"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt; YieldTermStructure &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">parYoYCapsYts_</a></td></tr>
<tr class="separator:a887e465357d20ecffc6a1398c6f5bde3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6763fdfe285799e931f1c6ac6748b4"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt; YoYInflationIndex &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">parYoYCapsIndex_</a></td></tr>
<tr class="separator:acd6763fdfe285799e931f1c6ac6748b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155bc22e0fe725d43307ccc2e054e0ef"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt; QuantExt::YoYOptionletVolatilitySurface &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a155bc22e0fe725d43307ccc2e054e0ef">parYoYCapsVts_</a></td></tr>
<tr class="separator:a155bc22e0fe725d43307ccc2e054e0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3263b4a2fbc68cc2e189cd60e9a41f"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a></td></tr>
<tr class="memdesc:a0b3263b4a2fbc68cc2e189cd60e9a41f"><td class="mdescLeft">&#160;</td><td class="mdescRight">par instrument pillars  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">More...</a><br /></td></tr>
<tr class="separator:a0b3263b4a2fbc68cc2e189cd60e9a41f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785a43ae042d5fc2f52c58e0976770c6"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a785a43ae042d5fc2f52c58e0976770c6">capFloorPillars_</a></td></tr>
<tr class="separator:a785a43ae042d5fc2f52c58e0976770c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1385c53b3a28ee92bbcfe4c04d3d3071"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a1385c53b3a28ee92bbcfe4c04d3d3071">cdsPillars_</a></td></tr>
<tr class="separator:a1385c53b3a28ee92bbcfe4c04d3d3071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944d37c899c8a1afb101593a950193b3"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a944d37c899c8a1afb101593a950193b3">equityForecastCurvePillars_</a></td></tr>
<tr class="separator:a944d37c899c8a1afb101593a950193b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bb9a21fd7dc29857585336f1d836bbd"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8bb9a21fd7dc29857585336f1d836bbd">zeroInflationPillars_</a></td></tr>
<tr class="separator:a8bb9a21fd7dc29857585336f1d836bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae898f927b6055a2da6c59768011d30"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afae898f927b6055a2da6c59768011d30">yoyInflationPillars_</a></td></tr>
<tr class="separator:afae898f927b6055a2da6c59768011d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43f8b451a81dae3c7af0c9f0a5fd1b5"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, std::vector&lt; Period &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa43f8b451a81dae3c7af0c9f0a5fd1b5">yoyCapFloorPillars_</a></td></tr>
<tr class="separator:aa43f8b451a81dae3c7af0c9f0a5fd1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc4986cd0f498445c0a67abf01e9eb7"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a></td></tr>
<tr class="memdesc:a6dc4986cd0f498445c0a67abf01e9eb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of (raw) risk factors on which a par helper depends  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">More...</a><br /></td></tr>
<tr class="separator:a6dc4986cd0f498445c0a67abf01e9eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a177b5b16249c7f9ff63e839d862d16d7"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a></td></tr>
<tr class="separator:a177b5b16249c7f9ff63e839d862d16d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32b71243dbbe327ebf21fbb3b27c3df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a></td></tr>
<tr class="separator:af32b71243dbbe327ebf21fbb3b27c3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1da903fae63cef2935f81b313314f17"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a></td></tr>
<tr class="separator:aa1da903fae63cef2935f81b313314f17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21cafd2d3db8b559b5ffef225471cd41"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a></td></tr>
<tr class="memdesc:a21cafd2d3db8b559b5ffef225471cd41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of risk factor types disabled for this instance of <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html" title="Par Sensitivity Analysis.">ParSensitivityAnalysis</a>.  <a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">More...</a><br /></td></tr>
<tr class="separator:a21cafd2d3db8b559b5ffef225471cd41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74eddecd72acf99e557b7682740f3b53"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, std::pair&lt; QuantLib::Real, QuantLib::Real &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a74eddecd72acf99e557b7682740f3b53">shiftSizes_</a></td></tr>
<tr class="separator:a74eddecd72acf99e557b7682740f3b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c2a54863b06e0f0b96160d82f5f7e26"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a></td></tr>
<tr class="separator:a4c2a54863b06e0f0b96160d82f5f7e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ae24b626b9a608b24efb06663b975b1c2"><td class="memItemLeft" align="right" valign="top">static std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ae24b626b9a608b24efb06663b975b1c2">parTypes_</a></td></tr>
<tr class="separator:ae24b626b9a608b24efb06663b975b1c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Par Sensitivity Analysis. </p>
<p >This class adds par sensitivity conversion to the base class functionality </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00057">57</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="abe637de864ef34aa2842b582cf4680b4" name="abe637de864ef34aa2842b582cf4680b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe637de864ef34aa2842b582cf4680b4">&#9670;&#160;</a></span>ParContainer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;std::pair&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>&gt;, Real&gt; <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abe637de864ef34aa2842b582cf4680b4">ParContainer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00059">59</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a00b6a31b896194f07ec98eb458be8f6d" name="a00b6a31b896194f07ec98eb458be8f6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b6a31b896194f07ec98eb458be8f6d">&#9670;&#160;</a></span>ParSensitivityAnalysis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html">ParSensitivityAnalysis</a> </td>
          <td>(</td>
          <td class="paramtype">const QuantLib::Date &amp;&#160;</td>
          <td class="paramname"><em>asof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">ore::analytics::ScenarioSimMarketParameters</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>simMarketParams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html">ore::analytics::SensitivityScenarioData</a> &amp;&#160;</td>
          <td class="paramname"><em>sensitivityData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&#160;</td>
          <td class="paramname"><em>marketConfiguration</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>continueOnError</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>typesDisabled</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l00130">130</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>    : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>(<a class="code hl_function" href="test_2scenarioshiftcalculator_8cpp.html#a652b8805d9b88185e25574d4820660c4">asof</a>), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>(simMarketParams), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>(sensitivityData),</div>
<div class="line"><span class="lineno">  136</span>      <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>(marketConfiguration), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>(continueOnError), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>(<a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afbc2e170697d8df9e2e11aaa9c200816">typesDisabled</a>) {</div>
<div class="line"><span class="lineno">  137</span>    <span class="keyword">const</span> boost::shared_ptr&lt;Conventions&gt;&amp; conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno">  138</span>    QL_REQUIRE(conventions != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;conventions are empty&quot;</span>);</div>
<div class="line"><span class="lineno">  139</span>    <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780">createParInstruments</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  140</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a03ca088a3dab4c18db2c047232a89780"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780">ore::analytics::ParSensitivityAnalysis::createParInstruments</a></div><div class="ttdeci">void createParInstruments(const boost::shared_ptr&lt; ore::analytics::ScenarioSimMarket &gt; &amp;simMarket)</div><div class="ttdoc">Create par instruments.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l00142">parsensitivityanalysis.cpp:142</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a177b5b16249c7f9ff63e839d862d16d7"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">ore::analytics::ParSensitivityAnalysis::marketConfiguration_</a></div><div class="ttdeci">std::string marketConfiguration_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00213">parsensitivityanalysis.hpp:213</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a184eac3915c598c873e4d46604638085"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">ore::analytics::ParSensitivityAnalysis::sensitivityData_</a></div><div class="ttdeci">ore::analytics::SensitivityScenarioData sensitivityData_</div><div class="ttdoc">Sensitivity data.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00193">parsensitivityanalysis.hpp:193</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a21cafd2d3db8b559b5ffef225471cd41"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">ore::analytics::ParSensitivityAnalysis::typesDisabled_</a></div><div class="ttdeci">std::set&lt; ore::analytics::RiskFactorKey::KeyType &gt; typesDisabled_</div><div class="ttdoc">Set of risk factor types disabled for this instance of ParSensitivityAnalysis.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00220">parsensitivityanalysis.hpp:220</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a30e27b616a36ee9a9ca6cf1ff5e27ff0"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">ore::analytics::ParSensitivityAnalysis::simMarketParams_</a></div><div class="ttdeci">boost::shared_ptr&lt; ore::analytics::ScenarioSimMarketParameters &gt; simMarketParams_</div><div class="ttdoc">Simulation market parameters.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00191">parsensitivityanalysis.hpp:191</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a6e6cc380f7abdcf2e6796314ea24ea2d"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">ore::analytics::ParSensitivityAnalysis::asof_</a></div><div class="ttdeci">QuantLib::Date asof_</div><div class="ttdoc">As of date for the calculation of the par sensitivities.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00189">parsensitivityanalysis.hpp:189</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_af32b71243dbbe327ebf21fbb3b27c3df"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">ore::analytics::ParSensitivityAnalysis::continueOnError_</a></div><div class="ttdeci">bool continueOnError_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00214">parsensitivityanalysis.hpp:214</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_afbc2e170697d8df9e2e11aaa9c200816"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afbc2e170697d8df9e2e11aaa9c200816">ore::analytics::ParSensitivityAnalysis::typesDisabled</a></div><div class="ttdeci">const std::set&lt; ore::analytics::RiskFactorKey::KeyType &gt; &amp; typesDisabled() const</div><div class="ttdoc">Return the set of key types disabled for this instance of ParSensitivityAnalysis.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00100">parsensitivityanalysis.hpp:100</a></div></div>
<div class="ttc" id="atest_2scenarioshiftcalculator_8cpp_html_a652b8805d9b88185e25574d4820660c4"><div class="ttname"><a href="test_2scenarioshiftcalculator_8cpp.html#a652b8805d9b88185e25574d4820660c4">asof</a></div><div class="ttdeci">Date asof(14, Jun, 2018)</div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a00b6a31b896194f07ec98eb458be8f6d_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a00b6a31b896194f07ec98eb458be8f6d_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a00b6a31b896194f07ec98eb458be8f6d_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a00b6a31b896194f07ec98eb458be8f6d_cgraph">
<area shape="rect" title="Constructor." alt="" coords="5,601,156,626"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="204,601,351,626"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe" title=" " alt="" coords="405,5,635,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a335c3820a9ad66b4114eae1b63f57837" title=" " alt="" coords="435,69,605,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46" title=" " alt="" coords="407,133,633,173"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f" title=" " alt="" coords="399,197,641,237"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82" title=" " alt="" coords="408,261,632,301"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335" title="Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity." alt="" coords="467,427,573,453"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="712,402,877,427"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26" title="Create CDS for implying par rate sensitivity from Hazard Rate sensitivity." alt="" coords="479,1250,561,1275"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae" title="Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="432,575,608,601"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8" title="Create Deposit for implying par rate sensitivity from zero rate sensitivity." alt="" coords="471,674,569,699"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307" title="Create FRA for implying par rate sensitivity from zero rate sensitivity." alt="" coords="480,477,560,502"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6" title="Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity." alt="" coords="463,625,577,650"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a" title="Create OIS Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="482,526,558,551"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8" title="Create Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="477,802,563,827"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98" title="Create Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="445,326,595,351"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65" title="Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity." alt="" coords="455,1299,585,1325"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e" title="Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity." alt="" coords="443,1349,597,1374"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f" title="Create Zero Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="443,1398,597,1423"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276" title=" " alt="" coords="410,1448,630,1488"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73" title=" " alt="" coords="407,1513,633,1567"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7" title=" " alt="" coords="417,1591,623,1646"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e" title=" " alt="" coords="415,1670,625,1725"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a13afd8ff6e8e79e157b41c54db8b28f0" title=" " alt="" coords="699,1147,890,1187"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a8786a1690bc26d6512e31f517befea73" title=" " alt="" coords="694,1211,895,1251"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a79a5bf709a83cd99efa83faf7a6f0d6f" title=" " alt="" coords="699,1275,890,1315"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a4f6863a09ad0ad21659f5fcf32b418e5" title=" " alt="" coords="699,1339,890,1379"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a1156ccc1f63793734fe12a4535c6f68f" title=" " alt="" coords="697,1403,893,1443"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#aef79fd00dc96736bca343d0192c26468" title=" " alt="" coords="699,1467,890,1507"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b" title=" " alt="" coords="712,451,877,477"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f" title=" " alt="" coords="709,501,880,526"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga2f0695fe62430369b6acca7976d7be97" title=" " alt="" coords="707,550,883,575"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="759,599,831,625"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gaf17e7976e4fe2449bb4e226ee19c0fd9" title=" " alt="" coords="703,649,886,674"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html#aae4aedf88e432de744f6f0ae703bde15" title=" " alt="" coords="689,699,900,739"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#affc41d722d1120518f9948d788431056" title=" " alt="" coords="700,763,889,803"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a662efe4525f29a7b64e3e50417016fb6" title=" " alt="" coords="694,827,895,867"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#ac2f3a56b9130195610d7b30c0f087caa" title=" " alt="" coords="697,891,892,931"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a02282940d3091865100dcff65c695f9b" title=" " alt="" coords="703,955,887,995"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a12463e6245949bc4477529c791f31279" title=" " alt="" coords="703,1019,887,1059"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#aa27d877e3cfb8777d52f2ae720d062d3" title=" " alt="" coords="701,1083,888,1123"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="743,1531,846,1557"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a31afff2ccfbd52b6333575ee40c23504" title=" " alt="" coords="709,1581,880,1621"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a7bd51a0a7da6c232fa3bcc70045d501d" title=" " alt="" coords="708,1645,881,1685"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a0617466d18a23a375cc3d45ec9102b33" title=" " alt="" coords="709,1709,880,1749"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32" title=" " alt="" coords="707,1773,882,1813"/>
</map>
</div>

</div>
</div>
<a id="ada299256f8f47d1874acd87e24d4ceaf" name="ada299256f8f47d1874acd87e24d4ceaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada299256f8f47d1874acd87e24d4ceaf">&#9670;&#160;</a></span>~ParSensitivityAnalysis()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html">ParSensitivityAnalysis</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00069">69</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a15667fb454f6579571357dcefa65a559" name="a15667fb454f6579571357dcefa65a559"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15667fb454f6579571357dcefa65a559">&#9670;&#160;</a></span>computeParInstrumentSensitivities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void computeParInstrumentSensitivities </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market.html">ore::analytics::ScenarioSimMarket</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>simMarket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute par instrument sensitivities. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l00697">697</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  697</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  698</span> </div>
<div class="line"><span class="lineno">  699</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Cache base scenario par rates and flat vols&quot;</span>);</div>
<div class="line"><span class="lineno">  700</span> </div>
<div class="line"><span class="lineno">  701</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty()) {</div>
<div class="line"><span class="lineno">  702</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Relevant risk factors not provided&quot;</span>);</div>
<div class="line"><span class="lineno">  703</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  704</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Relevant risk factors provided:&quot;</span>);</div>
<div class="line"><span class="lineno">  705</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; rf : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>)</div>
<div class="line"><span class="lineno">  706</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Relevant risk factor &quot;</span> &lt;&lt; rf);</div>
<div class="line"><span class="lineno">  707</span>    }</div>
<div class="line"><span class="lineno">  708</span> </div>
<div class="line"><span class="lineno">  709</span>    <span class="comment">// remove todays fixings from relevant indices for the scope of this method</span></div>
<div class="line"><span class="lineno">  710</span>    <span class="keyword">struct </span>TodaysFixingsRemover {</div>
<div class="line"><span class="lineno">  711</span>        TodaysFixingsRemover(<span class="keyword">const</span> std::set&lt;std::string&gt;&amp; names) : today_(Settings::instance().evaluationDate()) {</div>
<div class="line"><span class="lineno">  712</span>            Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno">  713</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; n : names) {</div>
<div class="line"><span class="lineno">  714</span>                TimeSeries&lt;Real&gt; t = IndexManager::instance().getHistory(n);</div>
<div class="line"><span class="lineno">  715</span>                <span class="keywordflow">if</span> (t[today] != Null&lt;Real&gt;()) {</div>
<div class="line"><span class="lineno">  716</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;removing todays fixing (&quot;</span> &lt;&lt; std::setprecision(6) &lt;&lt; t[today] &lt;&lt; <span class="stringliteral">&quot;) from &quot;</span> &lt;&lt; n);</div>
<div class="line"><span class="lineno">  717</span>                    savedFixings_.insert(std::make_pair(n, t[today]));</div>
<div class="line"><span class="lineno">  718</span>                    t[today] = Null&lt;Real&gt;();</div>
<div class="line"><span class="lineno">  719</span>                    IndexManager::instance().setHistory(n, t);</div>
<div class="line"><span class="lineno">  720</span>                }</div>
<div class="line"><span class="lineno">  721</span>            }</div>
<div class="line"><span class="lineno">  722</span>        }</div>
<div class="line"><span class="lineno">  723</span>        ~TodaysFixingsRemover() {</div>
<div class="line"><span class="lineno">  724</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : savedFixings_) {</div>
<div class="line"><span class="lineno">  725</span>                TimeSeries&lt;Real&gt; t = IndexManager::instance().getHistory(p.first);</div>
<div class="line"><span class="lineno">  726</span>                t[today_] = p.second;</div>
<div class="line"><span class="lineno">  727</span>                IndexManager::instance().setHistory(p.first, t);</div>
<div class="line"><span class="lineno">  728</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;restored todays fixing (&quot;</span> &lt;&lt; std::setprecision(6) &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;) for &quot;</span> &lt;&lt; p.first);</div>
<div class="line"><span class="lineno">  729</span>            }</div>
<div class="line"><span class="lineno">  730</span>        }</div>
<div class="line"><span class="lineno">  731</span>        <span class="keyword">const</span> Date today_;</div>
<div class="line"><span class="lineno">  732</span>        std::set&lt;std::pair&lt;std::string, Real&gt;&gt; savedFixings_;</div>
<div class="line"><span class="lineno">  733</span>    };</div>
<div class="line"><span class="lineno">  734</span>    TodaysFixingsRemover fixingRemover(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>);</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    <span class="comment">// We must have a ShiftScenarioGenerator</span></div>
<div class="line"><span class="lineno">  737</span>    boost::shared_ptr&lt;ScenarioGenerator&gt; simMarketScenGen = simMarket-&gt;scenarioGenerator();</div>
<div class="line"><span class="lineno">  738</span>    boost::shared_ptr&lt;ShiftScenarioGenerator&gt; scenarioGenerator = </div>
<div class="line"><span class="lineno">  739</span>        boost::dynamic_pointer_cast&lt;ShiftScenarioGenerator&gt;(simMarketScenGen);</div>
<div class="line"><span class="lineno">  740</span>    </div>
<div class="line"><span class="lineno">  741</span>    simMarket-&gt;reset();</div>
<div class="line"><span class="lineno">  742</span>    scenarioGenerator-&gt;reset();</div>
<div class="line"><span class="lineno">  743</span>    simMarket-&gt;update(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>);</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty())</div>
<div class="line"><span class="lineno">  746</span>        <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aaf3b4fed233991ba67fc00a89e8fcd57">augmentRelevantRiskFactors</a>();</div>
<div class="line"><span class="lineno">  747</span>    <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780">createParInstruments</a>(simMarket);</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>    map&lt;RiskFactorKey, Real&gt; parRatesBase, parCapVols; <span class="comment">// for both ir and yoy caps</span></div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>) {</div>
<div class="line"><span class="lineno">  752</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  753</span>            Real parRate = impliedQuote(p.second);</div>
<div class="line"><span class="lineno">  754</span>            parRatesBase[p.first] = parRate;</div>
<div class="line"><span class="lineno">  755</span>            </div>
<div class="line"><span class="lineno">  756</span>            <span class="comment">// Populate zero and par shift size for the current risk factor</span></div>
<div class="line"><span class="lineno">  757</span>            <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304">populateShiftSizes</a>(p.first, parRate, simMarket);</div>
<div class="line"><span class="lineno">  758</span> </div>
<div class="line"><span class="lineno">  759</span>        } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  760</span>            QL_FAIL(<span class="stringliteral">&quot;could not imply quote for par helper &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; e.what());</div>
<div class="line"><span class="lineno">  761</span>        }</div>
<div class="line"><span class="lineno">  762</span>    }</div>
<div class="line"><span class="lineno">  763</span> </div>
<div class="line"><span class="lineno">  764</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>) {</div>
<div class="line"><span class="lineno">  765</span>        </div>
<div class="line"><span class="lineno">  766</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">parCapsYts_</a>.count(c.first) &gt; 0,</div>
<div class="line"><span class="lineno">  767</span>                   <span class="stringliteral">&quot;computeParInstrumentSensitivities(): no cap yts found for key &quot;</span> &lt;&lt; c.first);</div>
<div class="line"><span class="lineno">  768</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9f99fe37fb27e159c5d2a0b43a48a33a">parCapsVts_</a>.count(c.first) &gt; 0,</div>
<div class="line"><span class="lineno">  769</span>                   <span class="stringliteral">&quot;computeParInstrumentSensitivities(): no cap vts found for key &quot;</span> &lt;&lt; c.first);</div>
<div class="line"><span class="lineno">  770</span> </div>
<div class="line"><span class="lineno">  771</span>        Real price = c.second-&gt;NPV();</div>
<div class="line"><span class="lineno">  772</span>        <a class="code hl_enumvalueRef" href="../ored/namespaceore_1_1data.html#a1dd3178717c03aef7d6851a3dfd92207ad4192ca9679d38110983141b896eebbf">Volatility</a> parVol = impliedVolatility&lt;QuantLib::CapFloor&gt;(*c.second, price, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">parCapsYts_</a>.at(c.first), 0.01,</div>
<div class="line"><span class="lineno">  773</span>                                                                  <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9f99fe37fb27e159c5d2a0b43a48a33a">parCapsVts_</a>.at(c.first)-&gt;volatilityType(),</div>
<div class="line"><span class="lineno">  774</span>                                                                  <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9f99fe37fb27e159c5d2a0b43a48a33a">parCapsVts_</a>.at(c.first)-&gt;displacement());</div>
<div class="line"><span class="lineno">  775</span>        parCapVols[c.first] = parVol;</div>
<div class="line"><span class="lineno">  776</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Fair implied cap volatility for key &quot;</span> &lt;&lt; c.first &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; </div>
<div class="line"><span class="lineno">  777</span>            std::fixed &lt;&lt; std::setprecision(12) &lt;&lt; parVol &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  778</span> </div>
<div class="line"><span class="lineno">  779</span>        <span class="comment">// Populate zero and par shift size for the current risk factor</span></div>
<div class="line"><span class="lineno">  780</span>        <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304">populateShiftSizes</a>(c.first, parVol, simMarket);</div>
<div class="line"><span class="lineno">  781</span>    }</div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>) {</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">parYoYCapsYts_</a>.count(c.first) &gt; 0,</div>
<div class="line"><span class="lineno">  786</span>                   <span class="stringliteral">&quot;computeParInstrumentSensitivities(): no cap yts found for key &quot;</span> &lt;&lt; c.first);</div>
<div class="line"><span class="lineno">  787</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">parYoYCapsIndex_</a>.count(c.first) &gt; 0,</div>
<div class="line"><span class="lineno">  788</span>                   <span class="stringliteral">&quot;computeParInstrumentSensitivities(): no cap index found for key &quot;</span> &lt;&lt; c.first);</div>
<div class="line"><span class="lineno">  789</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a155bc22e0fe725d43307ccc2e054e0ef">parYoYCapsVts_</a>.count(c.first) &gt; 0,</div>
<div class="line"><span class="lineno">  790</span>                   <span class="stringliteral">&quot;computeParInstrumentSensitivities(): no cap vts found for key &quot;</span> &lt;&lt; c.first);</div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>        Real price = c.second-&gt;NPV();</div>
<div class="line"><span class="lineno">  793</span>        <a class="code hl_enumvalueRef" href="../ored/namespaceore_1_1data.html#a1dd3178717c03aef7d6851a3dfd92207ad4192ca9679d38110983141b896eebbf">Volatility</a> parVol = impliedVolatility&lt;QuantLib::YoYInflationCapFloor, QuantLib::YoYInflationIndex&gt;(</div>
<div class="line"><span class="lineno">  794</span>            *c.second, price, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">parYoYCapsYts_</a>.at(c.first), 0.01, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a155bc22e0fe725d43307ccc2e054e0ef">parYoYCapsVts_</a>.at(c.first)-&gt;volatilityType(),</div>
<div class="line"><span class="lineno">  795</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a155bc22e0fe725d43307ccc2e054e0ef">parYoYCapsVts_</a>.at(c.first)-&gt;displacement(), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">parYoYCapsIndex_</a>.at(c.first));</div>
<div class="line"><span class="lineno">  796</span>        parCapVols[c.first] = parVol;</div>
<div class="line"><span class="lineno">  797</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Fair implied yoy cap volatility for key &quot;</span> &lt;&lt; c.first &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno">  798</span>            std::fixed &lt;&lt; std::setprecision(12) &lt;&lt; parVol &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>        <span class="comment">// Populate zero and par shift size for the current risk factor</span></div>
<div class="line"><span class="lineno">  801</span>        <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304">populateShiftSizes</a>(c.first, parVol, simMarket);</div>
<div class="line"><span class="lineno">  802</span>    }</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Caching base scenario par rates and float vols done.&quot;</span>);</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span><span class="comment">    /****************************************************************</span></div>
<div class="line"><span class="lineno">  807</span><span class="comment">     * Discount curve instrument fair rate sensitivity to zero shifts</span></div>
<div class="line"><span class="lineno">  808</span><span class="comment">     * Index curve instrument fair rate sensitivity to zero shifts</span></div>
<div class="line"><span class="lineno">  809</span><span class="comment">     * Cap/Floor flat vol sensitivity to optionlet vol shifts</span></div>
<div class="line"><span class="lineno">  810</span><span class="comment">     *</span></div>
<div class="line"><span class="lineno">  811</span><span class="comment">     * Step 3:</span></div>
<div class="line"><span class="lineno">  812</span><span class="comment">     * - Apply all single up-shift scenarios,</span></div>
<div class="line"><span class="lineno">  813</span><span class="comment">     * - Compute respective fair par rates and flat vols</span></div>
<div class="line"><span class="lineno">  814</span><span class="comment">     * - Compute par rate / flat vol sensitivities</span></div>
<div class="line"><span class="lineno">  815</span><span class="comment">     */</span></div>
<div class="line"><span class="lineno">  816</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Compute par rate and flat vol sensitivities&quot;</span>);</div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>    vector&lt;ShiftScenarioGenerator::ScenarioDescription&gt; desc = scenarioGenerator-&gt;scenarioDescriptions();</div>
<div class="line"><span class="lineno">  819</span>    QL_REQUIRE(desc.size() == scenarioGenerator-&gt;samples(), <span class="stringliteral">&quot;descriptions size &quot;</span> &lt;&lt; desc.size() &lt;&lt;</div>
<div class="line"><span class="lineno">  820</span>        <span class="stringliteral">&quot; does not match samples &quot;</span> &lt;&lt; scenarioGenerator-&gt;samples());</div>
<div class="line"><span class="lineno">  821</span> </div>
<div class="line"><span class="lineno">  822</span>    std::set&lt;RiskFactorKey&gt; parKeysCheck, parKeysNonZero;</div>
<div class="line"><span class="lineno">  823</span>    std::set&lt;RiskFactorKey&gt; rawKeysCheck, rawKeysNonZero;</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>) {</div>
<div class="line"><span class="lineno">  826</span>    parKeysCheck.insert(p.first);</div>
<div class="line"><span class="lineno">  827</span>    }</div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p: <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>) {</div>
<div class="line"><span class="lineno">  830</span>    parKeysCheck.insert(p.first);</div>
<div class="line"><span class="lineno">  831</span>    }</div>
<div class="line"><span class="lineno">  832</span> </div>
<div class="line"><span class="lineno">  833</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p: <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>) {</div>
<div class="line"><span class="lineno">  834</span>    parKeysCheck.insert(p.first);</div>
<div class="line"><span class="lineno">  835</span>    }</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>    <span class="keywordflow">for</span> (Size i = 1; i &lt; scenarioGenerator-&gt;samples(); ++i) {</div>
<div class="line"><span class="lineno">  838</span> </div>
<div class="line"><span class="lineno">  839</span>        simMarket-&gt;update(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>);</div>
<div class="line"><span class="lineno">  840</span> </div>
<div class="line"><span class="lineno">  841</span>        <span class="comment">// use single &quot;UP&quot; shift scenarios only, use only scenarios relevant for par instruments,</span></div>
<div class="line"><span class="lineno">  842</span>        <span class="comment">// use relevant scenarios only, if specified</span></div>
<div class="line"><span class="lineno">  843</span>        <span class="comment">// ignore risk factor types that have been disabled</span></div>
<div class="line"><span class="lineno">  844</span>        <span class="keywordflow">if</span> (desc[i].type() != <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_shift_scenario_generator_1_1_scenario_description.html#a1d1cfd8ffb84e947f82999c682b666a7a258f49887ef8d14ac268c92b02503aaa">ShiftScenarioGenerator::ScenarioDescription::Type::Up</a> ||</div>
<div class="line"><span class="lineno">  845</span>            !<a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e">isParType</a>(desc[i].key1().keytype) || <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(desc[i].key1().keytype) == 1 ||</div>
<div class="line"><span class="lineno">  846</span>            !(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() || <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(desc[i].key1()) != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end()))</div>
<div class="line"><span class="lineno">  847</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  848</span> </div>
<div class="line"><span class="lineno">  849</span>        <span class="comment">// Since we are not using ValuationEngine we need to manually perform the trade updates here</span></div>
<div class="line"><span class="lineno">  850</span>        <span class="comment">// TODO - explore means of utilising valuation engine</span></div>
<div class="line"><span class="lineno">  851</span>        <span class="keywordflow">if</span> (ObservationMode::instance().mode() == <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911abcfaccebf745acfd5e75351095a5394a">ObservationMode::Mode::Disable</a>) {</div>
<div class="line"><span class="lineno">  852</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>)</div>
<div class="line"><span class="lineno">  853</span>                it.second-&gt;deepUpdate();</div>
<div class="line"><span class="lineno">  854</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>)</div>
<div class="line"><span class="lineno">  855</span>                it.second-&gt;deepUpdate();</div>
<div class="line"><span class="lineno">  856</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>)</div>
<div class="line"><span class="lineno">  857</span>                it.second-&gt;deepUpdate();</div>
<div class="line"><span class="lineno">  858</span>        }</div>
<div class="line"><span class="lineno">  859</span> </div>
<div class="line"><span class="lineno">  860</span>        rawKeysCheck.insert(desc[i].key1());</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>        <span class="comment">// Get the absolute shift size and skip if close to zero</span></div>
<div class="line"><span class="lineno">  863</span> </div>
<div class="line"><span class="lineno">  864</span>        Real shiftSize = <a class="code hl_function" href="namespaceore_1_1analytics.html#a6f28870e4c47d867aa859db7fb3c2fed">getShiftSize</a>(desc[i].key1(), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>, simMarket);</div>
<div class="line"><span class="lineno">  865</span> </div>
<div class="line"><span class="lineno">  866</span>        <span class="keywordflow">if</span> (<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(shiftSize, 0.0)) {</div>
<div class="line"><span class="lineno">  867</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<span class="stringliteral">&quot;Shift size for &quot;</span> &lt;&lt; desc[i].key1() &lt;&lt; <span class="stringliteral">&quot; is zero, skipping&quot;</span>);</div>
<div class="line"><span class="lineno">  868</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  869</span>        }</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>        <span class="comment">// process par helpers</span></div>
<div class="line"><span class="lineno">  872</span> </div>
<div class="line"><span class="lineno">  873</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>) {</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>            <span class="comment">// skip if par helper has no sensi to zero risk factor (except the special treatment below kicks in)</span></div>
<div class="line"><span class="lineno">  876</span> </div>
<div class="line"><span class="lineno">  877</span>            <span class="keywordflow">if</span> (p.second-&gt;isCalculated() &amp;&amp;</div>
<div class="line"><span class="lineno">  878</span>                (p.first.keytype != <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">RiskFactorKey::KeyType::SurvivalProbability</a> || p.first != desc[i].key1()))</div>
<div class="line"><span class="lineno">  879</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  880</span> </div>
<div class="line"><span class="lineno">  881</span>            <span class="comment">// compute fair and base quotes</span></div>
<div class="line"><span class="lineno">  882</span> </div>
<div class="line"><span class="lineno">  883</span>            Real fair = impliedQuote(p.second);</div>
<div class="line"><span class="lineno">  884</span>            <span class="keyword">auto</span> base = parRatesBase.find(p.first);</div>
<div class="line"><span class="lineno">  885</span>            QL_REQUIRE(base != parRatesBase.end(), <span class="stringliteral">&quot;internal error: did not find parRatesBase[&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><span class="lineno">  886</span> </div>
<div class="line"><span class="lineno">  887</span>            Real tmp = (fair - base-&gt;second) / shiftSize;</div>
<div class="line"><span class="lineno">  888</span> </div>
<div class="line"><span class="lineno">  889</span>            <span class="comment">// special treatments for certain risk factors</span></div>
<div class="line"><span class="lineno">  890</span> </div>
<div class="line"><span class="lineno">  891</span>            <span class="comment">// for curves with survival probabilities going to zero quickly we might see a sensitivity</span></div>
<div class="line"><span class="lineno">  892</span>            <span class="comment">// that is close to zero, which we sanitise here in order to prevent the Jacobi matrix</span></div>
<div class="line"><span class="lineno">  893</span>            <span class="comment">// getting ill-conditioned or even singular</span></div>
<div class="line"><span class="lineno">  894</span> </div>
<div class="line"><span class="lineno">  895</span>            <span class="keywordflow">if</span> (p.first.keytype == <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">RiskFactorKey::KeyType::SurvivalProbability</a> &amp;&amp; p.first == desc[i].key1() &amp;&amp;</div>
<div class="line"><span class="lineno">  896</span>                std::abs(tmp) &lt; 0.01) {</div>
<div class="line"><span class="lineno">  897</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Setting Diagonal Default Curve Sensi &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; w.r.t. &quot;</span> &lt;&lt; desc[i].key1()</div>
<div class="line"><span class="lineno">  898</span>                                                             &lt;&lt; <span class="stringliteral">&quot; to 0.01 (got &quot;</span> &lt;&lt; tmp &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  899</span>                tmp = 0.01;</div>
<div class="line"><span class="lineno">  900</span>            }</div>
<div class="line"><span class="lineno">  901</span> </div>
<div class="line"><span class="lineno">  902</span>            <span class="comment">// YoY diagnoal entries are 1.0</span></div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>            <span class="keywordflow">if</span> (p.first.keytype == <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401">RiskFactorKey::KeyType::YoYInflationCurve</a> &amp;&amp; p.first == desc[i].key1() &amp;&amp;</div>
<div class="line"><span class="lineno">  905</span>                <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(tmp, 0.0)) {</div>
<div class="line"><span class="lineno">  906</span>                tmp = 1.0;</div>
<div class="line"><span class="lineno">  907</span>            }</div>
<div class="line"><span class="lineno">  908</span> </div>
<div class="line"><span class="lineno">  909</span>            <span class="comment">// write sensitivity</span></div>
<div class="line"><span class="lineno">  910</span> </div>
<div class="line"><span class="lineno">  911</span>            writeSensitivity(p.first, desc[i].key1(), tmp, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">parSensi_</a>, parKeysNonZero, rawKeysNonZero);</div>
<div class="line"><span class="lineno">  912</span>        }</div>
<div class="line"><span class="lineno">  913</span> </div>
<div class="line"><span class="lineno">  914</span>        <span class="comment">// process par caps</span></div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>) {</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>            <span class="keywordflow">if</span> (p.second-&gt;isCalculated() &amp;&amp; p.first != desc[i].key1())</div>
<div class="line"><span class="lineno">  919</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  920</span> </div>
<div class="line"><span class="lineno">  921</span>            Handle&lt;OptionletVolatilityStructure&gt; ovs = simMarket-&gt;capFloorVol(p.first.name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno">  922</span>            <span class="keyword">auto</span> yts = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">parCapsYts_</a>.find(p.first);</div>
<div class="line"><span class="lineno">  923</span>            QL_REQUIRE(yts != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">parCapsYts_</a>.end(), <span class="stringliteral">&quot;internal error: did not find parCapYts[&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>            Real price = p.second-&gt;NPV();</div>
<div class="line"><span class="lineno">  926</span>            Real fair = impliedVolatility&lt;QuantLib::CapFloor&gt;(*p.second, price, yts-&gt;second, 0.01,</div>
<div class="line"><span class="lineno">  927</span>                                                              ovs-&gt;volatilityType(), ovs-&gt;displacement());</div>
<div class="line"><span class="lineno">  928</span>            <span class="keyword">auto</span> base = parCapVols.find(p.first);</div>
<div class="line"><span class="lineno">  929</span>            QL_REQUIRE(base != parCapVols.end(), <span class="stringliteral">&quot;internal error: did not find parCapVols[&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><span class="lineno">  930</span> </div>
<div class="line"><span class="lineno">  931</span>            Real tmp = (fair - base-&gt;second) / shiftSize;</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>            <span class="comment">// ensure Jacobi matrix is regular and not (too) ill-conditioned, this is necessary because</span></div>
<div class="line"><span class="lineno">  934</span>            <span class="comment">// a) the shift size used to compute dpar / dzero might be close to zero and / or</span></div>
<div class="line"><span class="lineno">  935</span>            <span class="comment">// b) the implied vol calculation has numerical inaccuracies</span></div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>            <span class="keywordflow">if</span> (p.first == desc[i].key1() &amp;&amp; std::abs(tmp) &lt; 0.01) {</div>
<div class="line"><span class="lineno">  938</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Setting Diagonal CapFloorVol Sensi &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; w.r.t. &quot;</span> &lt;&lt; desc[i].key1()</div>
<div class="line"><span class="lineno">  939</span>                                                           &lt;&lt; <span class="stringliteral">&quot; to 0.01 (got &quot;</span> &lt;&lt; tmp &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  940</span>                tmp = 0.01;</div>
<div class="line"><span class="lineno">  941</span>            }</div>
<div class="line"><span class="lineno">  942</span> </div>
<div class="line"><span class="lineno">  943</span>            <span class="comment">// write sensitivity</span></div>
<div class="line"><span class="lineno">  944</span> </div>
<div class="line"><span class="lineno">  945</span>            writeSensitivity(p.first, desc[i].key1(), tmp, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">parSensi_</a>, parKeysNonZero, rawKeysNonZero);</div>
<div class="line"><span class="lineno">  946</span>        }</div>
<div class="line"><span class="lineno">  947</span> </div>
<div class="line"><span class="lineno">  948</span>        <span class="comment">// process par yoy caps</span></div>
<div class="line"><span class="lineno">  949</span> </div>
<div class="line"><span class="lineno">  950</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>) {</div>
<div class="line"><span class="lineno">  951</span> </div>
<div class="line"><span class="lineno">  952</span>            <span class="keywordflow">if</span> (p.second-&gt;isCalculated() &amp;&amp; p.first != desc[i].key1())</div>
<div class="line"><span class="lineno">  953</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  954</span> </div>
<div class="line"><span class="lineno">  955</span>            Handle&lt;QuantExt::YoYOptionletVolatilitySurface&gt; ovs =</div>
<div class="line"><span class="lineno">  956</span>                simMarket-&gt;yoyCapFloorVol(p.first.name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno">  957</span>            <span class="keyword">auto</span> yts = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">parYoYCapsYts_</a>.find(p.first);</div>
<div class="line"><span class="lineno">  958</span>            <span class="keyword">auto</span> index = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">parYoYCapsIndex_</a>.find(p.first);</div>
<div class="line"><span class="lineno">  959</span>            QL_REQUIRE(yts != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">parYoYCapsYts_</a>.end(), <span class="stringliteral">&quot;internal error: did not find parYoYCapsYts[&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><span class="lineno">  960</span>            QL_REQUIRE(index != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">parYoYCapsIndex_</a>.end(),</div>
<div class="line"><span class="lineno">  961</span>                       <span class="stringliteral">&quot;internal error: did not find parYoYCapsIndex[&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>            Real price = p.second-&gt;NPV();</div>
<div class="line"><span class="lineno">  964</span>            Real fair = impliedVolatility&lt;QuantLib::YoYInflationCapFloor, QuantLib::YoYInflationIndex&gt;(</div>
<div class="line"><span class="lineno">  965</span>                *p.second, price, yts-&gt;second, 0.01, ovs-&gt;volatilityType(), ovs-&gt;displacement(), index-&gt;second);</div>
<div class="line"><span class="lineno">  966</span>            <span class="keyword">auto</span> base = parCapVols.find(p.first);</div>
<div class="line"><span class="lineno">  967</span>            QL_REQUIRE(base != parCapVols.end(), <span class="stringliteral">&quot;internal error: did not find parCapVols[&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><span class="lineno">  968</span> </div>
<div class="line"><span class="lineno">  969</span>            Real tmp = (fair - base-&gt;second) / shiftSize;</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>            <span class="comment">// ensure Jacobi matrix is regular and not (too) ill-conditioned, this is necessary because</span></div>
<div class="line"><span class="lineno">  972</span>            <span class="comment">// a) the shift size used to compute dpar / dzero might be close to zero and / or</span></div>
<div class="line"><span class="lineno">  973</span>            <span class="comment">// b) the implied vol calculation has numerical inaccuracies</span></div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>            <span class="keywordflow">if</span> (p.first == desc[i].key1() &amp;&amp; std::abs(tmp) &lt; 0.01) {</div>
<div class="line"><span class="lineno">  976</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Setting Diagonal CapFloorVol Sensi &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; w.r.t. &quot;</span> &lt;&lt; desc[i].key1()</div>
<div class="line"><span class="lineno">  977</span>                                                           &lt;&lt; <span class="stringliteral">&quot; to 0.01 (got &quot;</span> &lt;&lt; tmp &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  978</span>                tmp = 0.01;</div>
<div class="line"><span class="lineno">  979</span>            }</div>
<div class="line"><span class="lineno">  980</span> </div>
<div class="line"><span class="lineno">  981</span>            <span class="comment">// write sensitivity</span></div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>            writeSensitivity(p.first, desc[i].key1(), tmp, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">parSensi_</a>, parKeysNonZero, rawKeysNonZero);</div>
<div class="line"><span class="lineno">  984</span>        }</div>
<div class="line"><span class="lineno">  985</span> </div>
<div class="line"><span class="lineno">  986</span>    } <span class="comment">// end of loop over samples</span></div>
<div class="line"><span class="lineno">  987</span> </div>
<div class="line"><span class="lineno">  988</span>    <span class="comment">// check for</span></div>
<div class="line"><span class="lineno">  989</span>    <span class="comment">// a) par instruments which have no sensitivity to any of the risk factors</span></div>
<div class="line"><span class="lineno">  990</span>    <span class="comment">// b) risk factors w.r.t. which no par instrument has a sensitivity</span></div>
<div class="line"><span class="lineno">  991</span>    std::set&lt;RiskFactorKey&gt; parKeysZero, rawKeysZero;</div>
<div class="line"><span class="lineno">  992</span>    std::set_difference(parKeysCheck.begin(), parKeysCheck.end(), parKeysNonZero.begin(), parKeysNonZero.end(),</div>
<div class="line"><span class="lineno">  993</span>                        std::inserter(parKeysZero, parKeysZero.begin()));</div>
<div class="line"><span class="lineno">  994</span>    std::set_difference(rawKeysCheck.begin(), rawKeysCheck.end(), rawKeysNonZero.begin(), rawKeysNonZero.end(),</div>
<div class="line"><span class="lineno">  995</span>                        std::inserter(rawKeysZero, rawKeysZero.begin()));</div>
<div class="line"><span class="lineno">  996</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; k : parKeysZero) {</div>
<div class="line"><span class="lineno">  997</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Found par instrument which has no sensitivity to any of the risk factors: \&quot;&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  998</span>    }</div>
<div class="line"><span class="lineno">  999</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; k : rawKeysZero) {</div>
<div class="line"><span class="lineno"> 1000</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Found risk factor w.r.t. which no par instrument has a sensitivity: \&quot;&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 1001</span>    }</div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Computing par rate and flat vol sensitivities done&quot;</span>);</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>} <span class="comment">// namespace sensitivity</span></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_observation_mode_html_a46c8a310cf4c094f8c80e1cb8dc1f911abcfaccebf745acfd5e75351095a5394a"><div class="ttname"><a href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911abcfaccebf745acfd5e75351095a5394a">ore::analytics::ObservationMode::Mode::Disable</a></div><div class="ttdeci">@ Disable</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a0d4e59f5de6fbf2e1eb409d8b151378b"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">ore::analytics::ParSensitivityAnalysis::parCapsYts_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, Handle&lt; YieldTermStructure &gt; &gt; parCapsYts_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00200">parsensitivityanalysis.hpp:200</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a155bc22e0fe725d43307ccc2e054e0ef"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a155bc22e0fe725d43307ccc2e054e0ef">ore::analytics::ParSensitivityAnalysis::parYoYCapsVts_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, Handle&lt; QuantExt::YoYOptionletVolatilitySurface &gt; &gt; parYoYCapsVts_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00206">parsensitivityanalysis.hpp:206</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a25d0c14ef75a713f89ee3117e3c0f304"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304">ore::analytics::ParSensitivityAnalysis::populateShiftSizes</a></div><div class="ttdeci">void populateShiftSizes(const ore::analytics::RiskFactorKey &amp;key, QuantLib::Real parRate, const boost::shared_ptr&lt; ore::analytics::ScenarioSimMarket &gt; &amp;simMarket)</div><div class="ttdoc">Populate shiftSizes_ for key given the implied fair par rate parRate.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l02101">parsensitivityanalysis.cpp:2101</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a2afaeb949d17f1fc1f707c5ff3980648"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">ore::analytics::ParSensitivityAnalysis::parSensi_</a></div><div class="ttdeci">ParContainer parSensi_</div><div class="ttdoc">sensitivity of par rates w.r.t. raw rate shifts (including optionlet/cap volatility)</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00195">parsensitivityanalysis.hpp:195</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a4c2a54863b06e0f0b96160d82f5f7e26"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">ore::analytics::ParSensitivityAnalysis::removeTodaysFixingIndices_</a></div><div class="ttdeci">std::set&lt; std::string &gt; removeTodaysFixingIndices_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00235">parsensitivityanalysis.hpp:235</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a853d60aaf4f6828fc8e5c14d05e5235e"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">ore::analytics::ParSensitivityAnalysis::parCaps_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, boost::shared_ptr&lt; QuantLib::CapFloor &gt; &gt; parCaps_</div><div class="ttdoc">par helpers: IR cap / floors</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00199">parsensitivityanalysis.hpp:199</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a887e465357d20ecffc6a1398c6f5bde3"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">ore::analytics::ParSensitivityAnalysis::parYoYCapsYts_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, Handle&lt; YieldTermStructure &gt; &gt; parYoYCapsYts_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00204">parsensitivityanalysis.hpp:204</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a9f99fe37fb27e159c5d2a0b43a48a33a"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9f99fe37fb27e159c5d2a0b43a48a33a">ore::analytics::ParSensitivityAnalysis::parCapsVts_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, Handle&lt; OptionletVolatilityStructure &gt; &gt; parCapsVts_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00201">parsensitivityanalysis.hpp:201</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_aa1da903fae63cef2935f81b313314f17"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">ore::analytics::ParSensitivityAnalysis::relevantRiskFactors_</a></div><div class="ttdeci">std::set&lt; ore::analytics::RiskFactorKey &gt; relevantRiskFactors_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00215">parsensitivityanalysis.hpp:215</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_aaf3b4fed233991ba67fc00a89e8fcd57"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aaf3b4fed233991ba67fc00a89e8fcd57">ore::analytics::ParSensitivityAnalysis::augmentRelevantRiskFactors</a></div><div class="ttdeci">void augmentRelevantRiskFactors()</div><div class="ttdoc">Augment relevant risk factors.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l00646">parsensitivityanalysis.cpp:646</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_acd6763fdfe285799e931f1c6ac6748b4"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">ore::analytics::ParSensitivityAnalysis::parYoYCapsIndex_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, Handle&lt; YoYInflationIndex &gt; &gt; parYoYCapsIndex_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00205">parsensitivityanalysis.hpp:205</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_adc1ea5d86780f6a6557b3bb6cf84926e"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e">ore::analytics::ParSensitivityAnalysis::isParType</a></div><div class="ttdeci">static bool isParType(ore::analytics::RiskFactorKey::KeyType type)</div><div class="ttdoc">Returns true if risk factor type is applicable for par conversion.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01063">parsensitivityanalysis.cpp:1063</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_af0ef5ade6c2998be146020771cfca68c"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">ore::analytics::ParSensitivityAnalysis::parHelpers_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, boost::shared_ptr&lt; Instrument &gt; &gt; parHelpers_</div><div class="ttdoc">par helpers (all except cap/floors)</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00197">parsensitivityanalysis.hpp:197</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_af5a06da0074bff9283d5f77ddf26bf30"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">ore::analytics::ParSensitivityAnalysis::parYoYCaps_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, boost::shared_ptr&lt; QuantLib::YoYInflationCapFloor &gt; &gt; parYoYCaps_</div><div class="ttdoc">par helpers: YoY cap / floors</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00203">parsensitivityanalysis.hpp:203</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401">ore::analytics::RiskFactorKey::KeyType::YoYInflationCurve</a></div><div class="ttdeci">@ YoYInflationCurve</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">ore::analytics::RiskFactorKey::KeyType::SurvivalProbability</a></div><div class="ttdeci">@ SurvivalProbability</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_shift_scenario_generator_1_1_scenario_description_html_a1d1cfd8ffb84e947f82999c682b666a7a258f49887ef8d14ac268c92b02503aaa"><div class="ttname"><a href="classore_1_1analytics_1_1_shift_scenario_generator_1_1_scenario_description.html#a1d1cfd8ffb84e947f82999c682b666a7a258f49887ef8d14ac268c92b02503aaa">ore::analytics::ShiftScenarioGenerator::ScenarioDescription::Type::Up</a></div><div class="ttdeci">@ Up</div></div>
<div class="ttc" id="alog_8hpp_html_a158e0f085ddedfe5c8ed069986039f50"><div class="ttname"><a href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a></div><div class="ttdeci">#define LOG(text)</div></div>
<div class="ttc" id="alog_8hpp_html_a34c7c8cde9b91d2eee82d7b9a0b66fd5"><div class="ttname"><a href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a></div><div class="ttdeci">#define DLOG(text)</div></div>
<div class="ttc" id="alog_8hpp_html_a35cb05f674d9e764ca12cff351b064f2"><div class="ttname"><a href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a></div><div class="ttdeci">#define ALOG(text)</div></div>
<div class="ttc" id="alog_8hpp_html_a9622ca943201e814041f051b7a10b3ea"><div class="ttname"><a href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a></div><div class="ttdeci">#define WLOG(text)</div></div>
<div class="ttc" id="alog_8hpp_html_a99aeca53f904c71a68070e1f9d310232"><div class="ttname"><a href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a></div><div class="ttdeci">#define TLOG(text)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a1cab4fb6a720eff245acb9f3a7a9e7c5"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a></div><div class="ttdeci">Filter close_enough(const RandomVariable &amp;x, const RandomVariable &amp;y)</div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_a6f28870e4c47d867aa859db7fb3c2fed"><div class="ttname"><a href="namespaceore_1_1analytics.html#a6f28870e4c47d867aa859db7fb3c2fed">ore::analytics::getShiftSize</a></div><div class="ttdeci">Real getShiftSize(const RiskFactorKey &amp;key, const SensitivityScenarioData &amp;sensiParams, const boost::shared_ptr&lt; ScenarioSimMarket &gt; &amp;simMarket, const string &amp;marketConfiguration)</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2sensitivityanalysis_8cpp_source.html#l00173">sensitivityanalysis.cpp:173</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a1dd3178717c03aef7d6851a3dfd92207ad4192ca9679d38110983141b896eebbf"><div class="ttname"><a href="../ored/namespaceore_1_1data.html#a1dd3178717c03aef7d6851a3dfd92207ad4192ca9679d38110983141b896eebbf">MomentType::Volatility</a></div><div class="ttdeci">@ Volatility</div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_cgraph">
<area shape="rect" title="Compute par instrument sensitivities." alt="" coords="5,832,228,857"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aaf3b4fed233991ba67fc00a89e8fcd57" title="Augment relevant risk factors." alt="" coords="276,5,467,31"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="1101,107,1203,132"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="531,1865,677,1891"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a6f28870e4c47d867aa859db7fb3c2fed" title=" " alt="" coords="515,832,693,857"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e" title="Returns true if risk factor type is applicable for par conversion." alt="" coords="331,959,411,984"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304" title="Populate shiftSizes_ for key given the implied fair par rate parRate." alt="" coords="306,857,437,883"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe" title=" " alt="" coords="755,1129,985,1169"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a335c3820a9ad66b4114eae1b63f57837" title=" " alt="" coords="785,1801,955,1841"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46" title=" " alt="" coords="757,1193,983,1233"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f" title=" " alt="" coords="749,1257,991,1297"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82" title=" " alt="" coords="758,1321,982,1361"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335" title="Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity." alt="" coords="817,1916,923,1941"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="1069,2015,1235,2040"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26" title="Create CDS for implying par rate sensitivity from Hazard Rate sensitivity." alt="" coords="829,2895,911,2920"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae" title="Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="782,2113,958,2139"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8" title="Create Deposit for implying par rate sensitivity from zero rate sensitivity." alt="" coords="821,2212,919,2237"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307" title="Create FRA for implying par rate sensitivity from zero rate sensitivity." alt="" coords="830,1965,910,1991"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6" title="Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity." alt="" coords="813,2163,927,2188"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a" title="Create OIS Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="832,2015,908,2040"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8" title="Create Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="827,2415,913,2440"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98" title="Create Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="795,2064,945,2089"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65" title="Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity." alt="" coords="805,1751,935,1776"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e" title="Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity." alt="" coords="793,3023,947,3048"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f" title="Create Zero Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="793,3112,947,3137"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276" title=" " alt="" coords="760,1385,980,1425"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73" title=" " alt="" coords="757,1449,983,1504"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7" title=" " alt="" coords="767,1528,973,1583"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e" title=" " alt="" coords="765,1607,975,1661"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a13afd8ff6e8e79e157b41c54db8b28f0" title=" " alt="" coords="1057,2759,1247,2799"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a8786a1690bc26d6512e31f517befea73" title=" " alt="" coords="1051,2823,1253,2863"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a79a5bf709a83cd99efa83faf7a6f0d6f" title=" " alt="" coords="1057,2887,1247,2927"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a4f6863a09ad0ad21659f5fcf32b418e5" title=" " alt="" coords="1057,2951,1247,2991"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a1156ccc1f63793734fe12a4535c6f68f" title=" " alt="" coords="1054,3015,1250,3055"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#aef79fd00dc96736bca343d0192c26468" title=" " alt="" coords="1057,3079,1247,3119"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b" title=" " alt="" coords="1069,2064,1235,2089"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f" title=" " alt="" coords="1067,2113,1237,2139"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga2f0695fe62430369b6acca7976d7be97" title=" " alt="" coords="1064,2163,1240,2188"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="1116,2212,1188,2237"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gaf17e7976e4fe2449bb4e226ee19c0fd9" title=" " alt="" coords="1061,2261,1243,2287"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html#aae4aedf88e432de744f6f0ae703bde15" title=" " alt="" coords="1047,2311,1257,2351"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#affc41d722d1120518f9948d788431056" title=" " alt="" coords="1057,2375,1247,2415"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a662efe4525f29a7b64e3e50417016fb6" title=" " alt="" coords="1051,2439,1253,2479"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#ac2f3a56b9130195610d7b30c0f087caa" title=" " alt="" coords="1055,2503,1249,2543"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a02282940d3091865100dcff65c695f9b" title=" " alt="" coords="1060,2567,1244,2607"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a12463e6245949bc4477529c791f31279" title=" " alt="" coords="1060,2631,1244,2671"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#aa27d877e3cfb8777d52f2ae720d062d3" title=" " alt="" coords="1059,2695,1245,2735"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a31afff2ccfbd52b6333575ee40c23504" title=" " alt="" coords="1067,1679,1237,1719"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a7bd51a0a7da6c232fa3bcc70045d501d" title=" " alt="" coords="1065,1743,1239,1783"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a0617466d18a23a375cc3d45ec9102b33" title=" " alt="" coords="1067,1807,1237,1847"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32" title=" " alt="" coords="1065,3143,1239,3183"/>
<area shape="rect" href="test_2scenarioshiftcalculator_8cpp.html#a652b8805d9b88185e25574d4820660c4" title=" " alt="" coords="847,157,893,183"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aa20846f76afb42a5e0a7e907b727e345" title=" " alt="" coords="745,281,995,321"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aefc1dde6ea364f5790dc4dc75d339dba" title=" " alt="" coords="769,345,971,385"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ac040ad9950aac26ede1935ca320bd0e1" title=" " alt="" coords="741,409,999,449"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aea45faada7a1e96039510c0eb5e9a51f" title=" " alt="" coords="748,473,992,513"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad25f69d5465945eb23f43d1146b450a8" title=" " alt="" coords="752,537,988,577"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#af073371655145388cd67182906ad5694" title=" " alt="" coords="772,601,968,641"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a344f4a67200865bd29b118ab0836c168" title=" " alt="" coords="763,665,977,705"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a7ab8bd40826ffcadec9a28c9b47deee0" title=" " alt="" coords="785,729,955,769"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a5781bba7cccea873352ae96390ae06a7" title=" " alt="" coords="775,793,965,833"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a5cceb12d217bac14eeda59d5f774f7c1" title=" " alt="" coords="773,231,967,256"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a221481186bf38cc73b261331cda6bcec" title=" " alt="" coords="767,857,973,897"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a878f236e46973bef31d49a6ba7170aad" title=" " alt="" coords="755,921,985,961"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a595f1fc52e87fae0e9d1f1c92d940e2a" title=" " alt="" coords="767,985,973,1025"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a9d7b43b0cc7fe85c7336883a552108e6" title=" " alt="" coords="755,1049,985,1104"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a2d1e0fb4f255552e89bb7fad306cd48b" title="Give back the shift data for the given risk factor type, keyType, with the given name." alt="" coords="521,921,687,961"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a5b2ac7fa73674b88cd3c2cc68477b111" title=" " alt="" coords="759,1686,981,1726"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15667fb454f6579571357dcefa65a559_icgraph">
<area shape="rect" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a8092eccb5ce3a742bec7c90e7599fe71" name="a8092eccb5ce3a742bec7c90e7599fe71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8092eccb5ce3a742bec7c90e7599fe71">&#9670;&#160;</a></span>parSensitivities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abe637de864ef34aa2842b582cf4680b4">ParContainer</a> &amp; parSensitivities </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return computed par sensitivities. Empty if they have not been computed yet. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00075">75</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span>                                                 {</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2afaeb949d17f1fc1f707c5ff3980648">parSensi_</a>;</div>
<div class="line"><span class="lineno">   77</span>    }</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a8092eccb5ce3a742bec7c90e7599fe71_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8092eccb5ce3a742bec7c90e7599fe71_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8092eccb5ce3a742bec7c90e7599fe71_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8092eccb5ce3a742bec7c90e7599fe71_icgraph">
<area shape="rect" title="Return computed par sensitivities. Empty if they have not been computed yet." alt="" coords="748,231,857,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a28915bb1dca6668799c336ea3a953e45" name="a28915bb1dca6668799c336ea3a953e45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28915bb1dca6668799c336ea3a953e45">&#9670;&#160;</a></span>alignPillars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void alignPillars </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>align pillars in scenario simulation market parameters with those of the par instruments </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01007">1007</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1007</span>                                          {</div>
<div class="line"><span class="lineno"> 1008</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Align simulation market pillars to actual latest relevant dates of par instruments&quot;</span>);</div>
<div class="line"><span class="lineno"> 1009</span>    <span class="comment">// If any of the yield curve types are still active, align the pillars.</span></div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>) == 0 ||</div>
<div class="line"><span class="lineno"> 1011</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>) == 0 ||</div>
<div class="line"><span class="lineno"> 1012</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>) == 0) {</div>
<div class="line"><span class="lineno"> 1013</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>) {</div>
<div class="line"><span class="lineno"> 1014</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;setYieldCurveTenors(p.first, p.second);</div>
<div class="line"><span class="lineno"> 1015</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;yield curve tenors for &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; set (&quot;</span> &lt;&lt; p.second.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1016</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; t : p.second)</div>
<div class="line"><span class="lineno"> 1017</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;set tenor &quot;</span> &lt;&lt; t.length() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.units())</div>
<div class="line"><span class="lineno"> 1018</span>        }</div>
<div class="line"><span class="lineno"> 1019</span>    }</div>
<div class="line"><span class="lineno"> 1020</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b5732971f0b2e238e09996b0e4137ab">RiskFactorKey::KeyType::OptionletVolatility</a>) == 0) {</div>
<div class="line"><span class="lineno"> 1021</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a785a43ae042d5fc2f52c58e0976770c6">capFloorPillars_</a>) {</div>
<div class="line"><span class="lineno"> 1022</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;setCapFloorVolExpiries(p.first, p.second);</div>
<div class="line"><span class="lineno"> 1023</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;cap floor expiries for &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; set (&quot;</span> &lt;&lt; p.second.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1024</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; t : p.second)</div>
<div class="line"><span class="lineno"> 1025</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;set tenor &quot;</span> &lt;&lt; t.length() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.units())</div>
<div class="line"><span class="lineno"> 1026</span>        }</div>
<div class="line"><span class="lineno"> 1027</span>    }</div>
<div class="line"><span class="lineno"> 1028</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca07cf31a470614797e8fde5ef0ec16d00">RiskFactorKey::KeyType::YoYInflationCapFloorVolatility</a>) == 0) {</div>
<div class="line"><span class="lineno"> 1029</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa43f8b451a81dae3c7af0c9f0a5fd1b5">yoyCapFloorPillars_</a>) {</div>
<div class="line"><span class="lineno"> 1030</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;setYoYInflationCapFloorVolExpiries(p.first, p.second);</div>
<div class="line"><span class="lineno"> 1031</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;yoy cap floor expiries for &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; set (&quot;</span> &lt;&lt; p.second.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1032</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; t : p.second)</div>
<div class="line"><span class="lineno"> 1033</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;set tenor &quot;</span> &lt;&lt; t.length() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.units())</div>
<div class="line"><span class="lineno"> 1034</span>        }</div>
<div class="line"><span class="lineno"> 1035</span>    }</div>
<div class="line"><span class="lineno"> 1036</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">RiskFactorKey::KeyType::SurvivalProbability</a>) == 0) {</div>
<div class="line"><span class="lineno"> 1037</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a1385c53b3a28ee92bbcfe4c04d3d3071">cdsPillars_</a>) {</div>
<div class="line"><span class="lineno"> 1038</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;setDefaultTenors(p.first, p.second);</div>
<div class="line"><span class="lineno"> 1039</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;default expiries for &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; set (&quot;</span> &lt;&lt; p.second.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1040</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; t : p.second)</div>
<div class="line"><span class="lineno"> 1041</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;set tenor &quot;</span> &lt;&lt; t.length() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.units())</div>
<div class="line"><span class="lineno"> 1042</span>        }</div>
<div class="line"><span class="lineno"> 1043</span>    }</div>
<div class="line"><span class="lineno"> 1044</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023">RiskFactorKey::KeyType::ZeroInflationCurve</a>) == 0) {</div>
<div class="line"><span class="lineno"> 1045</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8bb9a21fd7dc29857585336f1d836bbd">zeroInflationPillars_</a>) {</div>
<div class="line"><span class="lineno"> 1046</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;setZeroInflationTenors(p.first, p.second);</div>
<div class="line"><span class="lineno"> 1047</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;zero inflation expiries for &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; set (&quot;</span> &lt;&lt; p.second.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1048</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; t : p.second)</div>
<div class="line"><span class="lineno"> 1049</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;set tenor &quot;</span> &lt;&lt; t.length() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.units())</div>
<div class="line"><span class="lineno"> 1050</span>        }</div>
<div class="line"><span class="lineno"> 1051</span>    }</div>
<div class="line"><span class="lineno"> 1052</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401">RiskFactorKey::KeyType::YoYInflationCurve</a>) == 0) {</div>
<div class="line"><span class="lineno"> 1053</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afae898f927b6055a2da6c59768011d30">yoyInflationPillars_</a>) {</div>
<div class="line"><span class="lineno"> 1054</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;setYoyInflationTenors(p.first, p.second);</div>
<div class="line"><span class="lineno"> 1055</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;yoy inflation expiries for &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; set (&quot;</span> &lt;&lt; p.second.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1056</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; t : p.second)</div>
<div class="line"><span class="lineno"> 1057</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;set tenor &quot;</span> &lt;&lt; t.length() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; t.units())</div>
<div class="line"><span class="lineno"> 1058</span>        }</div>
<div class="line"><span class="lineno"> 1059</span>    }</div>
<div class="line"><span class="lineno"> 1060</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Alignment of pillars done.&quot;</span>);</div>
<div class="line"><span class="lineno"> 1061</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a0b3263b4a2fbc68cc2e189cd60e9a41f"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">ore::analytics::ParSensitivityAnalysis::yieldCurvePillars_</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; Period &gt; &gt; yieldCurvePillars_</div><div class="ttdoc">par instrument pillars</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00208">parsensitivityanalysis.hpp:208</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a1385c53b3a28ee92bbcfe4c04d3d3071"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a1385c53b3a28ee92bbcfe4c04d3d3071">ore::analytics::ParSensitivityAnalysis::cdsPillars_</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; Period &gt; &gt; cdsPillars_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00208">parsensitivityanalysis.hpp:208</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a785a43ae042d5fc2f52c58e0976770c6"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a785a43ae042d5fc2f52c58e0976770c6">ore::analytics::ParSensitivityAnalysis::capFloorPillars_</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; Period &gt; &gt; capFloorPillars_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00208">parsensitivityanalysis.hpp:208</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a8bb9a21fd7dc29857585336f1d836bbd"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8bb9a21fd7dc29857585336f1d836bbd">ore::analytics::ParSensitivityAnalysis::zeroInflationPillars_</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; Period &gt; &gt; zeroInflationPillars_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">parsensitivityanalysis.hpp:209</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_aa43f8b451a81dae3c7af0c9f0a5fd1b5"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa43f8b451a81dae3c7af0c9f0a5fd1b5">ore::analytics::ParSensitivityAnalysis::yoyCapFloorPillars_</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; Period &gt; &gt; yoyCapFloorPillars_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">parsensitivityanalysis.hpp:209</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_afae898f927b6055a2da6c59768011d30"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afae898f927b6055a2da6c59768011d30">ore::analytics::ParSensitivityAnalysis::yoyInflationPillars_</a></div><div class="ttdeci">std::map&lt; std::string, std::vector&lt; Period &gt; &gt; yoyInflationPillars_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">parsensitivityanalysis.hpp:209</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238ca07cf31a470614797e8fde5ef0ec16d00"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca07cf31a470614797e8fde5ef0ec16d00">ore::analytics::RiskFactorKey::KeyType::YoYInflationCapFloorVolatility</a></div><div class="ttdeci">@ YoYInflationCapFloorVolatility</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238ca1b5732971f0b2e238e09996b0e4137ab"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b5732971f0b2e238e09996b0e4137ab">ore::analytics::RiskFactorKey::KeyType::OptionletVolatility</a></div><div class="ttdeci">@ OptionletVolatility</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023">ore::analytics::RiskFactorKey::KeyType::ZeroInflationCurve</a></div><div class="ttdeci">@ ZeroInflationCurve</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">ore::analytics::RiskFactorKey::KeyType::IndexCurve</a></div><div class="ttdeci">@ IndexCurve</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">ore::analytics::RiskFactorKey::KeyType::DiscountCurve</a></div><div class="ttdeci">@ DiscountCurve</div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">ore::analytics::RiskFactorKey::KeyType::YieldCurve</a></div><div class="ttdeci">@ YieldCurve</div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a28915bb1dca6668799c336ea3a953e45_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a28915bb1dca6668799c336ea3a953e45_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a28915bb1dca6668799c336ea3a953e45_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a28915bb1dca6668799c336ea3a953e45_icgraph">
<area shape="rect" title="align pillars in scenario simulation market parameters with those of the par instruments" alt="" coords="748,231,833,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="adc1ea5d86780f6a6557b3bb6cf84926e" name="adc1ea5d86780f6a6557b3bb6cf84926e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc1ea5d86780f6a6557b3bb6cf84926e">&#9670;&#160;</a></span>isParType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> isParType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if risk factor type is applicable for par conversion. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01063">1063</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1063</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ae24b626b9a608b24efb06663b975b1c2">parTypes_</a>.find(type) != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ae24b626b9a608b24efb06663b975b1c2">parTypes_</a>.end(); }</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_ae24b626b9a608b24efb06663b975b1c2"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ae24b626b9a608b24efb06663b975b1c2">ore::analytics::ParSensitivityAnalysis::parTypes_</a></div><div class="ttdeci">static std::set&lt; ore::analytics::RiskFactorKey::KeyType &gt; parTypes_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00217">parsensitivityanalysis.hpp:217</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_adc1ea5d86780f6a6557b3bb6cf84926e_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_adc1ea5d86780f6a6557b3bb6cf84926e_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_adc1ea5d86780f6a6557b3bb6cf84926e_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_adc1ea5d86780f6a6557b3bb6cf84926e_icgraph">
<area shape="rect" title="Returns true if risk factor type is applicable for par conversion." alt="" coords="1019,253,1099,279"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,228,971,253"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a201ef82fb3cbbcfea680dd06dcde5fb3" title=" " alt="" coords="828,277,891,303"/>
<area shape="rect" href="classore_1_1analytics_1_1_zero_to_par_cube.html#a0591797d293d0ad4e6843eba7e083abb" title="Return the non&#45;zero par deltas for the given trade index." alt="" coords="776,327,943,367"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a9bc5a644a73ad885cb0dcf9ff06495ab" name="a9bc5a644a73ad885cb0dcf9ff06495ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc5a644a73ad885cb0dcf9ff06495ab">&#9670;&#160;</a></span>relevantRiskFactors() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp; relevantRiskFactors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get / set the relevant scenarios (if empty, these are ignored) </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00086">86</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45e6d7030b16a8f4ccff9de74ddd3bc9" name="a45e6d7030b16a8f4ccff9de74ddd3bc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e6d7030b16a8f4ccff9de74ddd3bc9">&#9670;&#160;</a></span>relevantRiskFactors() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp; relevantRiskFactors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00087">87</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   87</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab397fee73d59f20038b686d3eeff9af3" name="ab397fee73d59f20038b686d3eeff9af3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab397fee73d59f20038b686d3eeff9af3">&#9670;&#160;</a></span>shiftSizes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, std::pair&lt; QuantLib::Real, QuantLib::Real &gt; &gt; shiftSizes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the zero rate and par rate absolute shift size for each risk factor key. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00090">90</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>                                                                                              {</div>
<div class="line"><span class="lineno">   91</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a74eddecd72acf99e557b7682740f3b53">shiftSizes_</a>;</div>
<div class="line"><span class="lineno">   92</span>    }</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a74eddecd72acf99e557b7682740f3b53"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a74eddecd72acf99e557b7682740f3b53">ore::analytics::ParSensitivityAnalysis::shiftSizes_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, std::pair&lt; QuantLib::Real, QuantLib::Real &gt; &gt; shiftSizes_</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00232">parsensitivityanalysis.hpp:232</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_ab397fee73d59f20038b686d3eeff9af3_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab397fee73d59f20038b686d3eeff9af3_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab397fee73d59f20038b686d3eeff9af3_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab397fee73d59f20038b686d3eeff9af3_icgraph">
<area shape="rect" title="Return the zero rate and par rate absolute shift size for each risk factor key." alt="" coords="748,231,827,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a201ef82fb3cbbcfea680dd06dcde5fb3" name="a201ef82fb3cbbcfea680dd06dcde5fb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a201ef82fb3cbbcfea680dd06dcde5fb3">&#9670;&#160;</a></span>disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disable </td>
          <td>(</td>
          <td class="paramtype">const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>types</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Disable par conversion for the given set of risk factor key types. May be called multiple times in order to add key types that should not be considered for par conversion. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01065">1065</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1065</span>                                                                           {</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="comment">// Insert only types that are available for par sensitivity analysis in to the set of disabled types.</span></div>
<div class="line"><span class="lineno"> 1067</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; type : <a class="code hl_variableRef" href="../ored/namespaceore_1_1data.html#a8889e35af3fc04877d0070383d8ee48c">types</a>) {</div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e">isParType</a>(type)) {</div>
<div class="line"><span class="lineno"> 1069</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.insert(type);</div>
<div class="line"><span class="lineno"> 1070</span>        }</div>
<div class="line"><span class="lineno"> 1071</span>    }</div>
<div class="line"><span class="lineno"> 1072</span>}</div>
<div class="ttc" id="anamespaceore_1_1data_html_a8889e35af3fc04877d0070383d8ee48c"><div class="ttname"><a href="../ored/namespaceore_1_1data.html#a8889e35af3fc04877d0070383d8ee48c">ore::data::types</a></div><div class="ttdeci">boost::bimap&lt; std::string, TRS::FundingData::NotionalType &gt; types</div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a201ef82fb3cbbcfea680dd06dcde5fb3_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a201ef82fb3cbbcfea680dd06dcde5fb3_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a201ef82fb3cbbcfea680dd06dcde5fb3_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a201ef82fb3cbbcfea680dd06dcde5fb3_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,68,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e" title="Returns true if risk factor type is applicable for par conversion." alt="" coords="116,5,196,31"/>
</map>
</div>

</div>
</div>
<a id="afbc2e170697d8df9e2e11aaa9c200816" name="afbc2e170697d8df9e2e11aaa9c200816"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc2e170697d8df9e2e11aaa9c200816">&#9670;&#160;</a></span>typesDisabled()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a> &gt; &amp; typesDisabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the set of key types disabled for this instance of <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html" title="Par Sensitivity Analysis.">ParSensitivityAnalysis</a>. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00100">100</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>                                                                          {</div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>;</div>
<div class="line"><span class="lineno">  102</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf3b4fed233991ba67fc00a89e8fcd57" name="aaf3b4fed233991ba67fc00a89e8fcd57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3b4fed233991ba67fc00a89e8fcd57">&#9670;&#160;</a></span>augmentRelevantRiskFactors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void augmentRelevantRiskFactors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Augment relevant risk factors. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l00646">646</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  646</span>                                                        {</div>
<div class="line"><span class="lineno">  647</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Augment relevant risk factors, starting with &quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.size() &lt;&lt; <span class="stringliteral">&quot; risk factors.&quot;</span>);</div>
<div class="line"><span class="lineno">  648</span>    std::set&lt;ore::analytics::RiskFactorKey&gt; addFactors1 = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>, addFactors2, tmp;</div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno">  650</span>        <span class="comment">// DLOG(&quot;new pass with &quot; &lt;&lt; addFactors1.size() &lt;&lt; &quot; risk factors.&quot;);</span></div>
<div class="line"><span class="lineno">  651</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; r : addFactors1) {</div>
<div class="line"><span class="lineno">  652</span>            <span class="comment">// DLOG(&quot;candidate risk factor &quot; &lt;&lt; r);</span></div>
<div class="line"><span class="lineno">  653</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; s : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>) {</div>
<div class="line"><span class="lineno">  654</span>                <span class="keywordflow">if</span> (similar(s.first, r)) {</div>
<div class="line"><span class="lineno">  655</span>                    tmp.insert(s.first);</div>
<div class="line"><span class="lineno">  656</span>                    <span class="comment">// DLOG(&quot;factor &quot; &lt;&lt; r &lt;&lt; &quot;: found similar risk factor &quot; &lt;&lt; s.first);</span></div>
<div class="line"><span class="lineno">  657</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; d : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[s.first]) {</div>
<div class="line"><span class="lineno">  658</span>                        <span class="keywordflow">if</span> (std::find(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.begin(), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end(), d) ==</div>
<div class="line"><span class="lineno">  659</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  660</span>                            addFactors2.insert(d);</div>
<div class="line"><span class="lineno">  661</span>                    }</div>
<div class="line"><span class="lineno">  662</span>                }</div>
<div class="line"><span class="lineno">  663</span>            }</div>
<div class="line"><span class="lineno">  664</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; s : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>) {</div>
<div class="line"><span class="lineno">  665</span>                <span class="keywordflow">if</span> (similar(s.first, r)) {</div>
<div class="line"><span class="lineno">  666</span>                    tmp.insert(s.first);</div>
<div class="line"><span class="lineno">  667</span>                    <span class="comment">// DLOG(&quot;factor &quot; &lt;&lt; r &lt;&lt; &quot;: found similar risk factor &quot; &lt;&lt; s.first);</span></div>
<div class="line"><span class="lineno">  668</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; d : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[s.first]) {</div>
<div class="line"><span class="lineno">  669</span>                        <span class="keywordflow">if</span> (std::find(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.begin(), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end(), d) ==</div>
<div class="line"><span class="lineno">  670</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  671</span>                            addFactors2.insert(d);</div>
<div class="line"><span class="lineno">  672</span>                    }</div>
<div class="line"><span class="lineno">  673</span>                }</div>
<div class="line"><span class="lineno">  674</span>            }</div>
<div class="line"><span class="lineno">  675</span>        }</div>
<div class="line"><span class="lineno">  676</span>        addFactors1.swap(addFactors2);</div>
<div class="line"><span class="lineno">  677</span>        addFactors2.clear();</div>
<div class="line"><span class="lineno">  678</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.insert(tmp.begin(), tmp.end());</div>
<div class="line"><span class="lineno">  679</span>        tmp.clear();</div>
<div class="line"><span class="lineno">  680</span>    } <span class="keywordflow">while</span> (addFactors1.size() &gt; 0);</div>
<div class="line"><span class="lineno">  681</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Done, relevant risk factor size now &quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.size());</div>
<div class="line"><span class="lineno">  682</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a6dc4986cd0f498445c0a67abf01e9eb7"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">ore::analytics::ParSensitivityAnalysis::parHelperDependencies_</a></div><div class="ttdeci">std::map&lt; ore::analytics::RiskFactorKey, std::set&lt; ore::analytics::RiskFactorKey &gt; &gt; parHelperDependencies_</div><div class="ttdoc">list of (raw) risk factors on which a par helper depends</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00211">parsensitivityanalysis.hpp:211</a></div></div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_aaf3b4fed233991ba67fc00a89e8fcd57_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_aaf3b4fed233991ba67fc00a89e8fcd57_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_aaf3b4fed233991ba67fc00a89e8fcd57_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_aaf3b4fed233991ba67fc00a89e8fcd57_icgraph">
<area shape="rect" title="Augment relevant risk factors." alt="" coords="1019,231,1209,256"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a03ca088a3dab4c18db2c047232a89780" name="a03ca088a3dab4c18db2c047232a89780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03ca088a3dab4c18db2c047232a89780">&#9670;&#160;</a></span>createParInstruments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void createParInstruments </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market.html">ore::analytics::ScenarioSimMarket</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>simMarket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create par instruments. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l00142">142</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  142</span>                                                                                                     {</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>    QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a> != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ae24b626b9a608b24efb06663b975b1c2">parTypes_</a>, <span class="stringliteral">&quot;At least one par risk factor type must be enabled &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno">  145</span>        <span class="stringliteral">&quot;for a valid ParSensitivityAnalysis.&quot;</span>);</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>    <span class="comment">// this is called twice, first (dry run) with simMarket = nullptr to</span></div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">// - do pillar adjustments and</span></div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">// - populate the par helper dependencies</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">// and second with simMarket != null to</span></div>
<div class="line"><span class="lineno">  151</span>    <span class="comment">// - create the final par instruments linked to the sim market</span></div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <span class="keywordtype">bool</span> dryRun = simMarket == <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">if</span> (dryRun) {</div>
<div class="line"><span class="lineno">  155</span>         Settings::instance().evaluationDate() = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>;</div>
<div class="line"><span class="lineno">  156</span>    }</div>
<div class="line"><span class="lineno">  157</span>    </div>
<div class="line"><span class="lineno">  158</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Build par instruments...&quot;</span>);</div>
<div class="line"><span class="lineno">  159</span>    </div>
<div class="line"><span class="lineno">  160</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>.clear();</div>
<div class="line"><span class="lineno">  161</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>.clear();</div>
<div class="line"><span class="lineno">  162</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>.clear();</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>    <span class="keyword">const</span> boost::shared_ptr&lt;Conventions&gt;&amp; conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno">  165</span>    QL_REQUIRE(conventions != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;conventions are empty&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span>    </div>
<div class="line"><span class="lineno">  167</span>    <span class="comment">// Discount curve instruments</span></div>
<div class="line"><span class="lineno">  168</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>) == 0) {</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: Discount curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f">discountCurveShiftData</a>()) {</div>
<div class="line"><span class="lineno">  172</span>            <span class="keywordtype">string</span> ccy = c.first;</div>
<div class="line"><span class="lineno">  173</span>            QL_REQUIRE(simMarket || <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>.find(ccy) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>.end(), <span class="stringliteral">&quot;duplicate entry in yieldCurvePillars &#39;&quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  174</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">SensitivityScenarioData::CurveShiftParData</a> data =</div>
<div class="line"><span class="lineno">  175</span>                *boost::dynamic_pointer_cast&lt;SensitivityScenarioData::CurveShiftParData&gt;(c.second);</div>
<div class="line"><span class="lineno">  176</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: Discount curve ccy=&quot;</span> &lt;&lt; ccy);</div>
<div class="line"><span class="lineno">  177</span>            Size n_ten = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>.size();</div>
<div class="line"><span class="lineno">  178</span>            QL_REQUIRE(data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>.size() == n_ten,</div>
<div class="line"><span class="lineno">  179</span>                       <span class="stringliteral">&quot;number of tenors does not match number of discount curve par instruments, &quot;</span></div>
<div class="line"><span class="lineno">  180</span>                           &lt;&lt; data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>.size() &lt;&lt; <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; n_ten &lt;&lt; <span class="stringliteral">&quot; ccy=&quot;</span> &lt;&lt; ccy</div>
<div class="line"><span class="lineno">  181</span>                           &lt;&lt; <span class="stringliteral">&quot;, check sensitivity configuration.&quot;</span>);</div>
<div class="line"><span class="lineno">  182</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_ten; ++j) {</div>
<div class="line"><span class="lineno">  183</span>                <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy, j);</div>
<div class="line"><span class="lineno">  184</span>                <span class="keywordflow">if</span> (!dryRun &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  185</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(key) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  186</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  187</span>                Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>[j];</div>
<div class="line"><span class="lineno">  188</span>                <span class="keywordtype">string</span> instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[j];</div>
<div class="line"><span class="lineno">  189</span>                <span class="keywordtype">bool</span> singleCurve = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">parInstrumentSingleCurve</a>;</div>
<div class="line"><span class="lineno">  190</span>                <span class="keywordtype">string</span> indexName = <span class="stringliteral">&quot;&quot;</span>;               <span class="comment">// if empty, it will be picked from conventions</span></div>
<div class="line"><span class="lineno">  191</span>                <span class="keywordtype">string</span> yieldCurveName = <span class="stringliteral">&quot;&quot;</span>;          <span class="comment">// ignored, if empty</span></div>
<div class="line"><span class="lineno">  192</span>                <span class="keywordtype">string</span> equityForecastCurveName = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// ignored, if empty</span></div>
<div class="line"><span class="lineno">  193</span>                std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt; ret;</div>
<div class="line"><span class="lineno">  194</span>                <span class="keywordtype">bool</span> recognised = <span class="keyword">true</span>, skipped = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  195</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  196</span>                    map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  197</span>                    QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  198</span>                        <span class="stringliteral">&quot;conventions not found for ccy &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span> &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  199</span>                    boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  200</span>                    QL_REQUIRE(convention != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;convention is empty&quot;</span>);</div>
<div class="line"><span class="lineno">  201</span>                    <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;IRS&quot;</span>)</div>
<div class="line"><span class="lineno">  202</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8">makeSwap</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention,</div>
<div class="line"><span class="lineno">  203</span>                            singleCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  204</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;DEP&quot;</span>)</div>
<div class="line"><span class="lineno">  205</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8">makeDeposit</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention);</div>
<div class="line"><span class="lineno">  206</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;FRA&quot;</span>)</div>
<div class="line"><span class="lineno">  207</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307">makeFRA</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention);</div>
<div class="line"><span class="lineno">  208</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;OIS&quot;</span>)</div>
<div class="line"><span class="lineno">  209</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a">makeOIS</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention,</div>
<div class="line"><span class="lineno">  210</span>                            singleCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  211</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;XBS&quot;</span>) {</div>
<div class="line"><span class="lineno">  212</span>                        <span class="keywordtype">string</span> otherCurrency = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#ae6a2db37276fde49080505703f92faf2">otherCurrency</a>.empty() ? <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;baseCcy() : data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#ae6a2db37276fde49080505703f92faf2">otherCurrency</a>;</div>
<div class="line"><span class="lineno">  213</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae">makeCrossCcyBasisSwap</a>(simMarket, otherCurrency, ccy, term, convention, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key]);</div>
<div class="line"><span class="lineno">  214</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;FXF&quot;</span>)</div>
<div class="line"><span class="lineno">  215</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6">makeFxForward</a>(simMarket, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;baseCcy(), ccy, term, convention, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key]);</div>
<div class="line"><span class="lineno">  216</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;TBS&quot;</span>)</div>
<div class="line"><span class="lineno">  217</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98">makeTenorBasisSwap</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, term, convention, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  218</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  219</span>                        recognised = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  220</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  221</span>                    skipped = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  222</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  223</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(<span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  224</span>                                                             <span class="stringliteral">&quot;Skipping par instrument for discount curve &quot;</span> + ccy,</div>
<div class="line"><span class="lineno">  225</span>                                                             e.what()));</div>
<div class="line"><span class="lineno">  226</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  227</span>                        QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  228</span>                    }</div>
<div class="line"><span class="lineno">  229</span>                }</div>
<div class="line"><span class="lineno">  230</span>                <span class="keywordflow">if</span> (!recognised)</div>
<div class="line"><span class="lineno">  231</span>                    QL_FAIL(<span class="stringliteral">&quot;Instrument type &quot;</span> &lt;&lt; instType &lt;&lt; <span class="stringliteral">&quot; for par sensitivity conversion not recognised&quot;</span>);</div>
<div class="line"><span class="lineno">  232</span>                <span class="keywordflow">if</span> (!skipped) {</div>
<div class="line"><span class="lineno">  233</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = ret.first;</div>
<div class="line"><span class="lineno">  234</span>                    <span class="keywordflow">if</span> (!simMarket) {</div>
<div class="line"><span class="lineno">  235</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>[ccy].push_back((ret.second - <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>) * Days);</div>
<div class="line"><span class="lineno">  236</span>                    }</div>
<div class="line"><span class="lineno">  237</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par instrument for discount curve, ccy &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;, type &quot;</span> &lt;&lt; instType</div>
<div class="line"><span class="lineno">  238</span>                        &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  239</span>                }</div>
<div class="line"><span class="lineno">  240</span>            }</div>
<div class="line"><span class="lineno">  241</span>        }</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>) == 0) {</div>
<div class="line"><span class="lineno">  245</span> </div>
<div class="line"><span class="lineno">  246</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: Yield curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  247</span>        <span class="comment">// Yield curve instruments</span></div>
<div class="line"><span class="lineno">  248</span>        QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;yieldCurveNames().size() == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;yieldCurveCurrencies().size(),</div>
<div class="line"><span class="lineno">  249</span>            <span class="stringliteral">&quot;vector size mismatch in sim market parameters yield curve names/currencies&quot;</span>);</div>
<div class="line"><span class="lineno">  250</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> y : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276">yieldCurveShiftData</a>()) {</div>
<div class="line"><span class="lineno">  251</span>            <span class="keywordtype">string</span> curveName = y.first;            </div>
<div class="line"><span class="lineno">  252</span>            QL_REQUIRE(simMarket || <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>.find(curveName) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>.end(),</div>
<div class="line"><span class="lineno">  253</span>                <span class="stringliteral">&quot;duplicate entry in yieldCurvePillars &#39;&quot;</span> &lt;&lt; curveName &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  254</span>            <span class="keywordtype">string</span> equityForecastCurveName = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// ignored, if empty</span></div>
<div class="line"><span class="lineno">  255</span>            <span class="keywordtype">string</span> ccy = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  256</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;yieldCurveNames().size(); ++j) {</div>
<div class="line"><span class="lineno">  257</span>                <span class="keywordflow">if</span> (curveName == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;yieldCurveNames()[j])</div>
<div class="line"><span class="lineno">  258</span>                    ccy = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;yieldCurveCurrencies().at(curveName);</div>
<div class="line"><span class="lineno">  259</span>            }</div>
<div class="line"><span class="lineno">  260</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: yield curve name &quot;</span> &lt;&lt; curveName);</div>
<div class="line"><span class="lineno">  261</span>            QL_REQUIRE(ccy != <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;yield curve currency not found for yield curve &quot;</span> &lt;&lt; curveName);</div>
<div class="line"><span class="lineno">  262</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">SensitivityScenarioData::CurveShiftParData</a> data =</div>
<div class="line"><span class="lineno">  263</span>                *boost::static_pointer_cast&lt;SensitivityScenarioData::CurveShiftParData&gt;(y.second);</div>
<div class="line"><span class="lineno">  264</span>            Size n_ten = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>.size();</div>
<div class="line"><span class="lineno">  265</span>            QL_REQUIRE(data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>.size() == n_ten,</div>
<div class="line"><span class="lineno">  266</span>                <span class="stringliteral">&quot;number of tenors does not match number of yield curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  267</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_ten; ++j) {</div>
<div class="line"><span class="lineno">  268</span>                <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>, curveName, j);</div>
<div class="line"><span class="lineno">  269</span>                <span class="keywordflow">if</span> (!dryRun &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  270</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(key) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  271</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  272</span>                Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>[j];</div>
<div class="line"><span class="lineno">  273</span>                <span class="keywordtype">string</span> instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[j];</div>
<div class="line"><span class="lineno">  274</span>                <span class="keywordtype">bool</span> singleCurve = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">parInstrumentSingleCurve</a>;</div>
<div class="line"><span class="lineno">  275</span>                std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt; ret;</div>
<div class="line"><span class="lineno">  276</span>                <span class="keywordtype">bool</span> recognised = <span class="keyword">true</span>, skipped = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  277</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  278</span>                    map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  279</span>                    QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  280</span>                        <span class="stringliteral">&quot;conventions not found for ccy &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span> &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  281</span>                    boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>                    <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;IRS&quot;</span>)</div>
<div class="line"><span class="lineno">  284</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8">makeSwap</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, curveName, equityForecastCurveName, term, convention, singleCurve,</div>
<div class="line"><span class="lineno">  285</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  286</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;DEP&quot;</span>)</div>
<div class="line"><span class="lineno">  287</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8">makeDeposit</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, curveName, equityForecastCurveName, term, convention);</div>
<div class="line"><span class="lineno">  288</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;FRA&quot;</span>)</div>
<div class="line"><span class="lineno">  289</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307">makeFRA</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, curveName, equityForecastCurveName, term, convention);</div>
<div class="line"><span class="lineno">  290</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;OIS&quot;</span>)</div>
<div class="line"><span class="lineno">  291</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a">makeOIS</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, curveName, equityForecastCurveName, term, convention, singleCurve,</div>
<div class="line"><span class="lineno">  292</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  293</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;TBS&quot;</span>)</div>
<div class="line"><span class="lineno">  294</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98">makeTenorBasisSwap</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, curveName, <span class="stringliteral">&quot;&quot;</span>, term, convention,</div>
<div class="line"><span class="lineno">  295</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  296</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;XBS&quot;</span>) {</div>
<div class="line"><span class="lineno">  297</span>                        <span class="keywordtype">string</span> otherCurrency = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#ae6a2db37276fde49080505703f92faf2">otherCurrency</a>.empty() ? <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a30e27b616a36ee9a9ca6cf1ff5e27ff0">simMarketParams_</a>-&gt;baseCcy() : data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#ae6a2db37276fde49080505703f92faf2">otherCurrency</a>;</div>
<div class="line"><span class="lineno">  298</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae">makeCrossCcyBasisSwap</a>(simMarket, otherCurrency, ccy, term, convention, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key]);</div>
<div class="line"><span class="lineno">  299</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  300</span>                        recognised = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  301</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  302</span>                    skipped = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  303</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  304</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(<span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  305</span>                                                             <span class="stringliteral">&quot;Skipping par instrument for &quot;</span> + curveName, e.what()));</div>
<div class="line"><span class="lineno">  306</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  307</span>                        QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  308</span>                    }</div>
<div class="line"><span class="lineno">  309</span>                }</div>
<div class="line"><span class="lineno">  310</span>                <span class="keywordflow">if</span> (!recognised)</div>
<div class="line"><span class="lineno">  311</span>                    QL_FAIL(<span class="stringliteral">&quot;Instrument type &quot;</span> &lt;&lt; instType &lt;&lt; <span class="stringliteral">&quot; for par sensitivity conversion unexpected&quot;</span>);</div>
<div class="line"><span class="lineno">  312</span>                <span class="keywordflow">if</span> (!skipped) {</div>
<div class="line"><span class="lineno">  313</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = ret.first;</div>
<div class="line"><span class="lineno">  314</span>                    <span class="keywordflow">if</span> (!simMarket) {</div>
<div class="line"><span class="lineno">  315</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>[curveName].push_back((ret.second - <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>) * Days);</div>
<div class="line"><span class="lineno">  316</span>                    }</div>
<div class="line"><span class="lineno">  317</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par instrument for yield curve, ccy &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot;, type &quot;</span> &lt;&lt; instType</div>
<div class="line"><span class="lineno">  318</span>                        &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  319</span>                }</div>
<div class="line"><span class="lineno">  320</span>            }</div>
<div class="line"><span class="lineno">  321</span>        }</div>
<div class="line"><span class="lineno">  322</span>    }</div>
<div class="line"><span class="lineno">  323</span>    </div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>) == 0) {</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: Index curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  327</span>        <span class="comment">// Index curve instruments</span></div>
<div class="line"><span class="lineno">  328</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> index : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82">indexCurveShiftData</a>()) {</div>
<div class="line"><span class="lineno">  329</span>            <span class="keywordtype">string</span> indexName = index.first;</div>
<div class="line"><span class="lineno">  330</span>            QL_REQUIRE(simMarket || <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>.find(indexName) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>.end(),</div>
<div class="line"><span class="lineno">  331</span>                <span class="stringliteral">&quot;duplicate entry in yieldCurvePillars &#39;&quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  332</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">SensitivityScenarioData::CurveShiftParData</a> data = *boost::static_pointer_cast&lt;SensitivityScenarioData::CurveShiftParData&gt;(index.second);</div>
<div class="line"><span class="lineno">  333</span>            Size n_ten = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>.size();</div>
<div class="line"><span class="lineno">  334</span>            QL_REQUIRE(data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>.size() == n_ten,</div>
<div class="line"><span class="lineno">  335</span>                <span class="stringliteral">&quot;number of tenors does not match number of index curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  336</span>            vector&lt;string&gt; tokens;</div>
<div class="line"><span class="lineno">  337</span>            boost::split(tokens, indexName, boost::is_any_of(<span class="stringliteral">&quot;-&quot;</span>));</div>
<div class="line"><span class="lineno">  338</span>            QL_REQUIRE(tokens.size() &gt;= 2, <span class="stringliteral">&quot;index name &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; unexpected&quot;</span>);</div>
<div class="line"><span class="lineno">  339</span>            <span class="keywordtype">string</span> ccy = tokens[0];</div>
<div class="line"><span class="lineno">  340</span>            QL_REQUIRE(ccy.length() == 3, <span class="stringliteral">&quot;currency token not recognised&quot;</span>);</div>
<div class="line"><span class="lineno">  341</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_ten; ++j) {</div>
<div class="line"><span class="lineno">  342</span>                <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, indexName, j);</div>
<div class="line"><span class="lineno">  343</span>                <span class="keywordflow">if</span> (!dryRun &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  344</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(key) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  345</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  346</span>                Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>[j];</div>
<div class="line"><span class="lineno">  347</span>                <span class="keywordtype">string</span> instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[j];</div>
<div class="line"><span class="lineno">  348</span>                <span class="keywordtype">bool</span> singleCurve = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">parInstrumentSingleCurve</a>;</div>
<div class="line"><span class="lineno">  349</span>                <span class="keywordtype">string</span> yieldCurveName = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  350</span>                <span class="keywordtype">string</span> equityForecastCurveName = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// ignored, if empty</span></div>
<div class="line"><span class="lineno">  351</span>                std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt; ret;</div>
<div class="line"><span class="lineno">  352</span>                <span class="keywordtype">bool</span> recognised = <span class="keyword">true</span>, skipped = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  353</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  354</span>                    map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  355</span>                    QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  356</span>                        <span class="stringliteral">&quot;conventions not found for ccy &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span> &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  357</span>                    boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>                    <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;IRS&quot;</span>)</div>
<div class="line"><span class="lineno">  360</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8">makeSwap</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention, singleCurve,</div>
<div class="line"><span class="lineno">  361</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  362</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;DEP&quot;</span>)</div>
<div class="line"><span class="lineno">  363</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8">makeDeposit</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention);</div>
<div class="line"><span class="lineno">  364</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;FRA&quot;</span>)</div>
<div class="line"><span class="lineno">  365</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307">makeFRA</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention);</div>
<div class="line"><span class="lineno">  366</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;OIS&quot;</span>)</div>
<div class="line"><span class="lineno">  367</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a">makeOIS</a>(simMarket, ccy, indexName, yieldCurveName, equityForecastCurveName, term, convention, singleCurve,</div>
<div class="line"><span class="lineno">  368</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  369</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;TBS&quot;</span>)</div>
<div class="line"><span class="lineno">  370</span>                        ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98">makeTenorBasisSwap</a>(simMarket, ccy, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, term, convention,</div>
<div class="line"><span class="lineno">  371</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  372</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  373</span>                        recognised = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  374</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  375</span>                    skipped = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  376</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  377</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(<span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  378</span>                                                             <span class="stringliteral">&quot;Skipping par instrument for index curve &quot;</span> + indexName,</div>
<div class="line"><span class="lineno">  379</span>                                                             e.what()));</div>
<div class="line"><span class="lineno">  380</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  381</span>                        QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  382</span>                    }</div>
<div class="line"><span class="lineno">  383</span>                }</div>
<div class="line"><span class="lineno">  384</span>                <span class="keywordflow">if</span> (!recognised)</div>
<div class="line"><span class="lineno">  385</span>                    QL_FAIL(<span class="stringliteral">&quot;Instrument type &quot;</span> &lt;&lt; instType &lt;&lt; <span class="stringliteral">&quot; for par sensitivity conversion not recognised&quot;</span>);</div>
<div class="line"><span class="lineno">  386</span>                <span class="keywordflow">if</span> (!skipped) {</div>
<div class="line"><span class="lineno">  387</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = ret.first;</div>
<div class="line"><span class="lineno">  388</span>                    <span class="keywordflow">if</span> (!simMarket) {</div>
<div class="line"><span class="lineno">  389</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0b3263b4a2fbc68cc2e189cd60e9a41f">yieldCurvePillars_</a>[indexName].push_back((ret.second - <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>) * Days);</div>
<div class="line"><span class="lineno">  390</span>                    }</div>
<div class="line"><span class="lineno">  391</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par instrument for index &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; ccy &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  392</span>                }</div>
<div class="line"><span class="lineno">  393</span>            }</div>
<div class="line"><span class="lineno">  394</span>        }</div>
<div class="line"><span class="lineno">  395</span>    }</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b5732971f0b2e238e09996b0e4137ab">RiskFactorKey::KeyType::OptionletVolatility</a>) == 0) {</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>        <span class="comment">// Caps/Floors</span></div>
<div class="line"><span class="lineno">  400</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: Cap/Floor par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe">capFloorVolShiftData</a>()) {</div>
<div class="line"><span class="lineno">  403</span>            <span class="keywordtype">string</span> key = c.first;</div>
<div class="line"><span class="lineno">  404</span>            <span class="keyword">auto</span> datap =</div>
<div class="line"><span class="lineno">  405</span>                boost::dynamic_pointer_cast&lt;SensitivityScenarioData::CapFloorVolShiftParData&gt;(c.second);</div>
<div class="line"><span class="lineno">  406</span>            <span class="keywordtype">string</span> expDiscountCurve = datap ? datap-&gt;discountCurve : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  407</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data.html">SensitivityScenarioData::CapFloorVolShiftData</a> data = *c.second;</div>
<div class="line"><span class="lineno">  408</span>            <span class="keywordtype">string</span> indexName = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data.html#adc96d4ee9c51f5d8fb6568363dee8a0e">indexName</a>;</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordtype">string</span> ccy = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(indexName)-&gt;currency().code();</div>
<div class="line"><span class="lineno">  410</span>            Handle&lt;YieldTermStructure&gt; yts;</div>
<div class="line"><span class="lineno">  411</span>            Handle&lt;OptionletVolatilityStructure&gt; ovs;</div>
<div class="line"><span class="lineno">  412</span>            Size n_strikes = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a>.size();</div>
<div class="line"><span class="lineno">  413</span>            Size n_expiries = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a>.size();</div>
<div class="line"><span class="lineno">  414</span> </div>
<div class="line"><span class="lineno">  415</span>            <span class="comment">// Determine if the cap floor is ATM</span></div>
<div class="line"><span class="lineno">  416</span>            <span class="keywordtype">bool</span> isAtm = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a>.size() == 1 &amp;&amp; data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a>[0] == 0.0 &amp;&amp; data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0eac94a810f70dec29d19ec5d5307a39">isRelative</a>;</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_strikes; ++j) {</div>
<div class="line"><span class="lineno">  419</span>                Real strike = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a>[j];</div>
<div class="line"><span class="lineno">  420</span>                <span class="keywordflow">for</span> (Size k = 0; k &lt; n_expiries; ++k) {</div>
<div class="line"><span class="lineno">  421</span>                    <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> rfkey(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b5732971f0b2e238e09996b0e4137ab">RiskFactorKey::KeyType::OptionletVolatility</a>, key, k * n_strikes + j);</div>
<div class="line"><span class="lineno">  422</span>                    <span class="keywordflow">if</span> (!dryRun &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  423</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(rfkey) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  424</span>                        <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  425</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  426</span>                        <span class="keywordflow">if</span> (simMarket != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  427</span>                            yts = expDiscountCurve.empty() ? simMarket-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>)</div>
<div class="line"><span class="lineno">  428</span>                                : simMarket-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>)</div>
<div class="line"><span class="lineno">  429</span>                                -&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno">  430</span>                            ovs = simMarket-&gt;capFloorVol(key, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno">  431</span>                        }</div>
<div class="line"><span class="lineno">  432</span>                        Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a>[k];</div>
<div class="line"><span class="lineno">  433</span>                        <span class="keyword">auto</span> tmp = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335">makeCapFloor</a>(simMarket, ccy, indexName, term, strike, isAtm, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[rfkey], expDiscountCurve);</div>
<div class="line"><span class="lineno">  434</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>[rfkey] = tmp;</div>
<div class="line"><span class="lineno">  435</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0d4e59f5de6fbf2e1eb409d8b151378b">parCapsYts_</a>[rfkey] = yts;</div>
<div class="line"><span class="lineno">  436</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9f99fe37fb27e159c5d2a0b43a48a33a">parCapsVts_</a>[rfkey] = ovs;</div>
<div class="line"><span class="lineno">  437</span>                        <span class="keywordflow">if</span> (j == 0)</div>
<div class="line"><span class="lineno">  438</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a785a43ae042d5fc2f52c58e0976770c6">capFloorPillars_</a>[key].push_back(term);</div>
<div class="line"><span class="lineno">  439</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par cap/floor for key &quot;</span> &lt;&lt; rfkey &lt;&lt; <span class="stringliteral">&quot; strike &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  440</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  441</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  442</span>                            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(<span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  443</span>                                                                 <span class="stringliteral">&quot;Skipping par cap/floor for key &quot;</span> + key, e.what()));</div>
<div class="line"><span class="lineno">  444</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  445</span>                            QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  446</span>                        }</div>
<div class="line"><span class="lineno">  447</span>                    }</div>
<div class="line"><span class="lineno">  448</span>                }</div>
<div class="line"><span class="lineno">  449</span>            }</div>
<div class="line"><span class="lineno">  450</span>        }</div>
<div class="line"><span class="lineno">  451</span>    }</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">RiskFactorKey::KeyType::SurvivalProbability</a>) == 0) {</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>        <span class="comment">// CDS Instruments</span></div>
<div class="line"><span class="lineno">  456</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: CDS par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  457</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46">creditCurveShiftData</a>()) {</div>
<div class="line"><span class="lineno">  458</span>            <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = c.first;</div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordtype">string</span> ccy = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a335c3820a9ad66b4114eae1b63f57837">creditCcys</a>()[<a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a>];</div>
<div class="line"><span class="lineno">  460</span>            <span class="keyword">auto</span> itr = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46">creditCurveShiftData</a>().find(name);</div>
<div class="line"><span class="lineno">  461</span>            QL_REQUIRE(itr != <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46">creditCurveShiftData</a>().end(), <span class="stringliteral">&quot;creditCurveShiftData not found for &quot;</span> &lt;&lt; name);</div>
<div class="line"><span class="lineno">  462</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">SensitivityScenarioData::CurveShiftParData</a> data =</div>
<div class="line"><span class="lineno">  463</span>                *boost::static_pointer_cast&lt;SensitivityScenarioData::CurveShiftParData&gt;(c.second);</div>
<div class="line"><span class="lineno">  464</span>            Size n_expiries = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>.size();</div>
<div class="line"><span class="lineno">  465</span>            <span class="keywordflow">for</span> (Size k = 0; k &lt; n_expiries; ++k) {</div>
<div class="line"><span class="lineno">  466</span>                <span class="keywordtype">string</span> instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[k];</div>
<div class="line"><span class="lineno">  467</span>                <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">RiskFactorKey::KeyType::SurvivalProbability</a>, name, k);</div>
<div class="line"><span class="lineno">  468</span>                <span class="keywordflow">if</span> (!dryRun &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  469</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(key) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  470</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  471</span>                Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>[k];</div>
<div class="line"><span class="lineno">  472</span>                std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt; ret;</div>
<div class="line"><span class="lineno">  473</span>                <span class="keywordtype">bool</span> skipped = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  474</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  475</span>                    map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  476</span>                    QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  477</span>                        <span class="stringliteral">&quot;conventions not found for name &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span> &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  478</span>                    boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  479</span> </div>
<div class="line"><span class="lineno">  480</span>                    ret = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26">makeCDS</a>(simMarket, name, ccy, term, convention, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  481</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  482</span>                    skipped = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  483</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  484</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(<span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  485</span>                                                             <span class="stringliteral">&quot;Skipping par instrument for cds &quot;</span> + name, e.what()));</div>
<div class="line"><span class="lineno">  486</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  487</span>                        QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  488</span>                    }</div>
<div class="line"><span class="lineno">  489</span>                }</div>
<div class="line"><span class="lineno">  490</span>                <span class="keywordflow">if</span> (!skipped) {</div>
<div class="line"><span class="lineno">  491</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = ret.first;</div>
<div class="line"><span class="lineno">  492</span>                    <span class="keywordflow">if</span> (!simMarket) {</div>
<div class="line"><span class="lineno">  493</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a1385c53b3a28ee92bbcfe4c04d3d3071">cdsPillars_</a>[<a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a>].push_back((ret.second - <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>) * Days);</div>
<div class="line"><span class="lineno">  494</span>                    }</div>
<div class="line"><span class="lineno">  495</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par CDS for name &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  496</span>                }</div>
<div class="line"><span class="lineno">  497</span>            }</div>
<div class="line"><span class="lineno">  498</span>        }</div>
<div class="line"><span class="lineno">  499</span>    }</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023">RiskFactorKey::KeyType::ZeroInflationCurve</a>) == 0) {</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: ZCI curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  504</span>        <span class="comment">// Zero Inflation Curve instruments</span></div>
<div class="line"><span class="lineno">  505</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> z : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e">zeroInflationCurveShiftData</a>()) {</div>
<div class="line"><span class="lineno">  506</span>            <span class="keywordtype">string</span> indexName = z.first;</div>
<div class="line"><span class="lineno">  507</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">SensitivityScenarioData::CurveShiftParData</a> data =</div>
<div class="line"><span class="lineno">  508</span>                *boost::static_pointer_cast&lt;SensitivityScenarioData::CurveShiftParData&gt;(z.second);</div>
<div class="line"><span class="lineno">  509</span>            Size n_ten = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>.size();</div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_ten; ++j) {</div>
<div class="line"><span class="lineno">  511</span>                <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023">RiskFactorKey::KeyType::ZeroInflationCurve</a>, indexName, j);</div>
<div class="line"><span class="lineno">  512</span>                <span class="keywordflow">if</span> (!dryRun &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.empty() &amp;&amp;</div>
<div class="line"><span class="lineno">  513</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.find(key) == <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa1da903fae63cef2935f81b313314f17">relevantRiskFactors_</a>.end())</div>
<div class="line"><span class="lineno">  514</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  515</span>                Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>[j];</div>
<div class="line"><span class="lineno">  516</span>                <span class="keywordtype">string</span> instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[j];</div>
<div class="line"><span class="lineno">  517</span>                <span class="keywordtype">bool</span> singleCurve = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">parInstrumentSingleCurve</a>;</div>
<div class="line"><span class="lineno">  518</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  519</span>                    map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  520</span>                    QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  521</span>                        <span class="stringliteral">&quot;conventions not found for zero inflation curve &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span> &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  522</span>                    boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>                    <span class="keyword">auto</span> tmp = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f">makeZeroInflationSwap</a>(simMarket, indexName, term, convention, singleCurve,</div>
<div class="line"><span class="lineno">  525</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  526</span>                    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = tmp;</div>
<div class="line"><span class="lineno">  527</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par instrument for zero inflation index &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  528</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  529</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  530</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(</div>
<div class="line"><span class="lineno">  531</span>                            <span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  532</span>                            <span class="stringliteral">&quot;Skipping par instrument for zero inflation index &quot;</span> + indexName, e.what()));</div>
<div class="line"><span class="lineno">  533</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  534</span>                        QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  535</span>                    }</div>
<div class="line"><span class="lineno">  536</span>                }</div>
<div class="line"><span class="lineno">  537</span>            }</div>
<div class="line"><span class="lineno">  538</span>        }</div>
<div class="line"><span class="lineno">  539</span>    }</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401">RiskFactorKey::KeyType::YoYInflationCurve</a>) == 0) {</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>        <span class="comment">// YoY Inflation Curve instruments</span></div>
<div class="line"><span class="lineno">  544</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: YOYI curve par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  545</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> y : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7">yoyInflationCurveShiftData</a>()) {</div>
<div class="line"><span class="lineno">  546</span>            <span class="keywordtype">string</span> indexName = y.first;</div>
<div class="line"><span class="lineno">  547</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">SensitivityScenarioData::CurveShiftParData</a> data = *boost::static_pointer_cast&lt;SensitivityScenarioData::CurveShiftParData&gt;(y.second);</div>
<div class="line"><span class="lineno">  548</span>            Size n_ten = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>.size();</div>
<div class="line"><span class="lineno">  549</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_ten; ++j) {</div>
<div class="line"><span class="lineno">  550</span>                Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a>[j];</div>
<div class="line"><span class="lineno">  551</span>                <span class="keywordtype">string</span> instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[j];</div>
<div class="line"><span class="lineno">  552</span>                <span class="keywordtype">bool</span> singleCurve = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">parInstrumentSingleCurve</a>;</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>                <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401">RiskFactorKey::KeyType::YoYInflationCurve</a>, indexName, j);</div>
<div class="line"><span class="lineno">  555</span>                <span class="keywordtype">bool</span> recognised = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  556</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  557</span>                    map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  558</span>                    QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  559</span>                        <span class="stringliteral">&quot;conventions not found for zero inflation curve &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span> &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  560</span>                    boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>                    <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;ZIS&quot;</span>) {</div>
<div class="line"><span class="lineno">  563</span>                        <span class="keyword">auto</span> tmp = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e">makeYoyInflationSwap</a>(simMarket, indexName, term, convention, singleCurve, <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  564</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  565</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = tmp;</div>
<div class="line"><span class="lineno">  566</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;YYS&quot;</span>) {</div>
<div class="line"><span class="lineno">  567</span>                        <span class="keyword">auto</span> tmp = <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e">makeYoyInflationSwap</a>(simMarket, indexName, term, convention, singleCurve, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  568</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>[key], data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>);</div>
<div class="line"><span class="lineno">  569</span>                        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>[key] = tmp;</div>
<div class="line"><span class="lineno">  570</span>                    } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  571</span>                        recognised = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  572</span>                } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  573</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  574</span>                        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(<span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  575</span>                                                             <span class="stringliteral">&quot;Skipping par instrument for yoy index &quot;</span> + indexName,</div>
<div class="line"><span class="lineno">  576</span>                                                             e.what()));</div>
<div class="line"><span class="lineno">  577</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  578</span>                        QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  579</span>                    }</div>
<div class="line"><span class="lineno">  580</span>                }</div>
<div class="line"><span class="lineno">  581</span>                <span class="keywordflow">if</span> (!recognised)</div>
<div class="line"><span class="lineno">  582</span>                    QL_FAIL(<span class="stringliteral">&quot;Instrument type &quot;</span> &lt;&lt; instType &lt;&lt; <span class="stringliteral">&quot; for par sensitivity conversion not recognised&quot;</span>);</div>
<div class="line"><span class="lineno">  583</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par instrument for yoy inflation index &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  584</span>            }</div>
<div class="line"><span class="lineno">  585</span>        }</div>
<div class="line"><span class="lineno">  586</span>    }</div>
<div class="line"><span class="lineno">  587</span> </div>
<div class="line"><span class="lineno">  588</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a21cafd2d3db8b559b5ffef225471cd41">typesDisabled_</a>.count(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca07cf31a470614797e8fde5ef0ec16d00">RiskFactorKey::KeyType::YoYInflationCapFloorVolatility</a>) == 0) {</div>
<div class="line"><span class="lineno">  589</span> </div>
<div class="line"><span class="lineno">  590</span>        <span class="comment">// YY Caps/Floors</span></div>
<div class="line"><span class="lineno">  591</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;ParSensitivityAnalysis: YOYI Cap/Floor par instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  592</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> y : <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73">yoyInflationCapFloorVolShiftData</a>()) {</div>
<div class="line"><span class="lineno">  593</span>            <span class="keywordtype">string</span> indexName = y.first;</div>
<div class="line"><span class="lineno">  594</span>            <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html">SensitivityScenarioData::CapFloorVolShiftParData</a> data =</div>
<div class="line"><span class="lineno">  595</span>                *boost::static_pointer_cast&lt;SensitivityScenarioData::CapFloorVolShiftParData&gt;(y.second);</div>
<div class="line"><span class="lineno">  596</span>            Size n_strikes = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a>.size();</div>
<div class="line"><span class="lineno">  597</span>            Size n_expiries = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a>.size();</div>
<div class="line"><span class="lineno">  598</span>            <span class="keywordtype">bool</span> singleCurve = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">parInstrumentSingleCurve</a>;</div>
<div class="line"><span class="lineno">  599</span>            <span class="keywordflow">for</span> (Size j = 0; j &lt; n_strikes; ++j) {</div>
<div class="line"><span class="lineno">  600</span>                Real strike = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a>[j];</div>
<div class="line"><span class="lineno">  601</span>                pair&lt;string, Size&gt; key(indexName, j);</div>
<div class="line"><span class="lineno">  602</span>                <span class="keywordflow">for</span> (Size k = 0; k &lt; n_expiries; ++k) {</div>
<div class="line"><span class="lineno">  603</span>                    <a class="code hl_class" href="classore_1_1analytics_1_1_risk_factor_key.html">RiskFactorKey</a> key(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca07cf31a470614797e8fde5ef0ec16d00">RiskFactorKey::KeyType::YoYInflationCapFloorVolatility</a>, indexName, k * n_strikes + j);</div>
<div class="line"><span class="lineno">  604</span> </div>
<div class="line"><span class="lineno">  605</span>                    <span class="keywordtype">bool</span> recognised = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  606</span>                    <span class="keywordtype">string</span> instType;</div>
<div class="line"><span class="lineno">  607</span>                    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  608</span>                        instType = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a>[j];</div>
<div class="line"><span class="lineno">  609</span>                        map&lt;string, string&gt; conventionsMap = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">parInstrumentConventions</a>;</div>
<div class="line"><span class="lineno">  610</span>                        QL_REQUIRE(conventionsMap.find(instType) != conventionsMap.end(),</div>
<div class="line"><span class="lineno">  611</span>                            <span class="stringliteral">&quot;conventions not found for zero inflation curve &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; and instrument type &quot;</span></div>
<div class="line"><span class="lineno">  612</span>                            &lt;&lt; instType);</div>
<div class="line"><span class="lineno">  613</span>                        boost::shared_ptr&lt;Convention&gt; convention = conventions-&gt;get(conventionsMap[instType]);</div>
<div class="line"><span class="lineno">  614</span>                        Period term = data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a>[k];</div>
<div class="line"><span class="lineno">  615</span>                        <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;ZIS&quot;</span>) {</div>
<div class="line"><span class="lineno">  616</span>                            <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65">makeYoYCapFloor</a>(simMarket, indexName, term, strike, convention, singleCurve, <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">  617</span>                                data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>, key);</div>
<div class="line"><span class="lineno">  618</span>                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (instType == <span class="stringliteral">&quot;YYS&quot;</span>) {</div>
<div class="line"><span class="lineno">  619</span>                            <a class="code hl_function" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65">makeYoYCapFloor</a>(simMarket, indexName, term, strike, convention, singleCurve, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  620</span>                                data.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#af20239289872e7efae0fc830541301dd">discountCurve</a>, key);</div>
<div class="line"><span class="lineno">  621</span>                        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  622</span>                            recognised = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  623</span>                        <span class="keywordflow">if</span> (j == 0)</div>
<div class="line"><span class="lineno">  624</span>                            <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aa43f8b451a81dae3c7af0c9f0a5fd1b5">yoyCapFloorPillars_</a>[indexName].push_back(term);</div>
<div class="line"><span class="lineno">  625</span>                    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> std::exception&amp; e) {</div>
<div class="line"><span class="lineno">  626</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af32b71243dbbe327ebf21fbb3b27c3df">continueOnError_</a>) {</div>
<div class="line"><span class="lineno">  627</span>                            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a35cb05f674d9e764ca12cff351b064f2">ALOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_error_message.html">StructuredAnalyticsErrorMessage</a>(</div>
<div class="line"><span class="lineno">  628</span>                                <span class="stringliteral">&quot;Par sensitivity conversion&quot;</span>,</div>
<div class="line"><span class="lineno">  629</span>                                <span class="stringliteral">&quot;Skipping par instrument for yoy cap floor index &quot;</span> + indexName, e.what()));</div>
<div class="line"><span class="lineno">  630</span>                        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  631</span>                            QL_FAIL(e.what());</div>
<div class="line"><span class="lineno">  632</span>                        }</div>
<div class="line"><span class="lineno">  633</span>                    }</div>
<div class="line"><span class="lineno">  634</span>                    <span class="keywordflow">if</span> (!recognised)</div>
<div class="line"><span class="lineno">  635</span>                        QL_FAIL(<span class="stringliteral">&quot;Instrument type &quot;</span> &lt;&lt; instType &lt;&lt; <span class="stringliteral">&quot; for par sensitivity conversion not recognised&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Par yoy cap/floor for index &quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot; strike &quot;</span> &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; tenor &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; built.&quot;</span>);</div>
<div class="line"><span class="lineno">  637</span>                }</div>
<div class="line"><span class="lineno">  638</span>            }</div>
<div class="line"><span class="lineno">  639</span>        }</div>
<div class="line"><span class="lineno">  640</span>    }</div>
<div class="line"><span class="lineno">  641</span> </div>
<div class="line"><span class="lineno">  642</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Par instrument building done, got &quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af0ef5ade6c2998be146020771cfca68c">parHelpers_</a>.size() + <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a853d60aaf4f6828fc8e5c14d05e5235e">parCaps_</a>.size() + <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>.size()</div>
<div class="line"><span class="lineno">  643</span>                                             &lt;&lt; <span class="stringliteral">&quot; instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  644</span>} <span class="comment">// createParInstruments</span></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a0a8cff443db13bb49f84bb402091baae"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae">ore::analytics::ParSensitivityAnalysis::makeCrossCcyBasisSwap</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeCrossCcyBasisSwap(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string baseCcy, string ccy, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies)</div><div class="ttdoc">Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01589">parsensitivityanalysis.cpp:1589</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a10ed6e6816f20d1b60164edb508bdb98"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98">ore::analytics::ParSensitivityAnalysis::makeTenorBasisSwap</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeTenorBasisSwap(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string ccy, string shortIndexName, string longIndexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create Basis Swap for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01413">parsensitivityanalysis.cpp:1413</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a15e7d23239efd7bda0bd107f0c568a2f"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f">ore::analytics::ParSensitivityAnalysis::makeZeroInflationSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantLib::Instrument &gt; makeZeroInflationSwap(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string indexName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, bool singleCurve, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create Zero Swap for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01875">parsensitivityanalysis.cpp:1875</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a2abfe3c79d6b13d1865f82b9bae2ea65"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65">ore::analytics::ParSensitivityAnalysis::makeYoYCapFloor</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantLib::YoYInflationCapFloor &gt; makeYoYCapFloor(const boost::shared_ptr&lt; Market &gt; &amp;market, string indexName, Period term, Real strike, const boost::shared_ptr&lt; Convention &gt; &amp;convention, bool singleCurve, bool fromZero, const std::string &amp;expDiscountCurve, const ore::analytics::RiskFactorKey &amp;key)</div><div class="ttdoc">Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l02013">parsensitivityanalysis.cpp:2013</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a36b2d757640f779381349d234d4627a6"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6">ore::analytics::ParSensitivityAnalysis::makeFxForward</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeFxForward(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string baseCcy, string ccy, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies)</div><div class="ttdoc">Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01777">parsensitivityanalysis.cpp:1777</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a7c4856e81fa16c1c0f4c30fe20863df8"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8">ore::analytics::ParSensitivityAnalysis::makeSwap</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeSwap(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, bool singleCurve, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create Swap for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01075">parsensitivityanalysis.cpp:1075</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a8398135369084ed1a6d98a5c34816e4a"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a">ore::analytics::ParSensitivityAnalysis::makeOIS</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeOIS(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, bool singleCurve, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create OIS Swap for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01325">parsensitivityanalysis.cpp:1325</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a84f6a45da03b18ad06f2e6059576d335"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335">ore::analytics::ParSensitivityAnalysis::makeCapFloor</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantLib::CapFloor &gt; makeCapFloor(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string ccy, string indexName, Period term, Real strike, bool generatePillar, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01522">parsensitivityanalysis.cpp:1522</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_a9a39605391eba53ee7e55cb504808a9e"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e">ore::analytics::ParSensitivityAnalysis::makeYoyInflationSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; QuantLib::Instrument &gt; makeYoyInflationSwap(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string indexName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, bool singleCurve, bool fromZero, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01926">parsensitivityanalysis.cpp:1926</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_ab159350c50880e88ef534864f9466b26"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26">ore::analytics::ParSensitivityAnalysis::makeCDS</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeCDS(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string name, string ccy, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions, std::set&lt; ore::analytics::RiskFactorKey &gt; &amp;parHelperDependencies, const std::string &amp;expDiscountCurve=&quot;&quot;)</div><div class="ttdoc">Create CDS for implying par rate sensitivity from Hazard Rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01829">parsensitivityanalysis.cpp:1829</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_abc5dd9703405793fd837d16b467ba2a8"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8">ore::analytics::ParSensitivityAnalysis::makeDeposit</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeDeposit(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions)</div><div class="ttdoc">Create Deposit for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01200">parsensitivityanalysis.cpp:1200</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html_ac59b12d3c4bc46e5912a4c7b7ef76307"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307">ore::analytics::ParSensitivityAnalysis::makeFRA</a></div><div class="ttdeci">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeFRA(const boost::shared_ptr&lt; ore::data::Market &gt; &amp;market, string ccy, string indexName, string yieldCurveName, string equityForecastCurveName, Period term, const boost::shared_ptr&lt; Convention &gt; &amp;conventions)</div><div class="ttdoc">Create FRA for implying par rate sensitivity from zero rate sensitivity.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01258">parsensitivityanalysis.cpp:1258</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a></div><div class="ttdoc">Data types stored in the scenario class.</div><div class="ttdef"><b>Definition:</b> <a href="scenario_8hpp_source.html#l00046">scenario.hpp:46</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a04bd169bbc4c12c057ea988bcfa5c0c7"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7">ore::analytics::SensitivityScenarioData::yoyInflationCurveShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CurveShiftData &gt; &gt; &amp; yoyInflationCurveShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00154">sensitivityscenariodata.hpp:154</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a0f272d628eba1221955e73b95896ea6f"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f">ore::analytics::SensitivityScenarioData::discountCurveShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CurveShiftData &gt; &gt; &amp; discountCurveShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00137">sensitivityscenariodata.hpp:137</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a1ac8230a9773a5d2f2af7e878b2bd276"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276">ore::analytics::SensitivityScenarioData::yieldCurveShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CurveShiftData &gt; &gt; &amp; yieldCurveShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00141">sensitivityscenariodata.hpp:141</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a335c3820a9ad66b4114eae1b63f57837"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a335c3820a9ad66b4114eae1b63f57837">ore::analytics::SensitivityScenarioData::creditCcys</a></div><div class="ttdeci">const map&lt; string, string &gt; &amp; creditCcys() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00163">sensitivityscenariodata.hpp:163</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a70d248ac62734bf0f55269fd44906f46"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46">ore::analytics::SensitivityScenarioData::creditCurveShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CurveShiftData &gt; &gt; &amp; creditCurveShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00164">sensitivityscenariodata.hpp:164</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a79cab2e964334fa8b6fb9472a51aeffe"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe">ore::analytics::SensitivityScenarioData::capFloorVolShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CapFloorVolShiftData &gt; &gt; &amp; capFloorVolShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00143">sensitivityscenariodata.hpp:143</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_ab4e5b1bca5d2c1234d8cb2375798ea82"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82">ore::analytics::SensitivityScenarioData::indexCurveShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CurveShiftData &gt; &gt; &amp; indexCurveShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00140">sensitivityscenariodata.hpp:140</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_ab54d5f99e46c2615edb3499eb0d3a79e"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e">ore::analytics::SensitivityScenarioData::zeroInflationCurveShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CurveShiftData &gt; &gt; &amp; zeroInflationCurveShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00151">sensitivityscenariodata.hpp:151</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_ad13d23727f28ba2e988d4ba685405f73"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73">ore::analytics::SensitivityScenarioData::yoyInflationCapFloorVolShiftData</a></div><div class="ttdeci">const map&lt; string, boost::shared_ptr&lt; CapFloorVolShiftData &gt; &gt; &amp; yoyInflationCapFloorVolShiftData() const</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00157">sensitivityscenariodata.hpp:157</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_structured_analytics_error_message_html"><div class="ttname"><a href="classore_1_1analytics_1_1_structured_analytics_error_message.html">ore::analytics::StructuredAnalyticsErrorMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="structuredanalyticserror_8hpp_source.html#l00031">structuredanalyticserror.hpp:31</a></div></div>
<div class="ttc" id="agroup__utilities_html_gac1ecdc5f20e7d73327bccd5f930f8782"><div class="ttname"><a href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">ore::data::parseIborIndex</a></div><div class="ttdeci">boost::shared_ptr&lt; IborIndex &gt; parseIborIndex(const string &amp;s, const Handle&lt; YieldTermStructure &gt; &amp;h=Handle&lt; YieldTermStructure &gt;())</div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data.html">ore::analytics::SensitivityScenarioData::CapFloorVolShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00080">sensitivityscenariodata.hpp:80</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data_html_adc96d4ee9c51f5d8fb6568363dee8a0e"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data.html#adc96d4ee9c51f5d8fb6568363dee8a0e">ore::analytics::SensitivityScenarioData::CapFloorVolShiftData::indexName</a></div><div class="ttdeci">string indexName</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00081">sensitivityscenariodata.hpp:81</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html">ore::analytics::SensitivityScenarioData::CapFloorVolShiftParData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00111">sensitivityscenariodata.hpp:111</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data_html_a237e29b33aedd42b9daa7c5553a8ed0b"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">ore::analytics::SensitivityScenarioData::CapFloorVolShiftParData::parInstrumentConventions</a></div><div class="ttdeci">map&lt; string, string &gt; parInstrumentConventions</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00128">sensitivityscenariodata.hpp:128</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data_html_a5f0389b263605f149802a4c9364aae37"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">ore::analytics::SensitivityScenarioData::CapFloorVolShiftParData::parInstrumentSingleCurve</a></div><div class="ttdeci">bool parInstrumentSingleCurve</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00121">sensitivityscenariodata.hpp:121</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data_html_a8e9eb0c747925dba06238042450f3e58"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">ore::analytics::SensitivityScenarioData::CapFloorVolShiftParData::parInstruments</a></div><div class="ttdeci">vector&lt; string &gt; parInstruments</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00120">sensitivityscenariodata.hpp:120</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data_html_af20239289872e7efae0fc830541301dd"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_par_data.html#af20239289872e7efae0fc830541301dd">ore::analytics::SensitivityScenarioData::CapFloorVolShiftParData::discountCurve</a></div><div class="ttdeci">std::string discountCurve</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00126">sensitivityscenariodata.hpp:126</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data_html_a330cace8aeadc1a1af4cc6dc7737f6a1"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">ore::analytics::SensitivityScenarioData::CurveShiftData::shiftTenors</a></div><div class="ttdeci">vector&lt; Period &gt; shiftTenors</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00057">sensitivityscenariodata.hpp:57</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">ore::analytics::SensitivityScenarioData::CurveShiftParData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00088">sensitivityscenariodata.hpp:88</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html_a237e29b33aedd42b9daa7c5553a8ed0b"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a237e29b33aedd42b9daa7c5553a8ed0b">ore::analytics::SensitivityScenarioData::CurveShiftParData::parInstrumentConventions</a></div><div class="ttdeci">map&lt; string, string &gt; parInstrumentConventions</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00108">sensitivityscenariodata.hpp:108</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html_a5f0389b263605f149802a4c9364aae37"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a5f0389b263605f149802a4c9364aae37">ore::analytics::SensitivityScenarioData::CurveShiftParData::parInstrumentSingleCurve</a></div><div class="ttdeci">bool parInstrumentSingleCurve</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00096">sensitivityscenariodata.hpp:96</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html_a8e9eb0c747925dba06238042450f3e58"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">ore::analytics::SensitivityScenarioData::CurveShiftParData::parInstruments</a></div><div class="ttdeci">vector&lt; string &gt; parInstruments</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00095">sensitivityscenariodata.hpp:95</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html_ae6a2db37276fde49080505703f92faf2"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#ae6a2db37276fde49080505703f92faf2">ore::analytics::SensitivityScenarioData::CurveShiftParData::otherCurrency</a></div><div class="ttdeci">std::string otherCurrency</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00106">sensitivityscenariodata.hpp:106</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html_af20239289872e7efae0fc830541301dd"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#af20239289872e7efae0fc830541301dd">ore::analytics::SensitivityScenarioData::CurveShiftParData::discountCurve</a></div><div class="ttdeci">std::string discountCurve</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00101">sensitivityscenariodata.hpp:101</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data_html_a0329c29611762359cb65bd98a73e7233"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">ore::analytics::SensitivityScenarioData::VolShiftData::shiftStrikes</a></div><div class="ttdeci">vector&lt; Real &gt; shiftStrikes</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00076">sensitivityscenariodata.hpp:76</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data_html_a0eac94a810f70dec29d19ec5d5307a39"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0eac94a810f70dec29d19ec5d5307a39">ore::analytics::SensitivityScenarioData::VolShiftData::isRelative</a></div><div class="ttdeci">bool isRelative</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00077">sensitivityscenariodata.hpp:77</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data_html_a550435aa0100e7442862df947de10c1e"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">ore::analytics::SensitivityScenarioData::VolShiftData::shiftExpiries</a></div><div class="ttdeci">vector&lt; Period &gt; shiftExpiries</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00075">sensitivityscenariodata.hpp:75</a></div></div>
<div class="ttc" id="atodaysmarketparameters_8cpp_html_a8ccf841cb59e451791bcb2e1ac4f1edc"><div class="ttname"><a href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a></div><div class="ttdeci">string name</div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_cgraph">
<area shape="rect" title="Create par instruments." alt="" coords="5,601,152,626"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe" title=" " alt="" coords="206,5,437,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a335c3820a9ad66b4114eae1b63f57837" title=" " alt="" coords="236,69,407,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46" title=" " alt="" coords="209,133,434,173"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f" title=" " alt="" coords="200,197,443,237"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82" title=" " alt="" coords="209,261,433,301"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335" title="Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity." alt="" coords="268,427,375,453"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="513,402,679,427"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26" title="Create CDS for implying par rate sensitivity from Hazard Rate sensitivity." alt="" coords="281,1250,362,1275"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae" title="Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="233,575,409,601"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8" title="Create Deposit for implying par rate sensitivity from zero rate sensitivity." alt="" coords="272,674,371,699"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307" title="Create FRA for implying par rate sensitivity from zero rate sensitivity." alt="" coords="281,477,361,502"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6" title="Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity." alt="" coords="264,625,379,650"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a" title="Create OIS Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="283,526,359,551"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8" title="Create Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="278,802,365,827"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98" title="Create Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="246,326,397,351"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65" title="Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity." alt="" coords="256,1299,387,1325"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e" title="Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity." alt="" coords="245,1349,398,1374"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f" title="Create Zero Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="244,1398,399,1423"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276" title=" " alt="" coords="211,1448,431,1488"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73" title=" " alt="" coords="209,1513,434,1567"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7" title=" " alt="" coords="219,1591,424,1646"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e" title=" " alt="" coords="217,1670,426,1725"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a13afd8ff6e8e79e157b41c54db8b28f0" title=" " alt="" coords="501,1147,691,1187"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a8786a1690bc26d6512e31f517befea73" title=" " alt="" coords="495,1211,697,1251"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a79a5bf709a83cd99efa83faf7a6f0d6f" title=" " alt="" coords="501,1275,691,1315"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a4f6863a09ad0ad21659f5fcf32b418e5" title=" " alt="" coords="501,1339,691,1379"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a1156ccc1f63793734fe12a4535c6f68f" title=" " alt="" coords="498,1403,694,1443"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#aef79fd00dc96736bca343d0192c26468" title=" " alt="" coords="501,1467,691,1507"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b" title=" " alt="" coords="513,451,679,477"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f" title=" " alt="" coords="511,501,681,526"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga2f0695fe62430369b6acca7976d7be97" title=" " alt="" coords="508,550,684,575"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="560,599,632,625"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gaf17e7976e4fe2449bb4e226ee19c0fd9" title=" " alt="" coords="505,649,687,674"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html#aae4aedf88e432de744f6f0ae703bde15" title=" " alt="" coords="491,699,701,739"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#affc41d722d1120518f9948d788431056" title=" " alt="" coords="501,763,691,803"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a662efe4525f29a7b64e3e50417016fb6" title=" " alt="" coords="495,827,697,867"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#ac2f3a56b9130195610d7b30c0f087caa" title=" " alt="" coords="499,891,693,931"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a02282940d3091865100dcff65c695f9b" title=" " alt="" coords="504,955,688,995"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a12463e6245949bc4477529c791f31279" title=" " alt="" coords="504,1019,688,1059"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#aa27d877e3cfb8777d52f2ae720d062d3" title=" " alt="" coords="503,1083,689,1123"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="545,1531,647,1557"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a31afff2ccfbd52b6333575ee40c23504" title=" " alt="" coords="511,1581,681,1621"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a7bd51a0a7da6c232fa3bcc70045d501d" title=" " alt="" coords="509,1645,683,1685"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a0617466d18a23a375cc3d45ec9102b33" title=" " alt="" coords="511,1709,681,1749"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32" title=" " alt="" coords="509,1773,683,1813"/>
</map>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a03ca088a3dab4c18db2c047232a89780_icgraph">
<area shape="rect" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="abc5dd9703405793fd837d16b467ba2a8" name="abc5dd9703405793fd837d16b467ba2a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc5dd9703405793fd837d16b467ba2a8">&#9670;&#160;</a></span>makeDeposit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeDeposit </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>yieldCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>equityForecastCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create Deposit for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01200">1200</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1202</span>                                                                                                {</div>
<div class="line"><span class="lineno"> 1203</span>    </div>
<div class="line"><span class="lineno"> 1204</span>    <span class="comment">// Curve priorities, use in the following order if ccy/indexName/yieldCurveName strings are not blank</span></div>
<div class="line"><span class="lineno"> 1205</span>    <span class="comment">// Single curve setting only</span></div>
<div class="line"><span class="lineno"> 1206</span>    <span class="comment">// - discounts: iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1207</span>    <span class="comment">// - forwards:  iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1208</span>    boost::shared_ptr&lt;Conventions&gt; conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno"> 1209</span>    boost::shared_ptr&lt;DepositConvention&gt; conv = boost::dynamic_pointer_cast&lt;DepositConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1210</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected DepositConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1211</span>    boost::shared_ptr&lt;IborIndex&gt; index;</div>
<div class="line"><span class="lineno"> 1212</span>    <span class="keywordflow">if</span> (indexName == <span class="stringliteral">&quot;&quot;</span> &amp;&amp; conv-&gt;indexBased()) {</div>
<div class="line"><span class="lineno"> 1213</span>        <span class="comment">// At this point, we may have an overnight index or an ibor index</span></div>
<div class="line"><span class="lineno"> 1214</span>        <span class="keywordflow">if</span> (<a class="code hl_functionRef" href="../ored/group__utilities.html#ga2f0695fe62430369b6acca7976d7be97">isOvernightIndex</a>(conv-&gt;index())) {</div>
<div class="line"><span class="lineno"> 1215</span>            index = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(conv-&gt;index());</div>
<div class="line"><span class="lineno"> 1216</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1217</span>            index = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(conv-&gt;index() + <span class="stringliteral">&quot;-&quot;</span> + <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(term));</div>
<div class="line"><span class="lineno"> 1218</span>        }</div>
<div class="line"><span class="lineno"> 1219</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (indexName != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1220</span>        <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1221</span>            index = market-&gt;iborIndex(indexName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>).currentLink();</div>
<div class="line"><span class="lineno"> 1222</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1223</span>            index = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(indexName);</div>
<div class="line"><span class="lineno"> 1224</span>        }</div>
<div class="line"><span class="lineno"> 1225</span>    }</div>
<div class="line"><span class="lineno"> 1226</span>    boost::shared_ptr&lt;Deposit&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 1227</span>    <span class="keywordflow">if</span> (index != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1228</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;Deposit&gt;(1.0, 0.0, term, index-&gt;fixingDays(), index-&gt;fixingCalendar(),</div>
<div class="line"><span class="lineno"> 1229</span>                                             index-&gt;businessDayConvention(), index-&gt;endOfMonth(), index-&gt;dayCounter(),</div>
<div class="line"><span class="lineno"> 1230</span>                                             <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>, <span class="keyword">true</span>, 0 * Days);</div>
<div class="line"><span class="lineno"> 1231</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1232</span>        QL_REQUIRE(!conv-&gt;indexBased(), <span class="stringliteral">&quot;expected non-index-based deposit convention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1233</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> =</div>
<div class="line"><span class="lineno"> 1234</span>            boost::make_shared&lt;Deposit&gt;(1.0, 0.0, term, conv-&gt;settlementDays(), conv-&gt;calendar(), conv-&gt;convention(),</div>
<div class="line"><span class="lineno"> 1235</span>                                        conv-&gt;eom(), conv-&gt;dayCounter(), <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>, <span class="keyword">true</span>, 0 * Days);</div>
<div class="line"><span class="lineno"> 1236</span>    }</div>
<div class="line"><span class="lineno"> 1237</span>    RelinkableHandle&lt;YieldTermStructure&gt; engineYts;</div>
<div class="line"><span class="lineno"> 1238</span>    boost::shared_ptr&lt;PricingEngine&gt; depositEngine = boost::make_shared&lt;DepositEngine&gt;(engineYts);</div>
<div class="line"><span class="lineno"> 1239</span>    <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(depositEngine);</div>
<div class="line"><span class="lineno"> 1240</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1241</span>        <span class="keywordflow">if</span> (indexName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1242</span>            engineYts.linkTo(*index-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno"> 1243</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1244</span>            engineYts.linkTo(*market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1245</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1246</span>            engineYts.linkTo(*market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1247</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1248</span>            engineYts.linkTo(*market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1249</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1250</span>            QL_FAIL(<span class="stringliteral">&quot;Yield term structure not found for deposit (ccy=&quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1251</span>    }</div>
<div class="line"><span class="lineno"> 1252</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1253</span>    Date latestRelevantDate = <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate();</div>
<div class="line"><span class="lineno"> 1254</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, latestRelevantDate);</div>
<div class="line"><span class="lineno"> 1255</span>}</div>
<div class="ttc" id="agroup__utilities_html_ga1b8cd9a976247da6df232ad48d4af190"><div class="ttname"><a href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a></div><div class="ttdeci">std::string to_string(const QuantLib::Date &amp;date)</div></div>
<div class="ttc" id="agroup__utilities_html_ga2f0695fe62430369b6acca7976d7be97"><div class="ttname"><a href="../ored/group__utilities.html#ga2f0695fe62430369b6acca7976d7be97">ore::data::isOvernightIndex</a></div><div class="ttdeci">bool isOvernightIndex(const std::string &amp;indexName)</div></div>
<div class="ttc" id="apiecewiseatmoptionletcurve_8cpp_html_ac28af33f0db47fd24320c0ae0844971f"><div class="ttname"><a href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a></div><div class="ttdeci">QuantLib::BootstrapHelper&lt; QuantLib::OptionletVolatilityStructure &gt; helper</div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_cgraph">
<area shape="rect" title="Create Deposit for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,55,104,80"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga2f0695fe62430369b6acca7976d7be97" title=" " alt="" coords="152,5,328,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="157,55,323,80"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="204,104,276,129"/>
</map>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_abc5dd9703405793fd837d16b467ba2a8_icgraph">
<area shape="rect" title="Create Deposit for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1312,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="ac59b12d3c4bc46e5912a4c7b7ef76307" name="ac59b12d3c4bc46e5912a4c7b7ef76307"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac59b12d3c4bc46e5912a4c7b7ef76307">&#9670;&#160;</a></span>makeFRA()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeFRA </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>yieldCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>equityForecastCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create FRA for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01258">1258</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1259</span>                                                                                                                       {</div>
<div class="line"><span class="lineno"> 1260</span>    <span class="comment">// Curve priorities, use in the following order if ccy/indexName/yieldCurveName strings are not blank</span></div>
<div class="line"><span class="lineno"> 1261</span>    <span class="comment">// - discounts: discountCurve(ccy) -&gt; yieldCurve(yieldCurveName) -&gt; iborIndex(indexName)</span></div>
<div class="line"><span class="lineno"> 1262</span>    <span class="comment">// - forwards:  iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1263</span>    boost::shared_ptr&lt;Conventions&gt; conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno"> 1264</span>    boost::shared_ptr&lt;FraConvention&gt; conv = boost::dynamic_pointer_cast&lt;FraConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1265</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected FraConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1266</span>    <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = indexName != <span class="stringliteral">&quot;&quot;</span> ? indexName : conv-&gt;indexName();</div>
<div class="line"><span class="lineno"> 1267</span>    boost::shared_ptr&lt;IborIndex&gt; index;</div>
<div class="line"><span class="lineno"> 1268</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1269</span>        index = *market-&gt;iborIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1270</span>        <span class="keywordflow">if</span> (indexName == <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1271</span>            <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1272</span>                index = market-&gt;iborIndex(name)-&gt;clone(market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1273</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1274</span>                index = market-&gt;iborIndex(name)-&gt;clone(market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1275</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1276</span>                index = market-&gt;iborIndex(name)-&gt;clone(market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1277</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1278</span>                QL_FAIL(<span class="stringliteral">&quot;index curve not identified for FRA (ccy=&quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1279</span>        }</div>
<div class="line"><span class="lineno"> 1280</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1281</span>        index = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(name);</div>
<div class="line"><span class="lineno"> 1282</span>    }</div>
<div class="line"><span class="lineno"> 1283</span>    boost::shared_ptr&lt;IborIndex&gt; fraConvIdx = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">ore::data::parseIborIndex</a>(</div>
<div class="line"><span class="lineno"> 1284</span>        conv-&gt;indexName(), index-&gt;forwardingTermStructure()); <span class="comment">// used for setting up the FRA</span></div>
<div class="line"><span class="lineno"> 1285</span>    <span class="keywordflow">if</span> (fraConvIdx-&gt;tenor() != index-&gt;tenor()) {</div>
<div class="line"><span class="lineno"> 1286</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;FRA building - mismatch between input index (&quot;</span> &lt;&lt; indexName &lt;&lt; <span class="stringliteral">&quot;) and conventions (&quot;</span> &lt;&lt; conv-&gt;indexName()</div>
<div class="line"><span class="lineno"> 1287</span>                                                             &lt;&lt; <span class="stringliteral">&quot;) - using conventions&quot;</span>);</div>
<div class="line"><span class="lineno"> 1288</span>    }</div>
<div class="line"><span class="lineno"> 1289</span>    QL_REQUIRE((term.units() == Months) || (term.units() == Years), <span class="stringliteral">&quot;term unit must be Months or Years&quot;</span>);</div>
<div class="line"><span class="lineno"> 1290</span>    QL_REQUIRE(fraConvIdx-&gt;tenor().units() == Months, <span class="stringliteral">&quot;index tenor unit must be Months (&quot;</span> &lt;&lt; fraConvIdx-&gt;tenor() &lt;&lt; <span class="stringliteral">&quot;)(&quot;</span></div>
<div class="line"><span class="lineno"> 1291</span>                                                                                          &lt;&lt; term &lt;&lt; <span class="stringliteral">&quot;)(&quot;</span> &lt;&lt; indexName</div>
<div class="line"><span class="lineno"> 1292</span>                                                                                          &lt;&lt; <span class="stringliteral">&quot;)(&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1293</span>    QL_REQUIRE(term &gt; fraConvIdx-&gt;tenor(), <span class="stringliteral">&quot;term must be larger than index tenor&quot;</span>);</div>
<div class="line"><span class="lineno"> 1294</span>    Period startTerm = term - fraConvIdx-&gt;tenor(); <span class="comment">// the input term refers to the end of the FRA accrual period</span></div>
<div class="line"><span class="lineno"> 1295</span>    Calendar fraCal = fraConvIdx-&gt;fixingCalendar();</div>
<div class="line"><span class="lineno"> 1296</span>    Date asof_adj = fraCal.adjust(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>); <span class="comment">// same as in FraRateHelper</span></div>
<div class="line"><span class="lineno"> 1297</span>    Date todaySpot = fraConvIdx-&gt;valueDate(asof_adj);</div>
<div class="line"><span class="lineno"> 1298</span>    Date valueDate =</div>
<div class="line"><span class="lineno"> 1299</span>        fraCal.advance(todaySpot, startTerm, fraConvIdx-&gt;businessDayConvention(), fraConvIdx-&gt;endOfMonth());</div>
<div class="line"><span class="lineno"> 1300</span>    Date maturityDate = fraConvIdx-&gt;maturityDate(valueDate);</div>
<div class="line"><span class="lineno"> 1301</span>    Handle&lt;YieldTermStructure&gt; ytsTmp;</div>
<div class="line"><span class="lineno"> 1302</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1303</span>        <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1304</span>            ytsTmp = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1305</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1306</span>            ytsTmp = market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1308</span>            ytsTmp = market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1309</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1310</span>            ytsTmp = index-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1311</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1312</span>        <span class="comment">// FRA instrument requires non-empty curves for its construction below</span></div>
<div class="line"><span class="lineno"> 1313</span>        ytsTmp = Handle&lt;YieldTermStructure&gt;(boost::make_shared&lt;FlatForward&gt;(0, NullCalendar(), 0.00, Actual365Fixed()));</div>
<div class="line"><span class="lineno"> 1314</span>        fraConvIdx = fraConvIdx-&gt;clone(ytsTmp);</div>
<div class="line"><span class="lineno"> 1315</span>    }</div>
<div class="line"><span class="lineno"> 1316</span>    <span class="keyword">auto</span> <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> =</div>
<div class="line"><span class="lineno"> 1317</span>        boost::make_shared&lt;QuantExt::ForwardRateAgreement&gt;(valueDate, maturityDate, Position::Long, 0.0, 1.0, fraConvIdx, ytsTmp);</div>
<div class="line"><span class="lineno"> 1318</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1319</span>    <span class="comment">// yieldCurvePillars_[indexName == &quot;&quot; ? ccy : indexName].push_back((maturityDate - asof_) *</span></div>
<div class="line"><span class="lineno"> 1320</span>    <span class="comment">// Days);</span></div>
<div class="line"><span class="lineno"> 1321</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, maturityDate);</div>
<div class="line"><span class="lineno"> 1322</span>}</div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_cgraph">
<area shape="rect" title="Create FRA for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,5,85,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="133,5,299,31"/>
</map>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ac59b12d3c4bc46e5912a4c7b7ef76307_icgraph">
<area shape="rect" title="Create FRA for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1293,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a7c4856e81fa16c1c0f4c30fe20863df8" name="a7c4856e81fa16c1c0f4c30fe20863df8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c4856e81fa16c1c0f4c30fe20863df8">&#9670;&#160;</a></span>makeSwap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeSwap </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>yieldCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>equityForecastCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>singleCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01075">1075</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1079</span>                                                 {</div>
<div class="line"><span class="lineno"> 1080</span>    <span class="comment">// Curve priorities, use in the following order if ccy/indexName/yieldCurveName strings are not blank</span></div>
<div class="line"><span class="lineno"> 1081</span>    <span class="comment">// 1) singleCurve = false</span></div>
<div class="line"><span class="lineno"> 1082</span>    <span class="comment">//    - discounts: discountCurve(ccy) -&gt; yieldCurve(yieldCurveName)</span></div>
<div class="line"><span class="lineno"> 1083</span>    <span class="comment">//    - forwards:  iborIndex(indexName) -&gt; iborIndex(conventions index name)</span></div>
<div class="line"><span class="lineno"> 1084</span>    <span class="comment">// 2) singleCurve = true</span></div>
<div class="line"><span class="lineno"> 1085</span>    <span class="comment">//    - discounts: iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1086</span>    <span class="comment">//    - forwards:  iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1087</span>    boost::shared_ptr&lt;Conventions&gt; conventions = InstrumentConventions::instance().conventions(); </div>
<div class="line"><span class="lineno"> 1088</span>    boost::shared_ptr&lt;IRSwapConvention&gt; conv = boost::dynamic_pointer_cast&lt;IRSwapConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1089</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected IRSwapConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1090</span>    <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = indexName != <span class="stringliteral">&quot;&quot;</span> ? indexName : conv-&gt;indexName();</div>
<div class="line"><span class="lineno"> 1091</span>    boost::shared_ptr&lt;IborIndex&gt; index;</div>
<div class="line"><span class="lineno"> 1092</span>    Handle&lt;YieldTermStructure&gt; discountCurve;</div>
<div class="line"><span class="lineno"> 1093</span>    <span class="keywordflow">if</span> (market == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1094</span>        index = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(name);</div>
<div class="line"><span class="lineno"> 1095</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1096</span>        <span class="keywordflow">if</span> (!expDiscountCurve.empty()) {</div>
<div class="line"><span class="lineno"> 1097</span>            <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 1098</span>            boost::shared_ptr&lt;IborIndex&gt; dummyIndex;</div>
<div class="line"><span class="lineno"> 1099</span>            <span class="keywordflow">if</span> (<a class="code hl_functionRef" href="../ored/group__utilities.html#gaf17e7976e4fe2449bb4e226ee19c0fd9">tryParseIborIndex</a>(expDiscountCurve, dummyIndex)) {</div>
<div class="line"><span class="lineno"> 1100</span>                <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1101</span>                discountCurve = discountIndex-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1102</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1103</span>                discountCurve = market-&gt;yieldCurve(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1104</span>            }</div>
<div class="line"><span class="lineno"> 1105</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1106</span>            discountCurve = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1107</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1108</span>            discountCurve = market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1109</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1110</span>            discountCurve = market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1111</span> </div>
<div class="line"><span class="lineno"> 1112</span>        index = *market-&gt;iborIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>        <span class="keywordflow">if</span> (singleCurve) {</div>
<div class="line"><span class="lineno"> 1115</span>            <span class="keywordflow">if</span> (indexName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1116</span>                discountCurve = index-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1117</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1118</span>                index = index-&gt;clone(market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1119</span>                discountCurve = market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1120</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1121</span>                index = index-&gt;clone(market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1122</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>) {</div>
<div class="line"><span class="lineno"> 1123</span>                index = index-&gt;clone(market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1124</span>                discountCurve = market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1125</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1126</span>                QL_FAIL(<span class="stringliteral">&quot;Discount curve undetermined for Swap (ccy=&quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1127</span>        }</div>
<div class="line"><span class="lineno"> 1128</span>    }</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>    <span class="keywordflow">if</span>(!singleCurve)</div>
<div class="line"><span class="lineno"> 1131</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, name, 0);</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>    boost::shared_ptr&lt;Swap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 1134</span>    Date latestRelevantDate;</div>
<div class="line"><span class="lineno"> 1135</span> </div>
<div class="line"><span class="lineno"> 1136</span>    <span class="keyword">auto</span> bmaIndex = boost::dynamic_pointer_cast&lt;QuantExt::BMAIndexWrapper&gt;(index);</div>
<div class="line"><span class="lineno"> 1137</span>    <span class="keywordflow">if</span> (bmaIndex) {</div>
<div class="line"><span class="lineno"> 1138</span>        <span class="comment">// FIXME do we want to remove today&#39;s historic fixing from the index as we do for the Ibor case?</span></div>
<div class="line"><span class="lineno"> 1139</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::shared_ptr&lt;FixedBMASwap&gt;(</div>
<div class="line"><span class="lineno"> 1140</span>                     <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html">MakeFixedBMASwap</a>(term, bmaIndex-&gt;bma(), 0.0, 0 * Days)</div>
<div class="line"><span class="lineno"> 1141</span>                     .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html#aae4aedf88e432de744f6f0ae703bde15">withBMALegTenor</a>(3*Months));</div>
<div class="line"><span class="lineno"> 1142</span>        <span class="comment">// need to do very little with the factory, as the market conventions are default</span></div>
<div class="line"><span class="lineno"> 1143</span>        <span class="comment">// should maybe discount with Libor, as this is how we assume the quotes come in.</span></div>
<div class="line"><span class="lineno"> 1144</span>        boost::shared_ptr&lt;AverageBMACoupon&gt; lastCoupon = boost::dynamic_pointer_cast&lt;AverageBMACoupon&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;leg(1).back());</div>
<div class="line"><span class="lineno"> 1145</span>        latestRelevantDate = std::max(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate(), lastCoupon-&gt;fixingDates().end()[-2]);</div>
<div class="line"><span class="lineno"> 1146</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conv-&gt;hasSubPeriod()) {</div>
<div class="line"><span class="lineno"> 1147</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(index-&gt;name());</div>
<div class="line"><span class="lineno"> 1148</span>        <span class="keyword">auto</span> subPeriodSwap = boost::shared_ptr&lt;SubPeriodsSwap&gt;(<a class="code hl_classRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html">MakeSubPeriodsSwap</a>(term, index, 0.0, Period(conv-&gt;floatFrequency()), 0*Days)</div>
<div class="line"><span class="lineno"> 1149</span>            .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a12463e6245949bc4477529c791f31279">withSettlementDays</a>(index-&gt;fixingDays())</div>
<div class="line"><span class="lineno"> 1150</span>            .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#ac2f3a56b9130195610d7b30c0f087caa">withFixedLegDayCount</a>(conv-&gt;fixedDayCounter())</div>
<div class="line"><span class="lineno"> 1151</span>            .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a02282940d3091865100dcff65c695f9b">withFixedLegTenor</a>(Period(conv-&gt;fixedFrequency()))</div>
<div class="line"><span class="lineno"> 1152</span>            .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a662efe4525f29a7b64e3e50417016fb6">withFixedLegConvention</a>(conv-&gt;fixedConvention())</div>
<div class="line"><span class="lineno"> 1153</span>            .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#affc41d722d1120518f9948d788431056">withFixedLegCalendar</a>(conv-&gt;fixedCalendar())</div>
<div class="line"><span class="lineno"> 1154</span>            .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#aa27d877e3cfb8777d52f2ae720d062d3">withSubCouponsType</a>(conv-&gt;subPeriodsCouponType()));</div>
<div class="line"><span class="lineno"> 1155</span>        </div>
<div class="line"><span class="lineno"> 1156</span>        latestRelevantDate = subPeriodSwap-&gt;maturityDate();</div>
<div class="line"><span class="lineno"> 1157</span>        boost::shared_ptr&lt;FloatingRateCoupon&gt; lastCoupon =</div>
<div class="line"><span class="lineno"> 1158</span>            boost::dynamic_pointer_cast&lt;FloatingRateCoupon&gt;(subPeriodSwap-&gt;floatLeg().back());</div>
<div class="line"><span class="lineno"> 1159</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = subPeriodSwap;</div>
<div class="line"><span class="lineno"> 1160</span>        <span class="keywordflow">if</span> (IborCoupon::Settings::instance().usingAtParCoupons()) {</div>
<div class="line"><span class="lineno"> 1161</span>            <span class="comment">/* Subperiods coupons do not have a par approximation either... */</span></div>
<div class="line"><span class="lineno"> 1162</span>            <span class="keywordflow">if</span> (boost::dynamic_pointer_cast&lt;QuantExt::SubPeriodsCoupon1&gt;(lastCoupon)) {</div>
<div class="line"><span class="lineno"> 1163</span>                Date fixingValueDate = index-&gt;valueDate(lastCoupon-&gt;fixingDate());</div>
<div class="line"><span class="lineno"> 1164</span>                Date endValueDate = index-&gt;maturityDate(fixingValueDate);</div>
<div class="line"><span class="lineno"> 1165</span>                latestRelevantDate = std::max(latestRelevantDate, endValueDate);</div>
<div class="line"><span class="lineno"> 1166</span>            }</div>
<div class="line"><span class="lineno"> 1167</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1168</span>            <span class="comment">/* May need to adjust latestRelevantDate if you are projecting libor based</span></div>
<div class="line"><span class="lineno"> 1169</span><span class="comment">            on tenor length rather than from accrual date to accrual date. */</span></div>
<div class="line"><span class="lineno"> 1170</span>            Date fixingValueDate = index-&gt;valueDate(lastCoupon-&gt;fixingDate());</div>
<div class="line"><span class="lineno"> 1171</span>            Date endValueDate = index-&gt;maturityDate(fixingValueDate);</div>
<div class="line"><span class="lineno"> 1172</span>            latestRelevantDate = std::max(latestRelevantDate, endValueDate);</div>
<div class="line"><span class="lineno"> 1173</span>            </div>
<div class="line"><span class="lineno"> 1174</span>        }</div>
<div class="line"><span class="lineno"> 1175</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1176</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(index-&gt;name());</div>
<div class="line"><span class="lineno"> 1177</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::shared_ptr&lt;VanillaSwap&gt;(</div>
<div class="line"><span class="lineno"> 1178</span>                     MakeVanillaSwap(term, index, 0.0, 0 * Days)</div>
<div class="line"><span class="lineno"> 1179</span>                     .withSettlementDays(index-&gt;fixingDays())</div>
<div class="line"><span class="lineno"> 1180</span>                     .withFixedLegDayCount(conv-&gt;fixedDayCounter())</div>
<div class="line"><span class="lineno"> 1181</span>                     .withFixedLegTenor(Period(conv-&gt;fixedFrequency()))</div>
<div class="line"><span class="lineno"> 1182</span>                     .withFixedLegConvention(conv-&gt;fixedConvention())</div>
<div class="line"><span class="lineno"> 1183</span>                     .withFixedLegTerminationDateConvention(conv-&gt;fixedConvention())</div>
<div class="line"><span class="lineno"> 1184</span>                     .withFixedLegCalendar(conv-&gt;fixedCalendar())</div>
<div class="line"><span class="lineno"> 1185</span>                     .withFloatingLegCalendar(conv-&gt;fixedCalendar()));</div>
<div class="line"><span class="lineno"> 1186</span>        boost::shared_ptr&lt;IborCoupon&gt; lastCoupon = boost::dynamic_pointer_cast&lt;IborCoupon&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;leg(1).back());</div>
<div class="line"><span class="lineno"> 1187</span>        latestRelevantDate = std::max(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate(), lastCoupon-&gt;fixingEndDate());</div>
<div class="line"><span class="lineno"> 1188</span>    }</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>    <span class="keywordflow">if</span> (market) {</div>
<div class="line"><span class="lineno"> 1191</span>        boost::shared_ptr&lt;PricingEngine&gt; swapEngine = boost::make_shared&lt;DiscountingSwapEngine&gt;(discountCurve);</div>
<div class="line"><span class="lineno"> 1192</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(swapEngine);</div>
<div class="line"><span class="lineno"> 1193</span>    }</div>
<div class="line"><span class="lineno"> 1194</span> </div>
<div class="line"><span class="lineno"> 1195</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1196</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, latestRelevantDate);</div>
<div class="line"><span class="lineno"> 1197</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_make_fixed_b_m_a_swap_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html">QuantExt::MakeFixedBMASwap</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_fixed_b_m_a_swap_html_aae4aedf88e432de744f6f0ae703bde15"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html#aae4aedf88e432de744f6f0ae703bde15">QuantExt::MakeFixedBMASwap::withBMALegTenor</a></div><div class="ttdeci">MakeFixedBMASwap &amp; withBMALegTenor(const Period &amp;tenor)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html">QuantExt::MakeSubPeriodsSwap</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html_a02282940d3091865100dcff65c695f9b"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a02282940d3091865100dcff65c695f9b">QuantExt::MakeSubPeriodsSwap::withFixedLegTenor</a></div><div class="ttdeci">MakeSubPeriodsSwap &amp; withFixedLegTenor(const Period &amp;t)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html_a12463e6245949bc4477529c791f31279"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a12463e6245949bc4477529c791f31279">QuantExt::MakeSubPeriodsSwap::withSettlementDays</a></div><div class="ttdeci">MakeSubPeriodsSwap &amp; withSettlementDays(Natural settlementDays)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html_a662efe4525f29a7b64e3e50417016fb6"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a662efe4525f29a7b64e3e50417016fb6">QuantExt::MakeSubPeriodsSwap::withFixedLegConvention</a></div><div class="ttdeci">MakeSubPeriodsSwap &amp; withFixedLegConvention(BusinessDayConvention bdc)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html_aa27d877e3cfb8777d52f2ae720d062d3"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#aa27d877e3cfb8777d52f2ae720d062d3">QuantExt::MakeSubPeriodsSwap::withSubCouponsType</a></div><div class="ttdeci">MakeSubPeriodsSwap &amp; withSubCouponsType(const QuantExt::SubPeriodsCoupon1::Type &amp;st)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html_ac2f3a56b9130195610d7b30c0f087caa"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#ac2f3a56b9130195610d7b30c0f087caa">QuantExt::MakeSubPeriodsSwap::withFixedLegDayCount</a></div><div class="ttdeci">MakeSubPeriodsSwap &amp; withFixedLegDayCount(const DayCounter &amp;dc)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_sub_periods_swap_html_affc41d722d1120518f9948d788431056"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#affc41d722d1120518f9948d788431056">QuantExt::MakeSubPeriodsSwap::withFixedLegCalendar</a></div><div class="ttdeci">MakeSubPeriodsSwap &amp; withFixedLegCalendar(const Calendar &amp;cal)</div></div>
<div class="ttc" id="agroup__utilities_html_gaf17e7976e4fe2449bb4e226ee19c0fd9"><div class="ttname"><a href="../ored/group__utilities.html#gaf17e7976e4fe2449bb4e226ee19c0fd9">ore::data::tryParseIborIndex</a></div><div class="ttdeci">bool tryParseIborIndex(const string &amp;s, boost::shared_ptr&lt; IborIndex &gt; &amp;index)</div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_cgraph">
<area shape="rect" title="Create Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,240,92,265"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="163,5,328,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gaf17e7976e4fe2449bb4e226ee19c0fd9" title=" " alt="" coords="154,55,337,80"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_fixed_b_m_a_swap.html#aae4aedf88e432de744f6f0ae703bde15" title=" " alt="" coords="140,105,351,145"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#affc41d722d1120518f9948d788431056" title=" " alt="" coords="151,169,340,209"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a662efe4525f29a7b64e3e50417016fb6" title=" " alt="" coords="145,233,346,273"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#ac2f3a56b9130195610d7b30c0f087caa" title=" " alt="" coords="148,297,343,337"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a02282940d3091865100dcff65c695f9b" title=" " alt="" coords="153,361,337,401"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#a12463e6245949bc4477529c791f31279" title=" " alt="" coords="153,425,337,465"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_sub_periods_swap.html#aa27d877e3cfb8777d52f2ae720d062d3" title=" " alt="" coords="152,489,339,529"/>
</map>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a7c4856e81fa16c1c0f4c30fe20863df8_icgraph">
<area shape="rect" title="Create Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1300,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a8398135369084ed1a6d98a5c34816e4a" name="a8398135369084ed1a6d98a5c34816e4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8398135369084ed1a6d98a5c34816e4a">&#9670;&#160;</a></span>makeOIS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeOIS </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>yieldCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>equityForecastCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>singleCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create OIS <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01325">1325</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1329</span>                                                   {</div>
<div class="line"><span class="lineno"> 1330</span>    <span class="comment">// Curve priorities, use in the following order if ccy/indexName/yieldCurveName strings are not blank</span></div>
<div class="line"><span class="lineno"> 1331</span>    <span class="comment">// 1) singleCurve = false</span></div>
<div class="line"><span class="lineno"> 1332</span>    <span class="comment">//    - discounts: discountCurve(ccy) -&gt; yieldCurve(yieldCurveName)</span></div>
<div class="line"><span class="lineno"> 1333</span>    <span class="comment">//    - forwards:  iborIndex(indexName) -&gt; iborIndex(conventions index name)</span></div>
<div class="line"><span class="lineno"> 1334</span>    <span class="comment">// 2) singleCurve = true</span></div>
<div class="line"><span class="lineno"> 1335</span>    <span class="comment">//    - discounts: iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1336</span>    <span class="comment">//    - forwards:  iborIndex(indexName) -&gt; yieldCurve(yieldCurveName) -&gt; discountCurve(ccy)</span></div>
<div class="line"><span class="lineno"> 1337</span>    <span class="keyword">auto</span> conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno"> 1338</span>    boost::shared_ptr&lt;OisConvention&gt; conv = boost::dynamic_pointer_cast&lt;OisConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1339</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected OisConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = indexName != <span class="stringliteral">&quot;&quot;</span> ? indexName : conv-&gt;indexName();</div>
<div class="line"><span class="lineno"> 1341</span>    boost::shared_ptr&lt;IborIndex&gt; index;</div>
<div class="line"><span class="lineno"> 1342</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1343</span>        index = market-&gt;iborIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>).currentLink();</div>
<div class="line"><span class="lineno"> 1344</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="comment">// make ois below requires a non empty ts</span></div>
<div class="line"><span class="lineno"> 1346</span>        <span class="keyword">auto</span> h = Handle&lt;YieldTermStructure&gt;(boost::make_shared&lt;FlatForward&gt;(0, NullCalendar(), 0.00, Actual365Fixed()));</div>
<div class="line"><span class="lineno"> 1347</span>        index = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(name, h);</div>
<div class="line"><span class="lineno"> 1348</span>    }</div>
<div class="line"><span class="lineno"> 1349</span>    boost::shared_ptr&lt;OvernightIndex&gt; overnightIndexTmp = boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(index);</div>
<div class="line"><span class="lineno"> 1350</span>    QL_REQUIRE(overnightIndexTmp, <span class="stringliteral">&quot;ParSensitivityAnalysis::makeOIS(): expected OIS index, got  \&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 1351</span>    Handle&lt;YieldTermStructure&gt; indexTs = overnightIndexTmp-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1352</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span> &amp;&amp; singleCurve) {</div>
<div class="line"><span class="lineno"> 1353</span>        <span class="keywordflow">if</span> (indexName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1354</span>            indexTs = overnightIndexTmp-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1355</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1356</span>            indexTs = market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1357</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1358</span>            indexTs = market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1359</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1360</span>            indexTs = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1361</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1362</span>            QL_FAIL(<span class="stringliteral">&quot;Index curve not identified in ParSensitivityAnalysis::makeOIS (ccy=&quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1363</span>    }</div>
<div class="line"><span class="lineno"> 1364</span>    boost::shared_ptr&lt;OvernightIndex&gt; overnightIndex =</div>
<div class="line"><span class="lineno"> 1365</span>        boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(overnightIndexTmp-&gt;clone(indexTs));</div>
<div class="line"><span class="lineno"> 1366</span>    </div>
<div class="line"><span class="lineno"> 1367</span>    <span class="comment">// FIXME do we want to remove today&#39;s historic fixing from the index as we do for the Ibor case?</span></div>
<div class="line"><span class="lineno"> 1368</span>    boost::shared_ptr&lt;OvernightIndexedSwap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = MakeOIS(term, overnightIndex, Null&lt;Rate&gt;(), 0 * Days)</div>
<div class="line"><span class="lineno"> 1369</span>        .withTelescopicValueDates(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1372</span>        RelinkableHandle&lt;YieldTermStructure&gt; engineYts;</div>
<div class="line"><span class="lineno"> 1373</span>        <span class="keywordflow">if</span> (singleCurve) {</div>
<div class="line"><span class="lineno"> 1374</span>            <span class="keywordflow">if</span> (indexName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1375</span>                engineYts.linkTo(*indexTs);</div>
<div class="line"><span class="lineno"> 1376</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1377</span>                engineYts.linkTo(*market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1378</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1379</span>                engineYts.linkTo(*market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1380</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1381</span>                engineYts.linkTo(*market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1382</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1383</span>                QL_FAIL(<span class="stringliteral">&quot;discount curve not identified in ParSensitivityAnalysis::makeOIS, single curve (ccy=&quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1384</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1385</span>            <span class="keywordflow">if</span> (!expDiscountCurve.empty()) {</div>
<div class="line"><span class="lineno"> 1386</span>                <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 1387</span>                <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1388</span>                engineYts.linkTo(*discountIndex-&gt;forwardingTermStructure());</div>
<div class="line"><span class="lineno"> 1389</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1390</span>                engineYts.linkTo(*market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1391</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1392</span>                engineYts.linkTo(*market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1393</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1394</span>                engineYts.linkTo(*market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>));</div>
<div class="line"><span class="lineno"> 1395</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1396</span>                QL_FAIL(<span class="stringliteral">&quot;discount curve not identified in ParSensitivityAnalysis::makeOIS, multi curve (ccy=&quot;</span> &lt;&lt; ccy</div>
<div class="line"><span class="lineno"> 1397</span>                                                                                                              &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 1398</span>        }</div>
<div class="line"><span class="lineno"> 1399</span>        boost::shared_ptr&lt;PricingEngine&gt; swapEngine = boost::make_shared&lt;DiscountingSwapEngine&gt;(engineYts);</div>
<div class="line"><span class="lineno"> 1400</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(swapEngine);</div>
<div class="line"><span class="lineno"> 1401</span>    }</div>
<div class="line"><span class="lineno"> 1402</span> </div>
<div class="line"><span class="lineno"> 1403</span>    <span class="keywordflow">if</span>(!singleCurve)</div>
<div class="line"><span class="lineno"> 1404</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, name, 0);</div>
<div class="line"><span class="lineno"> 1405</span> </div>
<div class="line"><span class="lineno"> 1406</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1407</span>    Date latestRelevantDate = <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate();</div>
<div class="line"><span class="lineno"> 1408</span>    </div>
<div class="line"><span class="lineno"> 1409</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, latestRelevantDate);</div>
<div class="line"><span class="lineno"> 1410</span>}</div>
</div><!-- fragment --><div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_cgraph">
<area shape="rect" title="Create OIS Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,5,81,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="129,5,295,31"/>
</map>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a8398135369084ed1a6d98a5c34816e4a_icgraph">
<area shape="rect" title="Create OIS Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1289,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a10ed6e6816f20d1b60164edb508bdb98" name="a10ed6e6816f20d1b60164edb508bdb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10ed6e6816f20d1b60164edb508bdb98">&#9670;&#160;</a></span>makeTenorBasisSwap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; QuantLib::Instrument &gt;, Date &gt; makeTenorBasisSwap </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>shortIndexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>longIndexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>yieldCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>equityForecastCurveName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create Basis <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01413">1413</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1417</span>                                                                           {</div>
<div class="line"><span class="lineno"> 1418</span> </div>
<div class="line"><span class="lineno"> 1419</span>    <span class="keyword">auto</span> conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno"> 1420</span>    boost::shared_ptr&lt;TenorBasisSwapConvention&gt; conv =</div>
<div class="line"><span class="lineno"> 1421</span>        boost::dynamic_pointer_cast&lt;TenorBasisSwapConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1422</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected TenorBasisSwapConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1423</span>    <span class="keywordtype">string</span> shortIndexNameTmp = shortIndexName == <span class="stringliteral">&quot;&quot;</span> ? conv-&gt;shortIndexName() : shortIndexName;</div>
<div class="line"><span class="lineno"> 1424</span>    <span class="keywordtype">string</span> longIndexNameTmp = longIndexName == <span class="stringliteral">&quot;&quot;</span> ? conv-&gt;longIndexName() : longIndexName;</div>
<div class="line"><span class="lineno"> 1425</span> </div>
<div class="line"><span class="lineno"> 1426</span>    Handle&lt;YieldTermStructure&gt; discountCurve;</div>
<div class="line"><span class="lineno"> 1427</span>    boost::shared_ptr&lt;IborIndex&gt; longIndex, shortIndex;</div>
<div class="line"><span class="lineno"> 1428</span>    boost::shared_ptr&lt;OvernightIndex&gt; shortIndexOn;</div>
<div class="line"><span class="lineno"> 1429</span>    <span class="keywordflow">if</span> (market == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1430</span>        longIndex = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(longIndexNameTmp);</div>
<div class="line"><span class="lineno"> 1431</span>        shortIndex = <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(shortIndexNameTmp);</div>
<div class="line"><span class="lineno"> 1432</span>        shortIndexOn = boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(shortIndex);</div>
<div class="line"><span class="lineno"> 1433</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1434</span>        <span class="keywordflow">if</span> (!expDiscountCurve.empty()){</div>
<div class="line"><span class="lineno"> 1435</span>            <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 1436</span>            <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1437</span>            discountCurve = discountIndex-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1438</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ccy != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1439</span>            discountCurve = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1440</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (yieldCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1441</span>            discountCurve = market-&gt;yieldCurve(yieldCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1442</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equityForecastCurveName != <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno"> 1443</span>            discountCurve = market-&gt;equityForecastCurve(equityForecastCurveName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1444</span>        shortIndex = *market-&gt;iborIndex(shortIndexNameTmp, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1445</span>        shortIndexOn = boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(shortIndex);</div>
<div class="line"><span class="lineno"> 1446</span>        longIndex = *market-&gt;iborIndex(longIndexNameTmp, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1447</span>    }</div>
<div class="line"><span class="lineno"> 1448</span>    boost::shared_ptr&lt;Swap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 1449</span>    Date latestRelevantDate;</div>
<div class="line"><span class="lineno"> 1450</span>    boost::shared_ptr&lt;Libor&gt; longIndexAsLibor = boost::dynamic_pointer_cast&lt;Libor&gt;(longIndex);</div>
<div class="line"><span class="lineno"> 1451</span>    boost::shared_ptr&lt;Libor&gt; shortIndexAsLibor = boost::dynamic_pointer_cast&lt;Libor&gt;(shortIndex);</div>
<div class="line"><span class="lineno"> 1452</span>    Calendar longIndexCalendar =</div>
<div class="line"><span class="lineno"> 1453</span>        longIndexAsLibor != <span class="keyword">nullptr</span> ? longIndexAsLibor-&gt;jointCalendar() : longIndex-&gt;fixingCalendar();</div>
<div class="line"><span class="lineno"> 1454</span>    Calendar shortIndexCalendar =</div>
<div class="line"><span class="lineno"> 1455</span>        shortIndexAsLibor != <span class="keyword">nullptr</span> ? shortIndexAsLibor-&gt;jointCalendar() : shortIndex-&gt;fixingCalendar();</div>
<div class="line"><span class="lineno"> 1456</span>    <span class="keywordflow">if</span> (shortIndexOn) {</div>
<div class="line"><span class="lineno"> 1457</span>        <span class="comment">// OIS vs Libor</span></div>
<div class="line"><span class="lineno"> 1458</span>        Date settlementDate = longIndexCalendar.advance(</div>
<div class="line"><span class="lineno"> 1459</span>            longIndexCalendar.adjust(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>), longIndex-&gt;fixingDays() * Days);</div>
<div class="line"><span class="lineno"> 1460</span>        Schedule oisSchedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 1461</span>                                   .from(settlementDate)</div>
<div class="line"><span class="lineno"> 1462</span>                                   .to(settlementDate + term)</div>
<div class="line"><span class="lineno"> 1463</span>                                   .withTenor(conv-&gt;shortPayTenor())</div>
<div class="line"><span class="lineno"> 1464</span>                                   .withCalendar(shortIndexCalendar)</div>
<div class="line"><span class="lineno"> 1465</span>                                   .withConvention(shortIndex-&gt;businessDayConvention())</div>
<div class="line"><span class="lineno"> 1466</span>                                   .forwards();</div>
<div class="line"><span class="lineno"> 1467</span>        Schedule iborSchedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 1468</span>                                    .from(settlementDate)</div>
<div class="line"><span class="lineno"> 1469</span>                                    .to(settlementDate + term)</div>
<div class="line"><span class="lineno"> 1470</span>                                    .withTenor(longIndex-&gt;tenor())</div>
<div class="line"><span class="lineno"> 1471</span>                                    .withCalendar(longIndexCalendar)</div>
<div class="line"><span class="lineno"> 1472</span>                                    .withConvention(longIndex-&gt;businessDayConvention())</div>
<div class="line"><span class="lineno"> 1473</span>                                    .forwards();</div>
<div class="line"><span class="lineno"> 1474</span>        <span class="comment">// FIXME do we want to remove today&#39;s historic fixing from the short index as we do for the Ibor case?</span></div>
<div class="line"><span class="lineno"> 1475</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(longIndex-&gt;name());</div>
<div class="line"><span class="lineno"> 1476</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;OvernightIndexedBasisSwap&gt;(<a class="code hl_variableRef" href="../qle/class_quant_ext_1_1_overnight_indexed_basis_swap.html#a1d1cfd8ffb84e947f82999c682b666a7a9ca3b60bb6eb8726ba5e66e5afa8b6a0">OvernightIndexedBasisSwap::Payer</a>, 100.0, oisSchedule,</div>
<div class="line"><span class="lineno"> 1477</span>                                                               shortIndexOn, iborSchedule, longIndex);</div>
<div class="line"><span class="lineno"> 1478</span>        boost::shared_ptr&lt;IborCoupon&gt; lastCoupon1 = boost::dynamic_pointer_cast&lt;IborCoupon&gt;(</div>
<div class="line"><span class="lineno"> 1479</span>            boost::static_pointer_cast&lt;OvernightIndexedBasisSwap&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)-&gt;iborLeg().back());</div>
<div class="line"><span class="lineno"> 1480</span>        boost::shared_ptr&lt;QuantLib::OvernightIndexedCoupon&gt; lastCoupon2 =</div>
<div class="line"><span class="lineno"> 1481</span>            boost::dynamic_pointer_cast&lt;QuantLib::OvernightIndexedCoupon&gt;(</div>
<div class="line"><span class="lineno"> 1482</span>                boost::static_pointer_cast&lt;OvernightIndexedBasisSwap&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)-&gt;overnightLeg().back());</div>
<div class="line"><span class="lineno"> 1483</span>        latestRelevantDate = std::max(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate(),</div>
<div class="line"><span class="lineno"> 1484</span>                 std::max(lastCoupon1-&gt;fixingEndDate(),</div>
<div class="line"><span class="lineno"> 1485</span>                          shortIndexOn-&gt;fixingCalendar().advance(lastCoupon2-&gt;valueDates().back(), 1 * Days)));</div>
<div class="line"><span class="lineno"> 1486</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1487</span>        <span class="comment">// Libor vs Libor</span></div>
<div class="line"><span class="lineno"> 1488</span>        Date settlementDate = longIndexCalendar.advance(</div>
<div class="line"><span class="lineno"> 1489</span>            longIndexCalendar.adjust(<a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>), longIndex-&gt;fixingDays() * Days);</div>
<div class="line"><span class="lineno"> 1490</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(longIndex-&gt;name());</div>
<div class="line"><span class="lineno"> 1491</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(shortIndex-&gt;name());</div>
<div class="line"><span class="lineno"> 1492</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;TenorBasisSwap&gt;(settlementDate, 1.0, term, <span class="keyword">true</span>, longIndex, 0.0, shortIndex, 0.0,</div>
<div class="line"><span class="lineno"> 1493</span>                                                    conv-&gt;shortPayTenor(), DateGeneration::Backward,</div>
<div class="line"><span class="lineno"> 1494</span>                                                    conv-&gt;includeSpread(), conv-&gt;subPeriodsCouponType());</div>
<div class="line"><span class="lineno"> 1495</span>        boost::shared_ptr&lt;IborCoupon&gt; lastCoupon1 = boost::dynamic_pointer_cast&lt;IborCoupon&gt;(</div>
<div class="line"><span class="lineno"> 1496</span>            boost::static_pointer_cast&lt;TenorBasisSwap&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)-&gt;longLeg().back());</div>
<div class="line"><span class="lineno"> 1497</span>        Date maxDate2;</div>
<div class="line"><span class="lineno"> 1498</span>        boost::shared_ptr&lt;IborCoupon&gt; lastCoupon2 = boost::dynamic_pointer_cast&lt;IborCoupon&gt;(</div>
<div class="line"><span class="lineno"> 1499</span>            boost::static_pointer_cast&lt;TenorBasisSwap&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)-&gt;shortLeg().back());</div>
<div class="line"><span class="lineno"> 1500</span>        <span class="keywordflow">if</span> (lastCoupon2 != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1501</span>            maxDate2 = lastCoupon2-&gt;fixingEndDate();</div>
<div class="line"><span class="lineno"> 1502</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1503</span>            boost::shared_ptr&lt;QuantExt::SubPeriodsCoupon1&gt; lastCoupon2 = boost::dynamic_pointer_cast&lt;QuantExt::SubPeriodsCoupon1&gt;(</div>
<div class="line"><span class="lineno"> 1504</span>                boost::static_pointer_cast&lt;TenorBasisSwap&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)-&gt;shortLeg().back());</div>
<div class="line"><span class="lineno"> 1505</span>            maxDate2 = shortIndexCalendar.advance(lastCoupon2-&gt;valueDates().back(), conv-&gt;shortPayTenor());</div>
<div class="line"><span class="lineno"> 1506</span>        }</div>
<div class="line"><span class="lineno"> 1507</span>        latestRelevantDate = std::max(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate(), std::max(lastCoupon1-&gt;fixingEndDate(), maxDate2));</div>
<div class="line"><span class="lineno"> 1508</span>    }</div>
<div class="line"><span class="lineno"> 1509</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1510</span>        boost::shared_ptr&lt;PricingEngine&gt; swapEngine = boost::make_shared&lt;DiscountingSwapEngine&gt;(discountCurve);</div>
<div class="line"><span class="lineno"> 1511</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(swapEngine);</div>
<div class="line"><span class="lineno"> 1512</span>    }</div>
<div class="line"><span class="lineno"> 1513</span> </div>
<div class="line"><span class="lineno"> 1514</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, shortIndexNameTmp, 0);</div>
<div class="line"><span class="lineno"> 1515</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, longIndexNameTmp, 0);</div>
<div class="line"><span class="lineno"> 1516</span> </div>
<div class="line"><span class="lineno"> 1517</span>    <span class="comment">// latest date and return result</span></div>
<div class="line"><span class="lineno"> 1518</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, latestRelevantDate);</div>
<div class="line"><span class="lineno"> 1519</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_overnight_indexed_basis_swap_html_a1d1cfd8ffb84e947f82999c682b666a7a9ca3b60bb6eb8726ba5e66e5afa8b6a0"><div class="ttname"><a href="../qle/class_quant_ext_1_1_overnight_indexed_basis_swap.html#a1d1cfd8ffb84e947f82999c682b666a7a9ca3b60bb6eb8726ba5e66e5afa8b6a0">QuantExt::OvernightIndexedBasisSwap::Payer</a></div><div class="ttdeci">Payer</div></div>
</div><!-- fragment --><div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_cgraph">
<area shape="rect" title="Create Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,5,156,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="204,5,369,31"/>
</map>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a10ed6e6816f20d1b60164edb508bdb98_icgraph">
<area shape="rect" title="Create Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1364,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a84f6a45da03b18ad06f2e6059576d335" name="a84f6a45da03b18ad06f2e6059576d335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84f6a45da03b18ad06f2e6059576d335">&#9670;&#160;</a></span>makeCapFloor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_cap_floor.html">CapFloor</a> &gt; makeCapFloor </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>generatePillar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01522">1522</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1525</span>                                                        {</div>
<div class="line"><span class="lineno"> 1526</span> </div>
<div class="line"><span class="lineno"> 1527</span>    boost::shared_ptr&lt;CapFloor&gt; inst;</div>
<div class="line"><span class="lineno"> 1528</span>    <span class="keyword">auto</span> conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno"> 1529</span> </div>
<div class="line"><span class="lineno"> 1530</span>    <span class="keywordflow">if</span> (!market) {</div>
<div class="line"><span class="lineno"> 1531</span>        <span class="comment">// No market so just return a dummy cap</span></div>
<div class="line"><span class="lineno"> 1532</span>        boost::shared_ptr&lt;IborIndex&gt; index =</div>
<div class="line"><span class="lineno"> 1533</span>            <a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(indexName);</div>
<div class="line"><span class="lineno"> 1534</span>    QL_REQUIRE(boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(index) == <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno"> 1535</span>           <span class="stringliteral">&quot;ParSensitivityAnalysis::makeCapFloor(): OIS indices are not yet supported for par conversion&quot;</span>);</div>
<div class="line"><span class="lineno"> 1536</span>        inst = MakeCapFloor(CapFloor::Cap, term, index, 0.03);</div>
<div class="line"><span class="lineno"> 1537</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1538</span>        </div>
<div class="line"><span class="lineno"> 1539</span>        boost::shared_ptr&lt;IborIndex&gt; index = *market-&gt;iborIndex(indexName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1540</span>    QL_REQUIRE(boost::dynamic_pointer_cast&lt;OvernightIndex&gt;(index) == <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno"> 1541</span>           <span class="stringliteral">&quot;ParSensitivityAnalysis::makeCapFloor(): OIS indices are not yet supported for par conversion&quot;</span>);</div>
<div class="line"><span class="lineno"> 1542</span>        QL_REQUIRE(index, <span class="stringliteral">&quot;Index not found with name &quot;</span> &lt;&lt; indexName);</div>
<div class="line"><span class="lineno"> 1543</span>        Handle&lt;YieldTermStructure&gt; discount;</div>
<div class="line"><span class="lineno"> 1544</span>        <span class="keywordflow">if</span>(expDiscountCurve.empty())</div>
<div class="line"><span class="lineno"> 1545</span>            discount = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1546</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1547</span>            discount = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>)-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1548</span>        QL_REQUIRE(!discount.empty(), <span class="stringliteral">&quot;Discount curve not found for cap floor index &quot;</span> &lt;&lt; indexName);</div>
<div class="line"><span class="lineno"> 1549</span> </div>
<div class="line"><span class="lineno"> 1550</span>        <span class="comment">// Create a dummy cap just to get the ATM rate</span></div>
<div class="line"><span class="lineno"> 1551</span>        <span class="comment">// Note this construction excludes the first caplet which is what we want</span></div>
<div class="line"><span class="lineno"> 1552</span>        inst = MakeCapFloor(CapFloor::Cap, term, index, 0.03);</div>
<div class="line"><span class="lineno"> 1553</span>        Rate atmRate = inst-&gt;atmRate(**discount);</div>
<div class="line"><span class="lineno"> 1554</span>        <span class="comment">//bool isAtm = strike == Null&lt;Real&gt;();</span></div>
<div class="line"><span class="lineno"> 1555</span>        <span class="comment">//strike = isAtm ? atmRate : strike;</span></div>
<div class="line"><span class="lineno"> 1556</span>        strike = strike == Null&lt;Real&gt;() ? atmRate : strike;</div>
<div class="line"><span class="lineno"> 1557</span>    CapFloor::Type type = strike &gt;= atmRate ? CapFloor::Cap : CapFloor::Floor;</div>
<div class="line"><span class="lineno"> 1558</span> </div>
<div class="line"><span class="lineno"> 1559</span>        <span class="comment">// Create the actual cap or floor instrument that we will use</span></div>
<div class="line"><span class="lineno"> 1560</span>        <span class="keywordflow">if</span> (isAtm) {</div>
<div class="line"><span class="lineno"> 1561</span>            inst = MakeCapFloor(type, term, index, atmRate);</div>
<div class="line"><span class="lineno"> 1562</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1563</span>            inst = MakeCapFloor(type, term, index, strike);</div>
<div class="line"><span class="lineno"> 1564</span>        }</div>
<div class="line"><span class="lineno"> 1565</span>        Handle&lt;OptionletVolatilityStructure&gt; ovs = market-&gt;capFloorVol(indexName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1566</span>        QL_REQUIRE(!ovs.empty(), <span class="stringliteral">&quot;Optionlet volatility structure not found for index &quot;</span> &lt;&lt; indexName);</div>
<div class="line"><span class="lineno"> 1567</span>        QL_REQUIRE(ovs-&gt;volatilityType() == ShiftedLognormal || ovs-&gt;volatilityType() == Normal, </div>
<div class="line"><span class="lineno"> 1568</span>            <span class="stringliteral">&quot;Optionlet volatility type &quot;</span> &lt;&lt; ovs-&gt;volatilityType() &lt;&lt; <span class="stringliteral">&quot; not covered&quot;</span>);</div>
<div class="line"><span class="lineno"> 1569</span>        boost::shared_ptr&lt;PricingEngine&gt; engine;</div>
<div class="line"><span class="lineno"> 1570</span>        <span class="keywordflow">if</span> (ovs-&gt;volatilityType() == ShiftedLognormal) {</div>
<div class="line"><span class="lineno"> 1571</span>            engine = boost::make_shared&lt;BlackCapFloorEngine&gt;(discount, ovs, ovs-&gt;displacement());</div>
<div class="line"><span class="lineno"> 1572</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1573</span>            engine = boost::make_shared&lt;BachelierCapFloorEngine&gt;(discount, ovs);</div>
<div class="line"><span class="lineno"> 1574</span>        }</div>
<div class="line"><span class="lineno"> 1575</span>        inst-&gt;setPricingEngine(engine);</div>
<div class="line"><span class="lineno"> 1576</span>    }</div>
<div class="line"><span class="lineno"> 1577</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy);</div>
<div class="line"><span class="lineno"> 1578</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, indexName);</div>
<div class="line"><span class="lineno"> 1579</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1580</span>    <span class="comment">// if (generatePillar) {</span></div>
<div class="line"><span class="lineno"> 1581</span>    <span class="comment">//     capFloorPillars_[ccy].push_back(term /*(end - asof_) * Days*/);</span></div>
<div class="line"><span class="lineno"> 1582</span>    <span class="comment">// }</span></div>
<div class="line"><span class="lineno"> 1583</span> </div>
<div class="line"><span class="lineno"> 1584</span>    QL_REQUIRE(inst, <span class="stringliteral">&quot;empty cap/floor par instrument pointer&quot;</span>);</div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keywordflow">return</span> inst;</div>
<div class="line"><span class="lineno"> 1586</span>}</div>
</div><!-- fragment --><div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_cgraph">
<area shape="rect" title="Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity." alt="" coords="5,5,112,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="160,5,325,31"/>
</map>
</div>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a84f6a45da03b18ad06f2e6059576d335_icgraph">
<area shape="rect" title="Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity." alt="" coords="1213,207,1320,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a0a8cff443db13bb49f84bb402091baae" name="a0a8cff443db13bb49f84bb402091baae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a8cff443db13bb49f84bb402091baae">&#9670;&#160;</a></span>makeCrossCcyBasisSwap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeCrossCcyBasisSwap </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>baseCcy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create Cross Ccy Basis <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01589">1589</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1591</span>                                                                                                         {</div>
<div class="line"><span class="lineno"> 1592</span> </div>
<div class="line"><span class="lineno"> 1593</span>    <span class="keyword">auto</span> conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno"> 1594</span>    boost::shared_ptr&lt;CrossCcyBasisSwapConvention&gt; conv =</div>
<div class="line"><span class="lineno"> 1595</span>        boost::dynamic_pointer_cast&lt;CrossCcyBasisSwapConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1596</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected CrossCcyBasisSwapConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1597</span>    QL_REQUIRE(baseCcy == conv-&gt;flatIndex()-&gt;currency().code() || baseCcy == conv-&gt;spreadIndex()-&gt;currency().code(),</div>
<div class="line"><span class="lineno"> 1598</span>               <span class="stringliteral">&quot;base currency &quot;</span> &lt;&lt; baseCcy &lt;&lt; <span class="stringliteral">&quot; not covered by convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1599</span>    QL_REQUIRE(ccy == conv-&gt;flatIndex()-&gt;currency().code() || ccy == conv-&gt;spreadIndex()-&gt;currency().code(),</div>
<div class="line"><span class="lineno"> 1600</span>               <span class="stringliteral">&quot;currency &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; not covered by convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1601</span>    <span class="keywordtype">string</span> baseIndexName, indexName;</div>
<div class="line"><span class="lineno"> 1602</span>    Period baseIndexTenor, indexTenor;</div>
<div class="line"><span class="lineno"> 1603</span>    <span class="keywordflow">if</span> (baseCcy == conv-&gt;flatIndex()-&gt;currency().code()) {</div>
<div class="line"><span class="lineno"> 1604</span>        baseIndexName = conv-&gt;flatIndexName();</div>
<div class="line"><span class="lineno"> 1605</span>        baseIndexTenor = conv-&gt;flatTenor();</div>
<div class="line"><span class="lineno"> 1606</span>        indexName = conv-&gt;spreadIndexName();</div>
<div class="line"><span class="lineno"> 1607</span>        indexTenor = conv-&gt;spreadTenor();</div>
<div class="line"><span class="lineno"> 1608</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1609</span>        baseIndexName = conv-&gt;spreadIndexName();</div>
<div class="line"><span class="lineno"> 1610</span>        baseIndexTenor = conv-&gt;spreadTenor();</div>
<div class="line"><span class="lineno"> 1611</span>        indexName = conv-&gt;flatIndexName();</div>
<div class="line"><span class="lineno"> 1612</span>        indexTenor = conv-&gt;flatTenor();</div>
<div class="line"><span class="lineno"> 1613</span>    }</div>
<div class="line"><span class="lineno"> 1614</span>    Currency baseCurrency = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(baseCcy);</div>
<div class="line"><span class="lineno"> 1615</span>    Currency currency = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(ccy);</div>
<div class="line"><span class="lineno"> 1616</span>    Handle&lt;IborIndex&gt; baseIndex, index;</div>
<div class="line"><span class="lineno"> 1617</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1618</span>        baseIndex = market-&gt;iborIndex(baseIndexName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1619</span>        index = market-&gt;iborIndex(indexName, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1620</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1621</span>        baseIndex =</div>
<div class="line"><span class="lineno"> 1622</span>            Handle&lt;IborIndex&gt;(<a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(baseIndexName));</div>
<div class="line"><span class="lineno"> 1623</span>        index = Handle&lt;IborIndex&gt;(<a class="code hl_functionRef" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782">parseIborIndex</a>(indexName));</div>
<div class="line"><span class="lineno"> 1624</span>    }</div>
<div class="line"><span class="lineno"> 1625</span>    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno"> 1626</span> </div>
<div class="line"><span class="lineno"> 1627</span>    <span class="comment">// For now, to mimic the xccy helper behaviour in the case that today is settlementCalendar holiday</span></div>
<div class="line"><span class="lineno"> 1628</span>    today = conv-&gt;settlementCalendar().adjust(today);</div>
<div class="line"><span class="lineno"> 1629</span>    </div>
<div class="line"><span class="lineno"> 1630</span>    Date start = conv-&gt;settlementCalendar().advance(today, conv-&gt;settlementDays() * Days, conv-&gt;rollConvention());</div>
<div class="line"><span class="lineno"> 1631</span>    Date end = conv-&gt;settlementCalendar().advance(start, term, conv-&gt;rollConvention());</div>
<div class="line"><span class="lineno"> 1632</span>    Schedule baseSchedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 1633</span>                                .from(start)</div>
<div class="line"><span class="lineno"> 1634</span>                                .to(end)</div>
<div class="line"><span class="lineno"> 1635</span>                                .withTenor(baseIndexTenor)</div>
<div class="line"><span class="lineno"> 1636</span>                                .withCalendar(conv-&gt;settlementCalendar())</div>
<div class="line"><span class="lineno"> 1637</span>                                .withConvention(conv-&gt;rollConvention())</div>
<div class="line"><span class="lineno"> 1638</span>                                .endOfMonth(conv-&gt;eom());</div>
<div class="line"><span class="lineno"> 1639</span>    Schedule schedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 1640</span>                            .from(start)</div>
<div class="line"><span class="lineno"> 1641</span>                            .to(end)</div>
<div class="line"><span class="lineno"> 1642</span>                            .withTenor(indexTenor)</div>
<div class="line"><span class="lineno"> 1643</span>                            .withCalendar(conv-&gt;settlementCalendar())</div>
<div class="line"><span class="lineno"> 1644</span>                            .withConvention(conv-&gt;rollConvention())</div>
<div class="line"><span class="lineno"> 1645</span>                            .endOfMonth(conv-&gt;eom());</div>
<div class="line"><span class="lineno"> 1646</span>    Real baseNotional = 1.0;</div>
<div class="line"><span class="lineno"> 1647</span>    <span class="comment">// the fx spot is not needed in the dry run</span></div>
<div class="line"><span class="lineno"> 1648</span>    Handle&lt;Quote&gt; fxSpot =</div>
<div class="line"><span class="lineno"> 1649</span>        market != <span class="keyword">nullptr</span></div>
<div class="line"><span class="lineno"> 1650</span>            <span class="comment">// use instantaneous fx rate</span></div>
<div class="line"><span class="lineno"> 1651</span>            ? market-&gt;fxRate(ccy + baseCcy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>)</div>
<div class="line"><span class="lineno"> 1652</span>            : Handle&lt;Quote&gt;(boost::make_shared&lt;SimpleQuote&gt;(1.0)); <span class="comment">// multiplicative conversion into base ccy</span></div>
<div class="line"><span class="lineno"> 1653</span>    Real notional = 1.0 / fxSpot-&gt;value();</div>
<div class="line"><span class="lineno"> 1654</span> </div>
<div class="line"><span class="lineno"> 1655</span>    RelinkableHandle&lt;YieldTermStructure&gt; baseDiscountCurve;</div>
<div class="line"><span class="lineno"> 1656</span>    RelinkableHandle&lt;YieldTermStructure&gt; discountCurve;</div>
<div class="line"><span class="lineno"> 1657</span>    boost::shared_ptr&lt;FxIndex&gt; fxIndex =</div>
<div class="line"><span class="lineno"> 1658</span>        boost::make_shared&lt;FxIndex&gt;(<span class="stringliteral">&quot;dummy&quot;</span>, conv-&gt;settlementDays(), currency, baseCurrency, conv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno"> 1659</span>                                    fxSpot, discountCurve, baseDiscountCurve);</div>
<div class="line"><span class="lineno"> 1660</span> </div>
<div class="line"><span class="lineno"> 1661</span>    <span class="comment">// LOG(&quot;Make Cross Ccy Swap for base ccy &quot; &lt;&lt; baseCcy &lt;&lt; &quot; currency &quot; &lt;&lt; ccy);</span></div>
<div class="line"><span class="lineno"> 1662</span>    <span class="comment">// Set up first leg as spread leg, second as flat leg</span></div>
<div class="line"><span class="lineno"> 1663</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(baseIndex-&gt;name());</div>
<div class="line"><span class="lineno"> 1664</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a4c2a54863b06e0f0b96160d82f5f7e26">removeTodaysFixingIndices_</a>.insert(index-&gt;name());</div>
<div class="line"><span class="lineno"> 1665</span>    boost::shared_ptr&lt;CrossCcySwap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 1666</span>    <span class="keywordtype">bool</span> telescopicValueDates = <span class="keyword">true</span>; <span class="comment">// same as in the yield curve building</span></div>
<div class="line"><span class="lineno"> 1667</span>    </div>
<div class="line"><span class="lineno"> 1668</span>    <span class="keywordflow">if</span> (baseCcy == conv-&gt;spreadIndex()-&gt;currency().code()) { <span class="comment">// base ccy index is spread index</span></div>
<div class="line"><span class="lineno"> 1669</span>        <span class="keywordflow">if</span> (conv-&gt;isResettable() &amp;&amp; conv-&gt;flatIndexIsResettable()) {       <span class="comment">// i.e. flat index leg is resettable</span></div>
<div class="line"><span class="lineno"> 1670</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;create resettable xccy par instrument (1), convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1671</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CrossCcyBasisMtMResetSwap&gt;(</div>
<div class="line"><span class="lineno"> 1672</span>        baseNotional, baseCurrency, baseSchedule, *baseIndex, 0.0, <span class="comment">// spread index leg =&gt; use fairForeignSpread</span></div>
<div class="line"><span class="lineno"> 1673</span>        currency, schedule, *index, 0.0, fxIndex, <span class="keyword">true</span>,            <span class="comment">// resettable flat index leg</span></div>
<div class="line"><span class="lineno"> 1674</span>        conv-&gt;paymentLag(), conv-&gt;flatPaymentLag(),</div>
<div class="line"><span class="lineno"> 1675</span>        conv-&gt;includeSpread(), conv-&gt;lookback(), conv-&gt;fixingDays(), conv-&gt;rateCutoff(), conv-&gt;isAveraged(),</div>
<div class="line"><span class="lineno"> 1676</span>        conv-&gt;flatIncludeSpread(), conv-&gt;flatLookback(), conv-&gt;flatFixingDays(), conv-&gt;flatRateCutoff(), conv-&gt;flatIsAveraged(),</div>
<div class="line"><span class="lineno"> 1677</span>        telescopicValueDates, <span class="keyword">true</span>);                               <span class="comment">// fair spread leg is foreign</span></div>
<div class="line"><span class="lineno"> 1678</span>    }</div>
<div class="line"><span class="lineno"> 1679</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conv-&gt;isResettable() &amp;&amp; !conv-&gt;flatIndexIsResettable()) {  <span class="comment">// i.e. spread index leg is resettable</span></div>
<div class="line"><span class="lineno"> 1680</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;create resettable xccy par instrument (2), convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1681</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CrossCcyBasisMtMResetSwap&gt;(</div>
<div class="line"><span class="lineno"> 1682</span>        notional, currency, schedule, *index, 0.0,                  <span class="comment">// flat index leg</span></div>
<div class="line"><span class="lineno"> 1683</span>        baseCurrency, baseSchedule, *baseIndex, 0.0, fxIndex, <span class="keyword">true</span>, <span class="comment">// resettable spread index leg =&gt; use fairDomesticSpread</span></div>
<div class="line"><span class="lineno"> 1684</span>        conv-&gt;flatPaymentLag(), conv-&gt;paymentLag(),</div>
<div class="line"><span class="lineno"> 1685</span>        conv-&gt;flatIncludeSpread(), conv-&gt;flatLookback(), conv-&gt;flatFixingDays(), conv-&gt;flatRateCutoff(), conv-&gt;flatIsAveraged(),</div>
<div class="line"><span class="lineno"> 1686</span>        conv-&gt;includeSpread(), conv-&gt;lookback(), conv-&gt;fixingDays(), conv-&gt;rateCutoff(), conv-&gt;isAveraged(),</div>
<div class="line"><span class="lineno"> 1687</span>        telescopicValueDates, <span class="keyword">false</span>);                               <span class="comment">// fair spread leg is domestic</span></div>
<div class="line"><span class="lineno"> 1688</span>    }</div>
<div class="line"><span class="lineno"> 1689</span>    <span class="keywordflow">else</span> { <span class="comment">// not resettable</span></div>
<div class="line"><span class="lineno"> 1690</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;create non-resettable xccy par instrument (3), convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1691</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CrossCcyBasisSwap&gt;(</div>
<div class="line"><span class="lineno"> 1692</span>        baseNotional, baseCurrency, baseSchedule, *baseIndex, 0.0, 1.0, <span class="comment">// spread index leg =&gt; use fairPaySpread</span></div>
<div class="line"><span class="lineno"> 1693</span>        notional, currency, schedule, *index, 0.0, 1.0,                 <span class="comment">// flat index leg</span></div>
<div class="line"><span class="lineno"> 1694</span>        conv-&gt;paymentLag(), conv-&gt;flatPaymentLag(),</div>
<div class="line"><span class="lineno"> 1695</span>        conv-&gt;includeSpread(), conv-&gt;lookback(), conv-&gt;fixingDays(), conv-&gt;rateCutoff(), conv-&gt;isAveraged(),</div>
<div class="line"><span class="lineno"> 1696</span>        conv-&gt;flatIncludeSpread(), conv-&gt;flatLookback(), conv-&gt;flatFixingDays(), conv-&gt;flatRateCutoff(), conv-&gt;flatIsAveraged(),</div>
<div class="line"><span class="lineno"> 1697</span>        telescopicValueDates);</div>
<div class="line"><span class="lineno"> 1698</span>    }</div>
<div class="line"><span class="lineno"> 1699</span>    }</div>
<div class="line"><span class="lineno"> 1700</span>    <span class="keywordflow">else</span> { <span class="comment">// base ccy index is flat index</span></div>
<div class="line"><span class="lineno"> 1701</span>    <span class="keywordflow">if</span> (conv-&gt;isResettable() &amp;&amp; conv-&gt;flatIndexIsResettable()) {</div>
<div class="line"><span class="lineno"> 1702</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;create resettable xccy par instrument (4), convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1703</span>        <span class="comment">// second leg is resettable, so the second leg is the base currency leg </span></div>
<div class="line"><span class="lineno"> 1704</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CrossCcyBasisMtMResetSwap&gt;(</div>
<div class="line"><span class="lineno"> 1705</span>            notional, currency, schedule, *index, 0.0,                  <span class="comment">// spread index leg =&gt; use fairForeignSpread</span></div>
<div class="line"><span class="lineno"> 1706</span>        baseCurrency, baseSchedule, *baseIndex, 0.0, fxIndex, <span class="keyword">true</span>, <span class="comment">// resettable flat index leg</span></div>
<div class="line"><span class="lineno"> 1707</span>        conv-&gt;paymentLag(), conv-&gt;flatPaymentLag(),</div>
<div class="line"><span class="lineno"> 1708</span>        conv-&gt;includeSpread(), conv-&gt;lookback(), conv-&gt;fixingDays(), conv-&gt;rateCutoff(), conv-&gt;isAveraged(),</div>
<div class="line"><span class="lineno"> 1709</span>        conv-&gt;flatIncludeSpread(), conv-&gt;flatLookback(), conv-&gt;flatFixingDays(), conv-&gt;flatRateCutoff(), conv-&gt;flatIsAveraged(),</div>
<div class="line"><span class="lineno"> 1710</span>        telescopicValueDates, <span class="keyword">true</span>);                                <span class="comment">// fair spread leg is foreign</span></div>
<div class="line"><span class="lineno"> 1711</span>    }</div>
<div class="line"><span class="lineno"> 1712</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conv-&gt;isResettable() &amp;&amp; !conv-&gt;flatIndexIsResettable()) {</div>
<div class="line"><span class="lineno"> 1713</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;create resettable xccy par instrument (5), convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1714</span>        <span class="comment">// second leg is resettable, so the second leg is the non-base non-flat spread leg  </span></div>
<div class="line"><span class="lineno"> 1715</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CrossCcyBasisMtMResetSwap&gt;(</div>
<div class="line"><span class="lineno"> 1716</span>        baseNotional, baseCurrency, baseSchedule, *baseIndex, 0.0, <span class="comment">// flat index leg</span></div>
<div class="line"><span class="lineno"> 1717</span>        currency, schedule, *index, 0.0, fxIndex, <span class="keyword">true</span>,            <span class="comment">// resettable spread index leg =&gt; use fairDomesticSpread</span></div>
<div class="line"><span class="lineno"> 1718</span>        conv-&gt;flatPaymentLag(), conv-&gt;paymentLag(), </div>
<div class="line"><span class="lineno"> 1719</span>        conv-&gt;flatIncludeSpread(), conv-&gt;flatLookback(), conv-&gt;flatFixingDays(), conv-&gt;flatRateCutoff(), conv-&gt;flatIsAveraged(),</div>
<div class="line"><span class="lineno"> 1720</span>        conv-&gt;includeSpread(), conv-&gt;lookback(), conv-&gt;fixingDays(), conv-&gt;rateCutoff(), conv-&gt;isAveraged(),</div>
<div class="line"><span class="lineno"> 1721</span>        telescopicValueDates, <span class="keyword">false</span>);                              <span class="comment">// fair spread leg is domestic</span></div>
<div class="line"><span class="lineno"> 1722</span>    }</div>
<div class="line"><span class="lineno"> 1723</span>    <span class="keywordflow">else</span> { <span class="comment">// not resettable</span></div>
<div class="line"><span class="lineno"> 1724</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;create non-resettable xccy par instrument (6), convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1725</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;CrossCcyBasisSwap&gt;(</div>
<div class="line"><span class="lineno"> 1726</span>            notional, currency, schedule, *index, 0.0, 1.0,                 <span class="comment">// spread index leg =&gt; use fairPaySpread</span></div>
<div class="line"><span class="lineno"> 1727</span>        baseNotional, baseCurrency, baseSchedule, *baseIndex, 0.0, 1.0, <span class="comment">// flat index leg</span></div>
<div class="line"><span class="lineno"> 1728</span>        conv-&gt;paymentLag(), conv-&gt;flatPaymentLag(), </div>
<div class="line"><span class="lineno"> 1729</span>        conv-&gt;includeSpread(), conv-&gt;lookback(), conv-&gt;fixingDays(), conv-&gt;rateCutoff(), conv-&gt;isAveraged(),</div>
<div class="line"><span class="lineno"> 1730</span>        conv-&gt;flatIncludeSpread(), conv-&gt;flatLookback(), conv-&gt;flatFixingDays(), conv-&gt;flatRateCutoff(), conv-&gt;flatIsAveraged(),</div>
<div class="line"><span class="lineno"> 1731</span>        telescopicValueDates);</div>
<div class="line"><span class="lineno"> 1732</span>    }</div>
<div class="line"><span class="lineno"> 1733</span>    }</div>
<div class="line"><span class="lineno"> 1734</span>    </div>
<div class="line"><span class="lineno"> 1735</span>    </div>
<div class="line"><span class="lineno"> 1736</span>    <span class="keywordtype">bool</span> isBaseDiscount = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1737</span>    <span class="keywordtype">bool</span> isNonBaseDiscount = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1738</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1739</span>        baseDiscountCurve.linkTo(<a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f">xccyYieldCurve</a>(market, baseCcy, isBaseDiscount, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>).currentLink());</div>
<div class="line"><span class="lineno"> 1740</span>    discountCurve.linkTo(<a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f">xccyYieldCurve</a>(market, ccy, isNonBaseDiscount, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>).currentLink());</div>
<div class="line"><span class="lineno"> 1741</span>        boost::shared_ptr&lt;PricingEngine&gt; swapEngine =</div>
<div class="line"><span class="lineno"> 1742</span>            boost::make_shared&lt;CrossCcySwapEngine&gt;(baseCurrency, baseDiscountCurve, currency, discountCurve, fxSpot);</div>
<div class="line"><span class="lineno"> 1743</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(swapEngine);</div>
<div class="line"><span class="lineno"> 1744</span>    }</div>
<div class="line"><span class="lineno"> 1745</span> </div>
<div class="line"><span class="lineno"> 1746</span>    <span class="keywordflow">if</span> (isBaseDiscount)</div>
<div class="line"><span class="lineno"> 1747</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, baseCcy, 0);</div>
<div class="line"><span class="lineno"> 1748</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1749</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>, baseCcy, 0);</div>
<div class="line"><span class="lineno"> 1750</span> </div>
<div class="line"><span class="lineno"> 1751</span>    <span class="keywordflow">if</span> (isNonBaseDiscount)</div>
<div class="line"><span class="lineno"> 1752</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1753</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1754</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1755</span> </div>
<div class="line"><span class="lineno"> 1756</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, baseIndexName, 0);</div>
<div class="line"><span class="lineno"> 1757</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>, indexName, 0);</div>
<div class="line"><span class="lineno"> 1758</span> </div>
<div class="line"><span class="lineno"> 1759</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1760</span>    Date latestRelevantDate = <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate();</div>
<div class="line"><span class="lineno"> 1761</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> i = boost::dynamic_pointer_cast&lt;CrossCcyBasisSwap&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>)){</div>
<div class="line"><span class="lineno"> 1762</span>        boost::shared_ptr&lt;IborCoupon&gt; lastCoupon0 =</div>
<div class="line"><span class="lineno"> 1763</span>        boost::dynamic_pointer_cast&lt;IborCoupon&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;leg(0)[<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;leg(0).size() - 2]);</div>
<div class="line"><span class="lineno"> 1764</span>    boost::shared_ptr&lt;IborCoupon&gt; lastCoupon1 =</div>
<div class="line"><span class="lineno"> 1765</span>        boost::dynamic_pointer_cast&lt;IborCoupon&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;leg(1)[<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;leg(1).size() - 2]);</div>
<div class="line"><span class="lineno"> 1766</span>    <span class="keywordflow">if</span> (lastCoupon0 != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1767</span>        latestRelevantDate = std::max(latestRelevantDate, lastCoupon0-&gt;fixingEndDate());</div>
<div class="line"><span class="lineno"> 1768</span>    <span class="keywordflow">if</span> (lastCoupon1 != <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1769</span>        latestRelevantDate = std::max(latestRelevantDate, lastCoupon1-&gt;fixingEndDate());</div>
<div class="line"><span class="lineno"> 1770</span>    <span class="comment">// yieldCurvePillars_[ccy].push_back((latestRelevantDate - asof_) * Days);</span></div>
<div class="line"><span class="lineno"> 1771</span>    }</div>
<div class="line"><span class="lineno"> 1772</span> </div>
<div class="line"><span class="lineno"> 1773</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, latestRelevantDate);</div>
<div class="line"><span class="lineno"> 1774</span>}</div>
<div class="ttc" id="agroup__utilities_html_ga6e9e781a58e78200301c76161589fc7b"><div class="ttname"><a href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">ore::data::parseCurrency</a></div><div class="ttdeci">Currency parseCurrency(const string &amp;s)</div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a6048fd87840c79258ed4e959f0555a2f"><div class="ttname"><a href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f">ore::data::xccyYieldCurve</a></div><div class="ttdeci">Handle&lt; YieldTermStructure &gt; xccyYieldCurve(const boost::shared_ptr&lt; Market &gt; &amp;market, const string &amp;ccyCode, const string &amp;configuration)</div></div>
</div><!-- fragment --><div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_cgraph">
<area shape="rect" title="Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,55,181,80"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b" title=" " alt="" coords="232,5,397,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gac1ecdc5f20e7d73327bccd5f930f8782" title=" " alt="" coords="232,55,397,80"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f" title=" " alt="" coords="229,104,400,129"/>
</map>
</div>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a0a8cff443db13bb49f84bb402091baae_icgraph">
<area shape="rect" title="Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1389,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a36b2d757640f779381349d234d4627a6" name="a36b2d757640f779381349d234d4627a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36b2d757640f779381349d234d4627a6">&#9670;&#160;</a></span>makeFxForward()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeFxForward </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>baseCcy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01777">1777</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1779</span>                                                                                                 {</div>
<div class="line"><span class="lineno"> 1780</span> </div>
<div class="line"><span class="lineno"> 1781</span>    boost::shared_ptr&lt;FXConvention&gt; conv = boost::dynamic_pointer_cast&lt;FXConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1782</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected FXConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1783</span>    QL_REQUIRE(baseCcy == conv-&gt;sourceCurrency().code() || baseCcy == conv-&gt;targetCurrency().code(),</div>
<div class="line"><span class="lineno"> 1784</span>               <span class="stringliteral">&quot;base currency &quot;</span> &lt;&lt; baseCcy &lt;&lt; <span class="stringliteral">&quot; not covered by convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1785</span>    QL_REQUIRE(ccy == conv-&gt;sourceCurrency().code() || ccy == conv-&gt;targetCurrency().code(),</div>
<div class="line"><span class="lineno"> 1786</span>               <span class="stringliteral">&quot;currency &quot;</span> &lt;&lt; ccy &lt;&lt; <span class="stringliteral">&quot; not covered by convention &quot;</span> &lt;&lt; conv-&gt;id());</div>
<div class="line"><span class="lineno"> 1787</span>    Currency baseCurrency = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(baseCcy);</div>
<div class="line"><span class="lineno"> 1788</span>    Currency currency = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b">parseCurrency</a>(ccy);</div>
<div class="line"><span class="lineno"> 1789</span>    Date today = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno"> 1790</span>    Date spot = conv-&gt;advanceCalendar().advance(today, conv-&gt;spotDays() * Days);</div>
<div class="line"><span class="lineno"> 1791</span>    Date <a class="code hl_variableRef" href="../ored/utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a> = conv-&gt;advanceCalendar().advance(spot, term);</div>
<div class="line"><span class="lineno"> 1792</span>    Real baseNotional = 1.0;</div>
<div class="line"><span class="lineno"> 1793</span>    Handle&lt;Quote&gt; fxSpot =</div>
<div class="line"><span class="lineno"> 1794</span>        market != <span class="keyword">nullptr</span></div>
<div class="line"><span class="lineno"> 1795</span>            ? market-&gt;fxRate(ccy + baseCcy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>)</div>
<div class="line"><span class="lineno"> 1796</span>            : Handle&lt;Quote&gt;(boost::make_shared&lt;SimpleQuote&gt;(1.0)); <span class="comment">// multiplicative conversion into base ccy</span></div>
<div class="line"><span class="lineno"> 1797</span>    Real notional = 1.0 / fxSpot-&gt;value();</div>
<div class="line"><span class="lineno"> 1798</span>    boost::shared_ptr&lt;FxForward&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> =</div>
<div class="line"><span class="lineno"> 1799</span>        boost::make_shared&lt;FxForward&gt;(baseNotional, baseCurrency, notional, currency, maturity, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1800</span>    </div>
<div class="line"><span class="lineno"> 1801</span>    <span class="keywordtype">bool</span> isBaseDiscount = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1802</span>    <span class="keywordtype">bool</span> isNonBaseDiscount = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1803</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1804</span>        Handle&lt;YieldTermStructure&gt; baseDiscountCurve = <a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f">xccyYieldCurve</a>(</div>
<div class="line"><span class="lineno"> 1805</span>            market, baseCcy, isBaseDiscount, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1806</span>        Handle&lt;YieldTermStructure&gt; discountCurve = <a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f">xccyYieldCurve</a>(</div>
<div class="line"><span class="lineno"> 1807</span>            market, ccy, isNonBaseDiscount, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1808</span>        boost::shared_ptr&lt;PricingEngine&gt; engine = boost::make_shared&lt;DiscountingFxForwardEngine&gt;(</div>
<div class="line"><span class="lineno"> 1809</span>            baseCurrency, baseDiscountCurve, currency, discountCurve, fxSpot);</div>
<div class="line"><span class="lineno"> 1810</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(engine);</div>
<div class="line"><span class="lineno"> 1811</span>    }</div>
<div class="line"><span class="lineno"> 1812</span> </div>
<div class="line"><span class="lineno"> 1813</span>    <span class="keywordflow">if</span> (isBaseDiscount)</div>
<div class="line"><span class="lineno"> 1814</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, baseCcy, 0);</div>
<div class="line"><span class="lineno"> 1815</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1816</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>, baseCcy, 0);</div>
<div class="line"><span class="lineno"> 1817</span> </div>
<div class="line"><span class="lineno"> 1818</span>    <span class="keywordflow">if</span> (isNonBaseDiscount)</div>
<div class="line"><span class="lineno"> 1819</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1820</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1821</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1822</span> </div>
<div class="line"><span class="lineno"> 1823</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1824</span>    <span class="comment">// yieldCurvePillars_[ccy].push_back((maturity - asof_) * Days);</span></div>
<div class="line"><span class="lineno"> 1825</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, <a class="code hl_variableRef" href="../ored/utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>);</div>
<div class="line"><span class="lineno"> 1826</span>}</div>
<div class="ttc" id="autilities_8cpp_html_a13d7d92e74b3e8c94c52ca7a1262c55e"><div class="ttname"><a href="../ored/utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a></div><div class="ttdeci">Time maturity</div></div>
</div><!-- fragment --><div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_cgraph">
<area shape="rect" title="Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,31,120,56"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga6e9e781a58e78200301c76161589fc7b" title=" " alt="" coords="171,5,336,31"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a6048fd87840c79258ed4e959f0555a2f" title=" " alt="" coords="168,55,339,80"/>
</map>
</div>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a36b2d757640f779381349d234d4627a6_icgraph">
<area shape="rect" title="Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1328,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="ab159350c50880e88ef534864f9466b26" name="ab159350c50880e88ef534864f9466b26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab159350c50880e88ef534864f9466b26">&#9670;&#160;</a></span>makeCDS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; boost::shared_ptr&lt; Instrument &gt;, Date &gt; makeCDS </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>ccy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create CDS for implying par rate sensitivity from Hazard Rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01829">1829</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1832</span>                                                                   {</div>
<div class="line"><span class="lineno"> 1833</span> </div>
<div class="line"><span class="lineno"> 1834</span>    boost::shared_ptr&lt;CdsConvention&gt; conv = boost::dynamic_pointer_cast&lt;CdsConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1835</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected CdsConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1836</span> </div>
<div class="line"><span class="lineno"> 1837</span>    boost::shared_ptr&lt;QuantExt::CreditDefaultSwap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = <a class="code hl_classRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html">MakeCreditDefaultSwap</a>(term, 0.1).<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a4f6863a09ad0ad21659f5fcf32b418e5">withNominal</a>(1)</div>
<div class="line"><span class="lineno"> 1838</span>        .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a13afd8ff6e8e79e157b41c54db8b28f0">withCouponTenor</a>(Period(conv-&gt;frequency()))</div>
<div class="line"><span class="lineno"> 1839</span>        .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a79a5bf709a83cd99efa83faf7a6f0d6f">withDayCounter</a>(conv-&gt;dayCounter())</div>
<div class="line"><span class="lineno"> 1840</span>        .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a8786a1690bc26d6512e31f517befea73">withDateGenerationRule</a>(conv-&gt;rule())</div>
<div class="line"><span class="lineno"> 1841</span>        .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#aef79fd00dc96736bca343d0192c26468">withSettlesAccrual</a>(conv-&gt;settlesAccrual())</div>
<div class="line"><span class="lineno"> 1842</span>        .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a1156ccc1f63793734fe12a4535c6f68f">withPaysAtDefaultTime</a>(conv-&gt;paysAtDefaultTime())</div>
<div class="line"><span class="lineno"> 1843</span>        <span class="comment">// .withPaysAtDefaultTime(conv-&gt;rebatesAccrual()) // FIXME: missing in conventions</span></div>
<div class="line"><span class="lineno"> 1844</span>        ;</div>
<div class="line"><span class="lineno"> 1845</span> </div>
<div class="line"><span class="lineno"> 1846</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1847</span>        Handle&lt;YieldTermStructure&gt; yts;</div>
<div class="line"><span class="lineno"> 1848</span>        <span class="keywordflow">if</span> (!expDiscountCurve.empty()) {</div>
<div class="line"><span class="lineno"> 1849</span>            <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 1850</span>            <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1851</span>            yts = discountIndex-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1852</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1853</span>            yts = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1854</span>        }</div>
<div class="line"><span class="lineno"> 1855</span> </div>
<div class="line"><span class="lineno"> 1856</span>        Handle&lt;DefaultProbabilityTermStructure&gt; dpts = market-&gt;defaultCurve(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>)-&gt;curve();</div>
<div class="line"><span class="lineno"> 1857</span>        Handle&lt;Quote&gt; recovery =</div>
<div class="line"><span class="lineno"> 1858</span>            market-&gt;recoveryRate(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1859</span> </div>
<div class="line"><span class="lineno"> 1860</span>        boost::shared_ptr&lt;PricingEngine&gt; cdsEngine =</div>
<div class="line"><span class="lineno"> 1861</span>            boost::make_shared&lt;QuantExt::MidPointCdsEngine&gt;(dpts, recovery-&gt;value(), yts);</div>
<div class="line"><span class="lineno"> 1862</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(cdsEngine);</div>
<div class="line"><span class="lineno"> 1863</span>    }</div>
<div class="line"><span class="lineno"> 1864</span> </div>
<div class="line"><span class="lineno"> 1865</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1866</span> </div>
<div class="line"><span class="lineno"> 1867</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1868</span>    <span class="comment">//Date maturity = helper-&gt;maturity();</span></div>
<div class="line"><span class="lineno"> 1869</span>    Date <a class="code hl_variableRef" href="../ored/utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a> = conv-&gt;calendar().adjust(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturity(), conv-&gt;paymentConvention());</div>
<div class="line"><span class="lineno"> 1870</span>    <span class="comment">// cdsPillars_[name].push_back((maturity - asof_) * Days);</span></div>
<div class="line"><span class="lineno"> 1871</span>    <span class="keywordflow">return</span> std::pair&lt;boost::shared_ptr&lt;Instrument&gt;, Date&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>, <a class="code hl_variableRef" href="../ored/utilities_8cpp.html#a13d7d92e74b3e8c94c52ca7a1262c55e">maturity</a>);</div>
<div class="line"><span class="lineno"> 1872</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html">QuantExt::MakeCreditDefaultSwap</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html_a1156ccc1f63793734fe12a4535c6f68f"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a1156ccc1f63793734fe12a4535c6f68f">QuantExt::MakeCreditDefaultSwap::withPaysAtDefaultTime</a></div><div class="ttdeci">MakeCreditDefaultSwap &amp; withPaysAtDefaultTime(bool)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html_a13afd8ff6e8e79e157b41c54db8b28f0"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a13afd8ff6e8e79e157b41c54db8b28f0">QuantExt::MakeCreditDefaultSwap::withCouponTenor</a></div><div class="ttdeci">MakeCreditDefaultSwap &amp; withCouponTenor(Period)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html_a4f6863a09ad0ad21659f5fcf32b418e5"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a4f6863a09ad0ad21659f5fcf32b418e5">QuantExt::MakeCreditDefaultSwap::withNominal</a></div><div class="ttdeci">MakeCreditDefaultSwap &amp; withNominal(Real)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html_a79a5bf709a83cd99efa83faf7a6f0d6f"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a79a5bf709a83cd99efa83faf7a6f0d6f">QuantExt::MakeCreditDefaultSwap::withDayCounter</a></div><div class="ttdeci">MakeCreditDefaultSwap &amp; withDayCounter(const DayCounter &amp;)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html_a8786a1690bc26d6512e31f517befea73"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a8786a1690bc26d6512e31f517befea73">QuantExt::MakeCreditDefaultSwap::withDateGenerationRule</a></div><div class="ttdeci">MakeCreditDefaultSwap &amp; withDateGenerationRule(DateGeneration::Rule rule)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1_make_credit_default_swap_html_aef79fd00dc96736bca343d0192c26468"><div class="ttname"><a href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#aef79fd00dc96736bca343d0192c26468">QuantExt::MakeCreditDefaultSwap::withSettlesAccrual</a></div><div class="ttdeci">MakeCreditDefaultSwap &amp; withSettlesAccrual(bool)</div></div>
</div><!-- fragment --><div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_cgraph">
<area shape="rect" title="Create CDS for implying par rate sensitivity from Hazard Rate sensitivity." alt="" coords="5,173,87,198"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a13afd8ff6e8e79e157b41c54db8b28f0" title=" " alt="" coords="140,5,331,45"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a8786a1690bc26d6512e31f517befea73" title=" " alt="" coords="135,69,336,109"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a79a5bf709a83cd99efa83faf7a6f0d6f" title=" " alt="" coords="140,133,331,173"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a4f6863a09ad0ad21659f5fcf32b418e5" title=" " alt="" coords="140,197,331,237"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#a1156ccc1f63793734fe12a4535c6f68f" title=" " alt="" coords="137,261,333,301"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1_make_credit_default_swap.html#aef79fd00dc96736bca343d0192c26468" title=" " alt="" coords="140,325,331,365"/>
</map>
</div>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_ab159350c50880e88ef534864f9466b26_icgraph">
<area shape="rect" title="Create CDS for implying par rate sensitivity from Hazard Rate sensitivity." alt="" coords="1213,207,1295,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a15e7d23239efd7bda0bd107f0c568a2f" name="a15e7d23239efd7bda0bd107f0c568a2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e7d23239efd7bda0bd107f0c568a2f">&#9670;&#160;</a></span>makeZeroInflationSwap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; Instrument &gt; makeZeroInflationSwap </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>singleCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create Zero <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from zero rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01875">1875</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1878</span>                                                                                 {</div>
<div class="line"><span class="lineno"> 1879</span> </div>
<div class="line"><span class="lineno"> 1880</span>    boost::shared_ptr&lt;InflationSwapConvention&gt; conv = boost::dynamic_pointer_cast&lt;InflationSwapConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1881</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected InflationSwapConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1882</span>    <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = indexName != <span class="stringliteral">&quot;&quot;</span> ? indexName : conv-&gt;indexName();</div>
<div class="line"><span class="lineno"> 1883</span>    boost::shared_ptr&lt;ZeroInflationIndex&gt; index = conv-&gt;index();</div>
<div class="line"><span class="lineno"> 1884</span>    Currency currency = index-&gt;currency();</div>
<div class="line"><span class="lineno"> 1885</span>    <span class="keywordtype">string</span> ccy = currency.code();</div>
<div class="line"><span class="lineno"> 1886</span>    Handle&lt;YieldTermStructure&gt; discountCurve;</div>
<div class="line"><span class="lineno"> 1887</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1888</span>        <span class="comment">// Get the inflation index</span></div>
<div class="line"><span class="lineno"> 1889</span>        index = *market-&gt;zeroInflationIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1890</span> </div>
<div class="line"><span class="lineno"> 1891</span>        <span class="comment">// Get the discount curve</span></div>
<div class="line"><span class="lineno"> 1892</span>        <span class="keywordflow">if</span> (!expDiscountCurve.empty()) {</div>
<div class="line"><span class="lineno"> 1893</span>            <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 1894</span>            <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1895</span>            discountCurve = discountIndex-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1896</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1897</span>            <span class="comment">// Take the default discount curve for the inflation currency from the market</span></div>
<div class="line"><span class="lineno"> 1898</span>            discountCurve = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1899</span>        }</div>
<div class="line"><span class="lineno"> 1900</span>    }</div>
<div class="line"><span class="lineno"> 1901</span> </div>
<div class="line"><span class="lineno"> 1902</span>    <span class="comment">// Potentially use conventions here to get an updated start date e.g. AU CPI conventions with a publication roll.</span></div>
<div class="line"><span class="lineno"> 1903</span>    Date start = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno"> 1904</span>    start = <a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32">getInflationSwapStart</a>(start, *conv);</div>
<div class="line"><span class="lineno"> 1905</span>    Date end = start + term;</div>
<div class="line"><span class="lineno"> 1906</span>    boost::shared_ptr&lt;ZeroCouponInflationSwap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>(</div>
<div class="line"><span class="lineno"> 1907</span>        <span class="keyword">new</span> ZeroCouponInflationSwap(ZeroCouponInflationSwap::Payer, 1.0, start, end, conv-&gt;infCalendar(),</div>
<div class="line"><span class="lineno"> 1908</span>                                    conv-&gt;infConvention(), conv-&gt;dayCounter(), 0.0, index, conv-&gt;observationLag(), CPI::AsIndex));</div>
<div class="line"><span class="lineno"> 1909</span> </div>
<div class="line"><span class="lineno"> 1910</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1911</span>        boost::shared_ptr&lt;PricingEngine&gt; swapEngine = boost::make_shared&lt;DiscountingSwapEngine&gt;(discountCurve);</div>
<div class="line"><span class="lineno"> 1912</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(swapEngine);</div>
<div class="line"><span class="lineno"> 1913</span>    }</div>
<div class="line"><span class="lineno"> 1914</span> </div>
<div class="line"><span class="lineno"> 1915</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1916</span> </div>
<div class="line"><span class="lineno"> 1917</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 1918</span>    boost::shared_ptr&lt;IndexedCashFlow&gt; lastCoupon =</div>
<div class="line"><span class="lineno"> 1919</span>        boost::dynamic_pointer_cast&lt;IndexedCashFlow&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;inflationLeg().back());</div>
<div class="line"><span class="lineno"> 1920</span>    Date latestRelevantDate = std::max(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate(), lastCoupon-&gt;fixingDate());</div>
<div class="line"><span class="lineno"> 1921</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8bb9a21fd7dc29857585336f1d836bbd">zeroInflationPillars_</a>[indexName].push_back((latestRelevantDate - <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>) * Days);</div>
<div class="line"><span class="lineno"> 1922</span>    <span class="keywordflow">return</span> <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 1923</span>}</div>
<div class="ttc" id="anamespaceore_1_1data_html_a4cabef9f8164c42065e1fabfc11a6d32"><div class="ttname"><a href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32">ore::data::getInflationSwapStart</a></div><div class="ttdeci">QuantLib::Date getInflationSwapStart(const Date &amp;asof, const InflationSwapConvention &amp;convention)</div></div>
</div><!-- fragment --><div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_cgraph">
<area shape="rect" title="Create Zero Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="5,13,160,38"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32" title=" " alt="" coords="208,5,383,45"/>
</map>
</div>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a15e7d23239efd7bda0bd107f0c568a2f_icgraph">
<area shape="rect" title="Create Zero Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1213,207,1368,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a9a39605391eba53ee7e55cb504808a9e" name="a9a39605391eba53ee7e55cb504808a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a39605391eba53ee7e55cb504808a9e">&#9670;&#160;</a></span>makeYoyInflationSwap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; Instrument &gt; makeYoyInflationSwap </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>conventions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>singleCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>fromZero</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>parHelperDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create YoY <a class="elRef" href="../qle/class_swap.html">Swap</a> for implying par rate sensitivity from yoy rate sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l01926">1926</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1930</span>                                                                                {</div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span>    boost::shared_ptr&lt;InflationSwapConvention&gt; conv = boost::dynamic_pointer_cast&lt;InflationSwapConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 1933</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected InflationSwapConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 1934</span>    <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = indexName != <span class="stringliteral">&quot;&quot;</span> ? indexName : conv-&gt;indexName();</div>
<div class="line"><span class="lineno"> 1935</span> </div>
<div class="line"><span class="lineno"> 1936</span>    boost::shared_ptr&lt;ZeroInflationIndex&gt; zeroIndex = conv-&gt;index();</div>
<div class="line"><span class="lineno"> 1937</span>    boost::shared_ptr&lt;YoYInflationIndex&gt; index =</div>
<div class="line"><span class="lineno"> 1938</span>        boost::make_shared&lt;QuantExt::YoYInflationIndexWrapper&gt;(zeroIndex, conv-&gt;interpolated());</div>
<div class="line"><span class="lineno"> 1939</span> </div>
<div class="line"><span class="lineno"> 1940</span>    <span class="comment">// Potentially use conventions here to get an updated start date e.g. AU CPI conventions with a publication roll.</span></div>
<div class="line"><span class="lineno"> 1941</span>    Date start = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno"> 1942</span>    start = <a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32">getInflationSwapStart</a>(start, *conv);</div>
<div class="line"><span class="lineno"> 1943</span>    Date end = start + term;</div>
<div class="line"><span class="lineno"> 1944</span>    Period tenor(1, Years);</div>
<div class="line"><span class="lineno"> 1945</span>    Schedule fixSchedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 1946</span>                               .from(start)</div>
<div class="line"><span class="lineno"> 1947</span>                               .to(end)</div>
<div class="line"><span class="lineno"> 1948</span>                               .withTenor(tenor)</div>
<div class="line"><span class="lineno"> 1949</span>                               .withCalendar(conv-&gt;fixCalendar())</div>
<div class="line"><span class="lineno"> 1950</span>                               .withConvention(conv-&gt;fixConvention());</div>
<div class="line"><span class="lineno"> 1951</span>    Schedule yoySchedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 1952</span>                               .from(start)</div>
<div class="line"><span class="lineno"> 1953</span>                               .to(end)</div>
<div class="line"><span class="lineno"> 1954</span>                               .withTenor(tenor)</div>
<div class="line"><span class="lineno"> 1955</span>                               .withCalendar(conv-&gt;infCalendar())</div>
<div class="line"><span class="lineno"> 1956</span>                               .withConvention(conv-&gt;infConvention());</div>
<div class="line"><span class="lineno"> 1957</span> </div>
<div class="line"><span class="lineno"> 1958</span>    Currency currency = index-&gt;currency();</div>
<div class="line"><span class="lineno"> 1959</span>    <span class="keywordtype">string</span> ccy = currency.code();</div>
<div class="line"><span class="lineno"> 1960</span>    Handle&lt;YieldTermStructure&gt; discountCurve;</div>
<div class="line"><span class="lineno"> 1961</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1962</span> </div>
<div class="line"><span class="lineno"> 1963</span>        <span class="comment">// Get the inflation index</span></div>
<div class="line"><span class="lineno"> 1964</span>        <span class="keywordflow">if</span> (fromZero) {</div>
<div class="line"><span class="lineno"> 1965</span>            zeroIndex = *market-&gt;zeroInflationIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1966</span>            index = boost::make_shared&lt;QuantExt::YoYInflationIndexWrapper&gt;(zeroIndex, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1967</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1968</span>            index = *market-&gt;yoyInflationIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1969</span>        }</div>
<div class="line"><span class="lineno"> 1970</span> </div>
<div class="line"><span class="lineno"> 1971</span>        <span class="comment">// Get the discount curve</span></div>
<div class="line"><span class="lineno"> 1972</span>        <span class="keywordflow">if</span> (!expDiscountCurve.empty()) {</div>
<div class="line"><span class="lineno"> 1973</span>            <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 1974</span>            <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1975</span>            discountCurve = discountIndex-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 1976</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1977</span>            <span class="comment">// Take the default discount curve for the inflation currency from the market</span></div>
<div class="line"><span class="lineno"> 1978</span>            discountCurve = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 1979</span>        }</div>
<div class="line"><span class="lineno"> 1980</span>    }</div>
<div class="line"><span class="lineno"> 1981</span> </div>
<div class="line"><span class="lineno"> 1982</span>    boost::shared_ptr&lt;YearOnYearInflationSwap&gt; <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>(<span class="keyword">new</span> YearOnYearInflationSwap(</div>
<div class="line"><span class="lineno"> 1983</span>        YearOnYearInflationSwap::Payer, 1.0, fixSchedule, 0.0, conv-&gt;dayCounter(), yoySchedule, index,</div>
<div class="line"><span class="lineno"> 1984</span>        conv-&gt;observationLag(), 0.0, conv-&gt;dayCounter(), conv-&gt;infCalendar()));</div>
<div class="line"><span class="lineno"> 1985</span> </div>
<div class="line"><span class="lineno"> 1986</span>    boost::shared_ptr&lt;InflationCouponPricer&gt; yoyCpnPricer = boost::make_shared&lt;YoYInflationCouponPricer&gt;(discountCurve);</div>
<div class="line"><span class="lineno"> 1987</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; c : <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;yoyLeg()) {</div>
<div class="line"><span class="lineno"> 1988</span>        <span class="keyword">auto</span> cpn = boost::dynamic_pointer_cast&lt;YoYInflationCoupon&gt;(c);</div>
<div class="line"><span class="lineno"> 1989</span>        QL_REQUIRE(cpn, <span class="stringliteral">&quot;yoy inflation coupon expected, could not cast&quot;</span>);</div>
<div class="line"><span class="lineno"> 1990</span>        cpn-&gt;setPricer(yoyCpnPricer);</div>
<div class="line"><span class="lineno"> 1991</span>    }</div>
<div class="line"><span class="lineno"> 1992</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1993</span> </div>
<div class="line"><span class="lineno"> 1994</span>    <span class="keywordflow">if</span> (fromZero) {</div>
<div class="line"><span class="lineno"> 1995</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6dc4986cd0f498445c0a67abf01e9eb7">parHelperDependencies_</a>.emplace(<a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023">RiskFactorKey::KeyType::ZeroInflationCurve</a>, ccy, 0);</div>
<div class="line"><span class="lineno"> 1996</span>    }</div>
<div class="line"><span class="lineno"> 1997</span> </div>
<div class="line"><span class="lineno"> 1998</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 1999</span>        boost::shared_ptr&lt;PricingEngine&gt; swapEngine = boost::make_shared&lt;DiscountingSwapEngine&gt;(discountCurve);</div>
<div class="line"><span class="lineno"> 2000</span>        <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(swapEngine);</div>
<div class="line"><span class="lineno"> 2001</span>    }</div>
<div class="line"><span class="lineno"> 2002</span> </div>
<div class="line"><span class="lineno"> 2003</span>    <span class="comment">// set pillar date</span></div>
<div class="line"><span class="lineno"> 2004</span>    boost::shared_ptr&lt;YoYInflationCoupon&gt; lastCoupon =</div>
<div class="line"><span class="lineno"> 2005</span>        boost::dynamic_pointer_cast&lt;YoYInflationCoupon&gt;(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;yoyLeg().back());</div>
<div class="line"><span class="lineno"> 2006</span>    Date latestRelevantDate = std::max(<a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;maturityDate(), lastCoupon-&gt;fixingDate());</div>
<div class="line"><span class="lineno"> 2007</span> </div>
<div class="line"><span class="lineno"> 2008</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#afae898f927b6055a2da6c59768011d30">yoyInflationPillars_</a>[indexName].push_back((latestRelevantDate - <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a6e6cc380f7abdcf2e6796314ea24ea2d">asof_</a>) * Days);</div>
<div class="line"><span class="lineno"> 2009</span>    <span class="keywordflow">return</span> <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 2010</span>}</div>
</div><!-- fragment --><div id="dynsection-32" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-32-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-32-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-32-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_cgraph">
<area shape="rect" title="Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity." alt="" coords="5,13,159,38"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a4cabef9f8164c42065e1fabfc11a6d32" title=" " alt="" coords="207,5,381,45"/>
</map>
</div>
<div id="dynsection-33" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-33-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-33-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-33-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a9a39605391eba53ee7e55cb504808a9e_icgraph">
<area shape="rect" title="Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity." alt="" coords="1213,207,1367,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a2abfe3c79d6b13d1865f82b9bae2ea65" name="a2abfe3c79d6b13d1865f82b9bae2ea65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2abfe3c79d6b13d1865f82b9bae2ea65">&#9670;&#160;</a></span>makeYoYCapFloor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt; QuantLib::YoYInflationCapFloor &gt; makeYoYCapFloor </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">Market</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>market</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>indexName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Period&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Real&#160;</td>
          <td class="paramname"><em>strike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_convention.html">Convention</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>convention</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>singleCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>fromZero</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expDiscountCurve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l02013">2013</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2015</span>                                                                                                                    {</div>
<div class="line"><span class="lineno"> 2016</span> </div>
<div class="line"><span class="lineno"> 2017</span>    boost::shared_ptr&lt;InflationSwapConvention&gt; conv = boost::dynamic_pointer_cast&lt;InflationSwapConvention&gt;(convention);</div>
<div class="line"><span class="lineno"> 2018</span>    QL_REQUIRE(conv, <span class="stringliteral">&quot;convention not recognised, expected InflationSwapConvention&quot;</span>);</div>
<div class="line"><span class="lineno"> 2019</span>    <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a> = indexName != <span class="stringliteral">&quot;&quot;</span> ? indexName : conv-&gt;indexName();</div>
<div class="line"><span class="lineno"> 2020</span> </div>
<div class="line"><span class="lineno"> 2021</span>    boost::shared_ptr&lt;ZeroInflationIndex&gt; zeroIndex = conv-&gt;index();</div>
<div class="line"><span class="lineno"> 2022</span>    boost::shared_ptr&lt;YoYInflationIndex&gt; index =</div>
<div class="line"><span class="lineno"> 2023</span>        boost::make_shared&lt;QuantExt::YoYInflationIndexWrapper&gt;(zeroIndex, conv-&gt;interpolated());</div>
<div class="line"><span class="lineno"> 2024</span> </div>
<div class="line"><span class="lineno"> 2025</span>    Date start = Settings::instance().evaluationDate();</div>
<div class="line"><span class="lineno"> 2026</span>    Date end = start + term;</div>
<div class="line"><span class="lineno"> 2027</span>    Period tenor(1, Years);</div>
<div class="line"><span class="lineno"> 2028</span>    Schedule yoySchedule = MakeSchedule()</div>
<div class="line"><span class="lineno"> 2029</span>                               .from(start)</div>
<div class="line"><span class="lineno"> 2030</span>                               .to(end)</div>
<div class="line"><span class="lineno"> 2031</span>                               .withTenor(tenor)</div>
<div class="line"><span class="lineno"> 2032</span>                               .withCalendar(conv-&gt;infCalendar())</div>
<div class="line"><span class="lineno"> 2033</span>                               .withConvention(conv-&gt;infConvention());</div>
<div class="line"><span class="lineno"> 2034</span> </div>
<div class="line"><span class="lineno"> 2035</span>    Currency currency = index-&gt;currency();</div>
<div class="line"><span class="lineno"> 2036</span>    <span class="keywordtype">string</span> ccy = currency.code();</div>
<div class="line"><span class="lineno"> 2037</span>    Handle&lt;YieldTermStructure&gt; discountCurve;</div>
<div class="line"><span class="lineno"> 2038</span>    <span class="keywordflow">if</span> (market != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2039</span> </div>
<div class="line"><span class="lineno"> 2040</span>        <span class="comment">// Get the inflation index</span></div>
<div class="line"><span class="lineno"> 2041</span>        <span class="keywordflow">if</span> (fromZero) {</div>
<div class="line"><span class="lineno"> 2042</span>            zeroIndex = *market-&gt;zeroInflationIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 2043</span>            index = boost::make_shared&lt;QuantExt::YoYInflationIndexWrapper&gt;(zeroIndex, conv-&gt;interpolated());</div>
<div class="line"><span class="lineno"> 2044</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2045</span>            index = *market-&gt;yoyInflationIndex(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 2046</span>        }</div>
<div class="line"><span class="lineno"> 2047</span> </div>
<div class="line"><span class="lineno"> 2048</span>        <span class="comment">// Get the discount curve</span></div>
<div class="line"><span class="lineno"> 2049</span>        <span class="keywordflow">if</span> (!expDiscountCurve.empty()) {</div>
<div class="line"><span class="lineno"> 2050</span>            <span class="comment">// Look up the explicit discount curve in the market</span></div>
<div class="line"><span class="lineno"> 2051</span>            <span class="keyword">auto</span> discountIndex = market-&gt;iborIndex(expDiscountCurve, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 2052</span>            discountCurve = discountIndex-&gt;forwardingTermStructure();</div>
<div class="line"><span class="lineno"> 2053</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2054</span>            <span class="comment">// Take the default discount curve for the inflation currency from the market</span></div>
<div class="line"><span class="lineno"> 2055</span>            discountCurve = market-&gt;discountCurve(ccy, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 2056</span>        }</div>
<div class="line"><span class="lineno"> 2057</span>    }</div>
<div class="line"><span class="lineno"> 2058</span> </div>
<div class="line"><span class="lineno"> 2059</span>    <span class="comment">// build the leg data and instrument</span></div>
<div class="line"><span class="lineno"> 2060</span>    Leg yoyLeg = <a class="code hl_classRef" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html">yoyInflationLeg</a>(yoySchedule, yoySchedule.calendar(), index, conv-&gt;observationLag())</div>
<div class="line"><span class="lineno"> 2061</span>                     .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a31afff2ccfbd52b6333575ee40c23504">withNotionals</a>(1.0)</div>
<div class="line"><span class="lineno"> 2062</span>                     .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a7bd51a0a7da6c232fa3bcc70045d501d">withPaymentDayCounter</a>(conv-&gt;dayCounter())</div>
<div class="line"><span class="lineno"> 2063</span>                     .<a class="code hl_functionRef" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a0617466d18a23a375cc3d45ec9102b33">withRateCurve</a>(discountCurve);</div>
<div class="line"><span class="lineno"> 2064</span> </div>
<div class="line"><span class="lineno"> 2065</span>    <span class="keywordflow">if</span>(market == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 2066</span>        <span class="keywordflow">return</span> boost::make_shared&lt;YoYInflationCapFloor&gt;(YoYInflationCapFloor::Cap, yoyLeg,</div>
<div class="line"><span class="lineno"> 2067</span>                                                          std::vector&lt;Real&gt;(yoyLeg.size(), strike));</div>
<div class="line"><span class="lineno"> 2068</span> </div>
<div class="line"><span class="lineno"> 2069</span>    <span class="keyword">auto</span> ovs = market-&gt;yoyCapFloorVol(name, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a177b5b16249c7f9ff63e839d862d16d7">marketConfiguration_</a>);</div>
<div class="line"><span class="lineno"> 2070</span>    boost::shared_ptr&lt;PricingEngine&gt; engine;</div>
<div class="line"><span class="lineno"> 2071</span>    <span class="keywordflow">if</span> (ovs-&gt;volatilityType() == ShiftedLognormal) {</div>
<div class="line"><span class="lineno"> 2072</span>        <span class="keywordflow">if</span> (<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(ovs-&gt;displacement(), 0.0)) {</div>
<div class="line"><span class="lineno"> 2073</span>            engine = boost::make_shared&lt;QuantExt::YoYInflationBlackCapFloorEngine&gt;(index, ovs, discountCurve);</div>
<div class="line"><span class="lineno"> 2074</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2075</span>            engine =</div>
<div class="line"><span class="lineno"> 2076</span>                boost::make_shared&lt;QuantExt::YoYInflationUnitDisplacedBlackCapFloorEngine&gt;(index, ovs, discountCurve);</div>
<div class="line"><span class="lineno"> 2077</span>        }</div>
<div class="line"><span class="lineno"> 2078</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ovs-&gt;volatilityType() == Normal) {</div>
<div class="line"><span class="lineno"> 2079</span>        engine = boost::make_shared&lt;QuantExt::YoYInflationBachelierCapFloorEngine&gt;(index, ovs, discountCurve);</div>
<div class="line"><span class="lineno"> 2080</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2081</span>        QL_FAIL(<span class="stringliteral">&quot;ParSensitivityAnalysis::makeYoYCapFloor(): volatility type &quot;</span> &lt;&lt; ovs-&gt;volatilityType()</div>
<div class="line"><span class="lineno"> 2082</span>                                                                              &lt;&lt; <span class="stringliteral">&quot; not handled for index &quot;</span> &lt;&lt; name);</div>
<div class="line"><span class="lineno"> 2083</span>    }</div>
<div class="line"><span class="lineno"> 2084</span> </div>
<div class="line"><span class="lineno"> 2085</span>    boost::shared_ptr&lt;YoYInflationCapFloor&gt; atmHelper = boost::make_shared&lt;YoYInflationCapFloor&gt;(</div>
<div class="line"><span class="lineno"> 2086</span>        YoYInflationCapFloor::Cap, yoyLeg, std::vector&lt;Real&gt;(yoyLeg.size(), strike));</div>
<div class="line"><span class="lineno"> 2087</span>    Rate atmRate = atmHelper-&gt;atmRate(**discountCurve);</div>
<div class="line"><span class="lineno"> 2088</span>    strike = strike == Null&lt;Real&gt;() ? atmRate : strike;</div>
<div class="line"><span class="lineno"> 2089</span>    YoYInflationCapFloor::Type type = strike &gt;= atmRate ? YoYInflationCapFloor::Cap : YoYInflationCapFloor::Floor;</div>
<div class="line"><span class="lineno"> 2090</span>    <span class="keyword">auto</span> <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a> = boost::make_shared&lt;YoYInflationCapFloor&gt;(type, yoyLeg, std::vector&lt;Real&gt;(yoyLeg.size(), strike));</div>
<div class="line"><span class="lineno"> 2091</span>    <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>-&gt;setPricingEngine(engine);</div>
<div class="line"><span class="lineno"> 2092</span> </div>
<div class="line"><span class="lineno"> 2093</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#af5a06da0074bff9283d5f77ddf26bf30">parYoYCaps_</a>[key] = <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 2094</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a887e465357d20ecffc6a1398c6f5bde3">parYoYCapsYts_</a>[key] = discountCurve;</div>
<div class="line"><span class="lineno"> 2095</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#acd6763fdfe285799e931f1c6ac6748b4">parYoYCapsIndex_</a>[key] = Handle&lt;YoYInflationIndex&gt;(index);</div>
<div class="line"><span class="lineno"> 2096</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a155bc22e0fe725d43307ccc2e054e0ef">parYoYCapsVts_</a>[key] = ovs;</div>
<div class="line"><span class="lineno"> 2097</span> </div>
<div class="line"><span class="lineno"> 2098</span>    <span class="keywordflow">return</span> <a class="code hl_typedefRef" href="../qle/piecewiseatmoptionletcurve_8cpp.html#ac28af33f0db47fd24320c0ae0844971f">helper</a>;</div>
<div class="line"><span class="lineno"> 2099</span>}</div>
<div class="ttc" id="aclass_quant_ext_1_1yoy_inflation_leg_html"><div class="ttname"><a href="../qle/class_quant_ext_1_1yoy_inflation_leg.html">QuantExt::yoyInflationLeg</a></div></div>
<div class="ttc" id="aclass_quant_ext_1_1yoy_inflation_leg_html_a0617466d18a23a375cc3d45ec9102b33"><div class="ttname"><a href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a0617466d18a23a375cc3d45ec9102b33">QuantExt::yoyInflationLeg::withRateCurve</a></div><div class="ttdeci">yoyInflationLeg &amp; withRateCurve(const Handle&lt; YieldTermStructure &gt; &amp;rateCurve)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1yoy_inflation_leg_html_a31afff2ccfbd52b6333575ee40c23504"><div class="ttname"><a href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a31afff2ccfbd52b6333575ee40c23504">QuantExt::yoyInflationLeg::withNotionals</a></div><div class="ttdeci">yoyInflationLeg &amp; withNotionals(Real notional)</div></div>
<div class="ttc" id="aclass_quant_ext_1_1yoy_inflation_leg_html_a7bd51a0a7da6c232fa3bcc70045d501d"><div class="ttname"><a href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a7bd51a0a7da6c232fa3bcc70045d501d">QuantExt::yoyInflationLeg::withPaymentDayCounter</a></div><div class="ttdeci">yoyInflationLeg &amp; withPaymentDayCounter(const DayCounter &amp;)</div></div>
</div><!-- fragment --><div id="dynsection-34" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-34-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-34-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-34-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_cgraph">
<area shape="rect" title="Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity." alt="" coords="5,95,136,120"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="219,5,322,31"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a31afff2ccfbd52b6333575ee40c23504" title=" " alt="" coords="185,55,356,95"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a7bd51a0a7da6c232fa3bcc70045d501d" title=" " alt="" coords="184,119,357,159"/>
<area shape="rect" target="_parent" href="../qle/class_quant_ext_1_1yoy_inflation_leg.html#a0617466d18a23a375cc3d45ec9102b33" title=" " alt="" coords="185,183,356,223"/>
</map>
</div>
<div id="dynsection-35" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-35-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-35-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-35-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a2abfe3c79d6b13d1865f82b9bae2ea65_icgraph">
<area shape="rect" title="Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity." alt="" coords="1213,207,1344,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="1019,207,1165,232"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a00b6a31b896194f07ec98eb458be8f6d" title="Constructor." alt="" coords="784,181,935,207"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<a id="a25d0c14ef75a713f89ee3117e3c0f304" name="a25d0c14ef75a713f89ee3117e3c0f304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25d0c14ef75a713f89ee3117e3c0f304">&#9670;&#160;</a></span>populateShiftSizes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void populateShiftSizes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Real&#160;</td>
          <td class="paramname"><em>parRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market.html">ore::analytics::ScenarioSimMarket</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>simMarket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Populate <code>shiftSizes_</code> for <code>key</code> given the implied fair par rate <code>parRate</code>. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html#l02101">2101</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8cpp_source.html">parsensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2102</span>                                                         {</div>
<div class="line"><span class="lineno"> 2103</span> </div>
<div class="line"><span class="lineno"> 2104</span>    <span class="comment">// Get zero and par shift size for the key</span></div>
<div class="line"><span class="lineno"> 2105</span>    Real zeroShiftSize = <a class="code hl_function" href="namespaceore_1_1analytics.html#a6f28870e4c47d867aa859db7fb3c2fed">getShiftSize</a>(key, <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>, simMarket);</div>
<div class="line"><span class="lineno"> 2106</span>    <span class="keyword">auto</span> shiftData = <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a184eac3915c598c873e4d46604638085">sensitivityData_</a>.<a class="code hl_function" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a2d1e0fb4f255552e89bb7fad306cd48b">shiftData</a>(key.<a class="code hl_variable" href="classore_1_1analytics_1_1_risk_factor_key.html#a70e08fbfbadb90d7a1f2ea5f6a3a9aa1">keytype</a>, key.<a class="code hl_variable" href="classore_1_1analytics_1_1_risk_factor_key.html#a9b45b3e13bd9167aab02e17e08916231">name</a>);</div>
<div class="line"><span class="lineno"> 2107</span>    Real parShiftSize = shiftData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">shiftSize</a>;</div>
<div class="line"><span class="lineno"> 2108</span>    <span class="keywordflow">if</span> (shiftData.shiftType == <span class="stringliteral">&quot;Relative&quot;</span>)</div>
<div class="line"><span class="lineno"> 2109</span>        parShiftSize *= parRate;</div>
<div class="line"><span class="lineno"> 2110</span>    </div>
<div class="line"><span class="lineno"> 2111</span>    <span class="comment">// Update the map</span></div>
<div class="line"><span class="lineno"> 2112</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a74eddecd72acf99e557b7682740f3b53">shiftSizes_</a>[key] = make_pair(zeroShiftSize, parShiftSize);</div>
<div class="line"><span class="lineno"> 2113</span>    </div>
<div class="line"><span class="lineno"> 2114</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a99aeca53f904c71a68070e1f9d310232">TLOG</a>(<span class="stringliteral">&quot;Zero and par shift size for risk factor &#39;&quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot;&#39; is (&quot;</span> &lt;&lt; std::fixed &lt;&lt;</div>
<div class="line"><span class="lineno"> 2115</span>        std::setprecision(12) &lt;&lt; zeroShiftSize &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; parShiftSize &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 2116</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_a70e08fbfbadb90d7a1f2ea5f6a3a9aa1"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#a70e08fbfbadb90d7a1f2ea5f6a3a9aa1">ore::analytics::RiskFactorKey::keytype</a></div><div class="ttdeci">KeyType keytype</div><div class="ttdoc">Key type.</div><div class="ttdef"><b>Definition:</b> <a href="scenario_8hpp_source.html#l00087">scenario.hpp:87</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_risk_factor_key_html_a9b45b3e13bd9167aab02e17e08916231"><div class="ttname"><a href="classore_1_1analytics_1_1_risk_factor_key.html#a9b45b3e13bd9167aab02e17e08916231">ore::analytics::RiskFactorKey::name</a></div><div class="ttdeci">std::string name</div><div class="ttdoc">Key name.</div><div class="ttdef"><b>Definition:</b> <a href="scenario_8hpp_source.html#l00092">scenario.hpp:92</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_sensitivity_scenario_data_html_a2d1e0fb4f255552e89bb7fad306cd48b"><div class="ttname"><a href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a2d1e0fb4f255552e89bb7fad306cd48b">ore::analytics::SensitivityScenarioData::shiftData</a></div><div class="ttdeci">const ShiftData &amp; shiftData(const ore::analytics::RiskFactorKey::KeyType &amp;keyType, const std::string &amp;name) const</div><div class="ttdoc">Give back the shift data for the given risk factor type, keyType, with the given name.</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8cpp_source.html#l00079">sensitivityscenariodata.cpp:79</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data_html_aed4f84ea1e624c7b7c5689eb35e941a6"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">ore::analytics::SensitivityScenarioData::ShiftData::shiftSize</a></div><div class="ttdeci">Real shiftSize</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00052">sensitivityscenariodata.hpp:52</a></div></div>
</div><!-- fragment --><div id="dynsection-36" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-36-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-36-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-36-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_cgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_cgraph">
<area shape="rect" title="Populate shiftSizes_ for key given the implied fair par rate parRate." alt="" coords="5,749,136,774"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a6f28870e4c47d867aa859db7fb3c2fed" title=" " alt="" coords="184,781,363,806"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a2d1e0fb4f255552e89bb7fad306cd48b" title="Give back the shift data for the given risk factor type, keyType, with the given name." alt="" coords="190,709,357,749"/>
<area shape="rect" href="test_2scenarioshiftcalculator_8cpp.html#a652b8805d9b88185e25574d4820660c4" title=" " alt="" coords="516,1474,563,1499"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aa20846f76afb42a5e0a7e907b727e345" title=" " alt="" coords="414,1281,665,1321"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe" title=" " alt="" coords="424,1345,655,1385"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aefc1dde6ea364f5790dc4dc75d339dba" title=" " alt="" coords="439,1409,640,1449"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5" title=" " alt="" coords="488,1523,591,1549"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ac040ad9950aac26ede1935ca320bd0e1" title=" " alt="" coords="411,69,668,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aea45faada7a1e96039510c0eb5e9a51f" title=" " alt="" coords="417,133,661,173"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46" title=" " alt="" coords="427,197,652,237"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f" title=" " alt="" coords="418,261,661,301"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad25f69d5465945eb23f43d1146b450a8" title=" " alt="" coords="421,325,657,365"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#af073371655145388cd67182906ad5694" title=" " alt="" coords="441,389,637,429"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a344f4a67200865bd29b118ab0836c168" title=" " alt="" coords="432,453,647,493"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a7ab8bd40826ffcadec9a28c9b47deee0" title=" " alt="" coords="454,517,625,557"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a5781bba7cccea873352ae96390ae06a7" title=" " alt="" coords="444,581,635,621"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82" title=" " alt="" coords="427,645,651,685"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a5cceb12d217bac14eeda59d5f774f7c1" title=" " alt="" coords="442,1597,637,1622"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a221481186bf38cc73b261331cda6bcec" title=" " alt="" coords="436,709,643,749"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a878f236e46973bef31d49a6ba7170aad" title=" " alt="" coords="424,773,655,813"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276" title=" " alt="" coords="429,837,649,877"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a595f1fc52e87fae0e9d1f1c92d940e2a" title=" " alt="" coords="436,901,643,941"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73" title=" " alt="" coords="427,966,652,1021"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7" title=" " alt="" coords="437,1045,642,1099"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a9d7b43b0cc7fe85c7336883a552108e6" title=" " alt="" coords="425,1123,654,1178"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e" title=" " alt="" coords="435,1202,644,1257"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a5b2ac7fa73674b88cd3c2cc68477b111" title=" " alt="" coords="429,5,650,45"/>
</map>
</div>
<div id="dynsection-37" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-37-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-37-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-37-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_icgraph" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_a25d0c14ef75a713f89ee3117e3c0f304_icgraph">
<area shape="rect" title="Populate shiftSizes_ for key given the implied fair par rate parRate." alt="" coords="1019,231,1149,256"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="748,231,971,256"/>
<area shape="rect" href="namespacetestsuite.html#afd8c3742b8100d705ce7977043bc2f62" title=" " alt="" coords="497,177,682,203"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="479,269,700,324"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ae6c4cbff53ed815adea99a735769ed32" title="Test par conversion of sensitivities (&quot;Defer&quot; observation mode)" alt="" coords="220,5,431,60"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#ac9671fa0765492681d63b4c0ba572876" title="Test par conversion of sensitivities (&quot;Disable&quot; observation mode)" alt="" coords="220,84,431,139"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#afb4f997765ff8daa8c928526916f562c" title="Test par conversion of sensitivities (&quot;None&quot; observation mode)" alt="" coords="220,163,431,217"/>
<area shape="rect" href="classtestsuite_1_1_par_sensitivity_analysis_test.html#aef5f6a65f244c1c1924f166eb00e8cb1" title="Test par conversion of sensitivities (&quot;Unregister&quot; observation mode)" alt="" coords="220,241,431,296"/>
<area shape="rect" href="namespacetestsuite.html#a7336c6c42586f182d70ce191a6ff915a" title=" " alt="" coords="5,13,172,53"/>
<area shape="rect" href="namespacetestsuite.html#ab24424d8bcc882ec1aa2c15a824bbcb3" title=" " alt="" coords="5,91,172,131"/>
<area shape="rect" href="namespacetestsuite.html#a2040e405cafa5225fa84f452ca4be05a" title=" " alt="" coords="5,170,172,210"/>
<area shape="rect" href="namespacetestsuite.html#aefa2c91d3447262a7f241b3f635ae75a" title=" " alt="" coords="5,249,172,289"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="242,321,409,361"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6e6cc380f7abdcf2e6796314ea24ea2d" name="a6e6cc380f7abdcf2e6796314ea24ea2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6cc380f7abdcf2e6796314ea24ea2d">&#9670;&#160;</a></span>asof_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QuantLib::Date asof_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>As of date for the calculation of the par sensitivities. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00189">189</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a30e27b616a36ee9a9ca6cf1ff5e27ff0" name="a30e27b616a36ee9a9ca6cf1ff5e27ff0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30e27b616a36ee9a9ca6cf1ff5e27ff0">&#9670;&#160;</a></span>simMarketParams_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">ore::analytics::ScenarioSimMarketParameters</a>&gt; simMarketParams_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simulation market parameters. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00191">191</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a184eac3915c598c873e4d46604638085" name="a184eac3915c598c873e4d46604638085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a184eac3915c598c873e4d46604638085">&#9670;&#160;</a></span>sensitivityData_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html">ore::analytics::SensitivityScenarioData</a> sensitivityData_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sensitivity data. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00193">193</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a2afaeb949d17f1fc1f707c5ff3980648" name="a2afaeb949d17f1fc1f707c5ff3980648"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2afaeb949d17f1fc1f707c5ff3980648">&#9670;&#160;</a></span>parSensi_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abe637de864ef34aa2842b582cf4680b4">ParContainer</a> parSensi_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>sensitivity of par rates w.r.t. raw rate shifts (including optionlet/cap volatility) </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00195">195</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="af0ef5ade6c2998be146020771cfca68c" name="af0ef5ade6c2998be146020771cfca68c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0ef5ade6c2998be146020771cfca68c">&#9670;&#160;</a></span>parHelpers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, boost::shared_ptr&lt;Instrument&gt; &gt; parHelpers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>par helpers (all except cap/floors) </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00197">197</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a853d60aaf4f6828fc8e5c14d05e5235e" name="a853d60aaf4f6828fc8e5c14d05e5235e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853d60aaf4f6828fc8e5c14d05e5235e">&#9670;&#160;</a></span>parCaps_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, boost::shared_ptr&lt;QuantLib::CapFloor&gt; &gt; parCaps_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>par helpers: IR cap / floors </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00199">199</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a0d4e59f5de6fbf2e1eb409d8b151378b" name="a0d4e59f5de6fbf2e1eb409d8b151378b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d4e59f5de6fbf2e1eb409d8b151378b">&#9670;&#160;</a></span>parCapsYts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt;YieldTermStructure&gt; &gt; parCapsYts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00200">200</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a9f99fe37fb27e159c5d2a0b43a48a33a" name="a9f99fe37fb27e159c5d2a0b43a48a33a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f99fe37fb27e159c5d2a0b43a48a33a">&#9670;&#160;</a></span>parCapsVts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt;OptionletVolatilityStructure&gt; &gt; parCapsVts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00201">201</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="af5a06da0074bff9283d5f77ddf26bf30" name="af5a06da0074bff9283d5f77ddf26bf30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a06da0074bff9283d5f77ddf26bf30">&#9670;&#160;</a></span>parYoYCaps_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, boost::shared_ptr&lt;QuantLib::YoYInflationCapFloor&gt; &gt; parYoYCaps_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>par helpers: YoY cap / floors </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00203">203</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a887e465357d20ecffc6a1398c6f5bde3" name="a887e465357d20ecffc6a1398c6f5bde3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887e465357d20ecffc6a1398c6f5bde3">&#9670;&#160;</a></span>parYoYCapsYts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt;YieldTermStructure&gt; &gt; parYoYCapsYts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00204">204</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="acd6763fdfe285799e931f1c6ac6748b4" name="acd6763fdfe285799e931f1c6ac6748b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6763fdfe285799e931f1c6ac6748b4">&#9670;&#160;</a></span>parYoYCapsIndex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt;YoYInflationIndex&gt; &gt; parYoYCapsIndex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00205">205</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a155bc22e0fe725d43307ccc2e054e0ef" name="a155bc22e0fe725d43307ccc2e054e0ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a155bc22e0fe725d43307ccc2e054e0ef">&#9670;&#160;</a></span>parYoYCapsVts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, Handle&lt;QuantExt::YoYOptionletVolatilitySurface&gt; &gt; parYoYCapsVts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00206">206</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a0b3263b4a2fbc68cc2e189cd60e9a41f" name="a0b3263b4a2fbc68cc2e189cd60e9a41f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3263b4a2fbc68cc2e189cd60e9a41f">&#9670;&#160;</a></span>yieldCurvePillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; yieldCurvePillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>par instrument pillars </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00208">208</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a785a43ae042d5fc2f52c58e0976770c6" name="a785a43ae042d5fc2f52c58e0976770c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785a43ae042d5fc2f52c58e0976770c6">&#9670;&#160;</a></span>capFloorPillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; capFloorPillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00208">208</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a1385c53b3a28ee92bbcfe4c04d3d3071" name="a1385c53b3a28ee92bbcfe4c04d3d3071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1385c53b3a28ee92bbcfe4c04d3d3071">&#9670;&#160;</a></span>cdsPillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; cdsPillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00208">208</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a944d37c899c8a1afb101593a950193b3" name="a944d37c899c8a1afb101593a950193b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a944d37c899c8a1afb101593a950193b3">&#9670;&#160;</a></span>equityForecastCurvePillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; equityForecastCurvePillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">209</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a8bb9a21fd7dc29857585336f1d836bbd" name="a8bb9a21fd7dc29857585336f1d836bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bb9a21fd7dc29857585336f1d836bbd">&#9670;&#160;</a></span>zeroInflationPillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; zeroInflationPillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">209</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="afae898f927b6055a2da6c59768011d30" name="afae898f927b6055a2da6c59768011d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afae898f927b6055a2da6c59768011d30">&#9670;&#160;</a></span>yoyInflationPillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; yoyInflationPillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">209</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="aa43f8b451a81dae3c7af0c9f0a5fd1b5" name="aa43f8b451a81dae3c7af0c9f0a5fd1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43f8b451a81dae3c7af0c9f0a5fd1b5">&#9670;&#160;</a></span>yoyCapFloorPillars_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, std::vector&lt;Period&gt; &gt; yoyCapFloorPillars_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00209">209</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a6dc4986cd0f498445c0a67abf01e9eb7" name="a6dc4986cd0f498445c0a67abf01e9eb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc4986cd0f498445c0a67abf01e9eb7">&#9670;&#160;</a></span>parHelperDependencies_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, std::set&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>&gt; &gt; parHelperDependencies_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>list of (raw) risk factors on which a par helper depends </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00211">211</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a177b5b16249c7f9ff63e839d862d16d7" name="a177b5b16249c7f9ff63e839d862d16d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a177b5b16249c7f9ff63e839d862d16d7">&#9670;&#160;</a></span>marketConfiguration_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string marketConfiguration_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00213">213</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="af32b71243dbbe327ebf21fbb3b27c3df" name="af32b71243dbbe327ebf21fbb3b27c3df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af32b71243dbbe327ebf21fbb3b27c3df">&#9670;&#160;</a></span>continueOnError_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> continueOnError_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00214">214</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="aa1da903fae63cef2935f81b313314f17" name="aa1da903fae63cef2935f81b313314f17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1da903fae63cef2935f81b313314f17">&#9670;&#160;</a></span>relevantRiskFactors_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>&gt; relevantRiskFactors_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00215">215</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="ae24b626b9a608b24efb06663b975b1c2" name="ae24b626b9a608b24efb06663b975b1c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae24b626b9a608b24efb06663b975b1c2">&#9670;&#160;</a></span>parTypes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">set&lt; <a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">RiskFactorKey::KeyType</a> &gt; parTypes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac180e16777ec55d7f8be3f91ab6c0313">RiskFactorKey::KeyType::DiscountCurve</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238cac8dbbdbb04d984dd976732914ab27738">RiskFactorKey::KeyType::YieldCurve</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca508328efaa028c90d6e0174ed7389614">RiskFactorKey::KeyType::IndexCurve</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b5732971f0b2e238e09996b0e4137ab">RiskFactorKey::KeyType::OptionletVolatility</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caba2340fc08c36e9473d88fa6d823c1fb">RiskFactorKey::KeyType::SurvivalProbability</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca1b9077b75e9e77e2b989363fd63a5023">RiskFactorKey::KeyType::ZeroInflationCurve</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238caad7a4415513da5f62869964dbd864401">RiskFactorKey::KeyType::YoYInflationCurve</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238ca07cf31a470614797e8fde5ef0ec16d00">RiskFactorKey::KeyType::YoYInflationCapFloorVolatility</a></div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00217">217</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a21cafd2d3db8b559b5ffef225471cd41" name="a21cafd2d3db8b559b5ffef225471cd41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21cafd2d3db8b559b5ffef225471cd41">&#9670;&#160;</a></span>typesDisabled_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html#aab0feaba617470cb4aa830dc5935238c">ore::analytics::RiskFactorKey::KeyType</a>&gt; typesDisabled_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set of risk factor types disabled for this instance of <a class="el" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html" title="Par Sensitivity Analysis.">ParSensitivityAnalysis</a>. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00220">220</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a74eddecd72acf99e557b7682740f3b53" name="a74eddecd72acf99e557b7682740f3b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74eddecd72acf99e557b7682740f3b53">&#9670;&#160;</a></span>shiftSizes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classore_1_1analytics_1_1_risk_factor_key.html">ore::analytics::RiskFactorKey</a>, std::pair&lt;QuantLib::Real, QuantLib::Real&gt; &gt; shiftSizes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Store the zero rate and par rate absolute shift size for each risk factor key</p>
<p >The first element in the pair is the zero or raw rate absolute shift size. The second element in the pair is the corresponding par rate absolute shift size.</p>
<p >In the case of the zero rate shift being configured as <code>Absolute</code> in <code>sensitivityData_</code>, then the par rate absolute shift size is just equal to the configured zero rate shift size. In the case of the zero rate shift being configured as <code>Relative</code> in <code>sensitivityData_</code>, we take the fair implied par rate and multiply it by the configured relative zero rate shift size to give the par rate absolute shift size. </p>

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00232">232</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
<a id="a4c2a54863b06e0f0b96160d82f5f7e26" name="a4c2a54863b06e0f0b96160d82f5f7e26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c2a54863b06e0f0b96160d82f5f7e26">&#9670;&#160;</a></span>removeTodaysFixingIndices_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; removeTodaysFixingIndices_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00235">235</a> of file <a class="el" href="orea_2engine_2parsensitivityanalysis_8hpp_source.html">parsensitivityanalysis.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
