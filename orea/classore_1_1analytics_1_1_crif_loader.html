<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREAnalytics: CrifLoader Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oreaextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-analytics@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.10</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceore.html">ore</a></li><li class="navelem"><a class="el" href="namespaceore_1_1analytics.html">analytics</a></li><li class="navelem"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html">CrifLoader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classore_1_1analytics_1_1_crif_loader-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CrifLoader Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="crifloader_8hpp_source.html">orea/simm/crifloader.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for CrifLoader:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader__coll__graph.png" border="0" usemap="#a_crif_loader_coll__map" alt="Collaboration graph"/></div>
<map name="a_crif_loader_coll__map" id="a_crif_loader_coll__map">
<area shape="rect" title=" " alt="" coords="566,1589,730,1937"/>
<area shape="rect" title=" " alt="" coords="233,1142,397,1197"/>
<area shape="rect" title=" " alt="" coords="136,731,188,771"/>
<area shape="rect" title=" " alt="" coords="50,1142,204,1197"/>
<area shape="rect" title=" " alt="" coords="934,731,1061,771"/>
<area shape="rect" title=" " alt="" coords="918,460,976,500"/>
<area shape="rect" title=" " alt="" coords="874,57,1020,97"/>
<area shape="rect" title=" " alt="" coords="1000,460,1078,500"/>
<area shape="rect" title=" " alt="" coords="1503,724,1679,779"/>
<area shape="rect" title=" " alt="" coords="793,57,832,97"/>
<area shape="rect" title=" " alt="" coords="343,731,442,771"/>
<area shape="rect" title=" " alt="" coords="373,460,412,500"/>
<area shape="rect" title=" " alt="" coords="421,1142,598,1197"/>
<area shape="rect" href="classbool.html" title=" " alt="" coords="623,1149,674,1189"/>
<area shape="rect" title=" " alt="" coords="698,856,1431,1483"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_netting_set_details.html" title=" " alt="" coords="1510,299,1672,661"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_x_m_l_serializable.html" title=" " alt="" coords="1453,5,1601,148"/>
<area shape="rect" title=" " alt="" coords="1626,57,1684,97"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a197df6cc4a8f2c7ecbec6ecbb2e1f704"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a197df6cc4a8f2c7ecbec6ecbb2e1f704">CrifLoader</a> (const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_simm_configuration.html">SimmConfiguration</a> &gt; &amp;configuration, std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt; additionalHeaders=std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt;(), <a class="el" href="classbool.html">bool</a> updateMapper=false, <a class="el" href="classbool.html">bool</a> aggregateTrades=true)</td></tr>
<tr class="separator:a197df6cc4a8f2c7ecbec6ecbb2e1f704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561156525c353840a2c38782d5b4a2af"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a561156525c353840a2c38782d5b4a2af">~CrifLoader</a> ()</td></tr>
<tr class="separator:a561156525c353840a2c38782d5b4a2af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a791239170310b8198fd9c9b949eada3b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b">add</a> (<a class="el" href="structore_1_1analytics_1_1_crif_record.html">CrifRecord</a> crifRecord, const <a class="el" href="classbool.html">bool</a> onDiffAmountCcy=false)</td></tr>
<tr class="memdesc:a791239170310b8198fd9c9b949eada3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a single CRIF record.  <a href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b">More...</a><br /></td></tr>
<tr class="separator:a791239170310b8198fd9c9b949eada3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f4dbff1a24a5015ebefc370cdb3505"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a34f4dbff1a24a5015ebefc370cdb3505">loadFromFile</a> (const std::string &amp;fileName, char eol='\n', char delim='\t', char quoteChar='\0', char escapeChar='\\')</td></tr>
<tr class="separator:a34f4dbff1a24a5015ebefc370cdb3505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb04baaac42cdc962bf2671fed806115"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#afb04baaac42cdc962bf2671fed806115">loadFromString</a> (const std::string &amp;csvBuffer, char eol='\n', char delim='\t', char quoteChar='\0', char escapeChar='\\')</td></tr>
<tr class="memdesc:afb04baaac42cdc962bf2671fed806115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load CRIF records in string format.  <a href="classore_1_1analytics_1_1_crif_loader.html#afb04baaac42cdc962bf2671fed806115">More...</a><br /></td></tr>
<tr class="separator:afb04baaac42cdc962bf2671fed806115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d91c8a1e8c67afe25aea7009cfffaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf">loadFromStream</a> (std::istream &amp;stream, char eol='\n', char delim='\t', char quoteChar='\0', char escapeChar='\\')</td></tr>
<tr class="memdesc:a05d91c8a1e8c67afe25aea7009cfffaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Core CRIF loader from generic istream.  <a href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf">More...</a><br /></td></tr>
<tr class="separator:a05d91c8a1e8c67afe25aea7009cfffaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee97b2bc734ef2d88a2cb9ce5a90fda1"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">netRecords</a> (const <a class="el" href="classbool.html">bool</a> includeSimmParams=false) const</td></tr>
<tr class="memdesc:aee97b2bc734ef2d88a2cb9ce5a90fda1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the netted CRIF records for use in a SIMM calculation.  <a href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">More...</a><br /></td></tr>
<tr class="separator:aee97b2bc734ef2d88a2cb9ce5a90fda1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a298a39753a1f258fcfb5e2ae406063c1"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a298a39753a1f258fcfb5e2ae406063c1">simmParameters</a> () const</td></tr>
<tr class="memdesc:a298a39753a1f258fcfb5e2ae406063c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the SIMM parameters for use in calculating additional margin in SIMM.  <a href="classore_1_1analytics_1_1_crif_loader.html#a298a39753a1f258fcfb5e2ae406063c1">More...</a><br /></td></tr>
<tr class="separator:a298a39753a1f258fcfb5e2ae406063c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9b931a8da0a3be8818e4483b5b34f1"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a8b9b931a8da0a3be8818e4483b5b34f1">hasCrifRecords</a> () const</td></tr>
<tr class="separator:a8b9b931a8da0a3be8818e4483b5b34f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4aac8b1173c0eaa3f2ec7be1fb4efad"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aa4aac8b1173c0eaa3f2ec7be1fb4efad">hasSimmParameters</a> () const</td></tr>
<tr class="separator:aa4aac8b1173c0eaa3f2ec7be1fb4efad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc409584c1b6eec2019db23cff2b489"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aabc409584c1b6eec2019db23cff2b489">setCrifRecords</a> (const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> &amp;crifRecords)</td></tr>
<tr class="separator:aabc409584c1b6eec2019db23cff2b489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0c645a4e30140a75eaa6fffcc06d540"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#ae0c645a4e30140a75eaa6fffcc06d540">setSimmParameters</a> (const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> &amp;<a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a298a39753a1f258fcfb5e2ae406063c1">simmParameters</a>)</td></tr>
<tr class="separator:ae0c645a4e30140a75eaa6fffcc06d540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a645fdc8bf69d95b58adad7615eff7f"><td class="memItemLeft" align="right" valign="top">const std::set&lt; std::string &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a6a645fdc8bf69d95b58adad7615eff7f">portfolioIds</a> () const</td></tr>
<tr class="memdesc:a6a645fdc8bf69d95b58adad7615eff7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Give back the set of portfolio IDs that have been loaded.  <a href="classore_1_1analytics_1_1_crif_loader.html#a6a645fdc8bf69d95b58adad7615eff7f">More...</a><br /></td></tr>
<tr class="separator:a6a645fdc8bf69d95b58adad7615eff7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aaeebf409e07a2fe736ca5745574c0d"><td class="memItemLeft" align="right" valign="top">const std::set&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_netting_set_details.html">ore::data::NettingSetDetails</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a3aaeebf409e07a2fe736ca5745574c0d">nettingSetDetails</a> () const</td></tr>
<tr class="separator:a3aaeebf409e07a2fe736ca5745574c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8bb3912a3ce86b15842e79d0b421204"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a> ()</td></tr>
<tr class="memdesc:ac8bb3912a3ce86b15842e79d0b421204"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset loader to initial state.  <a href="classore_1_1analytics_1_1_crif_loader.html#ac8bb3912a3ce86b15842e79d0b421204">More...</a><br /></td></tr>
<tr class="separator:ac8bb3912a3ce86b15842e79d0b421204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8803bd888ceab3a13a79dc1edc875b64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a8803bd888ceab3a13a79dc1edc875b64">hasNettingSetDetails</a> () const</td></tr>
<tr class="memdesc:a8803bd888ceab3a13a79dc1edc875b64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if netting set details are used anywhere, instead of just the netting set ID.  <a href="classore_1_1analytics_1_1_crif_loader.html#a8803bd888ceab3a13a79dc1edc875b64">More...</a><br /></td></tr>
<tr class="separator:a8803bd888ceab3a13a79dc1edc875b64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24523a4932224a7df93baba8f6511d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#ab24523a4932224a7df93baba8f6511d9">aggregate</a> ()</td></tr>
<tr class="memdesc:ab24523a4932224a7df93baba8f6511d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aggregate all existing records.  <a href="classore_1_1analytics_1_1_crif_loader.html#ab24523a4932224a7df93baba8f6511d9">More...</a><br /></td></tr>
<tr class="separator:ab24523a4932224a7df93baba8f6511d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe608dd82dc37a2eaf59812a28e31c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aefe608dd82dc37a2eaf59812a28e31c2">fillAmountUsd</a> (const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt; market)</td></tr>
<tr class="separator:aefe608dd82dc37a2eaf59812a28e31c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9515009f79f5534967684013e33a15ac"><td class="memItemLeft" align="right" valign="top">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_simm_configuration.html">SimmConfiguration</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a9515009f79f5534967684013e33a15ac">simmConfiguration</a> ()</td></tr>
<tr class="memdesc:a9515009f79f5534967684013e33a15ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">SIMM configuration getter.  <a href="classore_1_1analytics_1_1_crif_loader.html#a9515009f79f5534967684013e33a15ac">More...</a><br /></td></tr>
<tr class="separator:a9515009f79f5534967684013e33a15ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a48c471ac722782218f97908ab6d92013"><td class="memItemLeft" align="right" valign="top">static std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a48c471ac722782218f97908ab6d92013">requiredHeaders</a></td></tr>
<tr class="memdesc:a48c471ac722782218f97908ab6d92013"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map giving required CRIF file headers and their allowable alternatives.  <a href="classore_1_1analytics_1_1_crif_loader.html#a48c471ac722782218f97908ab6d92013">More...</a><br /></td></tr>
<tr class="separator:a48c471ac722782218f97908ab6d92013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6567f6997a8241e046b20c19ce105f9b"><td class="memItemLeft" align="right" valign="top">static std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a6567f6997a8241e046b20c19ce105f9b">optionalHeaders</a></td></tr>
<tr class="memdesc:a6567f6997a8241e046b20c19ce105f9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map giving optional CRIF file headers and their allowable alternatives.  <a href="classore_1_1analytics_1_1_crif_loader.html#a6567f6997a8241e046b20c19ce105f9b">More...</a><br /></td></tr>
<tr class="separator:a6567f6997a8241e046b20c19ce105f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aeddc2738885c272e76988c0d2d201449"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449">processHeader</a> (const std::vector&lt; std::string &gt; &amp;headers)</td></tr>
<tr class="memdesc:aeddc2738885c272e76988c0d2d201449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the elements of a header line of a CRIF file.  <a href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449">More...</a><br /></td></tr>
<tr class="separator:aeddc2738885c272e76988c0d2d201449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9ffe51ad3a6c20492ed58b072e07d6"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6">process</a> (const std::vector&lt; std::string &gt; &amp;entries, QuantLib::Size maxIndex, QuantLib::Size currentLine)</td></tr>
<tr class="separator:aef9ffe51ad3a6c20492ed58b072e07d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a73c0ebe24bdbfdd1601152126634bfda"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_simm_configuration.html">SimmConfiguration</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a></td></tr>
<tr class="memdesc:a73c0ebe24bdbfdd1601152126634bfda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simm configuration that is used during loading of CRIF records.  <a href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">More...</a><br /></td></tr>
<tr class="separator:a73c0ebe24bdbfdd1601152126634bfda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad2e9ebcbc8d8852b988933feec18925"><td class="memItemLeft" align="right" valign="top">std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aad2e9ebcbc8d8852b988933feec18925">additionalHeaders_</a></td></tr>
<tr class="memdesc:aad2e9ebcbc8d8852b988933feec18925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines accepted column headers, beyond required and optional headers, see <a class="el" href="crifloader_8cpp.html">crifloader.cpp</a>.  <a href="classore_1_1analytics_1_1_crif_loader.html#aad2e9ebcbc8d8852b988933feec18925">More...</a><br /></td></tr>
<tr class="separator:aad2e9ebcbc8d8852b988933feec18925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2d1a1ec414440fbf2f016f90eb40d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#aec2d1a1ec414440fbf2f016f90eb40d4">updateMapper_</a></td></tr>
<tr class="separator:aec2d1a1ec414440fbf2f016f90eb40d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d530c0f583184c7fc6f0f21ea44dc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#ac9d530c0f583184c7fc6f0f21ea44dc8">aggregateTrades_</a></td></tr>
<tr class="separator:ac9d530c0f583184c7fc6f0f21ea44dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23f94868964ca5de6ee3b54922950cde"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a></td></tr>
<tr class="memdesc:a23f94868964ca5de6ee3b54922950cde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Netted CRIF records that can subsequently be used in a SIMM calculation.  <a href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">More...</a><br /></td></tr>
<tr class="separator:a23f94868964ca5de6ee3b54922950cde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04297321c6fc90273f895a9875654029"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a></td></tr>
<tr class="memdesc:a04297321c6fc90273f895a9875654029"><td class="mdescLeft">&#160;</td><td class="mdescRight">SIMM parameters for additional margin, provided in the same format as CRIF records.  <a href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">More...</a><br /></td></tr>
<tr class="separator:a04297321c6fc90273f895a9875654029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce45241d6b234ceafdb0501853fb787"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a8ce45241d6b234ceafdb0501853fb787">portfolioIds_</a></td></tr>
<tr class="memdesc:a8ce45241d6b234ceafdb0501853fb787"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of portfolio IDs that have been loaded.  <a href="classore_1_1analytics_1_1_crif_loader.html#a8ce45241d6b234ceafdb0501853fb787">More...</a><br /></td></tr>
<tr class="separator:a8ce45241d6b234ceafdb0501853fb787"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225c0e71fa08f4ad06f66c58abfb0472"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_netting_set_details.html">ore::data::NettingSetDetails</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a225c0e71fa08f4ad06f66c58abfb0472">nettingSetDetails_</a></td></tr>
<tr class="separator:a225c0e71fa08f4ad06f66c58abfb0472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0210294c77ec13b8b02f2c4fd2f14477"><td class="memItemLeft" align="right" valign="top">std::map&lt; QuantLib::Size, QuantLib::Size &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a></td></tr>
<tr class="separator:a0210294c77ec13b8b02f2c4fd2f14477"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A class for loading CRIF records. The records are aggregated and stored in a SimmNetSensitivities object so that they can later be used in a SIMM calculation </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00040">40</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a197df6cc4a8f2c7ecbec6ecbb2e1f704" name="a197df6cc4a8f2c7ecbec6ecbb2e1f704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a197df6cc4a8f2c7ecbec6ecbb2e1f704">&#9670;&#160;</a></span>CrifLoader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classore_1_1analytics_1_1_crif_loader.html">CrifLoader</a> </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_simm_configuration.html">SimmConfiguration</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt;&#160;</td>
          <td class="paramname"><em>additionalHeaders</em> = <code>std::map&lt;QuantLib::Size,&#160;std::set&lt;std::string&gt;&gt;()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>updateMapper</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>aggregateTrades</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Constructor We set the trade ID to an empty string if we are going to be netting at portfolio level. This is the default. To override this the flag <code>keepTradeId</code> may be set to true. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00046">46</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>        : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>(configuration), <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#aad2e9ebcbc8d8852b988933feec18925">additionalHeaders_</a>(additionalHeaders),</div>
<div class="line"><span class="lineno">   50</span>          <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#aec2d1a1ec414440fbf2f016f90eb40d4">updateMapper_</a>(updateMapper), <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#ac9d530c0f583184c7fc6f0f21ea44dc8">aggregateTrades_</a>(aggregateTrades) {}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a73c0ebe24bdbfdd1601152126634bfda"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">ore::analytics::CrifLoader::configuration_</a></div><div class="ttdeci">boost::shared_ptr&lt; SimmConfiguration &gt; configuration_</div><div class="ttdoc">Simm configuration that is used during loading of CRIF records.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00115">crifloader.hpp:115</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_aad2e9ebcbc8d8852b988933feec18925"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#aad2e9ebcbc8d8852b988933feec18925">ore::analytics::CrifLoader::additionalHeaders_</a></div><div class="ttdeci">std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt; additionalHeaders_</div><div class="ttdoc">Defines accepted column headers, beyond required and optional headers, see crifloader....</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00118">crifloader.hpp:118</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_ac9d530c0f583184c7fc6f0f21ea44dc8"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#ac9d530c0f583184c7fc6f0f21ea44dc8">ore::analytics::CrifLoader::aggregateTrades_</a></div><div class="ttdeci">bool aggregateTrades_</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00128">crifloader.hpp:128</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_aec2d1a1ec414440fbf2f016f90eb40d4"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#aec2d1a1ec414440fbf2f016f90eb40d4">ore::analytics::CrifLoader::updateMapper_</a></div><div class="ttdeci">bool updateMapper_</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00125">crifloader.hpp:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a561156525c353840a2c38782d5b4a2af" name="a561156525c353840a2c38782d5b4a2af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a561156525c353840a2c38782d5b4a2af">&#9670;&#160;</a></span>~CrifLoader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classore_1_1analytics_1_1_crif_loader.html">CrifLoader</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Destructor </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00053">53</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a791239170310b8198fd9c9b949eada3b" name="a791239170310b8198fd9c9b949eada3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a791239170310b8198fd9c9b949eada3b">&#9670;&#160;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structore_1_1analytics_1_1_crif_record.html">CrifRecord</a>&#160;</td>
          <td class="paramname"><em>crifRecord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>onDiffAmountCcy</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a single CRIF record. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00084">84</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>                                                              {</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">// Skip the CRIF record if its risk type is not valid under the configuration</span></div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;isValidRiskType(cr.riskType)) {</div>
<div class="line"><span class="lineno">   88</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Skipped loading CRIF record &quot;</span> &lt;&lt; cr &lt;&lt; <span class="stringliteral">&quot; because its risk type &quot;</span> &lt;&lt; cr.riskType</div>
<div class="line"><span class="lineno">   89</span>                                            &lt;&lt; <span class="stringliteral">&quot; is not valid under SIMM configuration &quot;</span> &lt;&lt; <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;name());</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   91</span>    }</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>    <span class="comment">// Some checks based on risk type</span></div>
<div class="line"><span class="lineno">   94</span>    <span class="keywordtype">string</span> ccy_1;</div>
<div class="line"><span class="lineno">   95</span>    <span class="keywordtype">string</span> ccy_2;</div>
<div class="line"><span class="lineno">   96</span>    <a class="code hl_typedef" href="namespaceore_1_1analytics.html#a10966dad33008839b194f5f68e47b8eb">ProductClass</a> pc;</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">switch</span> (cr.riskType) {</div>
<div class="line"><span class="lineno">   98</span>    <span class="keywordflow">case</span> RiskType::IRCurve:</div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">case</span> RiskType::IRVol:</div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">case</span> RiskType::Inflation:</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">case</span> RiskType::InflationVol:</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">case</span> RiskType::XCcyBasis:</div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordflow">case</span> RiskType::FX:</div>
<div class="line"><span class="lineno">  104</span>        <span class="comment">// TODO: Do we really need to switch CNH to CNY here?</span></div>
<div class="line"><span class="lineno">  105</span>        <span class="comment">//       How many more are like this?</span></div>
<div class="line"><span class="lineno">  106</span>        <span class="keywordflow">if</span> (cr.qualifier == <span class="stringliteral">&quot;CNH&quot;</span>)</div>
<div class="line"><span class="lineno">  107</span>            cr.qualifier = <span class="stringliteral">&quot;CNY&quot;</span>;</div>
<div class="line"><span class="lineno">  108</span>        QL_REQUIRE(<a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(cr.qualifier), <span class="stringliteral">&quot;currency code &#39;&quot;</span> &lt;&lt; cr.qualifier &lt;&lt; <span class="stringliteral">&quot;&#39; is not a supported currency code&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">case</span> RiskType::FXVol:</div>
<div class="line"><span class="lineno">  111</span>        <span class="comment">// Normalise the qualifier i.e. XXXYYY and YYYXXX are the same</span></div>
<div class="line"><span class="lineno">  112</span>        QL_REQUIRE(cr.qualifier.size() == 6,</div>
<div class="line"><span class="lineno">  113</span>                   <span class="stringliteral">&quot;Expected a string of length 6 for FXVol qualifier but got &quot;</span> &lt;&lt; cr.qualifier);</div>
<div class="line"><span class="lineno">  114</span>        ccy_1 = cr.qualifier.substr(0, 3);</div>
<div class="line"><span class="lineno">  115</span>        ccy_2 = cr.qualifier.substr(3);</div>
<div class="line"><span class="lineno">  116</span>        <span class="keywordflow">if</span> (ccy_1 == <span class="stringliteral">&quot;CNH&quot;</span>)</div>
<div class="line"><span class="lineno">  117</span>            ccy_1 = <span class="stringliteral">&quot;CNY&quot;</span>;</div>
<div class="line"><span class="lineno">  118</span>        <span class="keywordflow">if</span> (ccy_2 == <span class="stringliteral">&quot;CNH&quot;</span>)</div>
<div class="line"><span class="lineno">  119</span>            ccy_2 = <span class="stringliteral">&quot;CNY&quot;</span>;</div>
<div class="line"><span class="lineno">  120</span>        QL_REQUIRE(<a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccy_1),</div>
<div class="line"><span class="lineno">  121</span>                   <span class="stringliteral">&quot;currency code 1 in pair &#39;&quot;</span> &lt;&lt; cr.qualifier &lt;&lt; <span class="stringliteral">&quot;&#39; (&quot;</span> &lt;&lt; ccy_1 &lt;&lt; <span class="stringliteral">&quot;) is not a supported currency code&quot;</span>);</div>
<div class="line"><span class="lineno">  122</span>        QL_REQUIRE(<a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccy_2),</div>
<div class="line"><span class="lineno">  123</span>                   <span class="stringliteral">&quot;currency code 2 in pair &#39;&quot;</span> &lt;&lt; cr.qualifier &lt;&lt; <span class="stringliteral">&quot;&#39; (&quot;</span> &lt;&lt; ccy_2 &lt;&lt; <span class="stringliteral">&quot;) is not a supported currency code&quot;</span>);</div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">if</span> (ccy_1 &gt; ccy_2)</div>
<div class="line"><span class="lineno">  125</span>            ccy_1.swap(ccy_2);</div>
<div class="line"><span class="lineno">  126</span>        cr.qualifier = ccy_1 + ccy_2;</div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">case</span> RiskType::AddOnFixedAmount:</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">case</span> RiskType::AddOnNotionalFactor:</div>
<div class="line"><span class="lineno">  130</span>        QL_REQUIRE(cr.productClass == ProductClass::Empty,</div>
<div class="line"><span class="lineno">  131</span>                   <span class="stringliteral">&quot;Expected product class &quot;</span> &lt;&lt; ProductClass::Empty &lt;&lt; <span class="stringliteral">&quot; for risk type &quot;</span> &lt;&lt; cr.riskType);</div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">case</span> RiskType::ProductClassMultiplier:</div>
<div class="line"><span class="lineno">  134</span>        QL_REQUIRE(cr.productClass == ProductClass::Empty,</div>
<div class="line"><span class="lineno">  135</span>                   <span class="stringliteral">&quot;Expected product class &quot;</span> &lt;&lt; ProductClass::Empty &lt;&lt; <span class="stringliteral">&quot; for risk type &quot;</span> &lt;&lt; cr.riskType);</div>
<div class="line"><span class="lineno">  136</span>        <span class="comment">// Check that the qualifier is a valid Product class</span></div>
<div class="line"><span class="lineno">  137</span>        pc = <a class="code hl_function" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9">parseSimmProductClass</a>(cr.qualifier);</div>
<div class="line"><span class="lineno">  138</span>        QL_REQUIRE(pc != ProductClass::Empty,</div>
<div class="line"><span class="lineno">  139</span>                   <span class="stringliteral">&quot;The qualifier &quot;</span> &lt;&lt; cr.qualifier &lt;&lt; <span class="stringliteral">&quot; should parse to a valid product class for risk type &quot;</span></div>
<div class="line"><span class="lineno">  140</span>                                    &lt;&lt; cr.riskType);</div>
<div class="line"><span class="lineno">  141</span>        <span class="comment">// Check that the amount is a number &gt;= 1.0</span></div>
<div class="line"><span class="lineno">  142</span>        QL_REQUIRE(cr.amount &gt;= 1.0, <span class="stringliteral">&quot;Expected an amount greater than or equal to 1.0 &quot;</span></div>
<div class="line"><span class="lineno">  143</span>                                         &lt;&lt; <span class="stringliteral">&quot;for risk type &quot;</span> &lt;&lt; cr.riskType &lt;&lt; <span class="stringliteral">&quot; and qualifier &quot;</span> &lt;&lt; cr.qualifier</div>
<div class="line"><span class="lineno">  144</span>                                         &lt;&lt; <span class="stringliteral">&quot; but got &quot;</span> &lt;&lt; cr.amount);</div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  146</span>    <span class="keywordflow">case</span> RiskType::Notional:</div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">case</span> RiskType::PV:</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">if</span> (cr.imModel == <span class="stringliteral">&quot;Schedule&quot;</span>)</div>
<div class="line"><span class="lineno">  149</span>            QL_REQUIRE(!cr.additionalFields[<span class="stringliteral">&quot;end_date&quot;</span>].empty() || !cr.endDate.empty(),</div>
<div class="line"><span class="lineno">  150</span>                       <span class="stringliteral">&quot;Expected end date for risk type &quot;</span> &lt;&lt; cr.riskType &lt;&lt; <span class="stringliteral">&quot; and im_model=\&#39;Schedule\&#39;&quot;</span>);</div>
<div class="line"><span class="lineno">  151</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  154</span>    }</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="comment">// We set the trade ID to an empty string because we are netting at portfolio level</span></div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// The only exception here is schedule trades that are denoted by two rows,</span></div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// with RiskType::Notional and RiskType::PV</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#ac9d530c0f583184c7fc6f0f21ea44dc8">aggregateTrades_</a> &amp;&amp; cr.imModel != <span class="stringliteral">&quot;Schedule&quot;</span>)</div>
<div class="line"><span class="lineno">  160</span>        cr.tradeId = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="comment">// Add/update the CRIF record</span></div>
<div class="line"><span class="lineno">  163</span>    </div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">if</span> (cr.isSimmParameter()) {</div>
<div class="line"><span class="lineno">  165</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>.find(cr);</div>
<div class="line"><span class="lineno">  166</span>        <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>.end()) {</div>
<div class="line"><span class="lineno">  167</span>            <span class="keywordflow">if</span> (it-&gt;riskType == RiskType::AddOnFixedAmount) {</div>
<div class="line"><span class="lineno">  168</span>                <span class="comment">// If there is already a net CrifRecord, update it</span></div>
<div class="line"><span class="lineno">  169</span>                <span class="keywordtype">bool</span> updated = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  170</span>                <span class="keywordflow">if</span> (cr.hasAmountUsd()) {</div>
<div class="line"><span class="lineno">  171</span>                    it-&gt;amountUsd += cr.amountUsd;</div>
<div class="line"><span class="lineno">  172</span>                    updated = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  173</span>                }</div>
<div class="line"><span class="lineno">  174</span>                <span class="keywordflow">if</span> (cr.hasAmount() &amp;&amp; cr.hasAmountCcy() &amp;&amp; it-&gt;amountCurrency == cr.amountCurrency) {</div>
<div class="line"><span class="lineno">  175</span>                    it-&gt;amount += cr.amount;</div>
<div class="line"><span class="lineno">  176</span>                    updated = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  177</span>                }</div>
<div class="line"><span class="lineno">  178</span>                <span class="keywordflow">if</span> (updated)</div>
<div class="line"><span class="lineno">  179</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Updated net CRIF records: &quot;</span> &lt;&lt; cr);</div>
<div class="line"><span class="lineno">  180</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;riskType == RiskType::AddOnNotionalFactor ||</div>
<div class="line"><span class="lineno">  181</span>                       it-&gt;riskType == RiskType::ProductClassMultiplier) {</div>
<div class="line"><span class="lineno">  182</span>                <span class="keywordtype">string</span> errMsg = <span class="stringliteral">&quot;Found more than one instance of risk type &quot;</span> + <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(it-&gt;riskType) +</div>
<div class="line"><span class="lineno">  183</span>                                <span class="stringliteral">&quot;. Please check the SIMM parameters input. If enforceIMRegulations=False, then it &quot;</span></div>
<div class="line"><span class="lineno">  184</span>                                <span class="stringliteral">&quot;is possible that multiple entries for different regulations now belong under the same &quot;</span></div>
<div class="line"><span class="lineno">  185</span>                                <span class="stringliteral">&quot;&#39;Unspecified&#39; regulation.&quot;</span>;</div>
<div class="line"><span class="lineno">  186</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_warning_message.html">ore::analytics::StructuredAnalyticsWarningMessage</a>(<span class="stringliteral">&quot;SIMM&quot;</span>, <span class="stringliteral">&quot;Aggregating SIMM parameters&quot;</span>, errMsg));</div>
<div class="line"><span class="lineno">  187</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  188</span>                <span class="comment">// Handling in case new SIMM parameters are added in the future</span></div>
<div class="line"><span class="lineno">  189</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<a class="code hl_class" href="classore_1_1analytics_1_1_structured_analytics_warning_message.html">ore::analytics::StructuredAnalyticsWarningMessage</a>(<span class="stringliteral">&quot;SIMM&quot;</span>, <span class="stringliteral">&quot;Aggregating SIMM parameters&quot;</span>,</div>
<div class="line"><span class="lineno">  190</span>                                                              <span class="stringliteral">&quot;Unknown risk type: &quot;</span> + <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(it-&gt;riskType)));</div>
<div class="line"><span class="lineno">  191</span>            }</div>
<div class="line"><span class="lineno">  192</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  193</span>            <span class="comment">// If there is no CrifRecord for it already, insert it</span></div>
<div class="line"><span class="lineno">  194</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>.insert(cr);</div>
<div class="line"><span class="lineno">  195</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Added to SIMM parameters: &quot;</span> &lt;&lt; cr);</div>
<div class="line"><span class="lineno">  196</span>        }</div>
<div class="line"><span class="lineno">  197</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  198</span>        <span class="keyword">auto</span> it = onDiffAmountCcy ? <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>.find(cr, <a class="code hl_function" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492">CrifRecord::amountCcyLTCompare</a>) : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>.find(cr);</div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>.end()) {</div>
<div class="line"><span class="lineno">  200</span>            <span class="comment">// If there is already a net CrifRecord, update it</span></div>
<div class="line"><span class="lineno">  201</span>            <span class="keywordtype">bool</span> updated = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  202</span>            <span class="keywordflow">if</span> (cr.hasAmountUsd()) {</div>
<div class="line"><span class="lineno">  203</span>                it-&gt;amountUsd += cr.amountUsd;</div>
<div class="line"><span class="lineno">  204</span>                updated = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  205</span>            }</div>
<div class="line"><span class="lineno">  206</span>            <span class="keywordflow">if</span> (cr.hasAmount() &amp;&amp; cr.hasAmountCcy() &amp;&amp; it-&gt;amountCurrency == cr.amountCurrency) {</div>
<div class="line"><span class="lineno">  207</span>                it-&gt;amount += cr.amount;</div>
<div class="line"><span class="lineno">  208</span>                updated = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  209</span>            }</div>
<div class="line"><span class="lineno">  210</span>            <span class="keywordflow">if</span> (updated)</div>
<div class="line"><span class="lineno">  211</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Updated net CRIF records: &quot;</span> &lt;&lt; cr);</div>
<div class="line"><span class="lineno">  212</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  213</span>            <span class="comment">// If there is no CrifRecord for it already, insert it</span></div>
<div class="line"><span class="lineno">  214</span>            <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>.insert(cr);</div>
<div class="line"><span class="lineno">  215</span>            <a class="code hl_defineRef" href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a>(<span class="stringliteral">&quot;Added to net CRIF records: &quot;</span> &lt;&lt; cr);</div>
<div class="line"><span class="lineno">  216</span>        }</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>        <span class="comment">// Update set of portfolio IDs if necessary</span></div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a8ce45241d6b234ceafdb0501853fb787">portfolioIds_</a>.insert(cr.portfolioId);</div>
<div class="line"><span class="lineno">  220</span>        <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a225c0e71fa08f4ad06f66c58abfb0472">nettingSetDetails_</a>.insert(cr.nettingSetDetails);</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>        <span class="comment">// Update the SIMM configuration&#39;s bucket mapper if the</span></div>
<div class="line"><span class="lineno">  223</span>        <span class="comment">// loader has set this flag</span></div>
<div class="line"><span class="lineno">  224</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#aec2d1a1ec414440fbf2f016f90eb40d4">updateMapper_</a>) {</div>
<div class="line"><span class="lineno">  225</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_typedef" href="namespaceore_1_1analytics.html#a400fba42838c7c747cf54b299b859d9b">bm</a> = <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;bucketMapper();</div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">if</span> (<a class="code hl_typedef" href="namespaceore_1_1analytics.html#a400fba42838c7c747cf54b299b859d9b">bm</a>-&gt;hasBuckets(cr.riskType)) {</div>
<div class="line"><span class="lineno">  227</span>                <a class="code hl_typedef" href="namespaceore_1_1analytics.html#a400fba42838c7c747cf54b299b859d9b">bm</a>-&gt;addMapping(cr.riskType, cr.qualifier, cr.bucket);</div>
<div class="line"><span class="lineno">  228</span>            }</div>
<div class="line"><span class="lineno">  229</span>        }</div>
<div class="line"><span class="lineno">  230</span>    }</div>
<div class="line"><span class="lineno">  231</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a04297321c6fc90273f895a9875654029"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">ore::analytics::CrifLoader::simmParameters_</a></div><div class="ttdeci">SimmNetSensitivities simmParameters_</div><div class="ttdoc">SIMM parameters for additional margin, provided in the same format as CRIF records.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00134">crifloader.hpp:134</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a225c0e71fa08f4ad06f66c58abfb0472"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a225c0e71fa08f4ad06f66c58abfb0472">ore::analytics::CrifLoader::nettingSetDetails_</a></div><div class="ttdeci">std::set&lt; ore::data::NettingSetDetails &gt; nettingSetDetails_</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00138">crifloader.hpp:138</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a23f94868964ca5de6ee3b54922950cde"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">ore::analytics::CrifLoader::crifRecords_</a></div><div class="ttdeci">SimmNetSensitivities crifRecords_</div><div class="ttdoc">Netted CRIF records that can subsequently be used in a SIMM calculation.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00131">crifloader.hpp:131</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a8ce45241d6b234ceafdb0501853fb787"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a8ce45241d6b234ceafdb0501853fb787">ore::analytics::CrifLoader::portfolioIds_</a></div><div class="ttdeci">std::set&lt; std::string &gt; portfolioIds_</div><div class="ttdoc">Set of portfolio IDs that have been loaded.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00137">crifloader.hpp:137</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_structured_analytics_warning_message_html"><div class="ttname"><a href="classore_1_1analytics_1_1_structured_analytics_warning_message.html">ore::analytics::StructuredAnalyticsWarningMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="structuredanalyticswarning_8hpp_source.html#l00031">structuredanalyticswarning.hpp:31</a></div></div>
<div class="ttc" id="agroup__utilities_html_ga1b8cd9a976247da6df232ad48d4af190"><div class="ttname"><a href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a></div><div class="ttdeci">std::string to_string(const QuantLib::Date &amp;date)</div></div>
<div class="ttc" id="agroup__utilities_html_gae6725a0931b419ec545f9abb0b6ede76"><div class="ttname"><a href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a></div><div class="ttdeci">bool checkCurrency(const string &amp;code)</div></div>
<div class="ttc" id="alog_8hpp_html_a34c7c8cde9b91d2eee82d7b9a0b66fd5"><div class="ttname"><a href="../ored/log_8hpp.html#a34c7c8cde9b91d2eee82d7b9a0b66fd5">DLOG</a></div><div class="ttdeci">#define DLOG(text)</div></div>
<div class="ttc" id="alog_8hpp_html_a9622ca943201e814041f051b7a10b3ea"><div class="ttname"><a href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a></div><div class="ttdeci">#define WLOG(text)</div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_a10966dad33008839b194f5f68e47b8eb"><div class="ttname"><a href="namespaceore_1_1analytics.html#a10966dad33008839b194f5f68e47b8eb">ore::analytics::ProductClass</a></div><div class="ttdeci">SimmConfiguration::ProductClass ProductClass</div><div class="ttdef"><b>Definition:</b> <a href="reportwriter_8cpp_source.html#l01684">reportwriter.cpp:1684</a></div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_a400fba42838c7c747cf54b299b859d9b"><div class="ttname"><a href="namespaceore_1_1analytics.html#a400fba42838c7c747cf54b299b859d9b">ore::analytics::bm</a></div><div class="ttdeci">boost::bimap&lt; T, boost::bimaps::set_of&lt; std::string, string_cmp &gt; &gt; bm</div><div class="ttdef"><b>Definition:</b> <a href="simmconfiguration_8cpp_source.html#l00055">simmconfiguration.cpp:55</a></div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_add08f2897926c73ba4b8dcf55feebdd9"><div class="ttname"><a href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9">ore::analytics::parseSimmProductClass</a></div><div class="ttdeci">SimmConfiguration::ProductClass parseSimmProductClass(const string &amp;pc)</div><div class="ttdef"><b>Definition:</b> <a href="simmconfiguration_8cpp_source.html#l00471">simmconfiguration.cpp:471</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_crif_record_html_a775c89b449aad5b65cef27c4ae014492"><div class="ttname"><a href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492">ore::analytics::CrifRecord::amountCcyLTCompare</a></div><div class="ttdeci">static bool amountCcyLTCompare(const CrifRecord &amp;cr1, const CrifRecord &amp;cr2)</div><div class="ttdef"><b>Definition:</b> <a href="crifrecord_8hpp_source.html#l00126">crifrecord.hpp:126</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_cgraph">
<area shape="rect" title="Add a single CRIF record." alt="" coords="5,223,48,249"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492" title=" " alt="" coords="99,5,267,45"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76" title=" " alt="" coords="129,70,238,95"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a5bb520e16d3d5631dbf3ba33986b15e7" title=" " alt="" coords="99,120,267,160"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a2014d6737c363789a01e7a05d9acfe3e" title=" " alt="" coords="99,184,267,224"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab2992493966a6434cfacf416e5a1bd3b" title=" " alt="" coords="99,248,267,288"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab402e2cf695460498ad220674bf5ef8f" title=" " alt="" coords="99,312,267,352"/>
<area shape="rect" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9" title=" " alt="" coords="96,376,271,416"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="147,441,219,466"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_a791239170310b8198fd9c9b949eada3b_icgraph">
<area shape="rect" title="Add a single CRIF record." alt="" coords="457,31,500,56"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#ab24523a4932224a7df93baba8f6511d9" title="Aggregate all existing records." alt="" coords="331,5,409,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6" title=" " alt="" coords="336,55,404,80"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf" title="Core CRIF loader from generic istream." alt="" coords="164,55,283,80"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a34f4dbff1a24a5015ebefc370cdb3505" title=" " alt="" coords="12,29,109,55"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#afb04baaac42cdc962bf2671fed806115" title="Load CRIF records in string format." alt="" coords="5,79,116,104"/>
</map>
</div>

</div>
</div>
<a id="a34f4dbff1a24a5015ebefc370cdb3505" name="a34f4dbff1a24a5015ebefc370cdb3505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f4dbff1a24a5015ebefc370cdb3505">&#9670;&#160;</a></span>loadFromFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadFromFile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>eol</em> = <code>'\n'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em> = <code>'\t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>quoteChar</em> = <code>'\0'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>escapeChar</em> = <code>'\\'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Load CRIF records from a CRIF file.</p>
<p >The Risk Data Standards document outlines what character should be used to separate columns, <code>delim</code>, and end lines, <code>eol</code>. These parameters have the correct defaults here but can be changed.</p>
<p >The <code>quoteChar</code> allows one specify a character that can be used to enclose strings in the CRIF file. If this character is not <code>\0</code>, then an attempt is made to strip this character from the each column. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00233">233</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  233</span>                                                                                                              {</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Loading CRIF records from file &quot;</span> &lt;&lt; fileName &lt;&lt; <span class="stringliteral">&quot; with end of line character &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(eol)</div>
<div class="line"><span class="lineno">  236</span>                                          &lt;&lt; <span class="stringliteral">&quot;, delimiter &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(delim) &lt;&lt; <span class="stringliteral">&quot; quote character &quot;</span></div>
<div class="line"><span class="lineno">  237</span>                                          &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(quoteChar) &lt;&lt; <span class="stringliteral">&quot; escape character &quot;</span></div>
<div class="line"><span class="lineno">  238</span>                                          &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(escapeChar));</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    <span class="comment">// Try to open the file</span></div>
<div class="line"><span class="lineno">  241</span>    ifstream file;</div>
<div class="line"><span class="lineno">  242</span>    file.open(fileName);</div>
<div class="line"><span class="lineno">  243</span>    QL_REQUIRE(file.is_open(), <span class="stringliteral">&quot;error opening file &quot;</span> &lt;&lt; fileName);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>    <span class="comment">// Process the file</span></div>
<div class="line"><span class="lineno">  246</span>    <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf">loadFromStream</a>(file, eol, delim, quoteChar, escapeChar);</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Finished loading CRIF records from file &quot;</span> &lt;&lt; fileName);</div>
<div class="line"><span class="lineno">  249</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a05d91c8a1e8c67afe25aea7009cfffaf"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf">ore::analytics::CrifLoader::loadFromStream</a></div><div class="ttdeci">void loadFromStream(std::istream &amp;stream, char eol='\n', char delim='\t', char quoteChar='\0', char escapeChar='\\')</div><div class="ttdoc">Core CRIF loader from generic istream.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00266">crifloader.cpp:266</a></div></div>
<div class="ttc" id="alog_8hpp_html_a158e0f085ddedfe5c8ed069986039f50"><div class="ttname"><a href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a></div><div class="ttdeci">#define LOG(text)</div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a34f4dbff1a24a5015ebefc370cdb3505_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a34f4dbff1a24a5015ebefc370cdb3505_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a34f4dbff1a24a5015ebefc370cdb3505_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_a34f4dbff1a24a5015ebefc370cdb3505_cgraph">
<area shape="rect" title=" " alt="" coords="5,395,103,420"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf" title="Core CRIF loader from generic istream." alt="" coords="151,395,269,420"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a30e976f566a2a562e6b5a9d0c6f34ff0" title=" " alt="" coords="317,345,445,371"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6" title=" " alt="" coords="347,395,415,420"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449" title="Process the elements of a header line of a CRIF file." alt="" coords="327,444,436,469"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b" title="Add a single CRIF record." alt="" coords="567,255,609,280"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76" title=" " alt="" coords="763,5,873,31"/>
<area shape="rect" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9" title=" " alt="" coords="731,375,905,415"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="782,440,854,465"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a4fda781eeba364d9dcbf980736d4a07f" title=" " alt="" coords="493,445,683,471"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd" title=" " alt="" coords="548,495,628,520"/>
<area shape="rect" href="namespaceore_1_1analytics.html#ae3e45cdcfded9ac05833b2101c3cf1f3" title=" " alt="" coords="501,545,675,585"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492" title=" " alt="" coords="734,311,902,351"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a5bb520e16d3d5631dbf3ba33986b15e7" title=" " alt="" coords="734,55,902,95"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a2014d6737c363789a01e7a05d9acfe3e" title=" " alt="" coords="734,119,902,159"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab2992493966a6434cfacf416e5a1bd3b" title=" " alt="" coords="734,183,902,223"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab402e2cf695460498ad220674bf5ef8f" title=" " alt="" coords="734,247,902,287"/>
</map>
</div>

</div>
</div>
<a id="afb04baaac42cdc962bf2671fed806115" name="afb04baaac42cdc962bf2671fed806115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb04baaac42cdc962bf2671fed806115">&#9670;&#160;</a></span>loadFromString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadFromString </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>csvBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>eol</em> = <code>'\n'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em> = <code>'\t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>quoteChar</em> = <code>'\0'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>escapeChar</em> = <code>'\\'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load CRIF records in string format. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00251">251</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  251</span>                                                                                                                 {</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Loading CRIF records from end of line character &quot;</span></div>
<div class="line"><span class="lineno">  254</span>        &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(eol) &lt;&lt; <span class="stringliteral">&quot;, delimiter &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(delim) &lt;&lt; <span class="stringliteral">&quot; quote character &quot;</span></div>
<div class="line"><span class="lineno">  255</span>        &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(quoteChar) &lt;&lt; <span class="stringliteral">&quot; escape character &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(escapeChar));</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">// Process the file</span></div>
<div class="line"><span class="lineno">  258</span>    std::stringstream csvStream;</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    csvStream &lt;&lt; csvBuffer;</div>
<div class="line"><span class="lineno">  261</span>    <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf">loadFromStream</a>(csvStream, eol, delim, quoteChar, escapeChar);</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Finished loading CRIF records from csvBuffer&quot;</span>);</div>
<div class="line"><span class="lineno">  264</span>}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_afb04baaac42cdc962bf2671fed806115_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_afb04baaac42cdc962bf2671fed806115_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_afb04baaac42cdc962bf2671fed806115_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_afb04baaac42cdc962bf2671fed806115_cgraph">
<area shape="rect" title="Load CRIF records in string format." alt="" coords="5,395,116,420"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf" title="Core CRIF loader from generic istream." alt="" coords="164,395,283,420"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a30e976f566a2a562e6b5a9d0c6f34ff0" title=" " alt="" coords="331,345,459,371"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6" title=" " alt="" coords="361,395,429,420"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449" title="Process the elements of a header line of a CRIF file." alt="" coords="340,444,449,469"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b" title="Add a single CRIF record." alt="" coords="580,255,623,280"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76" title=" " alt="" coords="777,5,886,31"/>
<area shape="rect" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9" title=" " alt="" coords="744,375,919,415"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="795,440,867,465"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a4fda781eeba364d9dcbf980736d4a07f" title=" " alt="" coords="507,445,696,471"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd" title=" " alt="" coords="561,495,641,520"/>
<area shape="rect" href="namespaceore_1_1analytics.html#ae3e45cdcfded9ac05833b2101c3cf1f3" title=" " alt="" coords="514,545,689,585"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492" title=" " alt="" coords="747,311,915,351"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a5bb520e16d3d5631dbf3ba33986b15e7" title=" " alt="" coords="747,55,915,95"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a2014d6737c363789a01e7a05d9acfe3e" title=" " alt="" coords="747,119,915,159"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab2992493966a6434cfacf416e5a1bd3b" title=" " alt="" coords="747,183,915,223"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab402e2cf695460498ad220674bf5ef8f" title=" " alt="" coords="747,247,915,287"/>
</map>
</div>

</div>
</div>
<a id="a05d91c8a1e8c67afe25aea7009cfffaf" name="a05d91c8a1e8c67afe25aea7009cfffaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05d91c8a1e8c67afe25aea7009cfffaf">&#9670;&#160;</a></span>loadFromStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadFromStream </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>eol</em> = <code>'\n'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em> = <code>'\t'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>quoteChar</em> = <code>'\0'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>escapeChar</em> = <code>'\\'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Core CRIF loader from generic istream. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00266">266</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  266</span>                                                                                                         {</div>
<div class="line"><span class="lineno">  267</span>    <span class="keywordtype">string</span> line;</div>
<div class="line"><span class="lineno">  268</span>    vector&lt;string&gt; entries;</div>
<div class="line"><span class="lineno">  269</span>    <span class="keywordtype">bool</span> headerProcessed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  270</span>    Size emptyLines = 0;</div>
<div class="line"><span class="lineno">  271</span>    Size validLines = 0;</div>
<div class="line"><span class="lineno">  272</span>    Size invalidLines = 0;</div>
<div class="line"><span class="lineno">  273</span>    Size maxIndex = 0;</div>
<div class="line"><span class="lineno">  274</span>    Size currentLine = 0;</div>
<div class="line"><span class="lineno">  275</span>    <span class="keywordflow">while</span> (getline(stream, line, eol)) {</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>        <span class="comment">// Keep track of current line number for messages</span></div>
<div class="line"><span class="lineno">  278</span>        ++currentLine;</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>        <span class="comment">// Trim leading and trailing space</span></div>
<div class="line"><span class="lineno">  281</span>        boost::trim(line);</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>        <span class="comment">// Skip empty lines</span></div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">if</span> (line.empty()) {</div>
<div class="line"><span class="lineno">  285</span>            ++emptyLines;</div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  287</span>        }</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>        <span class="comment">// Break line up in to its elements.</span></div>
<div class="line"><span class="lineno">  290</span>        entries = <a class="code hl_functionRef" href="../ored/namespaceore_1_1data.html#a30e976f566a2a562e6b5a9d0c6f34ff0">parseListOfValues</a>(line, escapeChar, delim, quoteChar);</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>        <span class="keywordflow">if</span> (headerProcessed) {</div>
<div class="line"><span class="lineno">  293</span>            <span class="comment">// Process a regular line of the CRIF file</span></div>
<div class="line"><span class="lineno">  294</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6">process</a>(entries, maxIndex, currentLine)) {</div>
<div class="line"><span class="lineno">  295</span>                ++validLines;</div>
<div class="line"><span class="lineno">  296</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  297</span>                ++invalidLines;</div>
<div class="line"><span class="lineno">  298</span>            }</div>
<div class="line"><span class="lineno">  299</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  300</span>            <span class="comment">// Process the header line of the CRIF file</span></div>
<div class="line"><span class="lineno">  301</span>            <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449">processHeader</a>(entries);</div>
<div class="line"><span class="lineno">  302</span>            headerProcessed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  303</span>            <span class="keyword">auto</span> maxPair = max_element(</div>
<div class="line"><span class="lineno">  304</span>                <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.begin(), <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.end(),</div>
<div class="line"><span class="lineno">  305</span>                [](<span class="keyword">const</span> pair&lt;Size, Size&gt;&amp; p1, <span class="keyword">const</span> pair&lt;Size, Size&gt;&amp; p2) { return p1.second &lt; p2.second; });</div>
<div class="line"><span class="lineno">  306</span>            maxIndex = maxPair-&gt;second;</div>
<div class="line"><span class="lineno">  307</span>        }</div>
<div class="line"><span class="lineno">  308</span>    }</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a158e0f085ddedfe5c8ed069986039f50">LOG</a>(<span class="stringliteral">&quot;Out of &quot;</span> &lt;&lt; currentLine &lt;&lt; <span class="stringliteral">&quot; lines, there were &quot;</span> &lt;&lt; validLines &lt;&lt; <span class="stringliteral">&quot; valid lines, &quot;</span> &lt;&lt; invalidLines</div>
<div class="line"><span class="lineno">  311</span>                  &lt;&lt; <span class="stringliteral">&quot; invalid lines and &quot;</span> &lt;&lt; emptyLines &lt;&lt; <span class="stringliteral">&quot; empty lines.&quot;</span>);</div>
<div class="line"><span class="lineno">  312</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a0210294c77ec13b8b02f2c4fd2f14477"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">ore::analytics::CrifLoader::columnIndex_</a></div><div class="ttdeci">std::map&lt; QuantLib::Size, QuantLib::Size &gt; columnIndex_</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00144">crifloader.hpp:144</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_aeddc2738885c272e76988c0d2d201449"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449">ore::analytics::CrifLoader::processHeader</a></div><div class="ttdeci">virtual void processHeader(const std::vector&lt; std::string &gt; &amp;headers)</div><div class="ttdoc">Process the elements of a header line of a CRIF file.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00346">crifloader.cpp:346</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_aef9ffe51ad3a6c20492ed58b072e07d6"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6">ore::analytics::CrifLoader::process</a></div><div class="ttdeci">virtual bool process(const std::vector&lt; std::string &gt; &amp;entries, QuantLib::Size maxIndex, QuantLib::Size currentLine)</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00398">crifloader.cpp:398</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html_a30e976f566a2a562e6b5a9d0c6f34ff0"><div class="ttname"><a href="../ored/namespaceore_1_1data.html#a30e976f566a2a562e6b5a9d0c6f34ff0">parseListOfValues</a></div><div class="ttdeci">std::vector&lt; string &gt; parseListOfValues(string s, const char escape, const char delim, const char quote)</div></div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_cgraph">
<area shape="rect" title="Core CRIF loader from generic istream." alt="" coords="5,395,124,420"/>
<area shape="rect" target="_parent" href="../ored/namespaceore_1_1data.html#a30e976f566a2a562e6b5a9d0c6f34ff0" title=" " alt="" coords="172,345,300,371"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aef9ffe51ad3a6c20492ed58b072e07d6" title=" " alt="" coords="202,395,270,420"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aeddc2738885c272e76988c0d2d201449" title="Process the elements of a header line of a CRIF file." alt="" coords="181,444,291,469"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b" title="Add a single CRIF record." alt="" coords="421,255,464,280"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76" title=" " alt="" coords="618,5,727,31"/>
<area shape="rect" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9" title=" " alt="" coords="585,375,760,415"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="637,440,709,465"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a4fda781eeba364d9dcbf980736d4a07f" title=" " alt="" coords="348,445,537,471"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd" title=" " alt="" coords="403,495,483,520"/>
<area shape="rect" href="namespaceore_1_1analytics.html#ae3e45cdcfded9ac05833b2101c3cf1f3" title=" " alt="" coords="355,545,530,585"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492" title=" " alt="" coords="589,311,757,351"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a5bb520e16d3d5631dbf3ba33986b15e7" title=" " alt="" coords="589,55,757,95"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a2014d6737c363789a01e7a05d9acfe3e" title=" " alt="" coords="589,119,757,159"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab2992493966a6434cfacf416e5a1bd3b" title=" " alt="" coords="589,183,757,223"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab402e2cf695460498ad220674bf5ef8f" title=" " alt="" coords="589,247,757,287"/>
</map>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_a05d91c8a1e8c67afe25aea7009cfffaf_icgraph">
<area shape="rect" title="Core CRIF loader from generic istream." alt="" coords="164,31,283,56"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a34f4dbff1a24a5015ebefc370cdb3505" title=" " alt="" coords="12,5,109,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#afb04baaac42cdc962bf2671fed806115" title="Load CRIF records in string format." alt="" coords="5,55,116,80"/>
</map>
</div>

</div>
</div>
<a id="aee97b2bc734ef2d88a2cb9ce5a90fda1" name="aee97b2bc734ef2d88a2cb9ce5a90fda1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee97b2bc734ef2d88a2cb9ce5a90fda1">&#9670;&#160;</a></span>netRecords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> netRecords </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>includeSimmParams</em> = <code>false</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the netted CRIF records for use in a SIMM calculation. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00314">314</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  314</span>                                                                                    {</div>
<div class="line"><span class="lineno">  315</span>    <a class="code hl_typedef" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">netRecords</a> = <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>;</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="keywordflow">if</span> (includeSimmParams &amp;&amp; !<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>.empty()) {</div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> CrifRecord&amp; p : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>)</div>
<div class="line"><span class="lineno">  319</span>            <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">netRecords</a>.insert(p);</div>
<div class="line"><span class="lineno">  320</span>    }</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">netRecords</a>;</div>
<div class="line"><span class="lineno">  323</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_aee97b2bc734ef2d88a2cb9ce5a90fda1"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">ore::analytics::CrifLoader::netRecords</a></div><div class="ttdeci">const SimmNetSensitivities netRecords(const bool includeSimmParams=false) const</div><div class="ttdoc">Return the netted CRIF records for use in a SIMM calculation.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00314">crifloader.cpp:314</a></div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_a9d8a3ff6040fc0182ac0f12d94f1a213"><div class="ttname"><a href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">ore::analytics::SimmNetSensitivities</a></div><div class="ttdeci">boost::multi_index_container&lt; CrifRecord, boost::multi_index::indexed_by&lt; boost::multi_index::ordered_unique&lt; boost::multi_index::identity&lt; CrifRecord &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; TradeIdTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, std::string, &amp;CrifRecord::tradeId &gt; &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; PortfolioTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, NettingSetDetails, &amp;CrifRecord::nettingSetDetails &gt; &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; ProductClassTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, NettingSetDetails, &amp;CrifRecord::nettingSetDetails &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::ProductClass, &amp;CrifRecord::productClass &gt; &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; RiskTypeTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, NettingSetDetails, &amp;CrifRecord::nettingSetDetails &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::ProductClass, &amp;CrifRecord::productClass &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::RiskType, &amp;CrifRecord::riskType &gt; &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; QualifierTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, NettingSetDetails, &amp;CrifRecord::nettingSetDetails &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::ProductClass, &amp;CrifRecord::productClass &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::RiskType, &amp;CrifRecord::riskType &gt;, boost::multi_index::member&lt; CrifRecord, std::string, &amp;CrifRecord::qualifier &gt; &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; BucketQualifierTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, NettingSetDetails, &amp;CrifRecord::nettingSetDetails &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::ProductClass, &amp;CrifRecord::productClass &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::RiskType, &amp;CrifRecord::riskType &gt;, boost::multi_index::member&lt; CrifRecord, std::string, &amp;CrifRecord::bucket &gt;, boost::multi_index::member&lt; CrifRecord, std::string, &amp;CrifRecord::qualifier &gt; &gt; &gt;, boost::multi_index::ordered_non_unique&lt; boost::multi_index::tag&lt; BucketTag &gt;, boost::multi_index::composite_key&lt; CrifRecord, boost::multi_index::member&lt; CrifRecord, NettingSetDetails, &amp;CrifRecord::nettingSetDetails &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::ProductClass, &amp;CrifRecord::productClass &gt;, boost::multi_index::member&lt; CrifRecord, SimmConfiguration::RiskType, &amp;CrifRecord::riskType &gt;, boost::multi_index::member&lt; CrifRecord, std::string, &amp;CrifRecord::bucket &gt; &gt; &gt; &gt; &gt; SimmNetSensitivities</div><div class="ttdef"><b>Definition:</b> <a href="crifrecord_8hpp_source.html#l00218">crifrecord.hpp:218</a></div></div>
</div><!-- fragment --><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_cgraph">
<area shape="rect" title="Return the netted CRIF records for use in a SIMM calculation." alt="" coords="5,29,93,55"/>
</map>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_aee97b2bc734ef2d88a2cb9ce5a90fda1_icgraph">
<area shape="rect" title="Return the netted CRIF records for use in a SIMM calculation." alt="" coords="132,29,220,55"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#ab24523a4932224a7df93baba8f6511d9" title="Aggregate all existing records." alt="" coords="5,29,84,55"/>
</map>
</div>

</div>
</div>
<a id="a298a39753a1f258fcfb5e2ae406063c1" name="a298a39753a1f258fcfb5e2ae406063c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a298a39753a1f258fcfb5e2ae406063c1">&#9670;&#160;</a></span>simmParameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> &amp; simmParameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the SIMM parameters for use in calculating additional margin in SIMM. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00079">79</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   79</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>; }</div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a298a39753a1f258fcfb5e2ae406063c1_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a298a39753a1f258fcfb5e2ae406063c1_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a298a39753a1f258fcfb5e2ae406063c1_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_a298a39753a1f258fcfb5e2ae406063c1_icgraph">
<area shape="rect" title="Return the SIMM parameters for use in calculating additional margin in SIMM." alt="" coords="195,5,316,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#ae0c645a4e30140a75eaa6fffcc06d540" title=" " alt="" coords="5,5,147,31"/>
</map>
</div>

</div>
</div>
<a id="a8b9b931a8da0a3be8818e4483b5b34f1" name="a8b9b931a8da0a3be8818e4483b5b34f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b9b931a8da0a3be8818e4483b5b34f1">&#9670;&#160;</a></span>hasCrifRecords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbool.html">bool</a> hasCrifRecords </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00081">81</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   81</span>{ <span class="keywordflow">return</span> !<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>.empty(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4aac8b1173c0eaa3f2ec7be1fb4efad" name="aa4aac8b1173c0eaa3f2ec7be1fb4efad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4aac8b1173c0eaa3f2ec7be1fb4efad">&#9670;&#160;</a></span>hasSimmParameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classbool.html">bool</a> hasSimmParameters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00082">82</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>{ <span class="keywordflow">return</span> !<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>.empty(); }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aabc409584c1b6eec2019db23cff2b489" name="aabc409584c1b6eec2019db23cff2b489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabc409584c1b6eec2019db23cff2b489">&#9670;&#160;</a></span>setCrifRecords()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setCrifRecords </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> &amp;&#160;</td>
          <td class="paramname"><em>crifRecords</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00084">84</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   84</span>{ <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a> = crifRecords; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0c645a4e30140a75eaa6fffcc06d540" name="ae0c645a4e30140a75eaa6fffcc06d540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0c645a4e30140a75eaa6fffcc06d540">&#9670;&#160;</a></span>setSimmParameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setSimmParameters </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> &amp;&#160;</td>
          <td class="paramname"><em>simmParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00085">85</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>{ <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a> = <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a298a39753a1f258fcfb5e2ae406063c1">simmParameters</a>; }</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a298a39753a1f258fcfb5e2ae406063c1"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a298a39753a1f258fcfb5e2ae406063c1">ore::analytics::CrifLoader::simmParameters</a></div><div class="ttdeci">const SimmNetSensitivities &amp; simmParameters() const</div><div class="ttdoc">Return the SIMM parameters for use in calculating additional margin in SIMM.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00079">crifloader.hpp:79</a></div></div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_ae0c645a4e30140a75eaa6fffcc06d540_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_ae0c645a4e30140a75eaa6fffcc06d540_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_ae0c645a4e30140a75eaa6fffcc06d540_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_ae0c645a4e30140a75eaa6fffcc06d540_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,147,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a298a39753a1f258fcfb5e2ae406063c1" title="Return the SIMM parameters for use in calculating additional margin in SIMM." alt="" coords="195,5,316,31"/>
</map>
</div>

</div>
</div>
<a id="a6a645fdc8bf69d95b58adad7615eff7f" name="a6a645fdc8bf69d95b58adad7615eff7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a645fdc8bf69d95b58adad7615eff7f">&#9670;&#160;</a></span>portfolioIds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::set&lt; std::string &gt; &amp; portfolioIds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Give back the set of portfolio IDs that have been loaded. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00327">327</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  327</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a8ce45241d6b234ceafdb0501853fb787">portfolioIds_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3aaeebf409e07a2fe736ca5745574c0d" name="a3aaeebf409e07a2fe736ca5745574c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aaeebf409e07a2fe736ca5745574c0d">&#9670;&#160;</a></span>nettingSetDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::set&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_netting_set_details.html">NettingSetDetails</a> &gt; &amp; nettingSetDetails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00328">328</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  328</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a225c0e71fa08f4ad06f66c58abfb0472">nettingSetDetails_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8bb3912a3ce86b15842e79d0b421204" name="ac8bb3912a3ce86b15842e79d0b421204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8bb3912a3ce86b15842e79d0b421204">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset loader to initial state. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00330">330</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  330</span>                       {</div>
<div class="line"><span class="lineno">  331</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>.clear();</div>
<div class="line"><span class="lineno">  332</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>.clear();</div>
<div class="line"><span class="lineno">  333</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a8ce45241d6b234ceafdb0501853fb787">portfolioIds_</a>.clear();</div>
<div class="line"><span class="lineno">  334</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a225c0e71fa08f4ad06f66c58abfb0472">nettingSetDetails_</a>.clear();</div>
<div class="line"><span class="lineno">  335</span>}</div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_ac8bb3912a3ce86b15842e79d0b421204_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_ac8bb3912a3ce86b15842e79d0b421204_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_ac8bb3912a3ce86b15842e79d0b421204_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_ac8bb3912a3ce86b15842e79d0b421204_icgraph">
<area shape="rect" title="Reset loader to initial state." alt="" coords="132,5,183,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#ab24523a4932224a7df93baba8f6511d9" title="Aggregate all existing records." alt="" coords="5,5,84,31"/>
</map>
</div>

</div>
</div>
<a id="a8803bd888ceab3a13a79dc1edc875b64" name="a8803bd888ceab3a13a79dc1edc875b64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8803bd888ceab3a13a79dc1edc875b64">&#9670;&#160;</a></span>hasNettingSetDetails()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> hasNettingSetDetails </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if netting set details are used anywhere, instead of just the netting set ID. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00337">337</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  337</span>                                            {</div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a8803bd888ceab3a13a79dc1edc875b64">hasNettingSetDetails</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; nsd : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a225c0e71fa08f4ad06f66c58abfb0472">nettingSetDetails_</a>) {</div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">if</span> (!nsd.emptyOptionalFields())</div>
<div class="line"><span class="lineno">  341</span>            <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a8803bd888ceab3a13a79dc1edc875b64">hasNettingSetDetails</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  342</span>    }</div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a8803bd888ceab3a13a79dc1edc875b64">hasNettingSetDetails</a>;</div>
<div class="line"><span class="lineno">  344</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a8803bd888ceab3a13a79dc1edc875b64"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a8803bd888ceab3a13a79dc1edc875b64">ore::analytics::CrifLoader::hasNettingSetDetails</a></div><div class="ttdeci">bool hasNettingSetDetails() const</div><div class="ttdoc">Check if netting set details are used anywhere, instead of just the netting set ID.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00337">crifloader.cpp:337</a></div></div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_cgraph">
<area shape="rect" title="Check if netting set details are used anywhere, instead of just the netting set ID." alt="" coords="5,29,149,55"/>
</map>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_a8803bd888ceab3a13a79dc1edc875b64_icgraph">
<area shape="rect" title="Check if netting set details are used anywhere, instead of just the netting set ID." alt="" coords="5,29,149,55"/>
</map>
</div>

</div>
</div>
<a id="ab24523a4932224a7df93baba8f6511d9" name="ab24523a4932224a7df93baba8f6511d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24523a4932224a7df93baba8f6511d9">&#9670;&#160;</a></span>aggregate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aggregate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aggregate all existing records. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00544">544</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  544</span>                           {</div>
<div class="line"><span class="lineno">  545</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#ac9d530c0f583184c7fc6f0f21ea44dc8">aggregateTrades_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  546</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  547</span><span class="comment">    //! temp records (CRIF records + SIMM parameters)</span></div>
<div class="line"><span class="lineno">  548</span><span class="comment"></span>    <a class="code hl_typedef" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> tempRecords = <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1">netRecords</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  549</span> </div>
<div class="line"><span class="lineno">  550</span>    <span class="comment">// clear net records, simm parameters, portfolioIds and netting set details</span></div>
<div class="line"><span class="lineno">  551</span>    <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; r : tempRecords)</div>
<div class="line"><span class="lineno">  554</span>        <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b">add</a>(r);</div>
<div class="line"><span class="lineno">  555</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a791239170310b8198fd9c9b949eada3b"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b">ore::analytics::CrifLoader::add</a></div><div class="ttdeci">virtual void add(CrifRecord crifRecord, const bool onDiffAmountCcy=false)</div><div class="ttdoc">Add a single CRIF record.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00084">crifloader.cpp:84</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_ac8bb3912a3ce86b15842e79d0b421204"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#ac8bb3912a3ce86b15842e79d0b421204">ore::analytics::CrifLoader::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Reset loader to initial state.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8cpp_source.html#l00330">crifloader.cpp:330</a></div></div>
</div><!-- fragment --><div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_ab24523a4932224a7df93baba8f6511d9_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_ab24523a4932224a7df93baba8f6511d9_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_ab24523a4932224a7df93baba8f6511d9_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_ab24523a4932224a7df93baba8f6511d9_cgraph">
<area shape="rect" title="Aggregate all existing records." alt="" coords="5,273,84,298"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b" title="Add a single CRIF record." alt="" coords="155,223,197,249"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#ac8bb3912a3ce86b15842e79d0b421204" title="Reset loader to initial state." alt="" coords="151,273,201,298"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#aee97b2bc734ef2d88a2cb9ce5a90fda1" title="Return the netted CRIF records for use in a SIMM calculation." alt="" coords="132,346,220,371"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492" title=" " alt="" coords="271,5,439,45"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76" title=" " alt="" coords="301,70,410,95"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a5bb520e16d3d5631dbf3ba33986b15e7" title=" " alt="" coords="271,120,439,160"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a2014d6737c363789a01e7a05d9acfe3e" title=" " alt="" coords="271,184,439,224"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab2992493966a6434cfacf416e5a1bd3b" title=" " alt="" coords="271,248,439,288"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab402e2cf695460498ad220674bf5ef8f" title=" " alt="" coords="271,312,439,352"/>
<area shape="rect" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9" title=" " alt="" coords="268,376,443,416"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="319,441,391,466"/>
</map>
</div>

</div>
</div>
<a id="aefe608dd82dc37a2eaf59812a28e31c2" name="aefe608dd82dc37a2eaf59812a28e31c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefe608dd82dc37a2eaf59812a28e31c2">&#9670;&#160;</a></span>fillAmountUsd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fillAmountUsd </td>
          <td>(</td>
          <td class="paramtype">const boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_market.html">ore::data::Market</a> &gt;&#160;</td>
          <td class="paramname"><em>market</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For each CRIF record in netRecords_, checks if amountCurrency and amount are defined and uses these to populate the record's amountUsd </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00557">557</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  557</span>                                                                          {</div>
<div class="line"><span class="lineno">  558</span>    <span class="keywordflow">if</span> (!market) {</div>
<div class="line"><span class="lineno">  559</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;CrifLoader::fillAmountUsd() was called, but market object is empty.&quot;</span>)</div>
<div class="line"><span class="lineno">  560</span>        return;</div>
<div class="line"><span class="lineno">  561</span>    }</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>    auto fillNetRecords = [market](<a class="code hl_typedef" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a>&amp; records){</div>
<div class="line"><span class="lineno">  564</span>        <a class="code hl_typedef" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> tmpRecords;</div>
<div class="line"><span class="lineno">  565</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> CrifRecord&amp; cr : records) {</div>
<div class="line"><span class="lineno">  566</span>            <span class="comment">// Fill in amount USD if it is missing and if CRIF record requires it (i.e. if it has amount and amount</span></div>
<div class="line"><span class="lineno">  567</span>            <span class="comment">// currency, and risk type is neither AddOnNotionalFactor or ProductClassMultiplier)</span></div>
<div class="line"><span class="lineno">  568</span>            <span class="keywordflow">if</span> (cr.requiresAmountUsd() &amp;&amp; !cr.hasAmountUsd()) {</div>
<div class="line"><span class="lineno">  569</span>                <span class="keywordflow">if</span> (!cr.hasAmount() || !cr.hasAmountCcy()) {</div>
<div class="line"><span class="lineno">  570</span>                    <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<a class="code hl_classRef" href="../ored/classore_1_1data_1_1_structured_trade_warning_message.html">ore::data::StructuredTradeWarningMessage</a>(</div>
<div class="line"><span class="lineno">  571</span>                        cr.tradeId, cr.tradeType, <span class="stringliteral">&quot;Populating CRIF amount USD&quot;</span>,</div>
<div class="line"><span class="lineno">  572</span>                        <span class="stringliteral">&quot;CRIF record is missing one of Amount and AmountCurrency: &quot;</span> + <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(cr)));</div>
<div class="line"><span class="lineno">  573</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  574</span>                    Real usdSpot = market-&gt;fxRate(cr.amountCurrency + <span class="stringliteral">&quot;USD&quot;</span>)-&gt;value();</div>
<div class="line"><span class="lineno">  575</span>                    cr.amountUsd = cr.amount * usdSpot;</div>
<div class="line"><span class="lineno">  576</span>                }</div>
<div class="line"><span class="lineno">  577</span>            }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>            tmpRecords.insert(cr);</div>
<div class="line"><span class="lineno">  580</span>        }</div>
<div class="line"><span class="lineno">  581</span>        records = tmpRecords;</div>
<div class="line"><span class="lineno">  582</span>    };</div>
<div class="line"><span class="lineno">  583</span>    fillNetRecords(<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a23f94868964ca5de6ee3b54922950cde">crifRecords_</a>);</div>
<div class="line"><span class="lineno">  584</span>    fillNetRecords(<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a04297321c6fc90273f895a9875654029">simmParameters_</a>);</div>
<div class="line"><span class="lineno">  585</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_structured_trade_warning_message_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_structured_trade_warning_message.html">ore::data::StructuredTradeWarningMessage</a></div></div>
</div><!-- fragment --><div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_aefe608dd82dc37a2eaf59812a28e31c2_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_aefe608dd82dc37a2eaf59812a28e31c2_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_aefe608dd82dc37a2eaf59812a28e31c2_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_aefe608dd82dc37a2eaf59812a28e31c2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,108,31"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="156,5,228,31"/>
</map>
</div>

</div>
</div>
<a id="a9515009f79f5534967684013e33a15ac" name="a9515009f79f5534967684013e33a15ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9515009f79f5534967684013e33a15ac">&#9670;&#160;</a></span>simmConfiguration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_simm_configuration.html">SimmConfiguration</a> &gt; &amp; simmConfiguration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SIMM configuration getter. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00111">111</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  111</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeddc2738885c272e76988c0d2d201449" name="aeddc2738885c272e76988c0d2d201449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeddc2738885c272e76988c0d2d201449">&#9670;&#160;</a></span>processHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void processHeader </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>headers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the elements of a header line of a CRIF file. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00346">346</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  346</span>                                                            {</div>
<div class="line"><span class="lineno">  347</span>    <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.clear();</div>
<div class="line"><span class="lineno">  348</span> </div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">// Get mapping for all required headers in to column index in the file</span></div>
<div class="line"><span class="lineno">  350</span>    <span class="keywordtype">string</span> header;</div>
<div class="line"><span class="lineno">  351</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a48c471ac722782218f97908ab6d92013">requiredHeaders</a>) {</div>
<div class="line"><span class="lineno">  352</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; headers.size(); ++i) {</div>
<div class="line"><span class="lineno">  353</span>            header = boost::to_lower_copy(headers[i]);</div>
<div class="line"><span class="lineno">  354</span>            <span class="keywordflow">if</span> (kv.second.count(header) &gt; 0) {</div>
<div class="line"><span class="lineno">  355</span>                <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>[kv.first] = i;</div>
<div class="line"><span class="lineno">  356</span>            }</div>
<div class="line"><span class="lineno">  357</span>        }</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>        <span class="comment">// Some headers are allowed to be missing (under certain circumstances)</span></div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordflow">if</span> (kv.first == 1) {</div>
<div class="line"><span class="lineno">  361</span>            <span class="comment">// Portfolio ID header is allowed to be missing</span></div>
<div class="line"><span class="lineno">  362</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(1) == 0) {</div>
<div class="line"><span class="lineno">  363</span>                <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Did not find a header for portfolioid in the CRIF file so using a default value&quot;</span>);</div>
<div class="line"><span class="lineno">  364</span>            }</div>
<div class="line"><span class="lineno">  365</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (kv.first == 10) {</div>
<div class="line"><span class="lineno">  366</span>            <span class="comment">// Allow either amount_usd missing or amount and amount_currency, but not all three.</span></div>
<div class="line"><span class="lineno">  367</span>            <span class="comment">// For SIMM, we ultimately use amount_usd, but if missing, we use amount and amount_currency</span></div>
<div class="line"><span class="lineno">  368</span>            <span class="comment">// and let the SimmCalculator handle the conversion to amount_usd</span></div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(10) == 0)</div>
<div class="line"><span class="lineno">  370</span>                QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(8) &gt; 0 &amp;&amp; <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(9) &gt; 0,</div>
<div class="line"><span class="lineno">  371</span>                           <span class="stringliteral">&quot;Must provide either amount and amount_currency, or amount_usd&quot;</span>);</div>
<div class="line"><span class="lineno">  372</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  373</span>            <span class="comment">// All other headers should be there</span></div>
<div class="line"><span class="lineno">  374</span>            QL_REQUIRE(<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(kv.first) &gt; 0,</div>
<div class="line"><span class="lineno">  375</span>                       <span class="stringliteral">&quot;Could not find a header in the CRIF file for &quot;</span> &lt;&lt; *kv.second.begin());</div>
<div class="line"><span class="lineno">  376</span>        }</div>
<div class="line"><span class="lineno">  377</span>    }</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a6567f6997a8241e046b20c19ce105f9b">optionalHeaders</a>) {</div>
<div class="line"><span class="lineno">  380</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; headers.size(); ++i) {</div>
<div class="line"><span class="lineno">  381</span>            header = boost::to_lower_copy(headers[i]);</div>
<div class="line"><span class="lineno">  382</span>            <span class="keywordflow">if</span> (kv.second.count(header) &gt; 0) {</div>
<div class="line"><span class="lineno">  383</span>                <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>[kv.first] = i;</div>
<div class="line"><span class="lineno">  384</span>            }</div>
<div class="line"><span class="lineno">  385</span>        }</div>
<div class="line"><span class="lineno">  386</span>    }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#aad2e9ebcbc8d8852b988933feec18925">additionalHeaders_</a>) {</div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; headers.size(); ++i) {</div>
<div class="line"><span class="lineno">  390</span>            header = boost::to_lower_copy(headers[i]);</div>
<div class="line"><span class="lineno">  391</span>            <span class="keywordflow">if</span> (kv.second.count(header) &gt; 0) {</div>
<div class="line"><span class="lineno">  392</span>                <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>[kv.first] = i;</div>
<div class="line"><span class="lineno">  393</span>            }</div>
<div class="line"><span class="lineno">  394</span>        }</div>
<div class="line"><span class="lineno">  395</span>    }</div>
<div class="line"><span class="lineno">  396</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a48c471ac722782218f97908ab6d92013"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a48c471ac722782218f97908ab6d92013">ore::analytics::CrifLoader::requiredHeaders</a></div><div class="ttdeci">static std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt; requiredHeaders</div><div class="ttdoc">Map giving required CRIF file headers and their allowable alternatives.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00095">crifloader.hpp:95</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_crif_loader_html_a6567f6997a8241e046b20c19ce105f9b"><div class="ttname"><a href="classore_1_1analytics_1_1_crif_loader.html#a6567f6997a8241e046b20c19ce105f9b">ore::analytics::CrifLoader::optionalHeaders</a></div><div class="ttdeci">static std::map&lt; QuantLib::Size, std::set&lt; std::string &gt; &gt; optionalHeaders</div><div class="ttdoc">Map giving optional CRIF file headers and their allowable alternatives.</div><div class="ttdef"><b>Definition:</b> <a href="crifloader_8hpp_source.html#l00098">crifloader.hpp:98</a></div></div>
</div><!-- fragment --><div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_aeddc2738885c272e76988c0d2d201449_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_aeddc2738885c272e76988c0d2d201449_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_aeddc2738885c272e76988c0d2d201449_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_aeddc2738885c272e76988c0d2d201449_icgraph">
<area shape="rect" title="Process the elements of a header line of a CRIF file." alt="" coords="331,31,440,56"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf" title="Core CRIF loader from generic istream." alt="" coords="164,31,283,56"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a34f4dbff1a24a5015ebefc370cdb3505" title=" " alt="" coords="12,5,109,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#afb04baaac42cdc962bf2671fed806115" title="Load CRIF records in string format." alt="" coords="5,55,116,80"/>
</map>
</div>

</div>
</div>
<a id="aef9ffe51ad3a6c20492ed58b072e07d6" name="aef9ffe51ad3a6c20492ed58b072e07d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef9ffe51ad3a6c20492ed58b072e07d6">&#9670;&#160;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> process </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Size&#160;</td>
          <td class="paramname"><em>maxIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QuantLib::Size&#160;</td>
          <td class="paramname"><em>currentLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Process a line of a CRIF file and return true if valid line or false if an invalid line </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8cpp_source.html#l00398">398</a> of file <a class="el" href="crifloader_8cpp_source.html">crifloader.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  398</span>                                                                                       {</div>
<div class="line"><span class="lineno">  399</span>    <span class="comment">// Return early if there are not enough entries in the line</span></div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordflow">if</span> (entries.size() &lt;= maxIndex) {</div>
<div class="line"><span class="lineno">  401</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<span class="stringliteral">&quot;Line number: &quot;</span> &lt;&lt; currentLine &lt;&lt; <span class="stringliteral">&quot;. Expected at least &quot;</span> &lt;&lt; maxIndex + 1 &lt;&lt; <span class="stringliteral">&quot; entries but got only &quot;</span></div>
<div class="line"><span class="lineno">  402</span>                             &lt;&lt; entries.size());</div>
<div class="line"><span class="lineno">  403</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  404</span>    }</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>    <span class="comment">// Try to create and add a CRIF record</span></div>
<div class="line"><span class="lineno">  407</span>    <span class="comment">// There could still be issues here so we surround with try..catch to allow processing to continue</span></div>
<div class="line"><span class="lineno">  408</span>    <span class="keyword">auto</span> loadOptionalString = [&amp;entries, <span class="keyword">this</span>](<span class="keywordtype">int</span> column) {</div>
<div class="line"><span class="lineno">  409</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(column) == 0 ? <span class="stringliteral">&quot;&quot;</span> : entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>[column]];</div>
<div class="line"><span class="lineno">  410</span>    };</div>
<div class="line"><span class="lineno">  411</span>    <span class="keyword">auto</span> loadOptionalReal = [&amp;entries, <span class="keyword">this</span>](<span class="keywordtype">int</span> column) -&gt; QuantLib::Real{</div>
<div class="line"><span class="lineno">  412</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(column) == 0) {</div>
<div class="line"><span class="lineno">  413</span>            <span class="keywordflow">return</span> QuantLib::Null&lt;QuantLib::Real&gt;();</div>
<div class="line"><span class="lineno">  414</span>        } <span class="keywordflow">else</span>{</div>
<div class="line"><span class="lineno">  415</span>            <span class="keywordflow">return</span> entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>[column]].empty() ? QuantLib::Null&lt;QuantLib::Real&gt;()</div>
<div class="line"><span class="lineno">  416</span>                                                         : <a class="code hl_functionRef" href="../ored/group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd">parseReal</a>(entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>[column]]);</div>
<div class="line"><span class="lineno">  417</span>        } </div>
<div class="line"><span class="lineno">  418</span>    };</div>
<div class="line"><span class="lineno">  419</span> </div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordtype">string</span> tradeId, tradeType, imModel;</div>
<div class="line"><span class="lineno">  421</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  422</span>        CrifRecord cr;</div>
<div class="line"><span class="lineno">  423</span>        tradeId = entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(0)];</div>
<div class="line"><span class="lineno">  424</span>        tradeType = loadOptionalString(15);</div>
<div class="line"><span class="lineno">  425</span>        imModel = loadOptionalString(16);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>        cr.tradeId = tradeId;</div>
<div class="line"><span class="lineno">  428</span>        cr.tradeType = tradeType;</div>
<div class="line"><span class="lineno">  429</span>        cr.imModel = imModel;</div>
<div class="line"><span class="lineno">  430</span>        cr.portfolioId = <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.count(1) == 0 ? <span class="stringliteral">&quot;DummyPortfolio&quot;</span> : entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(1)];</div>
<div class="line"><span class="lineno">  431</span>        cr.productClass = <a class="code hl_function" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9">parseSimmProductClass</a>(entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(2)]);</div>
<div class="line"><span class="lineno">  432</span>        cr.riskType = <a class="code hl_function" href="namespaceore_1_1analytics.html#ae3e45cdcfded9ac05833b2101c3cf1f3">parseSimmRiskType</a>(entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(3)]);</div>
<div class="line"><span class="lineno">  433</span>        </div>
<div class="line"><span class="lineno">  434</span>        <span class="comment">// Qualifier - There are many other possible qualifier values, but we only do case-insensitive checks</span></div>
<div class="line"><span class="lineno">  435</span>        <span class="comment">// for those with standardised values, i.e. currencies or ccy pairs</span></div>
<div class="line"><span class="lineno">  436</span>        cr.qualifier = entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(4)];</div>
<div class="line"><span class="lineno">  437</span>        <span class="keywordflow">if</span> ((cr.riskType == RiskType::IRCurve || cr.riskType == RiskType::IRVol || cr.riskType == RiskType::FX) &amp;&amp;</div>
<div class="line"><span class="lineno">  438</span>            cr.qualifier.size() == 3) {</div>
<div class="line"><span class="lineno">  439</span>            <span class="keywordtype">string</span> ccyUpper = boost::to_upper_copy(cr.qualifier);</div>
<div class="line"><span class="lineno">  440</span> </div>
<div class="line"><span class="lineno">  441</span>            <span class="comment">// If ccy is already valid, do nothing. Otherwise, replace with all uppercase equivalent.</span></div>
<div class="line"><span class="lineno">  442</span>            <span class="comment">// FIXME: Minor currencies will fail to get spotted here, though it is not likely that we will have</span></div>
<div class="line"><span class="lineno">  443</span>            <span class="comment">// a qualifier in a minor ccy?</span></div>
<div class="line"><span class="lineno">  444</span>            <span class="keywordflow">if</span> (!<a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(cr.qualifier) &amp;&amp; <a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccyUpper))</div>
<div class="line"><span class="lineno">  445</span>                cr.qualifier = ccyUpper;</div>
<div class="line"><span class="lineno">  446</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr.riskType == RiskType::FXVol &amp;&amp; (cr.qualifier.size() == 6 || cr.qualifier.size() == 7)) {</div>
<div class="line"><span class="lineno">  447</span> </div>
<div class="line"><span class="lineno">  448</span>            <span class="comment">// Remove delimiters between the two currencies</span></div>
<div class="line"><span class="lineno">  449</span>            <span class="keywordflow">if</span> (cr.qualifier.size() == 7) {</div>
<div class="line"><span class="lineno">  450</span>                vector&lt;string&gt; tokens;</div>
<div class="line"><span class="lineno">  451</span>                tokens = boost::split(tokens, cr.qualifier, boost::is_any_of(<span class="stringliteral">&quot;/.,-_|;: &quot;</span>));</div>
<div class="line"><span class="lineno">  452</span>                QL_REQUIRE(tokens.size() == 2, <span class="stringliteral">&quot;Failed to parse Risk_FXVol qualifier (&quot;</span> &lt;&lt; cr.qualifier &lt;&lt; <span class="stringliteral">&quot;).&quot;</span>);</div>
<div class="line"><span class="lineno">  453</span>                <span class="keywordtype">string</span> ccy1 = tokens[0];</div>
<div class="line"><span class="lineno">  454</span>                <span class="keywordtype">string</span> ccy2 = tokens[1];</div>
<div class="line"><span class="lineno">  455</span>                cr.qualifier = ccy1 + ccy2;</div>
<div class="line"><span class="lineno">  456</span>            }</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>            <span class="comment">// Convert to uppercase</span></div>
<div class="line"><span class="lineno">  459</span>            <span class="keywordtype">string</span> ccyPairUpper = boost::to_upper_copy(cr.qualifier);</div>
<div class="line"><span class="lineno">  460</span>            <span class="keywordtype">string</span> ccy1Upper = ccyPairUpper.substr(0, 3);</div>
<div class="line"><span class="lineno">  461</span>            <span class="keywordtype">string</span> ccy2Upper = ccyPairUpper.substr(3);</div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordtype">string</span> ccy1Lower = cr.qualifier.substr(0, 3);</div>
<div class="line"><span class="lineno">  463</span>            <span class="keywordtype">string</span> ccy2Lower = cr.qualifier.substr(3);</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>            <span class="comment">// If ccy pair is already valid, do nothing. Otherwise, replace with uppercase equivalent of ccy1 and ccy2.</span></div>
<div class="line"><span class="lineno">  466</span>            <span class="comment">// FIXME: Minor currencies will fail to get spotted here, though it is not likely that we will have</span></div>
<div class="line"><span class="lineno">  467</span>            <span class="comment">// a ccy pair where at least one is a minor currency?</span></div>
<div class="line"><span class="lineno">  468</span>            <span class="keywordflow">if</span> (!(<a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccy1Lower) &amp;&amp; <a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccy2Lower)) &amp;&amp; <a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccy1Upper) &amp;&amp; <a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(ccy2Upper))</div>
<div class="line"><span class="lineno">  469</span>                cr.qualifier = ccyPairUpper;</div>
<div class="line"><span class="lineno">  470</span>        }</div>
<div class="line"><span class="lineno">  471</span> </div>
<div class="line"><span class="lineno">  472</span>        <span class="comment">// Bucket - Hardcoded &quot;Residual&quot; for case-insensitive check since this is currently the only non-numeric value</span></div>
<div class="line"><span class="lineno">  473</span>        cr.bucket = entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(5)];</div>
<div class="line"><span class="lineno">  474</span>        <span class="keywordflow">if</span> (boost::to_lower_copy(cr.bucket) == <span class="stringliteral">&quot;residual&quot;</span>)</div>
<div class="line"><span class="lineno">  475</span>            cr.bucket = <span class="stringliteral">&quot;Residual&quot;</span>;</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>        <span class="comment">// Label1</span></div>
<div class="line"><span class="lineno">  478</span>        cr.label1 = entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(6)];</div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;isValidRiskType(cr.riskType)) {</div>
<div class="line"><span class="lineno">  480</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; l : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;labels1(cr.riskType)) {</div>
<div class="line"><span class="lineno">  481</span>                <span class="keywordflow">if</span> (boost::to_lower_copy(cr.label1) == boost::to_lower_copy(l))</div>
<div class="line"><span class="lineno">  482</span>                    cr.label1 = l;</div>
<div class="line"><span class="lineno">  483</span>            }</div>
<div class="line"><span class="lineno">  484</span>        }</div>
<div class="line"><span class="lineno">  485</span>        <span class="comment">// Label2</span></div>
<div class="line"><span class="lineno">  486</span>        cr.label2 = entries[<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a0210294c77ec13b8b02f2c4fd2f14477">columnIndex_</a>.at(7)];</div>
<div class="line"><span class="lineno">  487</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;isValidRiskType(cr.riskType)) {</div>
<div class="line"><span class="lineno">  488</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; l : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#a73c0ebe24bdbfdd1601152126634bfda">configuration_</a>-&gt;labels2(cr.riskType)) {</div>
<div class="line"><span class="lineno">  489</span>                <span class="keywordflow">if</span> (boost::to_lower_copy(cr.label2) == boost::to_lower_copy(l))</div>
<div class="line"><span class="lineno">  490</span>                    cr.label2 = l;</div>
<div class="line"><span class="lineno">  491</span>            }</div>
<div class="line"><span class="lineno">  492</span>        }</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>        <span class="comment">// We populate these &#39;required&#39; values using loadOptional*, but they will have been validated already in processHeader,</span></div>
<div class="line"><span class="lineno">  495</span>        <span class="comment">// and missing amountUsd (but with valid amount and amountCurrency) values populated later on in the analytics</span></div>
<div class="line"><span class="lineno">  496</span> </div>
<div class="line"><span class="lineno">  497</span>        cr.amountCurrency = loadOptionalString(8);</div>
<div class="line"><span class="lineno">  498</span>        <span class="keywordtype">string</span> amountCcyUpper = boost::to_upper_copy(cr.amountCurrency);</div>
<div class="line"><span class="lineno">  499</span>        <span class="keywordflow">if</span> (!amountCcyUpper.empty() &amp;&amp; !<a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(cr.amountCurrency) &amp;&amp; <a class="code hl_functionRef" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76">checkCurrency</a>(amountCcyUpper))</div>
<div class="line"><span class="lineno">  500</span>            cr.amountCurrency = amountCcyUpper;</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>        cr.amount = loadOptionalReal(9);</div>
<div class="line"><span class="lineno">  503</span>        cr.amountUsd = loadOptionalReal(10);</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>        <span class="comment">// Populate netting set details</span></div>
<div class="line"><span class="lineno">  506</span>        cr.agreementType = loadOptionalString(11);</div>
<div class="line"><span class="lineno">  507</span>        cr.callType = loadOptionalString(12);</div>
<div class="line"><span class="lineno">  508</span>        cr.initialMarginType = loadOptionalString(13);</div>
<div class="line"><span class="lineno">  509</span>        cr.legalEntityId = loadOptionalString(14);</div>
<div class="line"><span class="lineno">  510</span>        cr.nettingSetDetails = NettingSetDetails(cr.portfolioId, cr. agreementType, cr.callType, cr.initialMarginType,</div>
<div class="line"><span class="lineno">  511</span>                                                 cr.legalEntityId);</div>
<div class="line"><span class="lineno">  512</span>        cr.postRegulations = loadOptionalString(17);</div>
<div class="line"><span class="lineno">  513</span>        cr.collectRegulations = loadOptionalString(18);</div>
<div class="line"><span class="lineno">  514</span>        cr.endDate = loadOptionalString(19);</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>        <span class="comment">// Check the IM model</span></div>
<div class="line"><span class="lineno">  517</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  518</span>            cr.imModel = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(<a class="code hl_function" href="namespaceore_1_1analytics.html#a4fda781eeba364d9dcbf980736d4a07f">parseIMModel</a>(cr.imModel));</div>
<div class="line"><span class="lineno">  519</span>        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  520</span>            <span class="comment">// If we cannot convert to a valid im_model, then it was either provided blank</span></div>
<div class="line"><span class="lineno">  521</span>            <span class="comment">// or is simply not a valid value</span></div>
<div class="line"><span class="lineno">  522</span>        }</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>        <span class="comment">// Store additional data that matches the defined additional headers in the additional fields map</span></div>
<div class="line"><span class="lineno">  525</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; additionalField : <a class="code hl_variable" href="classore_1_1analytics_1_1_crif_loader.html#aad2e9ebcbc8d8852b988933feec18925">additionalHeaders_</a>) {</div>
<div class="line"><span class="lineno">  526</span>            std::string value = loadOptionalString(additionalField.first);</div>
<div class="line"><span class="lineno">  527</span>            <span class="keywordflow">if</span> (!value.empty())</div>
<div class="line"><span class="lineno">  528</span>                cr.additionalFields[*additionalField.second.begin()] = value;</div>
<div class="line"><span class="lineno">  529</span>        }</div>
<div class="line"><span class="lineno">  530</span> </div>
<div class="line"><span class="lineno">  531</span>        <span class="comment">// Add the CRIF record to the net records</span></div>
<div class="line"><span class="lineno">  532</span>        <a class="code hl_function" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b">add</a>(cr);</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>    } <span class="keywordflow">catch</span> (<span class="keyword">const</span> exception&amp; e) {</div>
<div class="line"><span class="lineno">  535</span>        <a class="code hl_defineRef" href="../ored/log_8hpp.html#a9622ca943201e814041f051b7a10b3ea">WLOG</a>(<a class="code hl_classRef" href="../ored/classore_1_1data_1_1_structured_trade_error_message.html">ore::data::StructuredTradeErrorMessage</a>(tradeId, tradeType, <span class="stringliteral">&quot;CRIF loading&quot;</span>,</div>
<div class="line"><span class="lineno">  536</span>            <span class="stringliteral">&quot;Line number: &quot;</span> + <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(currentLine) +</div>
<div class="line"><span class="lineno">  537</span>                <span class="stringliteral">&quot;. Error processing CRIF line, so skipping it. Error: &quot;</span> + <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(e.what())));</div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  539</span>    }</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  542</span>}</div>
<div class="ttc" id="aclassore_1_1data_1_1_structured_trade_error_message_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_structured_trade_error_message.html">ore::data::StructuredTradeErrorMessage</a></div></div>
<div class="ttc" id="agroup__utilities_html_gad1db2a68f9a73667c3b4084d63955bdd"><div class="ttname"><a href="../ored/group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd">parseReal</a></div><div class="ttdeci">Real parseReal(const string &amp;s)</div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_a4fda781eeba364d9dcbf980736d4a07f"><div class="ttname"><a href="namespaceore_1_1analytics.html#a4fda781eeba364d9dcbf980736d4a07f">ore::analytics::parseIMModel</a></div><div class="ttdeci">SimmConfiguration::IMModel parseIMModel(const string &amp;model)</div><div class="ttdef"><b>Definition:</b> <a href="simmconfiguration_8cpp_source.html#l00481">simmconfiguration.cpp:481</a></div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html_ae3e45cdcfded9ac05833b2101c3cf1f3"><div class="ttname"><a href="namespaceore_1_1analytics.html#ae3e45cdcfded9ac05833b2101c3cf1f3">ore::analytics::parseSimmRiskType</a></div><div class="ttdeci">SimmConfiguration::RiskType parseSimmRiskType(const string &amp;rt)</div><div class="ttdef"><b>Definition:</b> <a href="simmconfiguration_8cpp_source.html#l00455">simmconfiguration.cpp:455</a></div></div>
</div><!-- fragment --><div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_cgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_cgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_cgraph" id="aclassore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_cgraph">
<area shape="rect" title=" " alt="" coords="5,395,73,420"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a791239170310b8198fd9c9b949eada3b" title="Add a single CRIF record." alt="" coords="195,255,237,280"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gae6725a0931b419ec545f9abb0b6ede76" title=" " alt="" coords="391,5,501,31"/>
<area shape="rect" href="namespaceore_1_1analytics.html#add08f2897926c73ba4b8dcf55feebdd9" title=" " alt="" coords="359,375,533,415"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="410,440,482,465"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a4fda781eeba364d9dcbf980736d4a07f" title=" " alt="" coords="121,445,311,471"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gad1db2a68f9a73667c3b4084d63955bdd" title=" " alt="" coords="176,495,256,520"/>
<area shape="rect" href="namespaceore_1_1analytics.html#ae3e45cdcfded9ac05833b2101c3cf1f3" title=" " alt="" coords="129,545,303,585"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a775c89b449aad5b65cef27c4ae014492" title=" " alt="" coords="362,311,530,351"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a5bb520e16d3d5631dbf3ba33986b15e7" title=" " alt="" coords="362,55,530,95"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#a2014d6737c363789a01e7a05d9acfe3e" title=" " alt="" coords="362,119,530,159"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab2992493966a6434cfacf416e5a1bd3b" title=" " alt="" coords="362,183,530,223"/>
<area shape="rect" href="structore_1_1analytics_1_1_crif_record.html#ab402e2cf695460498ad220674bf5ef8f" title=" " alt="" coords="362,247,530,287"/>
</map>
</div>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_icgraph.png" border="0" usemap="#aclassore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_icgraph" alt=""/></div>
<map name="aclassore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_icgraph" id="aclassore_1_1analytics_1_1_crif_loader_aef9ffe51ad3a6c20492ed58b072e07d6_icgraph">
<area shape="rect" title=" " alt="" coords="331,31,399,56"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a05d91c8a1e8c67afe25aea7009cfffaf" title="Core CRIF loader from generic istream." alt="" coords="164,31,283,56"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#a34f4dbff1a24a5015ebefc370cdb3505" title=" " alt="" coords="12,5,109,31"/>
<area shape="rect" href="classore_1_1analytics_1_1_crif_loader.html#afb04baaac42cdc962bf2671fed806115" title="Load CRIF records in string format." alt="" coords="5,55,116,80"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a48c471ac722782218f97908ab6d92013" name="a48c471ac722782218f97908ab6d92013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c471ac722782218f97908ab6d92013">&#9670;&#160;</a></span>requiredHeaders</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">map&lt; Size, set&lt; string &gt; &gt; requiredHeaders</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {0, {<span class="stringliteral">&quot;tradeid&quot;</span>, <span class="stringliteral">&quot;trade_id&quot;</span>}},</div>
<div class="line">    {1, {<span class="stringliteral">&quot;portfolioid&quot;</span>, <span class="stringliteral">&quot;portfolio_id&quot;</span>}},</div>
<div class="line">    {2, {<span class="stringliteral">&quot;productclass&quot;</span>, <span class="stringliteral">&quot;product_class&quot;</span>, <span class="stringliteral">&quot;asset_class&quot;</span>}},</div>
<div class="line">    {3, {<span class="stringliteral">&quot;risktype&quot;</span>, <span class="stringliteral">&quot;risk_type&quot;</span>}},</div>
<div class="line">    {4, {<span class="stringliteral">&quot;qualifier&quot;</span>}},</div>
<div class="line">    {5, {<span class="stringliteral">&quot;bucket&quot;</span>}},</div>
<div class="line">    {6, {<span class="stringliteral">&quot;label1&quot;</span>}},</div>
<div class="line">    {7, {<span class="stringliteral">&quot;label2&quot;</span>}},</div>
<div class="line">    {8, {<span class="stringliteral">&quot;amountcurrency&quot;</span>, <span class="stringliteral">&quot;currency&quot;</span>, <span class="stringliteral">&quot;amount_currency&quot;</span>}},</div>
<div class="line">    {9, {<span class="stringliteral">&quot;amount&quot;</span>}},</div>
<div class="line">    {10, {<span class="stringliteral">&quot;amountusd&quot;</span>, <span class="stringliteral">&quot;amount_usd&quot;</span>}}}</div>
</div><!-- fragment -->
<p>Map giving required CRIF file headers and their allowable alternatives. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00095">95</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a6567f6997a8241e046b20c19ce105f9b" name="a6567f6997a8241e046b20c19ce105f9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6567f6997a8241e046b20c19ce105f9b">&#9670;&#160;</a></span>optionalHeaders</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">map&lt; Size, set&lt; string &gt; &gt; optionalHeaders</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    {11, {<span class="stringliteral">&quot;agreementtype&quot;</span>, <span class="stringliteral">&quot;agreement_type&quot;</span>}},</div>
<div class="line">    {12, {<span class="stringliteral">&quot;calltype&quot;</span>, <span class="stringliteral">&quot;call_type&quot;</span>}},</div>
<div class="line">    {13, {<span class="stringliteral">&quot;initialmargintype&quot;</span>, <span class="stringliteral">&quot;initial_margin_type&quot;</span>}},</div>
<div class="line">    {14, {<span class="stringliteral">&quot;legalentityid&quot;</span>, <span class="stringliteral">&quot;legal_entity_id&quot;</span>}},</div>
<div class="line">    {15, {<span class="stringliteral">&quot;tradetype&quot;</span>, <span class="stringliteral">&quot;trade_type&quot;</span>}},</div>
<div class="line">    {16, {<span class="stringliteral">&quot;immodel&quot;</span>, <span class="stringliteral">&quot;im_model&quot;</span>}},</div>
<div class="line">    {17, {<span class="stringliteral">&quot;post_regulations&quot;</span>}},</div>
<div class="line">    {18, {<span class="stringliteral">&quot;collect_regulations&quot;</span>}},</div>
<div class="line">    {19, {<span class="stringliteral">&quot;end_date&quot;</span>}}}</div>
</div><!-- fragment -->
<p>Map giving optional CRIF file headers and their allowable alternatives. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00098">98</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a73c0ebe24bdbfdd1601152126634bfda" name="a73c0ebe24bdbfdd1601152126634bfda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73c0ebe24bdbfdd1601152126634bfda">&#9670;&#160;</a></span>configuration_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1analytics_1_1_simm_configuration.html">SimmConfiguration</a>&gt; configuration_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simm configuration that is used during loading of CRIF records. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00115">115</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="aad2e9ebcbc8d8852b988933feec18925" name="aad2e9ebcbc8d8852b988933feec18925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad2e9ebcbc8d8852b988933feec18925">&#9670;&#160;</a></span>additionalHeaders_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;QuantLib::Size, std::set&lt;std::string&gt; &gt; additionalHeaders_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines accepted column headers, beyond required and optional headers, see <a class="el" href="crifloader_8cpp.html">crifloader.cpp</a>. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00118">118</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="aec2d1a1ec414440fbf2f016f90eb40d4" name="aec2d1a1ec414440fbf2f016f90eb40d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2d1a1ec414440fbf2f016f90eb40d4">&#9670;&#160;</a></span>updateMapper_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> updateMapper_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >If true, the SIMM configuration's bucket mapper is updated during the CRIF loading with the mapping from SIMM qualifier to SIMM bucket. This is useful when consuming CRIF files from elsewhere in that it allows for using the mapping that is already present in the external file. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00125">125</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="ac9d530c0f583184c7fc6f0f21ea44dc8" name="ac9d530c0f583184c7fc6f0f21ea44dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d530c0f583184c7fc6f0f21ea44dc8">&#9670;&#160;</a></span>aggregateTrades_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbool.html">bool</a> aggregateTrades_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >If true, aggregate over trade ids </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00128">128</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a23f94868964ca5de6ee3b54922950cde" name="a23f94868964ca5de6ee3b54922950cde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23f94868964ca5de6ee3b54922950cde">&#9670;&#160;</a></span>crifRecords_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> crifRecords_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Netted CRIF records that can subsequently be used in a SIMM calculation. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00131">131</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a04297321c6fc90273f895a9875654029" name="a04297321c6fc90273f895a9875654029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04297321c6fc90273f895a9875654029">&#9670;&#160;</a></span>simmParameters_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceore_1_1analytics.html#a9d8a3ff6040fc0182ac0f12d94f1a213">SimmNetSensitivities</a> simmParameters_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SIMM parameters for additional margin, provided in the same format as CRIF records. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00134">134</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a8ce45241d6b234ceafdb0501853fb787" name="a8ce45241d6b234ceafdb0501853fb787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ce45241d6b234ceafdb0501853fb787">&#9670;&#160;</a></span>portfolioIds_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; portfolioIds_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set of portfolio IDs that have been loaded. </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00137">137</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a225c0e71fa08f4ad06f66c58abfb0472" name="a225c0e71fa08f4ad06f66c58abfb0472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a225c0e71fa08f4ad06f66c58abfb0472">&#9670;&#160;</a></span>nettingSetDetails_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="elRef" href="../ored/classore_1_1data_1_1_netting_set_details.html">ore::data::NettingSetDetails</a>&gt; nettingSetDetails_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00138">138</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
<a id="a0210294c77ec13b8b02f2c4fd2f14477" name="a0210294c77ec13b8b02f2c4fd2f14477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0210294c77ec13b8b02f2c4fd2f14477">&#9670;&#160;</a></span>columnIndex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;QuantLib::Size, QuantLib::Size&gt; columnIndex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Internal map from known index of CRIF record member to file column For example, give trade ID an index of 0 and find the column index of trade ID in the CRIF file e.g. n. The map entry would be [0, n] </p>

<p class="definition">Definition at line <a class="el" href="crifloader_8hpp_source.html#l00144">144</a> of file <a class="el" href="crifloader_8hpp_source.html">crifloader.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
