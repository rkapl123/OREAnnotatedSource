<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREAnalytics: test/sensitivityvsanalytic.cpp Source File</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oreaextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-analytics@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.8.12</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_13e138d54eb8818da29c3992edef070a.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">sensitivityvsanalytic.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="sensitivityvsanalytic_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> Copyright (C) 2016 Quaternion Risk Management Ltd</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> All rights reserved.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"></span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> This file is part of ORE, a free-software/open-source library</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> for transparent pricing and risk analysis - http://opensourcerisk.org</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"></span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> ORE is free software: you can redistribute it and/or modify it</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> under the terms of the Modified BSD License.  You should have received a</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> copy of the license along with this program.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> The license is also available online at &lt;http://opensourcerisk.org&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"></span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> This program is distributed on the basis that it will form a useful</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> contribution to risk analytics and model standardisation, but WITHOUT</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment"> FITNESS FOR A PARTICULAR PURPOSE. See the license for more details.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">*/</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;oret/toplevelfixture.hpp&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;<a class="code" href="oreatoplevelfixture_8hpp.html">test/oreatoplevelfixture.hpp</a>&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="testmarket_8hpp.html">testmarket.hpp</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="testportfolio_8hpp.html">testportfolio.hpp</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;<a class="code" href="deltascenariofactory_8hpp.html">orea/scenario/deltascenariofactory.hpp</a>&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;qle/pricingengines/analyticeuropeanenginedeltagamma.hpp&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;qle/pricingengines/blackswaptionenginedeltagamma.hpp&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;qle/pricingengines/discountingswapenginedeltagamma.hpp&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;<a class="code" href="inmemorycube_8hpp.html">orea/cube/inmemorycube.hpp</a>&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;<a class="code" href="npvcube_8hpp.html">orea/cube/npvcube.hpp</a>&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;<a class="code" href="filteredsensitivitystream_8hpp.html">orea/engine/filteredsensitivitystream.hpp</a>&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;<a class="code" href="observationmode_8hpp.html">orea/engine/observationmode.hpp</a>&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;<a class="code" href="parametricvar_8hpp.html">orea/engine/parametricvar.hpp</a>&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;<a class="code" href="riskfilter_8hpp.html">orea/engine/riskfilter.hpp</a>&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityaggregator_8hpp.html">orea/engine/sensitivityaggregator.hpp</a>&gt;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityanalysis_8hpp.html">orea/engine/sensitivityanalysis.hpp</a>&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivitycubestream_8hpp.html">orea/engine/sensitivitycubestream.hpp</a>&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityfilestream_8hpp.html">orea/engine/sensitivityfilestream.hpp</a>&gt;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityinmemorystream_8hpp.html">orea/engine/sensitivityinmemorystream.hpp</a>&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityrecord_8hpp.html">orea/engine/sensitivityrecord.hpp</a>&gt;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivitystream_8hpp.html">orea/engine/sensitivitystream.hpp</a>&gt;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &lt;<a class="code" href="stresstest_8hpp.html">orea/engine/stresstest.hpp</a>&gt;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &lt;<a class="code" href="valuationcalculator_8hpp.html">orea/engine/valuationcalculator.hpp</a>&gt;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &lt;<a class="code" href="valuationengine_8hpp.html">orea/engine/valuationengine.hpp</a>&gt;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &lt;<a class="code" href="scenariosimmarket_8hpp.html">orea/scenario/scenariosimmarket.hpp</a>&gt;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &lt;<a class="code" href="scenariosimmarketparameters_8hpp.html">orea/scenario/scenariosimmarketparameters.hpp</a>&gt;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityscenariodata_8hpp.html">orea/scenario/sensitivityscenariodata.hpp</a>&gt;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &lt;<a class="code" href="sensitivityscenariogenerator_8hpp.html">orea/scenario/sensitivityscenariogenerator.hpp</a>&gt;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/lgmdata_8hpp.html">ored/model/lgmdata.hpp</a>&gt;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/builders_2capfloor_8hpp.html">ored/portfolio/builders/capfloor.hpp</a>&gt;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/builders_2fxforward_8hpp.html">ored/portfolio/builders/fxforward.hpp</a>&gt;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/builders_2fxoption_8hpp.html">ored/portfolio/builders/fxoption.hpp</a>&gt;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/builders_2swap_8hpp.html">ored/portfolio/builders/swap.hpp</a>&gt;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/builders_2swaption_8hpp.html">ored/portfolio/builders/swaption.hpp</a>&gt;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/fxoption_8hpp.html">ored/portfolio/fxoption.hpp</a>&gt;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/portfolio_8hpp.html">ored/portfolio/portfolio.hpp</a>&gt;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/swap_8hpp.html">ored/portfolio/swap.hpp</a>&gt;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/swaption_8hpp.html">ored/portfolio/swaption.hpp</a>&gt;</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/log_8hpp.html">ored/utilities/log.hpp</a>&gt;</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#include &lt;<a class="codeRef" href="../ored/osutils_8hpp.html">ored/utilities/osutils.hpp</a>&gt;</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">#include &lt;ql/math/randomnumbers/mt19937uniformrng.hpp&gt;</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#include &lt;ql/time/calendars/target.hpp&gt;</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#include &lt;ql/time/date.hpp&gt;</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#include &lt;ql/time/daycounters/actualactual.hpp&gt;</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="keyword">using namespace </span>std;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="keyword">using namespace </span><a class="code hl_namespaceRef" href="../qle/namespace_quant_lib.html">QuantLib</a>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_quant_ext.html">QuantExt</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="keyword">using namespace </span>boost::unit_test_framework;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceore.html">ore</a>;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceore_1_1data.html">ore::data</a>;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespaceore_1_1analytics.html">ore::analytics</a>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="keyword">using </span><a class="code hl_class" href="classore_1_1analytics_1_1_delta_scenario_factory.html">ore::analytics::DeltaScenarioFactory</a>;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>QuantLib::ext::shared_ptr&lt;ore::data::Conventions&gt; conv() {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    QuantLib::ext::shared_ptr&lt;ore::data::Conventions&gt; conventions(<span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_conventions.html">ore::data::Conventions</a>());</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    QuantLib::ext::shared_ptr&lt;ore::data::Convention&gt; swapIndexConv(</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_swap_index_convention.html">ore::data::SwapIndexConvention</a>(<span class="stringliteral">&quot;EUR-CMS-2Y&quot;</span>, <span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>));</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    conventions-&gt;add(swapIndexConv);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// QuantLib::ext::shared_ptr&lt;ore::data::Convention&gt; swapConv(</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="comment">//     new ore::data::IRSwapConvention(&quot;EUR-6M-SWAP-CONVENTIONS&quot;, &quot;TARGET&quot;, &quot;Annual&quot;, &quot;MF&quot;, &quot;30/360&quot;, &quot;EUR-EURIBOR-6M&quot;));</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::IRSwapConvention&gt;(<span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::IRSwapConvention&gt;(<span class="stringliteral">&quot;USD-3M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;Q&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::IRSwapConvention&gt;(<span class="stringliteral">&quot;USD-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;Q&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>));</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::IRSwapConvention&gt;(<span class="stringliteral">&quot;GBP-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>));</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::IRSwapConvention&gt;(<span class="stringliteral">&quot;JPY-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>));</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::IRSwapConvention&gt;(<span class="stringliteral">&quot;CHF-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>));</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::DepositConvention&gt;(<span class="stringliteral">&quot;EUR-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR&quot;</span>));</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::DepositConvention&gt;(<span class="stringliteral">&quot;USD-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR&quot;</span>));</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::DepositConvention&gt;(<span class="stringliteral">&quot;GBP-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR&quot;</span>));</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::DepositConvention&gt;(<span class="stringliteral">&quot;JPY-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;JPY-LIBOR&quot;</span>));</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;ore::data::DepositConvention&gt;(<span class="stringliteral">&quot;CHF-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;CHF-LIBOR&quot;</span>));</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;FXConvention&gt;(<span class="stringliteral">&quot;EUR-USD-FX&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;10000&quot;</span>, <span class="stringliteral">&quot;EUR,USD&quot;</span>));</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;FXConvention&gt;(<span class="stringliteral">&quot;EUR-GBP-FX&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="stringliteral">&quot;10000&quot;</span>, <span class="stringliteral">&quot;EUR,GBP&quot;</span>));</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;FXConvention&gt;(<span class="stringliteral">&quot;EUR-CHF-FX&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, <span class="stringliteral">&quot;10000&quot;</span>, <span class="stringliteral">&quot;EUR,CHF&quot;</span>));</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;FXConvention&gt;(<span class="stringliteral">&quot;EUR-JPY-FX&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>, <span class="stringliteral">&quot;10000&quot;</span>, <span class="stringliteral">&quot;EUR,JPY&quot;</span>));</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;FXConvention&gt;(<span class="stringliteral">&quot;EUR-SEK-FX&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;SEK&quot;</span>, <span class="stringliteral">&quot;10000&quot;</span>, <span class="stringliteral">&quot;EUR,SEK&quot;</span>));</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    conventions-&gt;add(QuantLib::ext::make_shared&lt;FXConvention&gt;(<span class="stringliteral">&quot;EUR-CAD-FX&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;CAD&quot;</span>, <span class="stringliteral">&quot;10000&quot;</span>, <span class="stringliteral">&quot;EUR,CAD&quot;</span>));</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordflow">return</span> conventions;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>}</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="comment">// QuantLib::ext::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; setupSimMarketData2() {</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment">//     QuantLib::ext::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData(</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">//         new analytics::ScenarioSimMarketParameters());</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment">//     simMarketData-&gt;baseCcy() = &quot;EUR&quot;;</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">//     simMarketData-&gt;ccys() = {&quot;EUR&quot;, &quot;GBP&quot;};</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment">//     simMarketData-&gt;yieldCurveTenors() = {1 * Months, 6 * Months, 1 * Years,  2 * Years,  3 * Years, 4 * Years,</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">//                                          5 * Years,  6 * Years,  7 * Years,  8 * Years,  9 * Years, 10 * Years,</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="comment">//                                          12 * Years, 15 * Years, 20 * Years, 25 * Years, 30 * Years};</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="comment">//     simMarketData-&gt;indices() = {&quot;EUR-EURIBOR-6M&quot;, &quot;GBP-LIBOR-6M&quot;};</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="comment">//     simMarketData-&gt;interpolation() = &quot;LogLinear&quot;;</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="comment">//     simMarketData-&gt;extrapolate() = true;</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="comment">//     simMarketData-&gt;swapVolTerms() = {1 * Years, 2 * Years, 3 * Years,  4 * Years,</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="comment">//                                      5 * Years, 7 * Years, 10 * Years, 20 * Years};</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="comment">//     simMarketData-&gt;swapVolExpiries() = {6 * Months, 1 * Years, 2 * Years,  3 * Years,</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span><span class="comment">//                                         5 * Years,  7 * Years, 10 * Years, 20 * Years};</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment">//     simMarketData-&gt;swapVolCcys() = {&quot;EUR&quot;, &quot;GBP&quot;};</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="comment">//     simMarketData-&gt;swapVolDecayMode() = &quot;ForwardVariance&quot;;</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span><span class="comment">//     simMarketData-&gt;simulateSwapVols() = true;</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="comment">//     simMarketData-&gt;fxVolExpiries() = {1 * Months, 3 * Months, 6 * Months, 2 * Years, 3 * Years, 4 * Years, 5 *</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span><span class="comment">//     Years};</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="comment">//     simMarketData-&gt;fxVolDecayMode() = &quot;ConstantVariance&quot;;</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="comment">//     simMarketData-&gt;simulateFXVols() = true;</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment">//     simMarketData-&gt;fxVolCcyPairs() = {&quot;EURGBP&quot;};</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="comment">//     simMarketData-&gt;fxCcyPairs() = {&quot;EURGBP&quot;};</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="comment">//     simMarketData-&gt;simulateCapFloorVols() = false;</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span><span class="comment">//     return simMarketData;</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="comment">// }</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>QuantLib::ext::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; <a class="code hl_function" href="test_2parsensitivityanalysis_8cpp.html#aa08bc8726d4f893388fcc254b42b9005">setupSimMarketData5</a>() {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    QuantLib::ext::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData(</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <span class="keyword">new</span> <a class="code hl_class" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">analytics::ScenarioSimMarketParameters</a>());</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    simMarketData-&gt;baseCcy() = <span class="stringliteral">&quot;EUR&quot;</span>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    simMarketData-&gt;setDiscountCurveNames({<span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>});</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    simMarketData-&gt;setYieldCurveTenors(<span class="stringliteral">&quot;&quot;</span>, {1 * Months, 6 * Months, 1 * Years, 2 * Years, 3 * Years, 4 * Years,</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                                            5 * Years, 7 * Years, 10 * Years, 15 * Years, 20 * Years, 30 * Years});</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    simMarketData-&gt;setIndices(</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        {<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>});</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    simMarketData-&gt;interpolation() = <span class="stringliteral">&quot;LogLinear&quot;</span>;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    simMarketData-&gt;extrapolation() = <span class="stringliteral">&quot;FlatFwd&quot;</span>;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    simMarketData-&gt;setSwapVolTerms(<span class="stringliteral">&quot;&quot;</span>, {1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 20 * Years});</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    simMarketData-&gt;setSwapVolExpiries(</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <span class="stringliteral">&quot;&quot;</span>, {6 * Months, 1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 20 * Years});</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    simMarketData-&gt;setSwapVolKeys({<span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>});</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    simMarketData-&gt;swapVolDecayMode() = <span class="stringliteral">&quot;ForwardVariance&quot;</span>;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    simMarketData-&gt;setSimulateSwapVols(<span class="keyword">true</span>); <span class="comment">// false;</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    simMarketData-&gt;setFxVolExpiries(<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        vector&lt;Period&gt;{6 * Months, 1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 20 * Years});</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    simMarketData-&gt;setFxVolDecayMode(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;ConstantVariance&quot;</span>));</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    simMarketData-&gt;setSimulateFXVols(<span class="keyword">true</span>); <span class="comment">// false;</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    simMarketData-&gt;setFxVolCcyPairs({<span class="stringliteral">&quot;EURUSD&quot;</span>, <span class="stringliteral">&quot;EURGBP&quot;</span>, <span class="stringliteral">&quot;EURCHF&quot;</span>, <span class="stringliteral">&quot;EURJPY&quot;</span>, <span class="stringliteral">&quot;GBPCHF&quot;</span>});</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    simMarketData-&gt;setFxVolIsSurface(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    simMarketData-&gt;setFxVolMoneyness(vector&lt;Real&gt;{0.1, 0.5, 1, 1.5, 2, 2.5, 2});</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    simMarketData-&gt;setFxCcyPairs({<span class="stringliteral">&quot;EURUSD&quot;</span>, <span class="stringliteral">&quot;EURGBP&quot;</span>, <span class="stringliteral">&quot;EURCHF&quot;</span>, <span class="stringliteral">&quot;EURJPY&quot;</span>});</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    simMarketData-&gt;setSimulateCapFloorVols(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    simMarketData-&gt;capFloorVolDecayMode() = <span class="stringliteral">&quot;ForwardVariance&quot;</span>;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    simMarketData-&gt;setCapFloorVolKeys({<span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>});</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    simMarketData-&gt;setCapFloorVolExpiries(</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="stringliteral">&quot;&quot;</span>, {6 * Months, 1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 15 * Years, 20 * Years});</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    simMarketData-&gt;setCapFloorVolStrikes(<span class="stringliteral">&quot;&quot;</span>, {0.00, 0.01, 0.02, 0.03, 0.04, 0.05, 0.06});</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keywordflow">return</span> simMarketData;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>}</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span><span class="comment">// QuantLib::ext::shared_ptr&lt;SensitivityScenarioData&gt; setupSensitivityScenarioData2() {</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span><span class="comment">//     QuantLib::ext::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = QuantLib::ext::make_shared&lt;SensitivityScenarioData&gt;();</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span><span class="comment">//     sensiData-&gt;parConversion() = false;</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="comment">//     SensitivityScenarioData::CurveShiftData cvsData;</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="comment">//     cvsData.shiftTenors = {1 * Years, 2 * Years,  3 * Years,  5 * Years,</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="comment">//                            7 * Years, 10 * Years, 15 * Years, 20 * Years}; // multiple tenors: triangular shifts</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="comment">//     cvsData.shiftType = ShiftType::Absolute;</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="comment">//     cvsData.shiftSize = 0.0001;</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="comment">//     cvsData.parInstruments = {&quot;DEP&quot;, &quot;IRS&quot;, &quot;IRS&quot;, &quot;IRS&quot;, &quot;IRS&quot;, &quot;IRS&quot;, &quot;IRS&quot;, &quot;IRS&quot;, &quot;IRS&quot;};</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="comment">//     SensitivityScenarioData::FxShiftData fxsData;</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment">//     fxsData.shiftType = ShiftType::Relative;</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">//     fxsData.shiftSize = 0.01;</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="comment">//     SensitivityScenarioData::FxVolShiftData fxvsData;</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="comment">//     fxvsData.shiftType = ShiftType::Relative;</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="comment">//     fxvsData.shiftSize = 1.0;</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment">//     fxvsData.shiftExpiries = {2 * Years, 5 * Years};</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="comment">//     SensitivityScenarioData::CapFloorVolShiftData cfvsData;</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="comment">//     cfvsData.shiftType = ShiftType::Absolute;</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span><span class="comment">//     cfvsData.shiftSize = 0.0001;</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span><span class="comment">//     cfvsData.shiftExpiries = {1 * Years, 2 * Years, 3 * Years, 5 * Years, 10 * Years};</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="comment">//     cfvsData.shiftStrikes = {0.05};</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span><span class="comment">//     SensitivityScenarioData::SwaptionVolShiftData swvsData;</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="comment">//     swvsData.shiftType = ShiftType::Relative;</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="comment">//     swvsData.shiftSize = 0.01;</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="comment">//     swvsData.shiftExpiries = {3 * Years, 5 * Years, 10 * Years};</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span><span class="comment">//     swvsData.shiftTerms = {2 * Years, 5 * Years, 10 * Years};</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment">//     sensiData-&gt;discountCurveShiftData()[&quot;EUR&quot;] = cvsData;</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">//     sensiData-&gt;discountCurveShiftData()[&quot;EUR&quot;].parInstrumentSingleCurve = true;</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="comment">//     sensiData-&gt;discountCurveShiftData()[&quot;EUR&quot;].parInstrumentConventions = {{&quot;DEP&quot;, &quot;EUR-DEP-CONVENTIONS&quot;},</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="comment">//                                                                            {&quot;IRS&quot;, &quot;EUR-6M-SWAP-CONVENTIONS&quot;}};</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span><span class="comment">//     sensiData-&gt;discountCurveShiftData()[&quot;GBP&quot;] = cvsData;</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span><span class="comment">//     sensiData-&gt;discountCurveShiftData()[&quot;GBP&quot;].parInstrumentSingleCurve = true;</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span><span class="comment">//     sensiData-&gt;discountCurveShiftData()[&quot;GBP&quot;].parInstrumentConventions = {{&quot;DEP&quot;, &quot;GBP-DEP-CONVENTIONS&quot;},</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span><span class="comment">//                                                                            {&quot;IRS&quot;, &quot;GBP-6M-SWAP-CONVENTIONS&quot;}};</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment">//     sensiData-&gt;indexCurveShiftData()[&quot;EUR-EURIBOR-6M&quot;] = cvsData;</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment">//     sensiData-&gt;indexCurveShiftData()[&quot;EUR-EURIBOR-6M&quot;].parInstrumentSingleCurve = false;</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment">//     sensiData-&gt;indexCurveShiftData()[&quot;EUR-EURIBOR-6M&quot;].parInstrumentConventions = {{&quot;DEP&quot;, &quot;EUR-DEP-CONVENTIONS&quot;},</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="comment">//                                                                                    {&quot;IRS&quot;,</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment">//                                                                                    &quot;EUR-6M-SWAP-CONVENTIONS&quot;}};</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="comment">//     sensiData-&gt;indexCurveShiftData()[&quot;GBP-LIBOR-6M&quot;] = cvsData;</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="comment">//     sensiData-&gt;indexCurveShiftData()[&quot;GBP-LIBOR-6M&quot;].parInstrumentSingleCurve = false;</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span><span class="comment">//     sensiData-&gt;indexCurveShiftData()[&quot;GBP-LIBOR-6M&quot;].parInstrumentConventions = {{&quot;DEP&quot;, &quot;GBP-DEP-CONVENTIONS&quot;},</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span><span class="comment">//                                                                                  {&quot;IRS&quot;, &quot;GBP-6M-SWAP-CONVENTIONS&quot;}};</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="comment">//     sensiData-&gt;fxShiftData()[&quot;EURGBP&quot;] = fxsData;</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="comment">//     sensiData-&gt;fxVolShiftData()[&quot;EURGBP&quot;] = fxvsData;</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">//     sensiData-&gt;swaptionVolShiftData()[&quot;EUR&quot;] = swvsData;</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="comment">//     sensiData-&gt;swaptionVolShiftData()[&quot;GBP&quot;] = swvsData;</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">//     // sensiData-&gt;capFloorVolLabel() = &quot;VOL_CAPFLOOR&quot;;</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="comment">//     // sensiData-&gt;capFloorVolShiftData()[&quot;EUR&quot;] = cfvsData;</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span><span class="comment">//     // sensiData-&gt;capFloorVolShiftData()[&quot;EUR&quot;].indexName = &quot;EUR-EURIBOR-6M&quot;;</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="comment">//     // sensiData-&gt;capFloorVolShiftData()[&quot;GBP&quot;] = cfvsData;</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="comment">//     // sensiData-&gt;capFloorVolShiftData()[&quot;GBP&quot;].indexName = &quot;GBP-LIBOR-6M&quot;;</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">//     return sensiData;</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span><span class="comment">// }</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>QuantLib::ext::shared_ptr&lt;ore::analytics::SensitivityScenarioData::CurveShiftParData&gt; <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>() {</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">ore::analytics::SensitivityScenarioData::CurveShiftParData</a> cvsData;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    <span class="comment">// identical to sim market tenor structure, we can only check this case, because the analytic engine</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="comment">// assumes either linear in zero or linear in log discount interpolation, while the sensitivity analysis</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="comment">// assumes a lienar in zero interpolation for rebucketing, but uses the linear in log discount interpolation</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="comment">// of the sim market yield curves for the scenario calculation</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    cvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">shiftTenors</a> = {1 * Months, 6 * Months, 1 * Years,  2 * Years,  3 * Years,  4 * Years,</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                           5 * Years,  7 * Years,  10 * Years, 15 * Years, 20 * Years, 30 * Years};</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    cvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#a6f68be039120a8e7c1b2e9f826082d8b">shiftType</a> = ShiftType::Absolute;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    cvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">shiftSize</a> = 1E-5;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    cvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">parInstruments</a> = {<span class="stringliteral">&quot;DEP&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>, <span class="stringliteral">&quot;IRS&quot;</span>};</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="keywordflow">return</span> QuantLib::ext::make_shared&lt;ore::analytics::SensitivityScenarioData::CurveShiftParData&gt;(cvsData);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>}</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>QuantLib::ext::shared_ptr&lt;SensitivityScenarioData&gt; <a class="code hl_function" href="test_2parsensitivityanalysis_8cpp.html#a5fd42c03e26bc9fd3ade2213066b2ac9">setupSensitivityScenarioData5</a>(<span class="keywordtype">bool</span> parConversion) {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    QuantLib::ext::shared_ptr&lt;SensitivityScenarioData&gt; sensiData =</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        QuantLib::ext::make_shared&lt;ore::analytics::SensitivityScenarioData&gt;(parConversion);</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html">SensitivityScenarioData::SpotShiftData</a> fxsData;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    fxsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#a6f68be039120a8e7c1b2e9f826082d8b">shiftType</a> = ShiftType::Absolute;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    fxsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">shiftSize</a> = 1E-5;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html">SensitivityScenarioData::VolShiftData</a> fxvsData;</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    fxvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#a6f68be039120a8e7c1b2e9f826082d8b">shiftType</a> = ShiftType::Absolute;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    fxvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">shiftSize</a> = 1E-5;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    fxvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a> = {5 * Years};</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data.html">SensitivityScenarioData::CapFloorVolShiftData</a> cfvsData;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    cfvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#a6f68be039120a8e7c1b2e9f826082d8b">shiftType</a> = ShiftType::Absolute;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    cfvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">shiftSize</a> = 1E-5;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    cfvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a> = {1 * Years, 2 * Years, 3 * Years, 5 * Years, 10 * Years};</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    cfvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">shiftStrikes</a> = {0.01, 0.02, 0.03, 0.04, 0.05};</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <a class="code hl_struct" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data.html">SensitivityScenarioData::GenericYieldVolShiftData</a> swvsData;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    swvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#a6f68be039120a8e7c1b2e9f826082d8b">shiftType</a> = ShiftType::Absolute;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    swvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">shiftSize</a> = 1E-5;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    swvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">shiftExpiries</a> = {6 * Months, 1 * Years, 2 * Years,  3 * Years,</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                              5 * Years,  7 * Years, 10 * Years, 20 * Years};</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    swvsData.<a class="code hl_variable" href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data.html#acafe9cf9398383b6d866ce2b1fa7e280">shiftTerms</a> = {1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 20 * Years};</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    QuantLib::ext::shared_ptr&lt;ore::analytics::SensitivityScenarioData::CurveShiftParData&gt; cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;EUR-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;USD-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;USD-3M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;USD&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;GBP-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;GBP-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;GBP&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;JPY-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;JPY-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;JPY&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;CHF-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;CHF-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;CHF&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;EUR-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    sensiData-&gt;indexCurveShiftData()[<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;USD-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;USD-3M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    sensiData-&gt;indexCurveShiftData()[<span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;GBP-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;GBP-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    sensiData-&gt;indexCurveShiftData()[<span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span> </div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;JPY-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;JPY-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    sensiData-&gt;indexCurveShiftData()[<span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    cvsData = <a class="code hl_function" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">createCurveData</a>();</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    cvsData-&gt;parInstrumentSingleCurve = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;DEP&quot;</span>] = <span class="stringliteral">&quot;CHF-DEP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    cvsData-&gt;parInstrumentConventions[<span class="stringliteral">&quot;IRS&quot;</span>] = <span class="stringliteral">&quot;CHF-6M-SWAP-CONVENTIONS&quot;</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    sensiData-&gt;indexCurveShiftData()[<span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>] = cvsData;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    sensiData-&gt;fxShiftData()[<span class="stringliteral">&quot;EURUSD&quot;</span>] = fxsData;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    sensiData-&gt;fxShiftData()[<span class="stringliteral">&quot;EURGBP&quot;</span>] = fxsData;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    sensiData-&gt;fxShiftData()[<span class="stringliteral">&quot;EURJPY&quot;</span>] = fxsData;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    sensiData-&gt;fxShiftData()[<span class="stringliteral">&quot;EURCHF&quot;</span>] = fxsData;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    sensiData-&gt;fxVolShiftData()[<span class="stringliteral">&quot;EURUSD&quot;</span>] = fxvsData;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    sensiData-&gt;fxVolShiftData()[<span class="stringliteral">&quot;EURGBP&quot;</span>] = fxvsData;</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    sensiData-&gt;fxVolShiftData()[<span class="stringliteral">&quot;EURJPY&quot;</span>] = fxvsData;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    sensiData-&gt;fxVolShiftData()[<span class="stringliteral">&quot;EURCHF&quot;</span>] = fxvsData;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    sensiData-&gt;fxVolShiftData()[<span class="stringliteral">&quot;GBPCHF&quot;</span>] = fxvsData;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>] = swvsData;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;GBP&quot;</span>] = swvsData;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;USD&quot;</span>] = swvsData;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;JPY&quot;</span>] = swvsData;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;CHF&quot;</span>] = swvsData;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    sensiData-&gt;capFloorVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>] =</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        QuantLib::ext::make_shared&lt;SensitivityScenarioData::CapFloorVolShiftData&gt;(cfvsData);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    sensiData-&gt;capFloorVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>]-&gt;indexName = <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    sensiData-&gt;capFloorVolShiftData()[<span class="stringliteral">&quot;USD&quot;</span>] =</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        QuantLib::ext::make_shared&lt;SensitivityScenarioData::CapFloorVolShiftData&gt;(cfvsData);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    sensiData-&gt;capFloorVolShiftData()[<span class="stringliteral">&quot;USD&quot;</span>]-&gt;indexName = <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span> </div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    sensiData-&gt;crossGammaFilter() = {{<span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>},</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                                     {<span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>},</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>                                     {<span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>},</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>                                     {<span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>},</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>                                     {<span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>}};</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="keywordflow">return</span> sensiData;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>}</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span> </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span><span class="keywordtype">bool</span> <a class="code hl_namespaceRef" href="../qle/namespacecheck.html">check</a>(<span class="keyword">const</span> Real reference, <span class="keyword">const</span> Real value) {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="keywordflow">if</span> (std::fabs(reference) &gt;= 1E-2) {</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="keywordflow">return</span> std::fabs((reference - value) / reference) &lt; 5E-3;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        <span class="keywordflow">return</span> std::fabs(reference - value) &lt; 1E-3;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>}</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>} <span class="comment">// anonymous namespace</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>BOOST_FIXTURE_TEST_SUITE(OREAnalyticsTestSuite, <a class="code hl_class" href="classore_1_1test_1_1_orea_top_level_fixture.html">ore::test::OreaTopLevelFixture</a>)</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>BOOST_AUTO_TEST_SUITE(SensitivityVsAnalyticSensiEnginesTest)</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>  </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno"><a class="line" href="sensitivityvsanalytic_8cpp.html#ae617b63114d8963eea782ae740c170d7">  406</a></span><a class="code hl_function" href="sensitivityvsanalytic_8cpp.html#ae617b63114d8963eea782ae740c170d7">BOOST_AUTO_TEST_CASE</a>(testSensitivities) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checking sensitivity analysis results vs analytic sensi engine results...&quot;</span>);</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    SavedSettings backup;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    ObservationMode::instance().setMode(ObservationMode::Mode::None);</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    Date today = Date(14, April, 2016); <span class="comment">// Settings::instance().evaluationDate();</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="comment">// Init market</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    QuantLib::ext::shared_ptr&lt;Market&gt; initMarket = QuantLib::ext::make_shared&lt;testsuite::TestMarket&gt;(today);</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    QuantLib::ext::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData = <a class="code hl_function" href="test_2parsensitivityanalysis_8cpp.html#aa08bc8726d4f893388fcc254b42b9005">setupSimMarketData5</a>();</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    QuantLib::ext::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = <a class="code hl_function" href="test_2parsensitivityanalysis_8cpp.html#a5fd42c03e26bc9fd3ade2213066b2ac9">setupSensitivityScenarioData5</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="comment">// build scenario sim market</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    InstrumentConventions::instance().setConventions(conv());</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    QuantLib::ext::shared_ptr&lt;analytics::ScenarioSimMarket&gt; simMarket =</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        QuantLib::ext::make_shared&lt;analytics::ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    QuantLib::ext::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    QuantLib::ext::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = QuantLib::ext::make_shared&lt;DeltaScenarioFactory&gt;(baseScenario);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    QuantLib::ext::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        QuantLib::ext::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket,</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                                                         scenarioFactory, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    simMarket-&gt;scenarioGenerator() = scenarioGenerator;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    <span class="comment">// build porfolio</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    QuantLib::ext::shared_ptr&lt;EngineData&gt; <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a> = QuantLib::ext::make_shared&lt;EngineData&gt;();</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;model(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;engine(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountingSwapEngine&quot;</span>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;model(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;engine(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountingCrossCurrencySwapEngine&quot;</span>;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;model(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;GarmanKohlhagen&quot;</span>;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>-&gt;engine(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    QuantLib::ext::shared_ptr&lt;EngineFactory&gt; factory = QuantLib::ext::make_shared&lt;EngineFactory&gt;(<a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>, simMarket);</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="comment">// QuantLib::ext::shared_ptr&lt;Portfolio&gt; portfolio = buildSwapPortfolio(portfolioSize, factory);</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    QuantLib::ext::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_portfolio.html">Portfolio</a>());</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a54c1b35c30d28826bf94589a5e9d09d6">testsuite::buildSwap</a>(<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 10.0, 0, 10, 0.03, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>,</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>                                                <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a4c5e42f43e26063265814439ec599f53">testsuite::buildFxOption</a>(<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 3, <span class="stringliteral">&quot;EUR&quot;</span>, 10.0, <span class="stringliteral">&quot;USD&quot;</span>, 11.0));</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    portfolio-&gt;build(factory);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Portfolio size after build: &quot;</span> &lt;&lt; portfolio-&gt;size());</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span> </div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="comment">// analytic results</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    std::map&lt;string, Real&gt; analyticalResultsDelta, analyticalResultsGamma, analyticalResultsCrossGamma;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    std::vector&lt;Real&gt; bucketTimes, bucketTimesVegaOpt, bucketTimesVegaUnd, bucketTimesFxOpt;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    std::vector&lt;string&gt; bucketStr, numStr, bucketStrVega, numStrVega, bucketStrFxVega, numStrFxVega;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    ActualActual dc(ActualActual::ISDA); <span class="comment">// this is the dc used for the init / sim market curves</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    Size i = 0;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>]-&gt;shiftTenors) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        bucketTimes.push_back(dc.yearFraction(today, today + p));</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        ostringstream bs;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        bs &lt;&lt; p;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        bucketStr.push_back(bs.str());</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        ostringstream num;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        num &lt;&lt; i++;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        numStr.push_back(num.str());</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>].shiftExpiries) {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        bucketTimesVegaOpt.push_back(dc.yearFraction(today, today + p));</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>].shiftTerms) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>        bucketTimesVegaUnd.push_back(dc.yearFraction(today, today + p));</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    i = 0;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p1 : sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>].shiftExpiries) {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p2 : sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>].shiftTerms) {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            ostringstream bs, num;</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            bs &lt;&lt; p1 &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; p2;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            num &lt;&lt; i++;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            bucketStrVega.push_back(bs.str());</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            numStrVega.push_back(num.str());</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    }</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    i = 0;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : sensiData-&gt;fxVolShiftData()[<span class="stringliteral">&quot;EURUSD&quot;</span>].shiftExpiries) {</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        bucketTimesFxOpt.push_back(dc.yearFraction(today, today + p));</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        ostringstream bs, num;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        bs &lt;&lt; p;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        num &lt;&lt; i++;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        bucketStrFxVega.push_back(bs.str());</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        numStrFxVega.push_back(num.str());</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    }</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span> </div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    Size n = bucketTimes.size();</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    <span class="keyword">auto</span> analyticSwapEngine = QuantLib::ext::make_shared&lt;DiscountingSwapEngineDeltaGamma&gt;(simMarket-&gt;discountCurve(<span class="stringliteral">&quot;EUR&quot;</span>),</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>                                                                                  bucketTimes, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <span class="keyword">auto</span> swap0 = portfolio-&gt;trades().begin()-&gt;second-&gt;instrument()-&gt;qlInstrument();</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    swap0-&gt;setPricingEngine(analyticSwapEngine);</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    <span class="keyword">auto</span> deltaDsc0 = swap0-&gt;result&lt;std::vector&lt;Real&gt;&gt;(<span class="stringliteral">&quot;deltaDiscount&quot;</span>);</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="keyword">auto</span> deltaFwd0 = swap0-&gt;result&lt;std::vector&lt;Real&gt;&gt;(<span class="stringliteral">&quot;deltaForward&quot;</span>);</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <span class="keyword">auto</span> gamma0 = swap0-&gt;result&lt;Matrix&gt;(<span class="stringliteral">&quot;gamma&quot;</span>);</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="keyword">auto</span> process =</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        QuantLib::ext::make_shared&lt;GarmanKohlagenProcess&gt;(simMarket-&gt;fxRate(<span class="stringliteral">&quot;EURUSD&quot;</span>), simMarket-&gt;discountCurve(<span class="stringliteral">&quot;EUR&quot;</span>),</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>                                                  simMarket-&gt;discountCurve(<span class="stringliteral">&quot;USD&quot;</span>), simMarket-&gt;fxVol(<span class="stringliteral">&quot;EURUSD&quot;</span>));</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keyword">auto</span> analyticFxEngine =</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        QuantLib::ext::make_shared&lt;AnalyticEuropeanEngineDeltaGamma&gt;(process, bucketTimes, bucketTimesFxOpt, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="keyword">auto</span> fxoption2 = (++portfolio-&gt;trades().begin())-&gt;second-&gt;instrument()-&gt;qlInstrument();</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    fxoption2-&gt;setPricingEngine(analyticFxEngine);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    Real deltaSpot2 = fxoption2-&gt;result&lt;Real&gt;(<span class="stringliteral">&quot;deltaSpot&quot;</span>);</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    Real gammaSpot2 = fxoption2-&gt;result&lt;Real&gt;(<span class="stringliteral">&quot;gammaSpot&quot;</span>);</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="keyword">auto</span> vega2 = fxoption2-&gt;result&lt;std::vector&lt;Real&gt;&gt;(<span class="stringliteral">&quot;vega&quot;</span>);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <span class="keyword">auto</span> deltaRate2 = fxoption2-&gt;result&lt;std::vector&lt;Real&gt;&gt;(<span class="stringliteral">&quot;deltaRate&quot;</span>);</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <span class="keyword">auto</span> deltaDividend2 = fxoption2-&gt;result&lt;std::vector&lt;Real&gt;&gt;(<span class="stringliteral">&quot;deltaDividend&quot;</span>);</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="keyword">auto</span> gamma2 = fxoption2-&gt;result&lt;Matrix&gt;(<span class="stringliteral">&quot;gamma&quot;</span>);</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    Real fxnpv = fxoption2-&gt;NPV();</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    Real fxspot = simMarket-&gt;fxRate(<span class="stringliteral">&quot;EURUSD&quot;</span>)-&gt;value();</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    std::vector&lt;string&gt; dscKey, dscKey2, fwdKey;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; n; ++i) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        dscKey.push_back(<span class="stringliteral">&quot;DiscountCurve/EUR/&quot;</span> + numStr[i] + <span class="stringliteral">&quot;/&quot;</span> + bucketStr[i]);</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        dscKey2.push_back(<span class="stringliteral">&quot;DiscountCurve/USD/&quot;</span> + numStr[i] + <span class="stringliteral">&quot;/&quot;</span> + bucketStr[i]);</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        fwdKey.push_back(<span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/&quot;</span> + numStr[i] + <span class="stringliteral">&quot;/&quot;</span> + bucketStr[i]);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; n; ++i) {</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        analyticalResultsDelta[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + dscKey[i]] = deltaDsc0[i];</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        analyticalResultsDelta[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + fwdKey[i]] = deltaFwd0[i];</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>        analyticalResultsDelta[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey[i]] = deltaDividend2[i] * 10.0 / fxspot; <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        analyticalResultsDelta[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey2[i]] = deltaRate2[i] * 10.0 / fxspot;    <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; n; ++i) {</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>        analyticalResultsGamma[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + dscKey[i]] = gamma0[i][i];</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        analyticalResultsGamma[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + fwdKey[i]] = gamma0[n + i][n + i];</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>        analyticalResultsGamma[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey[i]] =</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>            gamma2[n + i][n + i] * 10.0 / fxspot;                                                  <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        analyticalResultsGamma[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey2[i]] = gamma2[i][i] * 10.0 / fxspot; <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <span class="keywordflow">for</span> (Size j = 0; j &lt; n; ++j) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>            <span class="keywordflow">if</span> (i &lt; j) {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>                analyticalResultsCrossGamma[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + dscKey[i] + <span class="stringliteral">&quot; &quot;</span> + dscKey[j]] = gamma0[i][j];</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>                analyticalResultsCrossGamma[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + fwdKey[i] + <span class="stringliteral">&quot; &quot;</span> + fwdKey[j]] = gamma0[n + i][n + j];</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>                analyticalResultsCrossGamma[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey[i] + <span class="stringliteral">&quot; &quot;</span> + dscKey[j]] =</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>                    gamma2[n + i][n + j] * 10.0 / fxspot; <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                analyticalResultsCrossGamma[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey2[i] + <span class="stringliteral">&quot; &quot;</span> + dscKey2[j]] =</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>                    gamma2[i][j] * 10.0 / fxspot; <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>            }</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>            analyticalResultsCrossGamma[<span class="stringliteral">&quot;1_Swap_EUR &quot;</span> + dscKey[i] + <span class="stringliteral">&quot; &quot;</span> + fwdKey[j]] = gamma0[i][n + j];</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>            analyticalResultsCrossGamma[<span class="stringliteral">&quot;7_FxOption_EUR_USD &quot;</span> + dscKey[i] + <span class="stringliteral">&quot; &quot;</span> + dscKey2[j]] =</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>                gamma2[n + i][j] * 10.0 / fxspot; <span class="comment">// convert to EUR</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        }</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    }</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="comment">// the sensitivity framework computes d/dS (npv/S), with S = EURUSD fx rate, npv = NPV in USD</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="comment">// the analytical engine computes d/dS npv, the first expression is</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="comment">// -npv/S^2+ d/dS npv / S</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="comment">// furthermore the analytical engine produces results for an EUR notional of 1 instead of 10</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    analyticalResultsDelta[<span class="stringliteral">&quot;7_FxOption_EUR_USD FXSpot/EURUSD/0/spot&quot;</span>] =</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        10.0 * (deltaSpot2 / fxspot - fxnpv / (fxspot * fxspot));</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="comment">// ... differentiate the above expression by S again gives</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <span class="comment">// 2npv/S^3-2 d/dS npv / S^2 + d^2/dS^2 npv / S</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    analyticalResultsGamma[<span class="stringliteral">&quot;7_FxOption_EUR_USD FXSpot/EURUSD/0/spot&quot;</span>] =</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        10.0 * (2.0 * fxnpv / (fxspot * fxspot * fxspot) - 2.0 * deltaSpot2 / (fxspot * fxspot) + gammaSpot2 / fxspot);</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    analyticalResultsDelta[<span class="stringliteral">&quot;7_FxOption_EUR_USD FXVolatility/EURUSD/0/5Y/ATM&quot;</span>] =</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        vega2.front() * 10.0 / fxspot; <span class="comment">// we only have one vega bucket</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span> </div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="comment">// sensitivity analysis</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    QuantLib::ext::shared_ptr&lt;SensitivityAnalysis&gt; sa = QuantLib::ext::make_shared&lt;SensitivityAnalysis&gt;(</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        portfolio, initMarket, <a class="code hl_variableRef" href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a>, <a class="code hl_variableRef" href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a>, simMarketData, sensiData, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    sa-&gt;generateSensitivities();</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    map&lt;pair&lt;string, string&gt;, Real&gt; deltaMap;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    map&lt;pair&lt;string, string&gt;, Real&gt; gammaMap;</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keyword">auto</span> sensiCube = sa-&gt;sensiCube();</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; tradeId : portfolio-&gt;ids()) {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : sensiCube-&gt;factors()) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            <span class="keywordtype">string</span> des = sensiCube-&gt;factorDescription(f);</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>            deltaMap[make_pair(tradeId, des)] = sensiCube-&gt;delta(tradeId, f);</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>            gammaMap[make_pair(tradeId, des)] = sensiCube-&gt;gamma(tradeId, f);</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span> </div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    std::vector&lt;ore::analytics::SensitivityScenarioGenerator::ScenarioDescription&gt; scenDesc =</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        sa-&gt;scenarioGenerator()-&gt;scenarioDescriptions();</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    Real shiftSize = 1E-5; <span class="comment">// shift size</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span> </div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <span class="comment">// check deltas</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checking deltas...&quot;</span>);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    Size foundDeltas = 0, zeroDeltas = 0;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; x : deltaMap) {</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        <span class="keywordtype">string</span> key = x.first.first + <span class="stringliteral">&quot; &quot;</span> + x.first.second;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>        Real scaledResult = x.second / shiftSize;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        <span class="keywordflow">if</span> (analyticalResultsDelta.count(key) &gt; 0) {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>            <span class="keywordflow">if</span> (!<a class="code hl_namespaceRef" href="../qle/namespacecheck.html">check</a>(analyticalResultsDelta.at(key), scaledResult))</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                BOOST_ERROR(<span class="stringliteral">&quot;Sensitivity analysis result &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; scaledResult</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>                                                           &lt;&lt; <span class="stringliteral">&quot;) could not be verified against analytic result (&quot;</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>                                                           &lt;&lt; analyticalResultsDelta.at(key) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>            ++foundDeltas;</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            <span class="keywordflow">if</span> (!<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(x.second, 0.0))</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>                BOOST_ERROR(<span class="stringliteral">&quot;Sensitivity analysis result &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; scaledResult &lt;&lt; <span class="stringliteral">&quot;) expected to be zero&quot;</span>);</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            ++zeroDeltas;</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        }</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    }</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="keywordflow">if</span> (foundDeltas != analyticalResultsDelta.size())</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        BOOST_ERROR(<span class="stringliteral">&quot;Mismatch between number of analytical results for delta (&quot;</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>                    &lt;&lt; analyticalResultsDelta.size() &lt;&lt; <span class="stringliteral">&quot;) and sensitivity results (&quot;</span> &lt;&lt; foundDeltas &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checked &quot;</span> &lt;&lt; foundDeltas &lt;&lt; <span class="stringliteral">&quot; deltas against analytical values (and &quot;</span> &lt;&lt; zeroDeltas</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>                                  &lt;&lt; <span class="stringliteral">&quot; deal-unrelated deltas for zero).&quot;</span>);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span> </div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="comment">// check gammas</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checking gammas...&quot;</span>);</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    Size foundGammas = 0, zeroGammas = 0;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; x : gammaMap) {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>        <span class="keywordtype">string</span> key = x.first.first + <span class="stringliteral">&quot; &quot;</span> + x.first.second;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>        Real scaledResult = x.second / (shiftSize * shiftSize);</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>        <span class="keywordflow">if</span> (analyticalResultsGamma.count(key) &gt; 0) {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>            <span class="keywordflow">if</span> (!<a class="code hl_namespaceRef" href="../qle/namespacecheck.html">check</a>(analyticalResultsGamma.at(key), scaledResult))</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                BOOST_ERROR(<span class="stringliteral">&quot;Sensitivity analysis result &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; scaledResult</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>                                                           &lt;&lt; <span class="stringliteral">&quot;) could not be verified against analytic result (&quot;</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>                                                           &lt;&lt; analyticalResultsGamma.at(key) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>            ++foundGammas;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>            <span class="comment">// the sensi framework produces a Vomma, which we don&#39;t check (it isn&#39;t produced by the analytic sensi</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>            <span class="comment">// engine)</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>            <span class="keywordflow">if</span> (!<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a>(x.second, 0.0) &amp;&amp; key != <span class="stringliteral">&quot;5_Swaption_EUR SwaptionVolatility/EUR/47/10Y/10Y/ATM&quot;</span> &amp;&amp;</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>                key != <span class="stringliteral">&quot;7_FxOption_EUR_USD FXVolatility/EURUSD/0/5Y/ATM&quot;</span>)</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>                BOOST_ERROR(<span class="stringliteral">&quot;Sensitivity analysis result &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; scaledResult &lt;&lt; <span class="stringliteral">&quot;) expected to be zero&quot;</span>);</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>            ++zeroGammas;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        }</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    }</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="keywordflow">if</span> (foundGammas != analyticalResultsGamma.size())</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        BOOST_ERROR(<span class="stringliteral">&quot;Mismatch between number of analytical results for gamma (&quot;</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>                    &lt;&lt; analyticalResultsGamma.size() &lt;&lt; <span class="stringliteral">&quot;) and sensitivity results (&quot;</span> &lt;&lt; foundGammas &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checked &quot;</span> &lt;&lt; foundGammas &lt;&lt; <span class="stringliteral">&quot; gammas against analytical values (and &quot;</span> &lt;&lt; zeroGammas</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>                                  &lt;&lt; <span class="stringliteral">&quot; deal-unrelated gammas for zero).&quot;</span>);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="comment">// check cross gammas</span></div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checking cross-gammas...&quot;</span>);</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    Size foundCrossGammas = 0, zeroCrossGammas = 0;</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [tradeId, trade] : portfolio-&gt;trades()) {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; s : scenDesc) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            <span class="keywordflow">if</span> (s.type() == ShiftScenarioGenerator::ScenarioDescription::Type::Cross) {</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                <span class="keywordtype">string</span> key = tradeId + <span class="stringliteral">&quot; &quot;</span> + s.factor1() + <span class="stringliteral">&quot; &quot;</span> + s.factor2();</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>                Real crossGamma = sa-&gt;sensiCube()-&gt;crossGamma(tradeId, make_pair(s.key1(), s.key2()));</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                Real scaledResult = crossGamma / (shiftSize * shiftSize);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                <span class="comment">// BOOST_TEST_MESSAGE(key &lt;&lt; &quot; &quot; &lt;&lt; scaledResult); // debug</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                <span class="keywordflow">if</span> (analyticalResultsCrossGamma.count(key) &gt; 0) {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>                    <span class="keywordflow">if</span> (!<a class="code hl_namespaceRef" href="../qle/namespacecheck.html">check</a>(analyticalResultsCrossGamma.at(key), scaledResult))</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                        BOOST_ERROR(<span class="stringliteral">&quot;Sensitivity analysis result &quot;</span></div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>                                    &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; scaledResult</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>                                    &lt;&lt; <span class="stringliteral">&quot;) could not be verified against analytic result (&quot;</span></div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>                                    &lt;&lt; analyticalResultsCrossGamma.at(key) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>                    ++foundCrossGammas;</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                    <span class="keywordflow">if</span> (!<a class="code hl_namespaceRef" href="../qle/namespacecheck.html">check</a>(crossGamma, 0.0))</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>                        BOOST_ERROR(<span class="stringliteral">&quot;Sensitivity analysis result &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; scaledResult</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>                                                                   &lt;&lt; <span class="stringliteral">&quot;) expected to be zero&quot;</span>);</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>                    ++zeroCrossGammas;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>                }</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            }</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        }</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    }</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <span class="keywordflow">if</span> (foundCrossGammas != analyticalResultsCrossGamma.size())</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        BOOST_ERROR(<span class="stringliteral">&quot;Mismatch between number of analytical results for gamma (&quot;</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>                    &lt;&lt; analyticalResultsCrossGamma.size() &lt;&lt; <span class="stringliteral">&quot;) and sensitivity results (&quot;</span> &lt;&lt; foundCrossGammas &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Checked &quot;</span> &lt;&lt; foundCrossGammas &lt;&lt; <span class="stringliteral">&quot; cross gammas against analytical values (and &quot;</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>                                  &lt;&lt; zeroCrossGammas &lt;&lt; <span class="stringliteral">&quot; deal-unrelated cross gammas for zero).&quot;</span>);</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span> </div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="comment">// debug: dump analytical cross gamma results</span></div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="comment">// for(auto const&amp; x: analyticalResultsCrossGamma) {</span></div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <span class="comment">//     BOOST_TEST_MESSAGE(x.first &lt;&lt; &quot; &quot; &lt;&lt; x.second);</span></div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <span class="comment">// }</span></div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span> </div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span> </div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    BOOST_CHECK(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>}</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span> </div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>BOOST_AUTO_TEST_SUITE_END()</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span> </div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>BOOST_AUTO_TEST_SUITE_END()</div>
<div class="ttc" id="abuilders_2capfloor_8hpp_html"><div class="ttname"><a href="../ored/builders_2capfloor_8hpp.html">capfloor.hpp</a></div></div>
<div class="ttc" id="abuilders_2fxforward_8hpp_html"><div class="ttname"><a href="../ored/builders_2fxforward_8hpp.html">fxforward.hpp</a></div></div>
<div class="ttc" id="abuilders_2fxoption_8hpp_html"><div class="ttname"><a href="../ored/builders_2fxoption_8hpp.html">fxoption.hpp</a></div></div>
<div class="ttc" id="abuilders_2swap_8hpp_html"><div class="ttname"><a href="../ored/builders_2swap_8hpp.html">swap.hpp</a></div></div>
<div class="ttc" id="abuilders_2swaption_8hpp_html"><div class="ttname"><a href="../ored/builders_2swaption_8hpp.html">swaption.hpp</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_delta_scenario_factory_html"><div class="ttname"><a href="classore_1_1analytics_1_1_delta_scenario_factory.html">ore::analytics::DeltaScenarioFactory</a></div><div class="ttdoc">Factory class for cloning scenario objects.</div><div class="ttdef"><b>Definition:</b> <a href="deltascenariofactory_8hpp_source.html#l00037">deltascenariofactory.hpp:37</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_observation_mode_html_a46c8a310cf4c094f8c80e1cb8dc1f911"><div class="ttname"><a href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ore::analytics::ObservationMode::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdoc">Allowable mode mode.</div><div class="ttdef"><b>Definition:</b> <a href="observationmode_8hpp_source.html#l00044">observationmode.hpp:44</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_scenario_sim_market_parameters_html"><div class="ttname"><a href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">ore::analytics::ScenarioSimMarketParameters</a></div><div class="ttdoc">ScenarioSimMarket description.</div><div class="ttdef"><b>Definition:</b> <a href="scenariosimmarketparameters_8hpp_source.html#l00047">scenariosimmarketparameters.hpp:47</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_conventions.html">ore::data::Conventions</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_market_html_ab336651e3455fff1764bf576a5785bbd"><div class="ttname"><a href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">ore::data::Market::defaultConfiguration</a></div><div class="ttdeci">static const string defaultConfiguration</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_portfolio_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_portfolio.html">ore::data::Portfolio</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_swap_index_convention_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_swap_index_convention.html">ore::data::SwapIndexConvention</a></div></div>
<div class="ttc" id="aclassore_1_1test_1_1_orea_top_level_fixture_html"><div class="ttname"><a href="classore_1_1test_1_1_orea_top_level_fixture.html">ore::test::OreaTopLevelFixture</a></div><div class="ttdoc">OREAnalytics Top level fixture.</div><div class="ttdef"><b>Definition:</b> <a href="oreatoplevelfixture_8hpp_source.html#l00035">oreatoplevelfixture.hpp:35</a></div></div>
<div class="ttc" id="adeltascenariofactory_8hpp_html"><div class="ttname"><a href="deltascenariofactory_8hpp.html">deltascenariofactory.hpp</a></div><div class="ttdoc">factory class for cloning a cached scenario</div></div>
<div class="ttc" id="afilteredsensitivitystream_8hpp_html"><div class="ttname"><a href="filteredsensitivitystream_8hpp.html">filteredsensitivitystream.hpp</a></div><div class="ttdoc">Class that wraps a sensitivity stream and filters out negligible records.</div></div>
<div class="ttc" id="afxoption_8hpp_html"><div class="ttname"><a href="../ored/fxoption_8hpp.html">fxoption.hpp</a></div></div>
<div class="ttc" id="ainmemorycube_8hpp_html"><div class="ttname"><a href="inmemorycube_8hpp.html">inmemorycube.hpp</a></div><div class="ttdoc">A cube implementation that stores the cube in memory.</div></div>
<div class="ttc" id="algmdata_8hpp_html"><div class="ttname"><a href="../ored/lgmdata_8hpp.html">lgmdata.hpp</a></div></div>
<div class="ttc" id="alog_8hpp_html"><div class="ttname"><a href="../ored/log_8hpp.html">log.hpp</a></div></div>
<div class="ttc" id="alog_8hpp_html_a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b"><div class="ttname"><a href="../ored/log_8hpp.html#a08cf33440c824c6fda734c566a726536a604ac82e88d7a367d4c2830411520c2b">data</a></div><div class="ttdeci">data</div></div>
<div class="ttc" id="anamespace_quant_ext_html"><div class="ttname"><a href="namespace_quant_ext.html">QuantExt</a></div></div>
<div class="ttc" id="anamespace_quant_ext_html_a1cab4fb6a720eff245acb9f3a7a9e7c5"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a1cab4fb6a720eff245acb9f3a7a9e7c5">close_enough</a></div><div class="ttdeci">Filter close_enough(const RandomVariable &amp;x, const RandomVariable &amp;y)</div></div>
<div class="ttc" id="anamespace_quant_lib_html"><div class="ttname"><a href="../qle/namespace_quant_lib.html">QuantLib</a></div></div>
<div class="ttc" id="anamespacecheck_html"><div class="ttname"><a href="../qle/namespacecheck.html">check</a></div></div>
<div class="ttc" id="anamespaceore_1_1analytics_html"><div class="ttname"><a href="namespaceore_1_1analytics.html">ore::analytics</a></div></div>
<div class="ttc" id="anamespaceore_1_1data_html"><div class="ttname"><a href="namespaceore_1_1data.html">ore::data</a></div></div>
<div class="ttc" id="anamespaceore_html"><div class="ttname"><a href="namespaceore.html">ore</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a4c5e42f43e26063265814439ec599f53"><div class="ttname"><a href="namespacetestsuite.html#a4c5e42f43e26063265814439ec599f53">testsuite::buildFxOption</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; Trade &gt; buildFxOption(string id, string longShort, string putCall, Size expiry, string boughtCcy, Real boughtAmount, string soldCcy, Real soldAmount, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00185">testportfolio.cpp:185</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a54c1b35c30d28826bf94589a5e9d09d6"><div class="ttname"><a href="namespacetestsuite.html#a54c1b35c30d28826bf94589a5e9d09d6">testsuite::buildSwap</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; Trade &gt; buildSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index, Calendar calendar, Natural spotDays, bool spotStartLag)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00048">testportfolio.cpp:48</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_aac0663d501b589be0427199becb6d9a8"><div class="ttname"><a href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8">testsuite::createCurveData</a></div><div class="ttdeci">ore::analytics::SensitivityScenarioData::CurveShiftParData createCurveData()</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l01344">testmarket.cpp:1344</a></div></div>
<div class="ttc" id="anpvcube_8hpp_html"><div class="ttname"><a href="npvcube_8hpp.html">npvcube.hpp</a></div><div class="ttdoc">The base NPV cube class.</div></div>
<div class="ttc" id="aobservationmode_8hpp_html"><div class="ttname"><a href="observationmode_8hpp.html">observationmode.hpp</a></div><div class="ttdoc">Singleton class to hold global Observation Mode.</div></div>
<div class="ttc" id="aoreatoplevelfixture_8hpp_html"><div class="ttname"><a href="oreatoplevelfixture_8hpp.html">oreatoplevelfixture.hpp</a></div><div class="ttdoc">Fixture that can be used at top level of OREAnalytics test suites.</div></div>
<div class="ttc" id="aosutils_8hpp_html"><div class="ttname"><a href="../ored/osutils_8hpp.html">osutils.hpp</a></div></div>
<div class="ttc" id="aparametricvar_8hpp_html"><div class="ttname"><a href="parametricvar_8hpp.html">parametricvar.hpp</a></div><div class="ttdoc">Perform parametric var calculation for a given portfolio.</div></div>
<div class="ttc" id="aportfolio_8hpp_html"><div class="ttname"><a href="../ored/portfolio_8hpp.html">portfolio.hpp</a></div></div>
<div class="ttc" id="ariskfilter_8hpp_html"><div class="ttname"><a href="riskfilter_8hpp.html">riskfilter.hpp</a></div><div class="ttdoc">risk class and type filter</div></div>
<div class="ttc" id="ascenariosimmarket_8hpp_html"><div class="ttname"><a href="scenariosimmarket_8hpp.html">scenariosimmarket.hpp</a></div><div class="ttdoc">A Market class that can be updated by Scenarios.</div></div>
<div class="ttc" id="ascenariosimmarketparameters_8hpp_html"><div class="ttname"><a href="scenariosimmarketparameters_8hpp.html">scenariosimmarketparameters.hpp</a></div><div class="ttdoc">A class to hold Scenario parameters for scenarioSimMarket.</div></div>
<div class="ttc" id="asensitivityaggregator_8hpp_html"><div class="ttname"><a href="sensitivityaggregator_8hpp.html">sensitivityaggregator.hpp</a></div><div class="ttdoc">Class for aggregating SensitivityRecords.</div></div>
<div class="ttc" id="asensitivityanalysis_8hpp_html"><div class="ttname"><a href="sensitivityanalysis_8hpp.html">sensitivityanalysis.hpp</a></div><div class="ttdoc">Perform sensitivity analysis for a given portfolio.</div></div>
<div class="ttc" id="asensitivitycubestream_8hpp_html"><div class="ttname"><a href="sensitivitycubestream_8hpp.html">sensitivitycubestream.hpp</a></div><div class="ttdoc">Class for streaming SensitivityRecords from a SensitivityCube.</div></div>
<div class="ttc" id="asensitivityfilestream_8hpp_html"><div class="ttname"><a href="sensitivityfilestream_8hpp.html">sensitivityfilestream.hpp</a></div><div class="ttdoc">Class for streaming SensitivityRecords from file.</div></div>
<div class="ttc" id="asensitivityinmemorystream_8hpp_html"><div class="ttname"><a href="sensitivityinmemorystream_8hpp.html">sensitivityinmemorystream.hpp</a></div><div class="ttdoc">Class for streaming SensitivityRecords from in-memory container.</div></div>
<div class="ttc" id="asensitivityrecord_8hpp_html"><div class="ttname"><a href="sensitivityrecord_8hpp.html">sensitivityrecord.hpp</a></div><div class="ttdoc">Struct for holding a sensitivity record.</div></div>
<div class="ttc" id="asensitivityscenariodata_8hpp_html"><div class="ttname"><a href="sensitivityscenariodata_8hpp.html">sensitivityscenariodata.hpp</a></div><div class="ttdoc">A class to hold the parametrisation for building sensitivity scenarios.</div></div>
<div class="ttc" id="asensitivityscenariogenerator_8hpp_html"><div class="ttname"><a href="sensitivityscenariogenerator_8hpp.html">sensitivityscenariogenerator.hpp</a></div><div class="ttdoc">Sensitivity scenario generation.</div></div>
<div class="ttc" id="asensitivitystream_8hpp_html"><div class="ttname"><a href="sensitivitystream_8hpp.html">sensitivitystream.hpp</a></div><div class="ttdoc">Base class for sensitivity record streamer.</div></div>
<div class="ttc" id="asensitivityvsanalytic_8cpp_html_ae617b63114d8963eea782ae740c170d7"><div class="ttname"><a href="sensitivityvsanalytic_8cpp.html#ae617b63114d8963eea782ae740c170d7">BOOST_AUTO_TEST_CASE</a></div><div class="ttdeci">BOOST_AUTO_TEST_CASE(testSensitivities)</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityvsanalytic_8cpp_source.html#l00406">sensitivityvsanalytic.cpp:406</a></div></div>
<div class="ttc" id="astresstest_8hpp_html"><div class="ttname"><a href="stresstest_8hpp.html">stresstest.hpp</a></div><div class="ttdoc">perform a stress testing analysis for a given portfolio.</div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_cap_floor_vol_shift_data.html">ore::analytics::SensitivityScenarioData::CapFloorVolShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00094">sensitivityscenariodata.hpp:94</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data_html_a330cace8aeadc1a1af4cc6dc7737f6a1"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_data.html#a330cace8aeadc1a1af4cc6dc7737f6a1">ore::analytics::SensitivityScenarioData::CurveShiftData::shiftTenors</a></div><div class="ttdeci">vector&lt; Period &gt; shiftTenors</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00066">sensitivityscenariodata.hpp:66</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html">ore::analytics::SensitivityScenarioData::CurveShiftParData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00106">sensitivityscenariodata.hpp:106</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data_html_a8e9eb0c747925dba06238042450f3e58"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_curve_shift_par_data.html#a8e9eb0c747925dba06238042450f3e58">ore::analytics::SensitivityScenarioData::CurveShiftParData::parInstruments</a></div><div class="ttdeci">vector&lt; string &gt; parInstruments</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00109">sensitivityscenariodata.hpp:109</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data.html">ore::analytics::SensitivityScenarioData::GenericYieldVolShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00100">sensitivityscenariodata.hpp:100</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data_html_acafe9cf9398383b6d866ce2b1fa7e280"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_generic_yield_vol_shift_data.html#acafe9cf9398383b6d866ce2b1fa7e280">ore::analytics::SensitivityScenarioData::GenericYieldVolShiftData::shiftTerms</a></div><div class="ttdeci">vector&lt; Period &gt; shiftTerms</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00103">sensitivityscenariodata.hpp:103</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html">ore::analytics::SensitivityScenarioData::ShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00048">sensitivityscenariodata.hpp:48</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data_html_a6f68be039120a8e7c1b2e9f826082d8b"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#a6f68be039120a8e7c1b2e9f826082d8b">ore::analytics::SensitivityScenarioData::ShiftData::shiftType</a></div><div class="ttdeci">ShiftType shiftType</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00052">sensitivityscenariodata.hpp:52</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data_html_aed4f84ea1e624c7b7c5689eb35e941a6"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_shift_data.html#aed4f84ea1e624c7b7c5689eb35e941a6">ore::analytics::SensitivityScenarioData::ShiftData::shiftSize</a></div><div class="ttdeci">Real shiftSize</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00053">sensitivityscenariodata.hpp:53</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html">ore::analytics::SensitivityScenarioData::VolShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00086">sensitivityscenariodata.hpp:86</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data_html_a0329c29611762359cb65bd98a73e7233"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a0329c29611762359cb65bd98a73e7233">ore::analytics::SensitivityScenarioData::VolShiftData::shiftStrikes</a></div><div class="ttdeci">vector&lt; Real &gt; shiftStrikes</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00090">sensitivityscenariodata.hpp:90</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data_html_a550435aa0100e7442862df947de10c1e"><div class="ttname"><a href="structore_1_1analytics_1_1_sensitivity_scenario_data_1_1_vol_shift_data.html#a550435aa0100e7442862df947de10c1e">ore::analytics::SensitivityScenarioData::VolShiftData::shiftExpiries</a></div><div class="ttdeci">vector&lt; Period &gt; shiftExpiries</div><div class="ttdef"><b>Definition:</b> <a href="sensitivityscenariodata_8hpp_source.html#l00089">sensitivityscenariodata.hpp:89</a></div></div>
<div class="ttc" id="aswap_8hpp_html"><div class="ttname"><a href="../ored/swap_8hpp.html">swap.hpp</a></div></div>
<div class="ttc" id="aswaption_8hpp_html"><div class="ttname"><a href="../ored/swaption_8hpp.html">swaption.hpp</a></div></div>
<div class="ttc" id="atest_2parsensitivityanalysis_8cpp_html_a5fd42c03e26bc9fd3ade2213066b2ac9"><div class="ttname"><a href="test_2parsensitivityanalysis_8cpp.html#a5fd42c03e26bc9fd3ade2213066b2ac9">setupSensitivityScenarioData5</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; SensitivityScenarioData &gt; setupSensitivityScenarioData5(bool parConversion)</div><div class="ttdef"><b>Definition:</b> <a href="test_2parsensitivityanalysis_8cpp_source.html#l00338">parsensitivityanalysis.cpp:338</a></div></div>
<div class="ttc" id="atest_2parsensitivityanalysis_8cpp_html_aa08bc8726d4f893388fcc254b42b9005"><div class="ttname"><a href="test_2parsensitivityanalysis_8cpp.html#aa08bc8726d4f893388fcc254b42b9005">setupSimMarketData5</a></div><div class="ttdeci">QuantLib::ext::shared_ptr&lt; analytics::ScenarioSimMarketParameters &gt; setupSimMarketData5()</div><div class="ttdef"><b>Definition:</b> <a href="test_2parsensitivityanalysis_8cpp_source.html#l00136">parsensitivityanalysis.cpp:136</a></div></div>
<div class="ttc" id="atestmarket_8hpp_html"><div class="ttname"><a href="testmarket_8hpp.html">testmarket.hpp</a></div></div>
<div class="ttc" id="atestportfolio_8hpp_html"><div class="ttname"><a href="testportfolio_8hpp.html">testportfolio.hpp</a></div></div>
<div class="ttc" id="avaluationcalculator_8hpp_html"><div class="ttname"><a href="valuationcalculator_8hpp.html">valuationcalculator.hpp</a></div><div class="ttdoc">The counterparty cube calculator interface.</div></div>
<div class="ttc" id="avaluationengine_8hpp_html"><div class="ttname"><a href="valuationengine_8hpp.html">valuationengine.hpp</a></div><div class="ttdoc">The cube valuation core.</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
