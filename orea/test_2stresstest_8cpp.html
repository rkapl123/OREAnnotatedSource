<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>OREAnalytics: test/stresstest.cpp File Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oreaextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="http://opensourcerisk.org">
       <img src="logo-analytics@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Reference manual - version 1.7</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_13e138d54eb8818da29c3992edef070a.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">stresstest.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;boost/test/unit_test.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="inmemorycube_8hpp_source.html">orea/cube/inmemorycube.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="npvcube_8hpp_source.html">orea/cube/npvcube.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="filteredsensitivitystream_8hpp_source.html">orea/engine/filteredsensitivitystream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="observationmode_8hpp_source.html">orea/engine/observationmode.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="parametricvar_8hpp_source.html">orea/engine/parametricvar.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="riskfilter_8hpp_source.html">orea/engine/riskfilter.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityaggregator_8hpp_source.html">orea/engine/sensitivityaggregator.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityanalysis_8hpp_source.html">orea/engine/sensitivityanalysis.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivitycubestream_8hpp_source.html">orea/engine/sensitivitycubestream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityfilestream_8hpp_source.html">orea/engine/sensitivityfilestream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityinmemorystream_8hpp_source.html">orea/engine/sensitivityinmemorystream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityrecord_8hpp_source.html">orea/engine/sensitivityrecord.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivitystream_8hpp_source.html">orea/engine/sensitivitystream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stresstest_8hpp_source.html">orea/engine/stresstest.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="valuationcalculator_8hpp_source.html">orea/engine/valuationcalculator.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="valuationengine_8hpp_source.html">orea/engine/valuationengine.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="clonescenariofactory_8hpp_source.html">orea/scenario/clonescenariofactory.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="scenariosimmarket_8hpp_source.html">orea/scenario/scenariosimmarket.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="scenariosimmarketparameters_8hpp_source.html">orea/scenario/scenariosimmarketparameters.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stressscenariogenerator_8hpp_source.html">orea/scenario/stressscenariogenerator.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/lgmdata_8hpp.html">ored/model/lgmdata.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2capfloor_8hpp.html">ored/portfolio/builders/capfloor.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2fxforward_8hpp.html">ored/portfolio/builders/fxforward.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/ored_2portfolio_2builders_2fxoption_8hpp.html">ored/portfolio/builders/fxoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2swap_8hpp.html">ored/portfolio/builders/swap.hpp</a>&gt;</code><br />
<code>#include &lt;ored/portfolio/builders/swaption.hpp&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/ored_2portfolio_2portfolio_8hpp.html">ored/portfolio/portfolio.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/swap_8hpp.html">ored/portfolio/swap.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/ored_2portfolio_2swaption_8hpp.html">ored/portfolio/swaption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/log_8hpp.html">ored/utilities/log.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/osutils_8hpp.html">ored/utilities/osutils.hpp</a>&gt;</code><br />
<code>#include &lt;oret/toplevelfixture.hpp&gt;</code><br />
<code>#include &lt;ql/math/randomnumbers/mt19937uniformrng.hpp&gt;</code><br />
<code>#include &lt;ql/time/calendars/target.hpp&gt;</code><br />
<code>#include &lt;ql/time/date.hpp&gt;</code><br />
<code>#include &lt;ql/time/daycounters/actualactual.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="oreatoplevelfixture_8hpp_source.html">test/oreatoplevelfixture.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="testmarket_8hpp_source.html">test/testmarket.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="testportfolio_8hpp_source.html">test/testportfolio.hpp</a>&gt;</code><br />
</div>
<p><a href="test_2stresstest_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab16f00faf07db72c402ce16999ab2dce"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="elRef" href="../ored/classore_1_1data_1_1_conventions.html">data::Conventions</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2stresstest_8cpp.html#ab16f00faf07db72c402ce16999ab2dce">stressConv</a> ()</td></tr>
<tr class="separator:ab16f00faf07db72c402ce16999ab2dce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf0f198605fc75af9917df5b9f926ae"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">analytics::ScenarioSimMarketParameters</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2stresstest_8cpp.html#a5bf0f198605fc75af9917df5b9f926ae">setupStressSimMarketData</a> ()</td></tr>
<tr class="separator:a5bf0f198605fc75af9917df5b9f926ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae07c39440aa0d0a9990c7024b5dae439"><td class="memItemLeft" align="right" valign="top">boost::shared_ptr&lt; <a class="el" href="classore_1_1analytics_1_1_stress_test_scenario_data.html">StressTestScenarioData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2stresstest_8cpp.html#ae07c39440aa0d0a9990c7024b5dae439">setupStressScenarioData</a> ()</td></tr>
<tr class="separator:ae07c39440aa0d0a9990c7024b5dae439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b22a6d6929676db6de56706bd3dc43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2stresstest_8cpp.html#a68b22a6d6929676db6de56706bd3dc43">BOOST_AUTO_TEST_CASE</a> (regression)</td></tr>
<tr class="separator:a68b22a6d6929676db6de56706bd3dc43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab16f00faf07db72c402ce16999ab2dce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab16f00faf07db72c402ce16999ab2dce">&#9670;&nbsp;</a></span>stressConv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="elRef" href="../ored/classore_1_1data_1_1_conventions.html">data::Conventions</a>&gt; stressConv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2stresstest_8cpp_source.html#l00075">75</a> of file <a class="el" href="test_2stresstest_8cpp_source.html">stresstest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                              {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    boost::shared_ptr&lt;data::Conventions&gt; conventions(<span class="keyword">new</span> <a class="codeRef" href="../ored/classore_1_1data_1_1_conventions.html">data::Conventions</a>());</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    boost::shared_ptr&lt;data::Convention&gt; swapIndexConv(</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keyword">new</span> <a class="codeRef" href="../ored/classore_1_1data_1_1_swap_index_convention.html">data::SwapIndexConvention</a>(<span class="stringliteral">&quot;EUR-CMS-2Y&quot;</span>, <span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>));</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    conventions-&gt;add(swapIndexConv);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// boost::shared_ptr&lt;data::Convention&gt; swapConv(</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">//     new data::IRSwapConvention(&quot;EUR-6M-SWAP-CONVENTIONS&quot;, &quot;TARGET&quot;, &quot;Annual&quot;, &quot;MF&quot;, &quot;30/360&quot;, &quot;EUR-EURIBOR-6M&quot;));</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::IRSwapConvention&gt;(<span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::IRSwapConvention&gt;(<span class="stringliteral">&quot;USD-3M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;Q&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::IRSwapConvention&gt;(<span class="stringliteral">&quot;USD-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;Q&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::IRSwapConvention&gt;(<span class="stringliteral">&quot;GBP-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::IRSwapConvention&gt;(<span class="stringliteral">&quot;JPY-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::IRSwapConvention&gt;(<span class="stringliteral">&quot;CHF-6M-SWAP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;TARGET&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;MF&quot;</span>,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                                <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::DepositConvention&gt;(<span class="stringliteral">&quot;EUR-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR&quot;</span>));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::DepositConvention&gt;(<span class="stringliteral">&quot;USD-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR&quot;</span>));</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::DepositConvention&gt;(<span class="stringliteral">&quot;GBP-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR&quot;</span>));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::DepositConvention&gt;(<span class="stringliteral">&quot;JPY-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;JPY-LIBOR&quot;</span>));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    conventions-&gt;add(boost::make_shared&lt;data::DepositConvention&gt;(<span class="stringliteral">&quot;CHF-DEP-CONVENTIONS&quot;</span>, <span class="stringliteral">&quot;CHF-LIBOR&quot;</span>));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    InstrumentConventions::instance().setConventions(conventions);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> conventions;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2stresstest_8cpp_ab16f00faf07db72c402ce16999ab2dce_icgraph.png" border="0" usemap="#atest_2stresstest_8cpp_ab16f00faf07db72c402ce16999ab2dce_icgraph" alt=""/></div>
<map name="test_2stresstest_8cpp_ab16f00faf07db72c402ce16999ab2dce_icgraph" id="atest_2stresstest_8cpp_ab16f00faf07db72c402ce16999ab2dce_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,331,32"/>
<area shape="rect" href="test_2stresstest_8cpp.html#a68b22a6d6929676db6de56706bd3dc43" title=" " alt="" coords="5,5,196,32"/>
</map>
</div>

</div>
</div>
<a id="a5bf0f198605fc75af9917df5b9f926ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bf0f198605fc75af9917df5b9f926ae">&#9670;&nbsp;</a></span>setupStressSimMarketData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">analytics::ScenarioSimMarketParameters</a>&gt; setupStressSimMarketData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2stresstest_8cpp_source.html#l00108">108</a> of file <a class="el" href="test_2stresstest_8cpp_source.html">stresstest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData(</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keyword">new</span> <a class="code" href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">analytics::ScenarioSimMarketParameters</a>());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    simMarketData-&gt;baseCcy() = <span class="stringliteral">&quot;EUR&quot;</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    simMarketData-&gt;setDiscountCurveNames({<span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>});</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    simMarketData-&gt;setYieldCurveTenors(<span class="stringliteral">&quot;&quot;</span>, {1 * Months, 6 * Months, 1 * Years, 2 * Years, 3 * Years, 4 * Years,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                            5 * Years, 7 * Years, 10 * Years, 15 * Years, 20 * Years, 30 * Years});</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    simMarketData-&gt;setIndices(</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>});</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    simMarketData-&gt;interpolation() = <span class="stringliteral">&quot;LogLinear&quot;</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    simMarketData-&gt;extrapolation() = <span class="stringliteral">&quot;FlatFwd&quot;</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    simMarketData-&gt;setSwapVolTerms(<span class="stringliteral">&quot;&quot;</span>, {1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 20 * Years});</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    simMarketData-&gt;setSwapVolExpiries(</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="stringliteral">&quot;&quot;</span>, {6 * Months, 1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 20 * Years});</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    simMarketData-&gt;setSwapVolKeys({<span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>});</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    simMarketData-&gt;swapVolDecayMode() = <span class="stringliteral">&quot;ForwardVariance&quot;</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    simMarketData-&gt;setSimulateSwapVols(<span class="keyword">true</span>); <span class="comment">// false;</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    simMarketData-&gt;setFxVolExpiries(<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        vector&lt;Period&gt;{1 * Months, 3 * Months, 6 * Months, 2 * Years, 3 * Years, 4 * Years, 5 * Years});</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    simMarketData-&gt;setFxVolDecayMode(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;ConstantVariance&quot;</span>));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    simMarketData-&gt;setSimulateFXVols(<span class="keyword">true</span>); <span class="comment">// false;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    simMarketData-&gt;setFxVolIsSurface(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    simMarketData-&gt;setFxVolMoneyness(vector&lt;Real&gt;{0.0});</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    simMarketData-&gt;setFxVolCcyPairs({<span class="stringliteral">&quot;EURUSD&quot;</span>, <span class="stringliteral">&quot;EURGBP&quot;</span>, <span class="stringliteral">&quot;EURCHF&quot;</span>, <span class="stringliteral">&quot;EURJPY&quot;</span>});</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    simMarketData-&gt;setFxCcyPairs({<span class="stringliteral">&quot;EURUSD&quot;</span>, <span class="stringliteral">&quot;EURGBP&quot;</span>, <span class="stringliteral">&quot;EURCHF&quot;</span>, <span class="stringliteral">&quot;EURJPY&quot;</span>});</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    simMarketData-&gt;setSimulateCapFloorVols(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    simMarketData-&gt;capFloorVolDecayMode() = <span class="stringliteral">&quot;ForwardVariance&quot;</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    simMarketData-&gt;setCapFloorVolKeys({<span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>});</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    simMarketData-&gt;setCapFloorVolExpiries(</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="stringliteral">&quot;&quot;</span>, {6 * Months, 1 * Years, 2 * Years, 3 * Years, 5 * Years, 7 * Years, 10 * Years, 15 * Years, 20 * Years});</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    simMarketData-&gt;setCapFloorVolStrikes(<span class="stringliteral">&quot;&quot;</span>, {0.00, 0.01, 0.02, 0.03, 0.04, 0.05, 0.06});</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> simMarketData;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2stresstest_8cpp_a5bf0f198605fc75af9917df5b9f926ae_icgraph.png" border="0" usemap="#atest_2stresstest_8cpp_a5bf0f198605fc75af9917df5b9f926ae_icgraph" alt=""/></div>
<map name="test_2stresstest_8cpp_a5bf0f198605fc75af9917df5b9f926ae_icgraph" id="atest_2stresstest_8cpp_a5bf0f198605fc75af9917df5b9f926ae_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,427,32"/>
<area shape="rect" href="test_2stresstest_8cpp.html#a68b22a6d6929676db6de56706bd3dc43" title=" " alt="" coords="5,5,196,32"/>
</map>
</div>

</div>
</div>
<a id="ae07c39440aa0d0a9990c7024b5dae439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae07c39440aa0d0a9990c7024b5dae439">&#9670;&nbsp;</a></span>setupStressScenarioData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::shared_ptr&lt;<a class="el" href="classore_1_1analytics_1_1_stress_test_scenario_data.html">StressTestScenarioData</a>&gt; setupStressScenarioData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2stresstest_8cpp_source.html#l00148">148</a> of file <a class="el" href="test_2stresstest_8cpp_source.html">stresstest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                                                  {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    boost::shared_ptr&lt;StressTestScenarioData&gt; stressData = boost::make_shared&lt;StressTestScenarioData&gt;();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html">StressTestScenarioData::StressTestData</a> data;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a44fbddf445b66717f5ecb2168b546cd4">label</a> = <span class="stringliteral">&quot;stresstest_1&quot;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;EUR&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;EUR&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;EUR&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                   5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;EUR&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;USD&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;USD&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;USD&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                                   5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;USD&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;GBP&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;GBP&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;GBP&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                                   5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;GBP&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;JPY&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;JPY&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;JPY&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                                   5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;JPY&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;CHF&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;CHF&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;CHF&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                   5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">discountCurveShifts</a>[<span class="stringliteral">&quot;CHF&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                                           5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                                         5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                         5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                                         5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                                         5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;CHF-LIBOR-6M&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">StressTestScenarioData::CurveShiftData</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>].shiftTenors = {6 * Months, 1 * Years, 2 * Years, 3 * Years,</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                                         5 * Years,  7 * Years, 10 * Years};</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">indexCurveShifts</a>[<span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>].shifts = {0.001, 0.002, 0.003, 0.004, 0.005, 0.006, 0.007};</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_spot_shift_data.html">StressTestScenarioData::SpotShiftData</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>].shiftType = <span class="stringliteral">&quot;Relative&quot;</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>].shiftSize = 0.01;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_spot_shift_data.html">StressTestScenarioData::SpotShiftData</a>();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>].shiftType = <span class="stringliteral">&quot;Relative&quot;</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>].shiftSize = 0.01;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_spot_shift_data.html">StressTestScenarioData::SpotShiftData</a>();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>].shiftType = <span class="stringliteral">&quot;Relative&quot;</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>].shiftSize = 0.01;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_spot_shift_data.html">StressTestScenarioData::SpotShiftData</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>].shiftType = <span class="stringliteral">&quot;Relative&quot;</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">fxShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>].shiftSize = 0.01;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_vol_shift_data.html">StressTestScenarioData::VolShiftData</a>();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>].shiftExpiries = {6 * Months, 2 * Years, 3 * Years, 5 * Years};</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURUSD&quot;</span>].shifts = {0.10, 0.11, 0.13, 0.14};</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_vol_shift_data.html">StressTestScenarioData::VolShiftData</a>();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>].shiftExpiries = {6 * Months, 2 * Years, 3 * Years, 5 * Years};</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURGBP&quot;</span>].shifts = {0.10, 0.11, 0.13, 0.14};</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_vol_shift_data.html">StressTestScenarioData::VolShiftData</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>].shiftExpiries = {6 * Months, 2 * Years, 3 * Years, 5 * Years};</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURJPY&quot;</span>].shifts = {0.10, 0.11, 0.13, 0.14};</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>] = <a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_vol_shift_data.html">StressTestScenarioData::VolShiftData</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>].shiftType = <span class="stringliteral">&quot;Absolute&quot;</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>].shiftExpiries = {6 * Months, 2 * Years, 3 * Years, 5 * Years};</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    data.<a class="code" href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">fxVolShifts</a>[<span class="stringliteral">&quot;EURCHF&quot;</span>].shifts = {0.10, 0.11, 0.13, 0.14};</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    stressData-&gt;data() = vector&lt;StressTestScenarioData::StressTestData&gt;(1, data);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> stressData;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2stresstest_8cpp_ae07c39440aa0d0a9990c7024b5dae439_icgraph.png" border="0" usemap="#atest_2stresstest_8cpp_ae07c39440aa0d0a9990c7024b5dae439_icgraph" alt=""/></div>
<map name="test_2stresstest_8cpp_ae07c39440aa0d0a9990c7024b5dae439_icgraph" id="atest_2stresstest_8cpp_ae07c39440aa0d0a9990c7024b5dae439_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,415,32"/>
<area shape="rect" href="test_2stresstest_8cpp.html#a68b22a6d6929676db6de56706bd3dc43" title=" " alt="" coords="5,5,196,32"/>
</map>
</div>

</div>
</div>
<a id="a68b22a6d6929676db6de56706bd3dc43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68b22a6d6929676db6de56706bd3dc43">&#9670;&nbsp;</a></span>BOOST_AUTO_TEST_CASE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">regression&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2stresstest_8cpp_source.html#l00246">246</a> of file <a class="el" href="test_2stresstest_8cpp_source.html">stresstest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                 {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Sensitivity Par Conversion&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    SavedSettings backup;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    Date today = Date(14, April, 2016); <span class="comment">// Settings::instance().evaluationDate();</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    Settings::instance().evaluationDate() = today;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// build model</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">string</span> baseCcy = <span class="stringliteral">&quot;EUR&quot;</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    vector&lt;string&gt; ccys;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    ccys.push_back(baseCcy);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    ccys.push_back(<span class="stringliteral">&quot;GBP&quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    ccys.push_back(<span class="stringliteral">&quot;CHF&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    ccys.push_back(<span class="stringliteral">&quot;USD&quot;</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    ccys.push_back(<span class="stringliteral">&quot;JPY&quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// Init market</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData = <a class="code" href="test_2stresstest_8cpp.html#a5bf0f198605fc75af9917df5b9f926ae">setupStressSimMarketData</a>();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// sensitivity config</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    boost::shared_ptr&lt;StressTestScenarioData&gt; stressData = <a class="code" href="test_2stresstest_8cpp.html#ae07c39440aa0d0a9990c7024b5dae439">setupStressScenarioData</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// build scenario sim market</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="test_2stresstest_8cpp.html#ab16f00faf07db72c402ce16999ab2dce">stressConv</a>();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    boost::shared_ptr&lt;analytics::ScenarioSimMarket&gt; simMarket =</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        boost::make_shared&lt;analytics::ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// build scenario factory</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// build scenario generator</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    boost::shared_ptr&lt;StressScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        boost::make_shared&lt;StressScenarioGenerator&gt;(stressData, baseScenario, simMarketData, simMarket, scenarioFactory);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    simMarket-&gt;scenarioGenerator() = scenarioGenerator;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// build portfolio</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    boost::shared_ptr&lt;EngineData&gt; engineData = boost::make_shared&lt;EngineData&gt;();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountingSwapEngine&quot;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountingCrossCurrencySwapEngine&quot;</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelier&quot;</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelierSwaptionEngine&quot;</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingFxForwardEngine&quot;</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;GarmanKohlhagen&quot;</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapModel&quot;</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapEngine&quot;</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    engineData-&gt;model(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackOrBachelier&quot;</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    engineData-&gt;engine(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackIborCouponPricer&quot;</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    boost::shared_ptr&lt;EngineFactory&gt; factory = boost::make_shared&lt;EngineFactory&gt;(engineData, simMarket);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    factory-&gt;registerBuilder(boost::make_shared&lt;SwapEngineBuilder&gt;());</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    factory-&gt;registerBuilder(boost::make_shared&lt;EuropeanSwaptionEngineBuilder&gt;());</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    factory-&gt;registerBuilder(boost::make_shared&lt;FxEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    factory-&gt;registerBuilder(boost::make_shared&lt;FxForwardEngineBuilder&gt;());</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    factory-&gt;registerBuilder(boost::make_shared&lt;CapFloorEngineBuilder&gt;());</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// boost::shared_ptr&lt;Portfolio&gt; portfolio = buildSwapPortfolio(portfolioSize, factory);</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    boost::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> <a class="codeRef" href="../ored/classore_1_1data_1_1_portfolio.html">Portfolio</a>());</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 10, 0.03, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                             <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 15, 0.02, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                             <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 20, 0.04, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                             <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>, <span class="keyword">true</span>, 1000000000.0, 0, 5, 0.01, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                             <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 10, 10, 0.03, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 2, 5, 0.03, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 3, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000.0, <span class="stringliteral">&quot;USD&quot;</span>, 11000000.0));</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 7, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000.0, <span class="stringliteral">&quot;GBP&quot;</span>, 11000000.0));</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a1f8ce589c50a9c62fc458cb91de7edf5">buildCap</a>(<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.05, 1000000.0, 0, 10, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    portfolio-&gt;add(<a class="code" href="namespacetestsuite.html#a7da40f9d57dcfec350bdd68c50ea3b5e">buildFloor</a>(<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.01, 1000000.0, 0, 10, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    portfolio-&gt;build(factory);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Portfolio size after build: &quot;</span> &lt;&lt; portfolio-&gt;size());</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// build the sensitivity analysis object</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classore_1_1analytics_1_1_stress_test.html">ore::analytics::StressTest</a> analysis(portfolio, initMarket, <span class="stringliteral">&quot;default&quot;</span>, engineData, simMarketData, stressData);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    std::map&lt;std::string, Real&gt; baseNPV = analysis.baseNPV();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    std::map&lt;std::pair&lt;std::string, std::string&gt;, Real&gt; shiftedNPV = analysis.shiftedNPV();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    QL_REQUIRE(shiftedNPV.size() &gt; 0, <span class="stringliteral">&quot;no shifted results&quot;</span>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keyword">struct </span>Results {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordtype">string</span> id;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordtype">string</span> label;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        Real shift;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    };</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    std::vector&lt;Results&gt; cachedResults = {{<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, -2487.75},</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                          {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 629406},</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                          {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 599846},</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                          {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 1.11005e+06},</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                          {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 186736},</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                          {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 13623.1},</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                          {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 5041.52},</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                          {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 748160},</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                                          {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 1.21724e+06},</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                          {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;stresstest_1&quot;</span>, 1175.5}};</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    std::map&lt;pair&lt;string, string&gt;, Real&gt; stressMap;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">for</span> (Size i = 0; i &lt; cachedResults.size(); ++i) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        pair&lt;string, string&gt; p(cachedResults[i].<span class="keywordtype">id</span>, cachedResults[i].label);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        stressMap[p] = cachedResults[i].shift;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    Real tolerance = 0.01;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    Size count = 0;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> data : shiftedNPV) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        pair&lt;string, string&gt; p = data.first;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordtype">string</span> <span class="keywordtype">id</span> = data.first.first;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        Real npv = data.second;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        QL_REQUIRE(baseNPV.find(<span class="keywordtype">id</span>) != baseNPV.end(), <span class="stringliteral">&quot;base npv not found for trade &quot;</span> &lt;&lt; <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        Real base = baseNPV[id];</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        Real delta = npv - base;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (fabs(delta) &gt; 0.0) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            count++;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            QL_REQUIRE(stressMap.find(p) != stressMap.end(),</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                       <span class="stringliteral">&quot;pair (&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;) not found in sensi map&quot;</span>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            BOOST_CHECK_MESSAGE(fabs(delta - stressMap[p]) &lt; tolerance ||</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                    fabs((delta - stressMap[p]) / delta) &lt; tolerance,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                <span class="stringliteral">&quot;stress test regression failed for pair (&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; p.second</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                                                           &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; delta &lt;&lt; <span class="stringliteral">&quot; vs &quot;</span> &lt;&lt; stressMap[p]);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    BOOST_CHECK_MESSAGE(count == cachedResults.size(), <span class="stringliteral">&quot;number of non-zero stress impacts (&quot;</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                                           &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;) do not match regression data (&quot;</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                                           &lt;&lt; cachedResults.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    IndexManager::instance().clearHistories();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2stresstest_8cpp_a68b22a6d6929676db6de56706bd3dc43_cgraph.png" border="0" usemap="#atest_2stresstest_8cpp_a68b22a6d6929676db6de56706bd3dc43_cgraph" alt=""/></div>
<map name="test_2stresstest_8cpp_a68b22a6d6929676db6de56706bd3dc43_cgraph" id="atest_2stresstest_8cpp_a68b22a6d6929676db6de56706bd3dc43_cgraph">
<area shape="rect" title=" " alt="" coords="5,265,196,291"/>
<area shape="rect" href="classore_1_1analytics_1_1_stress_test.html#a5bace237b2c1e45a74278eef573a487b" title="Return base NPV by trade, before shift." alt="" coords="250,5,421,47"/>
<area shape="rect" href="namespacetestsuite.html#a1f8ce589c50a9c62fc458cb91de7edf5" title=" " alt="" coords="270,71,401,98"/>
<area shape="rect" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e" title=" " alt="" coords="254,173,417,215"/>
<area shape="rect" href="namespacetestsuite.html#a7da40f9d57dcfec350bdd68c50ea3b5e" title=" " alt="" coords="267,122,403,149"/>
<area shape="rect" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14" title=" " alt="" coords="255,239,415,266"/>
<area shape="rect" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6" title=" " alt="" coords="485,290,623,317"/>
<area shape="rect" href="test_2stresstest_8cpp.html#ae07c39440aa0d0a9990c7024b5dae439" title=" " alt="" coords="250,341,421,367"/>
<area shape="rect" href="test_2stresstest_8cpp.html#a5bf0f198605fc75af9917df5b9f926ae" title=" " alt="" coords="244,391,427,418"/>
<area shape="rect" href="classore_1_1analytics_1_1_stress_test.html#af76140d841b6fcae92ac889d1a76251a" title="Return shifted NPVs by trade and scenario." alt="" coords="250,443,421,484"/>
<area shape="rect" href="test_2stresstest_8cpp.html#ab16f00faf07db72c402ce16999ab2dce" title=" " alt="" coords="292,509,379,535"/>
<area shape="rect" href="namespacetestsuite.html#ab38d02b7504f439bd61f6111dd99332a" title=" " alt="" coords="475,87,633,114"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga56e050afc6767f54987f481aa229c7df" title=" " alt="" coords="681,189,812,215"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#gafe3e788597594ce7415b226c330fe3be" title=" " alt="" coords="513,189,595,215"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data_html_a5aed5a15c054ee86d28352f1a168a7ae"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a5aed5a15c054ee86d28352f1a168a7ae">ore::analytics::StressTestScenarioData::StressTestData::fxVolShifts</a></div><div class="ttdeci">map&lt; string, VolShiftData &gt; fxVolShifts</div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00083">stressscenariodata.hpp:83</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a1f8ce589c50a9c62fc458cb91de7edf5"><div class="ttname"><a href="namespacetestsuite.html#a1f8ce589c50a9c62fc458cb91de7edf5">testsuite::buildCap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCap(string id, string ccy, string longShort, Real capRate, Real notional, int start, Size term, string floatFreq, string floatDC, string index)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00244">testportfolio.cpp:244</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a2ace8fd4987982d98b9f2a4c441d9f9e"><div class="ttname"><a href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">testsuite::buildEuropeanSwaption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildEuropeanSwaption(string id, string longShort, string ccy, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index, string cashPhysical, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00077">testportfolio.cpp:77</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_stress_test_html"><div class="ttname"><a href="classore_1_1analytics_1_1_stress_test.html">ore::analytics::StressTest</a></div><div class="ttdoc">Stress Test Analysis.</div><div class="ttdef"><b>Definition:</b> <a href="stresstest_8hpp_source.html#l00055">stresstest.hpp:55</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data_html_a44fbddf445b66717f5ecb2168b546cd4"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a44fbddf445b66717f5ecb2168b546cd4">ore::analytics::StressTestScenarioData::StressTestData::label</a></div><div class="ttdeci">string label</div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00078">stressscenariodata.hpp:78</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_scenario_sim_market_parameters_html"><div class="ttname"><a href="classore_1_1analytics_1_1_scenario_sim_market_parameters.html">ore::analytics::ScenarioSimMarketParameters</a></div><div class="ttdoc">ScenarioSimMarket description.</div><div class="ttdef"><b>Definition:</b> <a href="scenariosimmarketparameters_8hpp_source.html#l00047">scenariosimmarketparameters.hpp:47</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data_html_aca10ed2d16ee4898db635ca85b373c9a"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#aca10ed2d16ee4898db635ca85b373c9a">ore::analytics::StressTestScenarioData::StressTestData::indexCurveShifts</a></div><div class="ttdeci">map&lt; string, CurveShiftData &gt; indexCurveShifts</div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00080">stressscenariodata.hpp:80</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_conventions_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_conventions.html">ore::data::Conventions</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data_html_a624526674302ee763782dbf5b5ead049"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a624526674302ee763782dbf5b5ead049">ore::analytics::StressTestScenarioData::StressTestData::fxShifts</a></div><div class="ttdeci">map&lt; string, SpotShiftData &gt; fxShifts</div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00082">stressscenariodata.hpp:82</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a065f2919a7ee7254653afd562b975a14"><div class="ttname"><a href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">testsuite::buildFxOption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildFxOption(string id, string longShort, string putCall, Size expiry, string boughtCcy, Real boughtAmount, string soldCcy, Real soldAmount, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00175">testportfolio.cpp:175</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_spot_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_spot_shift_data.html">ore::analytics::StressTestScenarioData::SpotShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00052">stressscenariodata.hpp:52</a></div></div>
<div class="ttc" id="atest_2stresstest_8cpp_html_a5bf0f198605fc75af9917df5b9f926ae"><div class="ttname"><a href="test_2stresstest_8cpp.html#a5bf0f198605fc75af9917df5b9f926ae">setupStressSimMarketData</a></div><div class="ttdeci">boost::shared_ptr&lt; analytics::ScenarioSimMarketParameters &gt; setupStressSimMarketData()</div><div class="ttdef"><b>Definition:</b> <a href="test_2stresstest_8cpp_source.html#l00108">stresstest.cpp:108</a></div></div>
<div class="ttc" id="atest_2stresstest_8cpp_html_ae07c39440aa0d0a9990c7024b5dae439"><div class="ttname"><a href="test_2stresstest_8cpp.html#ae07c39440aa0d0a9990c7024b5dae439">setupStressScenarioData</a></div><div class="ttdeci">boost::shared_ptr&lt; StressTestScenarioData &gt; setupStressScenarioData()</div><div class="ttdef"><b>Definition:</b> <a href="test_2stresstest_8cpp_source.html#l00148">stresstest.cpp:148</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a7da40f9d57dcfec350bdd68c50ea3b5e"><div class="ttname"><a href="namespacetestsuite.html#a7da40f9d57dcfec350bdd68c50ea3b5e">testsuite::buildFloor</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildFloor(string id, string ccy, string longShort, Real floorRate, Real notional, int start, Size term, string floatFreq, string floatDC, string index)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00250">testportfolio.cpp:250</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_vol_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_vol_shift_data.html">ore::analytics::StressTestScenarioData::VolShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00057">stressscenariodata.hpp:57</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data_html_a0d40d8203375404e5e098c2006da0eb1"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html#a0d40d8203375404e5e098c2006da0eb1">ore::analytics::StressTestScenarioData::StressTestData::discountCurveShifts</a></div><div class="ttdeci">map&lt; string, CurveShiftData &gt; discountCurveShifts</div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00079">stressscenariodata.hpp:79</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_portfolio_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_portfolio.html">ore::data::Portfolio</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_curve_shift_data.html">ore::analytics::StressTestScenarioData::CurveShiftData</a></div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00046">stressscenariodata.hpp:46</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a0cf55200a1ba13d942044fce914bfbf6"><div class="ttname"><a href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">testsuite::buildSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00041">testportfolio.cpp:41</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_swap_index_convention_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_swap_index_convention.html">ore::data::SwapIndexConvention</a></div></div>
<div class="ttc" id="atest_2stresstest_8cpp_html_ab16f00faf07db72c402ce16999ab2dce"><div class="ttname"><a href="test_2stresstest_8cpp.html#ab16f00faf07db72c402ce16999ab2dce">stressConv</a></div><div class="ttdeci">boost::shared_ptr&lt; data::Conventions &gt; stressConv()</div><div class="ttdef"><b>Definition:</b> <a href="test_2stresstest_8cpp_source.html#l00075">stresstest.cpp:75</a></div></div>
<div class="ttc" id="astructore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data_html"><div class="ttname"><a href="structore_1_1analytics_1_1_stress_test_scenario_data_1_1_stress_test_data.html">ore::analytics::StressTestScenarioData::StressTestData</a></div><div class="ttdef"><b>Definition:</b> <a href="stressscenariodata_8hpp_source.html#l00077">stressscenariodata.hpp:77</a></div></div>
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.8.20
</small></address>
</body>
</html>
