<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREAnalytics: ParSensitivityAnalysisManualTest Class Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oreaextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-analytics@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.10</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetestsuite.html">testsuite</a></li><li class="navelem"><a class="el" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html">ParSensitivityAnalysisManualTest</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classtestsuite_1_1_par_sensitivity_analysis_manual_test-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ParSensitivityAnalysisManualTest Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Par sensitivity analysis comparison against manual bump.  
 <a href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="parsensitivityanalysismanual_8hpp_source.html">test/parsensitivityanalysismanual.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for ParSensitivityAnalysisManualTest:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classtestsuite_1_1_par_sensitivity_analysis_manual_test__coll__graph.png" border="0" usemap="#a_par_sensitivity_analysis_manual_test_coll__map" alt="Collaboration graph"/></div>
<map name="a_par_sensitivity_analysis_manual_test_coll__map" id="a_par_sensitivity_analysis_manual_test_coll__map">
<area shape="rect" title="Par sensitivity analysis comparison against manual bump." alt="" coords="5,5,228,75"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a42cf0fd677773cdd75e7c048ed01eeb1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1">testParSwapBenchmark</a> ()</td></tr>
<tr class="memdesc:a42cf0fd677773cdd75e7c048ed01eeb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Benchmark par conversion against brute-force bump on the par instruments ("None" observation mode)  <a href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a42cf0fd677773cdd75e7c048ed01eeb1">More...</a><br /></td></tr>
<tr class="separator:a42cf0fd677773cdd75e7c048ed01eeb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599e62dc00f2d26201f2975de3401b6d"><td class="memItemLeft" align="right" valign="top">static boost::unit_test_framework::test_suite *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtestsuite_1_1_par_sensitivity_analysis_manual_test.html#a599e62dc00f2d26201f2975de3401b6d">suite</a> ()</td></tr>
<tr class="separator:a599e62dc00f2d26201f2975de3401b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Par sensitivity analysis comparison against manual bump. </p>

<p class="definition">Definition at line <a class="el" href="parsensitivityanalysismanual_8hpp_source.html#l00033">33</a> of file <a class="el" href="parsensitivityanalysismanual_8hpp_source.html">parsensitivityanalysismanual.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a42cf0fd677773cdd75e7c048ed01eeb1" name="a42cf0fd677773cdd75e7c048ed01eeb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42cf0fd677773cdd75e7c048ed01eeb1">&#9670;&#160;</a></span>testParSwapBenchmark()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void testParSwapBenchmark </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Benchmark par conversion against brute-force bump on the par instruments ("None" observation mode) </p>

<p class="definition">Definition at line <a class="el" href="parsensitivityanalysismanual_8cpp_source.html#l00167">167</a> of file <a class="el" href="parsensitivityanalysismanual_8cpp_source.html">parsensitivityanalysismanual.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  167</span>                                                            {</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing swap par sensitivities against manual bump of par curve instruments&quot;</span>);</div>
<div class="line"><span class="lineno">  170</span>    SavedSettings backup;</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><span class="lineno">  173</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> om = ObservationMode::Mode::None;</div>
<div class="line"><span class="lineno">  174</span>    ObservationMode::instance().setMode(om);</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    Date today = Date(14, April, 2016); <span class="comment">// Settings::instance().evaluationDate();</span></div>
<div class="line"><span class="lineno">  177</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno">  178</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>    <span class="comment">// build model</span></div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordtype">string</span> baseCcy = <span class="stringliteral">&quot;EUR&quot;</span>;</div>
<div class="line"><span class="lineno">  182</span>    vector&lt;string&gt; ccys;</div>
<div class="line"><span class="lineno">  183</span>    ccys.push_back(baseCcy);</div>
<div class="line"><span class="lineno">  184</span>    ccys.push_back(<span class="stringliteral">&quot;GBP&quot;</span>);</div>
<div class="line"><span class="lineno">  185</span>    ccys.push_back(<span class="stringliteral">&quot;CHF&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>    ccys.push_back(<span class="stringliteral">&quot;USD&quot;</span>);</div>
<div class="line"><span class="lineno">  187</span>    ccys.push_back(<span class="stringliteral">&quot;JPY&quot;</span>);</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno">  190</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarketParCurves&gt;(today);</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno">  193</span>    boost::shared_ptr&lt;ore::analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno">  194</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#a5d3a5e48cec33ea02c24791b2593cae1">TestConfigurationObjects::setupSimMarketData</a>(<span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno">  197</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData =</div>
<div class="line"><span class="lineno">  198</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#ad3905794b6d3b29161c6cd00aa7865df">TestConfigurationObjects::setupSensitivityScenarioData</a>(<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  199</span>    <span class="comment">// build porfolio</span></div>
<div class="line"><span class="lineno">  200</span>    boost::shared_ptr&lt;EngineData&gt; engineData = boost::make_shared&lt;EngineData&gt;();</div>
<div class="line"><span class="lineno">  201</span>    engineData-&gt;model(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  202</span>    engineData-&gt;engine(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountingSwapEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  203</span>    engineData-&gt;model(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  204</span>    engineData-&gt;engine(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountingCrossCurrencySwapEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  205</span>    engineData-&gt;model(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelier&quot;</span>;</div>
<div class="line"><span class="lineno">  206</span>    engineData-&gt;engine(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelierSwaptionEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  207</span>    engineData-&gt;model(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  208</span>    engineData-&gt;engine(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingFxForwardEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  209</span>    engineData-&gt;model(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;GarmanKohlhagen&quot;</span>;</div>
<div class="line"><span class="lineno">  210</span>    engineData-&gt;engine(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  211</span>    engineData-&gt;model(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapModel&quot;</span>;</div>
<div class="line"><span class="lineno">  212</span>    engineData-&gt;engine(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  213</span>    engineData-&gt;model(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackOrBachelier&quot;</span>;</div>
<div class="line"><span class="lineno">  214</span>    engineData-&gt;engine(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackIborCouponPricer&quot;</span>;</div>
<div class="line"><span class="lineno">  215</span>    engineData-&gt;model(<span class="stringliteral">&quot;CreditDefaultSwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  216</span>    engineData-&gt;engine(<span class="stringliteral">&quot;CreditDefaultSwap&quot;</span>) = <span class="stringliteral">&quot;MidPointCdsEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>    engineData-&gt;model(<span class="stringliteral">&quot;IndexCreditDefaultSwapOption&quot;</span>) = <span class="stringliteral">&quot;Black&quot;</span>;</div>
<div class="line"><span class="lineno">  219</span>    engineData-&gt;engine(<span class="stringliteral">&quot;IndexCreditDefaultSwapOption&quot;</span>) = <span class="stringliteral">&quot;BlackIndexCdsOptionEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  220</span>    map&lt;string, string&gt; engineParamMap1;</div>
<div class="line"><span class="lineno">  221</span>    engineParamMap1[<span class="stringliteral">&quot;Curve&quot;</span>] = <span class="stringliteral">&quot;Underlying&quot;</span>;</div>
<div class="line"><span class="lineno">  222</span>    engineData-&gt;engineParameters(<span class="stringliteral">&quot;IndexCreditDefaultSwapOption&quot;</span>) = engineParamMap1;</div>
<div class="line"><span class="lineno">  223</span> </div>
<div class="line"><span class="lineno">  224</span>    engineData-&gt;model(<span class="stringliteral">&quot;IndexCreditDefaultSwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  225</span>    engineData-&gt;engine(<span class="stringliteral">&quot;IndexCreditDefaultSwap&quot;</span>) = <span class="stringliteral">&quot;MidPointIndexCdsEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  226</span>    map&lt;string, string&gt; engineParamMap2;</div>
<div class="line"><span class="lineno">  227</span>    engineParamMap2[<span class="stringliteral">&quot;Curve&quot;</span>] = <span class="stringliteral">&quot;Underlying&quot;</span>;</div>
<div class="line"><span class="lineno">  228</span>    engineData-&gt;engineParameters(<span class="stringliteral">&quot;IndexCreditDefaultSwap&quot;</span>) = engineParamMap2;</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    engineData-&gt;model(<span class="stringliteral">&quot;CMS&quot;</span>) = <span class="stringliteral">&quot;LinearTSR&quot;</span>;</div>
<div class="line"><span class="lineno">  231</span>    engineData-&gt;engine(<span class="stringliteral">&quot;CMS&quot;</span>) = <span class="stringliteral">&quot;LinearTSRPricer&quot;</span>;</div>
<div class="line"><span class="lineno">  232</span>    map&lt;string, string&gt; engineparams;</div>
<div class="line"><span class="lineno">  233</span>    engineparams[<span class="stringliteral">&quot;MeanReversion&quot;</span>] = <span class="stringliteral">&quot;0.0&quot;</span>;</div>
<div class="line"><span class="lineno">  234</span>    engineparams[<span class="stringliteral">&quot;Policy&quot;</span>] = <span class="stringliteral">&quot;RateBound&quot;</span>;</div>
<div class="line"><span class="lineno">  235</span>    engineparams[<span class="stringliteral">&quot;LowerRateBoundNormal&quot;</span>] = <span class="stringliteral">&quot;-2.0000&quot;</span>;</div>
<div class="line"><span class="lineno">  236</span>    engineparams[<span class="stringliteral">&quot;UpperRateBoundNormal&quot;</span>] = <span class="stringliteral">&quot;2.0000&quot;</span>;</div>
<div class="line"><span class="lineno">  237</span>    engineData-&gt;engineParameters(<span class="stringliteral">&quot;CMS&quot;</span>) = engineparams;</div>
<div class="line"><span class="lineno">  238</span>    engineData-&gt;model(<span class="stringliteral">&quot;SyntheticCDO&quot;</span>) = <span class="stringliteral">&quot;GaussCopula&quot;</span>;</div>
<div class="line"><span class="lineno">  239</span>    engineData-&gt;engine(<span class="stringliteral">&quot;SyntheticCDO&quot;</span>) = <span class="stringliteral">&quot;Bucketing&quot;</span>;</div>
<div class="line"><span class="lineno">  240</span>    map&lt;string, string&gt; modelParamMap3;</div>
<div class="line"><span class="lineno">  241</span>    map&lt;string, string&gt; engineParamMap3;</div>
<div class="line"><span class="lineno">  242</span>    modelParamMap3[<span class="stringliteral">&quot;correlation&quot;</span>] = <span class="stringliteral">&quot;0.0&quot;</span>;</div>
<div class="line"><span class="lineno">  243</span>    modelParamMap3[<span class="stringliteral">&quot;min&quot;</span>] = <span class="stringliteral">&quot;-5.0&quot;</span>;</div>
<div class="line"><span class="lineno">  244</span>    modelParamMap3[<span class="stringliteral">&quot;max&quot;</span>] = <span class="stringliteral">&quot;5.0&quot;</span>;</div>
<div class="line"><span class="lineno">  245</span>    modelParamMap3[<span class="stringliteral">&quot;steps&quot;</span>] = <span class="stringliteral">&quot;64&quot;</span>;</div>
<div class="line"><span class="lineno">  246</span>    engineParamMap3[<span class="stringliteral">&quot;buckets&quot;</span>] = <span class="stringliteral">&quot;200&quot;</span>;</div>
<div class="line"><span class="lineno">  247</span>    engineParamMap3[<span class="stringliteral">&quot;homogeneousPoolWhenJustified&quot;</span>] = <span class="stringliteral">&quot;N&quot;</span>;</div>
<div class="line"><span class="lineno">  248</span>    engineData-&gt;modelParameters(<span class="stringliteral">&quot;SyntheticCDO&quot;</span>) = modelParamMap3;</div>
<div class="line"><span class="lineno">  249</span>    engineData-&gt;engineParameters(<span class="stringliteral">&quot;SyntheticCDO&quot;</span>) = engineParamMap3;</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    engineData-&gt;model(<span class="stringliteral">&quot;EquityOption&quot;</span>) = <span class="stringliteral">&quot;BlackScholesMerton&quot;</span>;</div>
<div class="line"><span class="lineno">  252</span>    engineData-&gt;engine(<span class="stringliteral">&quot;EquityOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    std::vector&lt;boost::shared_ptr&lt;EngineBuilder&gt;&gt; builders;</div>
<div class="line"><span class="lineno">  255</span>    <span class="comment">// builders.push_back(boost::make_shared&lt;oreplus::data::MidPointIndexCdsEngineBuilder&gt;());</span></div>
<div class="line"><span class="lineno">  256</span>    <span class="comment">// builders.push_back(boost::make_shared&lt;oreplus::data::BlackIndexCdsOptionEngineBuilder&gt;());</span></div>
<div class="line"><span class="lineno">  257</span>    builders.push_back(boost::make_shared&lt;ore::data::GaussCopulaBucketingCdoEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    boost::shared_ptr&lt;EngineFactory&gt; factory = registerBuilders(engineData, initMarket);</div>
<div class="line"><span class="lineno">  260</span>    boost::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> Portfolio());</div>
<div class="line"><span class="lineno">  261</span>    boost::shared_ptr&lt;Conventions&gt; conventions = InstrumentConventions::instance().conventions();</div>
<div class="line"><span class="lineno">  262</span>    boost::shared_ptr&lt;IRSwapConvention&gt; eurConv =</div>
<div class="line"><span class="lineno">  263</span>        boost::dynamic_pointer_cast&lt;IRSwapConvention&gt;(conventions-&gt;get(<span class="stringliteral">&quot;EUR-6M-SWAP-CONVENTIONS&quot;</span>));</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordtype">string</span> eurIdx = <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>;</div>
<div class="line"><span class="lineno">  265</span>    Period eurFloatTenor = initMarket-&gt;iborIndex(eurIdx)-&gt;tenor();</div>
<div class="line"><span class="lineno">  266</span>    boost::shared_ptr&lt;IRSwapConvention&gt; usdConv =</div>
<div class="line"><span class="lineno">  267</span>        boost::dynamic_pointer_cast&lt;IRSwapConvention&gt;(conventions-&gt;get(<span class="stringliteral">&quot;USD-6M-SWAP-CONVENTIONS&quot;</span>));</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordtype">string</span> usdIdx = <span class="stringliteral">&quot;USD-LIBOR-6M&quot;</span>;</div>
<div class="line"><span class="lineno">  269</span>    Period usdFloatTenor = initMarket-&gt;iborIndex(usdIdx)-&gt;tenor();</div>
<div class="line"><span class="lineno">  270</span>    boost::shared_ptr&lt;IRSwapConvention&gt; jpyConv =</div>
<div class="line"><span class="lineno">  271</span>        boost::dynamic_pointer_cast&lt;IRSwapConvention&gt;(conventions-&gt;get(<span class="stringliteral">&quot;JPY-6M-SWAP-CONVENTIONS&quot;</span>));</div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordtype">string</span> jpyIdx = <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>;</div>
<div class="line"><span class="lineno">  273</span>    Period jpyFloatTenor = initMarket-&gt;iborIndex(jpyIdx)-&gt;tenor();</div>
<div class="line"><span class="lineno">  274</span>    boost::shared_ptr&lt;CrossCcyBasisSwapConvention&gt; chfBasisConv =</div>
<div class="line"><span class="lineno">  275</span>        boost::dynamic_pointer_cast&lt;CrossCcyBasisSwapConvention&gt;(conventions-&gt;get(<span class="stringliteral">&quot;CHF-XCCY-BASIS-CONVENTIONS&quot;</span>));</div>
<div class="line"><span class="lineno">  276</span>    boost::shared_ptr&lt;CdsConvention&gt; cdsConv =</div>
<div class="line"><span class="lineno">  277</span>        boost::dynamic_pointer_cast&lt;CdsConvention&gt;(conventions-&gt;get(<span class="stringliteral">&quot;CDS-STANDARD-CONVENTIONS&quot;</span>));</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordtype">string</span> chfIdx = chfBasisConv-&gt;spreadIndexName();</div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordtype">string</span> otherIdx = chfBasisConv-&gt;flatIndexName();</div>
<div class="line"><span class="lineno">  281</span>    Period chfFloatTenor = initMarket-&gt;iborIndex(chfIdx)-&gt;tenor();</div>
<div class="line"><span class="lineno">  282</span>    Period otherFloatTenor = initMarket-&gt;iborIndex(otherIdx)-&gt;tenor();</div>
<div class="line"><span class="lineno">  283</span> </div>
<div class="line"><span class="lineno">  284</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a74aa42fbcb9b7b5719157f3e5d5c5758">buildSwap</a>(</div>
<div class="line"><span class="lineno">  285</span>        <span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 10, 0.02, 0.00,</div>
<div class="line"><span class="lineno">  286</span>        ore::data::to_string(Period(eurConv-&gt;fixedFrequency())), ore::data::to_string(eurConv-&gt;fixedDayCounter()),</div>
<div class="line"><span class="lineno">  287</span>        ore::data::to_string(eurFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, eurIdx, eurConv-&gt;fixedCalendar(),</div>
<div class="line"><span class="lineno">  288</span>        initMarket-&gt;iborIndex(eurIdx)-&gt;fixingDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  289</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a74aa42fbcb9b7b5719157f3e5d5c5758">buildSwap</a>(</div>
<div class="line"><span class="lineno">  290</span>        <span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 15, 0.03, 0.00,</div>
<div class="line"><span class="lineno">  291</span>        ore::data::to_string(Period(usdConv-&gt;fixedFrequency())), ore::data::to_string(usdConv-&gt;fixedDayCounter()),</div>
<div class="line"><span class="lineno">  292</span>        ore::data::to_string(usdFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, usdIdx, usdConv-&gt;fixedCalendar(),</div>
<div class="line"><span class="lineno">  293</span>        initMarket-&gt;iborIndex(usdIdx)-&gt;fixingDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  294</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a42359c43fde5ca54a8172a9c9a0dc7a5">buildCap</a>(</div>
<div class="line"><span class="lineno">  295</span>        <span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.02, 1000000.0, 0, 10, ore::data::to_string(eurFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, eurIdx,</div>
<div class="line"><span class="lineno">  296</span>        eurConv-&gt;fixedCalendar(), initMarket-&gt;iborIndex(eurIdx)-&gt;fixingDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  297</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a51b621a66b133e2a519258f56aaa222e">buildFloor</a>(</div>
<div class="line"><span class="lineno">  298</span>        <span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.03, 1000000.0, 0, 10, ore::data::to_string(usdFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, usdIdx,</div>
<div class="line"><span class="lineno">  299</span>        usdConv-&gt;fixedCalendar(), initMarket-&gt;iborIndex(usdIdx)-&gt;fixingDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  300</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a74aa42fbcb9b7b5719157f3e5d5c5758">buildSwap</a>(</div>
<div class="line"><span class="lineno">  301</span>        <span class="stringliteral">&quot;3_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">false</span>, 10000000.0, 1, 12, 0.025, 0.00,</div>
<div class="line"><span class="lineno">  302</span>        ore::data::to_string(Period(eurConv-&gt;fixedFrequency())), ore::data::to_string(eurConv-&gt;fixedDayCounter()),</div>
<div class="line"><span class="lineno">  303</span>        ore::data::to_string(eurFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, eurIdx, eurConv-&gt;fixedCalendar(),</div>
<div class="line"><span class="lineno">  304</span>        initMarket-&gt;iborIndex(eurIdx)-&gt;fixingDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  305</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#ab86fae4ea0ab03ec87480eea24e94100">buildCrossCcyBasisSwap</a>(</div>
<div class="line"><span class="lineno">  306</span>        <span class="stringliteral">&quot;4_XCCY_SWAP&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, 10000000, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000, 0, 15, 0.0000, 0.0000, ore::data::to_string(chfFloatTenor),</div>
<div class="line"><span class="lineno">  307</span>        <span class="stringliteral">&quot;A360&quot;</span>, chfIdx, chfBasisConv-&gt;settlementCalendar(), ore::data::to_string(otherFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, otherIdx,</div>
<div class="line"><span class="lineno">  308</span>        chfBasisConv-&gt;settlementCalendar(), chfBasisConv-&gt;settlementDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  309</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#ab86fae4ea0ab03ec87480eea24e94100">buildCrossCcyBasisSwap</a>(</div>
<div class="line"><span class="lineno">  310</span>        <span class="stringliteral">&quot;5_XCCY_SWAP_WithPrincipal&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, 10000000, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000, 0, 15, 0.0000, 0.0000,</div>
<div class="line"><span class="lineno">  311</span>        ore::data::to_string(chfFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, chfIdx, chfBasisConv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno">  312</span>        ore::data::to_string(otherFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, otherIdx, chfBasisConv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno">  313</span>        chfBasisConv-&gt;settlementDays(), <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  314</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a74aa42fbcb9b7b5719157f3e5d5c5758">buildSwap</a>(</div>
<div class="line"><span class="lineno">  315</span>        <span class="stringliteral">&quot;6_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>, <span class="keyword">true</span>, 1000000000.0, 0, 10, 0.005, 0.00,</div>
<div class="line"><span class="lineno">  316</span>        ore::data::to_string(Period(jpyConv-&gt;fixedFrequency())), ore::data::to_string(jpyConv-&gt;fixedDayCounter()),</div>
<div class="line"><span class="lineno">  317</span>        ore::data::to_string(jpyFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, jpyIdx, jpyConv-&gt;fixedCalendar(),</div>
<div class="line"><span class="lineno">  318</span>        initMarket-&gt;iborIndex(jpyIdx)-&gt;fixingDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  319</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#ab86fae4ea0ab03ec87480eea24e94100">buildCrossCcyBasisSwap</a>(</div>
<div class="line"><span class="lineno">  320</span>        <span class="stringliteral">&quot;7_XCCY_SWAP_OffMarket&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000, <span class="stringliteral">&quot;CHF&quot;</span>, 10500000, 0, 15, 0.0000, 0.0010,</div>
<div class="line"><span class="lineno">  321</span>        ore::data::to_string(chfFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, chfIdx, chfBasisConv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno">  322</span>        ore::data::to_string(otherFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, otherIdx, chfBasisConv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno">  323</span>        chfBasisConv-&gt;settlementDays(), <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  324</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#ab86fae4ea0ab03ec87480eea24e94100">buildCrossCcyBasisSwap</a>(</div>
<div class="line"><span class="lineno">  325</span>        <span class="stringliteral">&quot;8_XCCY_SWAP_RESET&quot;</span>, <span class="stringliteral">&quot;CHF&quot;</span>, 10000000, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000, 0, 15, 0.0000, 0.0000,</div>
<div class="line"><span class="lineno">  326</span>        ore::data::to_string(chfFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, chfIdx, chfBasisConv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno">  327</span>        ore::data::to_string(otherFloatTenor), <span class="stringliteral">&quot;A360&quot;</span>, otherIdx, chfBasisConv-&gt;settlementCalendar(),</div>
<div class="line"><span class="lineno">  328</span>        chfBasisConv-&gt;settlementDays(), <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  329</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(<span class="stringliteral">&quot;9_CDS_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 15, 0.4,</div>
<div class="line"><span class="lineno">  330</span>                                          0.009, ore::data::to_string(Period(cdsConv-&gt;frequency())),</div>
<div class="line"><span class="lineno">  331</span>                                          ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  332</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  333</span>        <span class="stringliteral">&quot;9_CDS_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 15, 0.4, 0.009,</div>
<div class="line"><span class="lineno">  334</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  335</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  336</span>        <span class="stringliteral">&quot;10_CDS_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 10, 0.4, 0.001,</div>
<div class="line"><span class="lineno">  337</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  338</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  339</span>        <span class="stringliteral">&quot;10_CDS_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 10, 0.4, 0.001,</div>
<div class="line"><span class="lineno">  340</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  341</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  342</span>        <span class="stringliteral">&quot;11_CDS_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 5, 0.4, 0.001,</div>
<div class="line"><span class="lineno">  343</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  344</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(<span class="stringliteral">&quot;11_CDS_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 5, 0.4,</div>
<div class="line"><span class="lineno">  345</span>                                          0.001, ore::data::to_string(Period(cdsConv-&gt;frequency())),</div>
<div class="line"><span class="lineno">  346</span>                                          ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  347</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(<span class="stringliteral">&quot;12_CDS_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 2, 0.4,</div>
<div class="line"><span class="lineno">  348</span>                                          0.004, ore::data::to_string(Period(cdsConv-&gt;frequency())),</div>
<div class="line"><span class="lineno">  349</span>                                          ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  350</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  351</span>        <span class="stringliteral">&quot;12_CDS_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 2, 0.4, 0.001,</div>
<div class="line"><span class="lineno">  352</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  353</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  354</span>        <span class="stringliteral">&quot;13_CDS_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="stringliteral">&quot;dc&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 15, 0.4, 0.001,</div>
<div class="line"><span class="lineno">  355</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  356</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">buildCreditDefaultSwap</a>(</div>
<div class="line"><span class="lineno">  357</span>        <span class="stringliteral">&quot;13_CDS_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="keyword">true</span>, 10000000, 0, 15, 0.4, 0.001,</div>
<div class="line"><span class="lineno">  358</span>        ore::data::to_string(Period(cdsConv-&gt;frequency())), ore::data::to_string(cdsConv-&gt;dayCounter())));</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    vector&lt;string&gt; names = {<span class="stringliteral">&quot;dc&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, <span class="stringliteral">&quot;dc3&quot;</span>};</div>
<div class="line"><span class="lineno">  361</span>    vector&lt;string&gt; indexCcys = {<span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>};</div>
<div class="line"><span class="lineno">  362</span>    vector&lt;Real&gt; notionals = {3000000, 3000000, 3000000};</div>
<div class="line"><span class="lineno">  363</span>    <span class="comment">// portfolio-&gt;add(buildIndexCdsOption(&quot;14_IndexCDSOption_USD&quot;, &quot;dc&quot;, names, &quot;Long&quot;, &quot;USD&quot;,</span></div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">// indexCcys, true, notionals, notional, 1, 4,</span></div>
<div class="line"><span class="lineno">  365</span>    <span class="comment">//                                                         0.4, 0.001,</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="comment">//                                                         ore::data::to_string(Period(cdsConv-&gt;frequency())),</span></div>
<div class="line"><span class="lineno">  367</span>    <span class="comment">//                                                        ore::data::to_string(cdsConv-&gt;dayCounter()), &quot;Physical&quot;));</span></div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>    vector&lt;string&gt; names2(1, <span class="stringliteral">&quot;dc2&quot;</span>);</div>
<div class="line"><span class="lineno">  370</span>    vector&lt;string&gt; indexCcys2(1, <span class="stringliteral">&quot;EUR&quot;</span>);</div>
<div class="line"><span class="lineno">  371</span>    vector&lt;Real&gt; notionals2(1, 10000000.0);</div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">// portfolio-&gt;add(buildIndexCdsOption(&quot;15_IndexCDSOption_EUR&quot;, &quot;dc2&quot;, names2, &quot;Long&quot;, &quot;EUR&quot;,</span></div>
<div class="line"><span class="lineno">  373</span>    <span class="comment">// indexCcys2, true, notionals2, 10000000.0, 1, 4,</span></div>
<div class="line"><span class="lineno">  374</span>    <span class="comment">//                                                       0.4, 0.001,</span></div>
<div class="line"><span class="lineno">  375</span>    <span class="comment">//                                                       ore::data::to_string(Period(cdsConv-&gt;frequency())),</span></div>
<div class="line"><span class="lineno">  376</span>    <span class="comment">//                                                       ore::data::to_string(cdsConv-&gt;dayCounter()), &quot;Physical&quot;));</span></div>
<div class="line"><span class="lineno">  377</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#aa9df3e61776f919738fb12e21ed049ca">buildSyntheticCDO</a>(<span class="stringliteral">&quot;16_SyntheticCDO_EUR&quot;</span>, <span class="stringliteral">&quot;dc2&quot;</span>, names2, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, indexCcys2,</div>
<div class="line"><span class="lineno">  378</span>                                     <span class="keyword">true</span>, notionals2, 1000000.0, 0, 5, 0.03, 0.01, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>));</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#adcf93a4b3b4221ead9beaa07a61516e1">buildCmsCapFloor</a>(<span class="stringliteral">&quot;17_CMS_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;EUR-CMS-30Y&quot;</span>, <span class="keyword">true</span>, 2000000, 0, 5, 0.0, 1,</div>
<div class="line"><span class="lineno">  381</span>                                    0.0, ore::data::to_string(Period(eurConv-&gt;fixedFrequency())),</div>
<div class="line"><span class="lineno">  382</span>                                    ore::data::to_string(eurConv-&gt;fixedDayCounter())));</div>
<div class="line"><span class="lineno">  383</span>    portfolio-&gt;add(</div>
<div class="line"><span class="lineno">  384</span>        <a class="code hl_function" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">buildEquityOption</a>(<span class="stringliteral">&quot;18_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 2, <span class="stringliteral">&quot;SP5&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 2147.56, 775));</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#ab30f7b9c44095d806d2192ff584a9172">buildCPIInflationSwap</a>(<span class="stringliteral">&quot;19_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 100000.0, 0, 10,</div>
<div class="line"><span class="lineno">  387</span>                                         0.0, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>,</div>
<div class="line"><span class="lineno">  388</span>                                         <span class="stringliteral">&quot;UKRPI&quot;</span>, 201.0, <span class="stringliteral">&quot;2M&quot;</span>, <span class="keyword">false</span>, 0.005));</div>
<div class="line"><span class="lineno">  389</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a306f6ee775460a838c33bcd361cf4cd9">buildYYInflationSwap</a>(<span class="stringliteral">&quot;20_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 100000.0, 0, 10,</div>
<div class="line"><span class="lineno">  390</span>                                        0.0, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>,</div>
<div class="line"><span class="lineno">  391</span>                                        <span class="stringliteral">&quot;UKRPI&quot;</span>, <span class="stringliteral">&quot;2M&quot;</span>, 2));</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>    Size tradeCount = portfolio-&gt;size();</div>
<div class="line"><span class="lineno">  394</span>    portfolio-&gt;build(factory);</div>
<div class="line"><span class="lineno">  395</span>    BOOST_CHECK_MESSAGE(portfolio-&gt;size() == tradeCount,</div>
<div class="line"><span class="lineno">  396</span>                        <span class="stringliteral">&quot;Some trades not built correctly,&quot;</span> &lt;&lt; portfolio-&gt;size() &lt;&lt; <span class="stringliteral">&quot; vs. &quot;</span> &lt;&lt; tradeCount);</div>
<div class="line"><span class="lineno">  397</span>    <span class="comment">// build the sensitivity analysis object</span></div>
<div class="line"><span class="lineno">  398</span>    boost::shared_ptr&lt;SensitivityAnalysis&gt; zeroAnalysis =</div>
<div class="line"><span class="lineno">  399</span>        boost::make_shared&lt;SensitivityAnalysisPlus&gt;(portfolio, initMarket, <span class="stringliteral">&quot;default&quot;</span>, engineData, simMarketData,</div>
<div class="line"><span class="lineno">  400</span>                                                    sensiData, <span class="keyword">false</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">false</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_class" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html">ParSensitivityAnalysis</a> parAnalysis(today, simMarketData, *sensiData, <span class="stringliteral">&quot;default&quot;</span>);</div>
<div class="line"><span class="lineno">  402</span>    parAnalysis.alignPillars();</div>
<div class="line"><span class="lineno">  403</span>    zeroAnalysis-&gt;overrideTenors(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  404</span>    zeroAnalysis-&gt;generateSensitivities();</div>
<div class="line"><span class="lineno">  405</span>    parAnalysis.computeParInstrumentSensitivities(zeroAnalysis-&gt;simMarket());</div>
<div class="line"><span class="lineno">  406</span>    boost::shared_ptr&lt;ParSensitivityConverter&gt; parConverter =</div>
<div class="line"><span class="lineno">  407</span>        boost::make_shared&lt;ParSensitivityConverter&gt;(parAnalysis.parSensitivities(), parAnalysis.shiftSizes());</div>
<div class="line"><span class="lineno">  408</span>    boost::shared_ptr&lt;SensitivityCube&gt; sensiCube = zeroAnalysis-&gt;sensiCube();</div>
<div class="line"><span class="lineno">  409</span>    <a class="code hl_class" href="classore_1_1analytics_1_1_zero_to_par_cube.html">ZeroToParCube</a> parCube(sensiCube, parConverter);</div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>    std::map&lt;std::pair&lt;std::string, std::string&gt;, Real&gt; parDelta;</div>
<div class="line"><span class="lineno">  412</span>    std::map&lt;std::pair&lt;std::string, std::string&gt;, Real&gt; zeroDelta;</div>
<div class="line"><span class="lineno">  413</span>    map&lt;string, Real&gt; baseManualPv;</div>
<div class="line"><span class="lineno">  414</span>    map&lt;string, Real&gt; basePv;</div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; tradeId : portfolio-&gt;ids()) {</div>
<div class="line"><span class="lineno">  416</span>        basePv[tradeId] = sensiCube-&gt;npv(tradeId);</div>
<div class="line"><span class="lineno">  417</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : sensiCube-&gt;factors()) {</div>
<div class="line"><span class="lineno">  418</span>            <span class="keywordtype">string</span> des = sensiCube-&gt;factorDescription(f);</div>
<div class="line"><span class="lineno">  419</span>            zeroDelta[make_pair(tradeId, des)] = sensiCube-&gt;delta(tradeId, f);</div>
<div class="line"><span class="lineno">  420</span>        }</div>
<div class="line"><span class="lineno">  421</span>        <span class="comment">// Fill the par deltas map</span></div>
<div class="line"><span class="lineno">  422</span>        <span class="keyword">auto</span> temp = parCube.parDeltas(tradeId);</div>
<div class="line"><span class="lineno">  423</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; kv : temp) {</div>
<div class="line"><span class="lineno">  424</span>            <span class="keywordtype">string</span> des = sensiCube-&gt;factorDescription(kv.first);</div>
<div class="line"><span class="lineno">  425</span>            parDelta[make_pair(tradeId, des)] = kv.second;</div>
<div class="line"><span class="lineno">  426</span>        }</div>
<div class="line"><span class="lineno">  427</span>    }</div>
<div class="line"><span class="lineno">  428</span>    boost::shared_ptr&lt;EngineFactory&gt; manualFactory = registerBuilders(engineData, initMarket);</div>
<div class="line"><span class="lineno">  429</span> </div>
<div class="line"><span class="lineno">  430</span>    portfolio-&gt;reset();</div>
<div class="line"><span class="lineno">  431</span>    portfolio-&gt;build(manualFactory);</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> [tradeId, trade] : portfolio-&gt;trades()) {</div>
<div class="line"><span class="lineno">  434</span>        Real fx = 1.0;</div>
<div class="line"><span class="lineno">  435</span>        <span class="keywordflow">if</span> (trade-&gt;npvCurrency() != <span class="stringliteral">&quot;EUR&quot;</span>) {</div>
<div class="line"><span class="lineno">  436</span>            <span class="keywordtype">string</span> ccyPair = trade-&gt;npvCurrency() + baseCcy;</div>
<div class="line"><span class="lineno">  437</span>            fx = initMarket-&gt;fxRate(ccyPair)-&gt;value();</div>
<div class="line"><span class="lineno">  438</span>        }</div>
<div class="line"><span class="lineno">  439</span>        baseManualPv[tradeId] = fx * trade-&gt;instrument()-&gt;NPV();</div>
<div class="line"><span class="lineno">  440</span>        Real tradeNotional = fx * trade-&gt;notional();</div>
<div class="line"><span class="lineno">  441</span>        Real simMarketTol =</div>
<div class="line"><span class="lineno">  442</span>            1.e-5 * tradeNotional; <span class="comment">// tolerance for difference to sim market is 0.1bp upfront (should this be tightened?)</span></div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>        BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Base PV check for trade &quot;</span> &lt;&lt; tradeId &lt;&lt; <span class="stringliteral">&quot;; got &quot;</span> &lt;&lt; baseManualPv[tradeId]</div>
<div class="line"><span class="lineno">  445</span>                                                      &lt;&lt; <span class="stringliteral">&quot;, expected &quot;</span> &lt;&lt; basePv[tradeId]);</div>
<div class="line"><span class="lineno">  446</span>        BOOST_CHECK_MESSAGE(std::fabs(baseManualPv[tradeId] - basePv[tradeId]) &lt; simMarketTol,</div>
<div class="line"><span class="lineno">  447</span>                            <span class="stringliteral">&quot;Base PV check error for trade &quot;</span> &lt;&lt; tradeId &lt;&lt; <span class="stringliteral">&quot;; got &quot;</span> &lt;&lt; baseManualPv[tradeId]</div>
<div class="line"><span class="lineno">  448</span>                                                             &lt;&lt; <span class="stringliteral">&quot;, but expected &quot;</span> &lt;&lt; basePv[tradeId]);</div>
<div class="line"><span class="lineno">  449</span>    }</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>    boost::shared_ptr&lt;TestMarketParCurves&gt; initParMarket = boost::dynamic_pointer_cast&lt;TestMarketParCurves&gt;(initMarket);</div>
<div class="line"><span class="lineno">  452</span>    BOOST_ASSERT(initParMarket);</div>
<div class="line"><span class="lineno">  453</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing discount curve par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  454</span>    <span class="comment">// the discount curve par sensis</span></div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;discountRateHelpersInstMap()) {</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordtype">string</span> ccy = d_it.first;</div>
<div class="line"><span class="lineno">  457</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;discountCurveShiftData()[ccy]-&gt;shiftSize;</div>
<div class="line"><span class="lineno">  458</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  459</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;discountCurveShiftData()[ccy]-&gt;shiftType);</div>
<div class="line"><span class="lineno">  460</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;discountRateHelperTenorsMap().find(ccy)-&gt;second;</div>
<div class="line"><span class="lineno">  461</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;discountRateHelperValuesMap().find(ccy)-&gt;second;</div>
<div class="line"><span class="lineno">  462</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  464</span>            sensiLabels[i] = <span class="stringliteral">&quot;DiscountCurve/&quot;</span> + ccy + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]);</div>
<div class="line"><span class="lineno">  465</span>        }</div>
<div class="line"><span class="lineno">  466</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  467</span>                             shiftSize, shiftType, parDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  468</span>    }</div>
<div class="line"><span class="lineno">  469</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing index curve par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  470</span>    <span class="comment">// the index curve par sensis</span></div>
<div class="line"><span class="lineno">  471</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;indexCurveRateHelperInstMap()) {</div>
<div class="line"><span class="lineno">  472</span>        <span class="keywordtype">string</span> idxName = d_it.first;</div>
<div class="line"><span class="lineno">  473</span>        BOOST_TEST_MESSAGE(idxName);</div>
<div class="line"><span class="lineno">  474</span>        <span class="keyword">auto</span> itr = zeroAnalysis-&gt;sensitivityData()-&gt;indexCurveShiftData().find(idxName);</div>
<div class="line"><span class="lineno">  475</span>        <span class="keywordflow">if</span> (itr == zeroAnalysis-&gt;sensitivityData()-&gt;indexCurveShiftData().end())</div>
<div class="line"><span class="lineno">  476</span>            zeroAnalysis-&gt;sensitivityData()-&gt;indexCurveShiftData()[idxName] =</div>
<div class="line"><span class="lineno">  477</span>                boost::make_shared&lt;SensitivityScenarioData::CurveShiftData&gt;();</div>
<div class="line"><span class="lineno">  478</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;indexCurveShiftData()[idxName]-&gt;shiftSize;</div>
<div class="line"><span class="lineno">  479</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  480</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;indexCurveShiftData()[idxName]-&gt;shiftType);</div>
<div class="line"><span class="lineno">  481</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;indexCurveRateHelperTenorsMap().find(idxName)-&gt;second;</div>
<div class="line"><span class="lineno">  482</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;indexCurveRateHelperValuesMap().find(idxName)-&gt;second;</div>
<div class="line"><span class="lineno">  483</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  484</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  485</span>            sensiLabels[i] = <span class="stringliteral">&quot;IndexCurve/&quot;</span> + idxName + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]);</div>
<div class="line"><span class="lineno">  486</span>        }</div>
<div class="line"><span class="lineno">  487</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  488</span>                             shiftSize, shiftType, parDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  489</span>    }</div>
<div class="line"><span class="lineno">  490</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing default curve par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  491</span>    <span class="comment">// the default curve par sensis</span></div>
<div class="line"><span class="lineno">  492</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;defaultRateHelpersInstMap()) {</div>
<div class="line"><span class="lineno">  493</span>        <span class="keywordtype">string</span> name = d_it.first;</div>
<div class="line"><span class="lineno">  494</span>        <span class="keyword">auto</span> itr = zeroAnalysis-&gt;sensitivityData()-&gt;creditCurveShiftData().find(name);</div>
<div class="line"><span class="lineno">  495</span>        <span class="keywordflow">if</span> (itr == zeroAnalysis-&gt;sensitivityData()-&gt;creditCurveShiftData().end())</div>
<div class="line"><span class="lineno">  496</span>            zeroAnalysis-&gt;sensitivityData()-&gt;creditCurveShiftData()[name] =</div>
<div class="line"><span class="lineno">  497</span>                boost::make_shared&lt;SensitivityScenarioData::CurveShiftData&gt;();</div>
<div class="line"><span class="lineno">  498</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;creditCurveShiftData()[name]-&gt;shiftSize;</div>
<div class="line"><span class="lineno">  499</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  500</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;creditCurveShiftData()[name]-&gt;shiftType);</div>
<div class="line"><span class="lineno">  501</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;defaultRateHelperTenorsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  502</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;defaultRateHelperValuesMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  503</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  504</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  505</span>            sensiLabels[i] = <span class="stringliteral">&quot;SurvivalProbability/&quot;</span> + name + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]);</div>
<div class="line"><span class="lineno">  506</span>        }</div>
<div class="line"><span class="lineno">  507</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  508</span>                             shiftSize, shiftType, parDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  509</span>    }</div>
<div class="line"><span class="lineno">  510</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing cds par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  511</span>    <span class="comment">// CDS Vol sensis (compare with zero sensi)</span></div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;cdsVolRateHelperValuesMap()) {</div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordtype">string</span> name = d_it.first;</div>
<div class="line"><span class="lineno">  514</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;cdsVolShiftData()[name].shiftSize;</div>
<div class="line"><span class="lineno">  515</span>        <span class="keywordtype">string</span> shiftType = boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;cdsVolShiftData()[name].shiftType);</div>
<div class="line"><span class="lineno">  516</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;cdsVolRateHelperTenorsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  517</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;cdsVolRateHelperValuesMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  518</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  519</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  520</span>            sensiLabels[i] = <span class="stringliteral">&quot;CDSVolatility/&quot;</span> + name + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]) + <span class="stringliteral">&quot;/ATM&quot;</span>;</div>
<div class="line"><span class="lineno">  521</span>        }</div>
<div class="line"><span class="lineno">  522</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  523</span>                             shiftSize, shiftType, zeroDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  524</span>    }</div>
<div class="line"><span class="lineno">  525</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing eqVol curve par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  526</span>    <span class="comment">// Equity Vol sensis (compare with zero sensi)</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;equityVolRateHelperValuesMap()) {</div>
<div class="line"><span class="lineno">  528</span>        <span class="keywordtype">string</span> name = d_it.first;</div>
<div class="line"><span class="lineno">  529</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;equityVolShiftData()[name].shiftSize;</div>
<div class="line"><span class="lineno">  530</span>        <span class="keywordtype">string</span> shiftType = boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;equityVolShiftData()[name].shiftType);</div>
<div class="line"><span class="lineno">  531</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;equityVolRateHelperTenorsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  532</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;equityVolRateHelperValuesMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  533</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  534</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  535</span>            sensiLabels[i] = <span class="stringliteral">&quot;EquityVolatility/&quot;</span> + name + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]) + <span class="stringliteral">&quot;/ATM&quot;</span>;</div>
<div class="line"><span class="lineno">  536</span>        }</div>
<div class="line"><span class="lineno">  537</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  538</span>                             shiftSize, shiftType, zeroDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  539</span>    }</div>
<div class="line"><span class="lineno">  540</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing swaption vol par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  541</span>    <span class="comment">// Swaption Vol sensis (compare with zero sensi)</span></div>
<div class="line"><span class="lineno">  542</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;swaptionVolRateHelperValuesMap()) {</div>
<div class="line"><span class="lineno">  543</span>        <span class="keywordtype">string</span> name = d_it.first;</div>
<div class="line"><span class="lineno">  544</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;swaptionVolShiftData()[name].shiftSize;</div>
<div class="line"><span class="lineno">  545</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  546</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;swaptionVolShiftData()[name].shiftType);</div>
<div class="line"><span class="lineno">  547</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;swaptionVolRateHelperTenorsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  548</span>        vector&lt;Period&gt; swapTenorVec = initParMarket-&gt;swaptionVolRateHelperSwapTenorsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  549</span>        vector&lt;Real&gt; strikeSpreadVec = zeroAnalysis-&gt;sensitivityData()-&gt;swaptionVolShiftData()[name].shiftStrikes;</div>
<div class="line"><span class="lineno">  550</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;swaptionVolRateHelperValuesMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  551</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  552</span>        Size j = swapTenorVec.size();</div>
<div class="line"><span class="lineno">  553</span>        Size k = zeroAnalysis-&gt;sensitivityData()-&gt;swaptionVolShiftData()[name].shiftStrikes.size();</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  556</span>            Size strike = i % k;</div>
<div class="line"><span class="lineno">  557</span>            Size parTenor = i / (j * k);</div>
<div class="line"><span class="lineno">  558</span>            Size swapTenor = (i - parTenor * j * k - strike) / k;</div>
<div class="line"><span class="lineno">  559</span>            std::ostringstream o;</div>
<div class="line"><span class="lineno">  560</span>            <span class="keywordflow">if</span> (close_enough(strikeSpreadVec[strike], 0))</div>
<div class="line"><span class="lineno">  561</span>                o &lt;&lt; <span class="stringliteral">&quot;SwaptionVolatility/&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; parTenorVec[parTenor] &lt;&lt; <span class="stringliteral">&quot;/&quot;</span></div>
<div class="line"><span class="lineno">  562</span>                  &lt;&lt; swapTenorVec[swapTenor] &lt;&lt; <span class="stringliteral">&quot;/ATM&quot;</span>;</div>
<div class="line"><span class="lineno">  563</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  564</span>                o &lt;&lt; <span class="stringliteral">&quot;SwaptionVolatility/&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; parTenorVec[parTenor] &lt;&lt; <span class="stringliteral">&quot;/&quot;</span></div>
<div class="line"><span class="lineno">  565</span>                  &lt;&lt; swapTenorVec[swapTenor] &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; std::setprecision(4) &lt;&lt; strikeSpreadVec[strike];</div>
<div class="line"><span class="lineno">  566</span>            sensiLabels[i] = o.str();</div>
<div class="line"><span class="lineno">  567</span>        }</div>
<div class="line"><span class="lineno">  568</span> </div>
<div class="line"><span class="lineno">  569</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  570</span>                             shiftSize, shiftType, zeroDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  571</span>    }</div>
<div class="line"><span class="lineno">  572</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing base correlation par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  573</span>    <span class="comment">// Base correlations sensis (compare with zero sensi)</span></div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;baseCorrRateHelperValuesMap()) {</div>
<div class="line"><span class="lineno">  575</span>        <span class="keywordtype">string</span> name = d_it.first;</div>
<div class="line"><span class="lineno">  576</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;baseCorrelationShiftData()[name].shiftSize;</div>
<div class="line"><span class="lineno">  577</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  578</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;baseCorrelationShiftData()[name].shiftType);</div>
<div class="line"><span class="lineno">  579</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;baseCorrRateHelperTenorsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  580</span>        vector&lt;string&gt; lossLevelVec = initParMarket-&gt;baseCorrLossLevelsMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  581</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;baseCorrRateHelperValuesMap().find(name)-&gt;second;</div>
<div class="line"><span class="lineno">  582</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  583</span>        Size j = lossLevelVec.size();</div>
<div class="line"><span class="lineno">  584</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  585</span>            sensiLabels[i] = <span class="stringliteral">&quot;BaseCorrelation/&quot;</span> + name + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + lossLevelVec[i % j] + <span class="stringliteral">&quot;/&quot;</span> +</div>
<div class="line"><span class="lineno">  586</span>                             to_string(parTenorVec[i / j]);</div>
<div class="line"><span class="lineno">  587</span>        }</div>
<div class="line"><span class="lineno">  588</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  589</span>                             shiftSize, shiftType, zeroDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  590</span>    }</div>
<div class="line"><span class="lineno">  591</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing zero inflation par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  592</span>    <span class="comment">// Zero Inflation sensis</span></div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;zeroInflationRateHelperInstMap()) {</div>
<div class="line"><span class="lineno">  594</span>        <span class="keywordtype">string</span> idxName = d_it.first;</div>
<div class="line"><span class="lineno">  595</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;zeroInflationCurveShiftData()[idxName]-&gt;shiftSize;</div>
<div class="line"><span class="lineno">  596</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  597</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;zeroInflationCurveShiftData()[idxName]-&gt;shiftType);</div>
<div class="line"><span class="lineno">  598</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;zeroInflationRateHelperTenorsMap().find(idxName)-&gt;second;</div>
<div class="line"><span class="lineno">  599</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;zeroInflationRateHelperValuesMap().find(idxName)-&gt;second;</div>
<div class="line"><span class="lineno">  600</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  601</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  602</span>            sensiLabels[i] = <span class="stringliteral">&quot;ZeroInflationCurve/&quot;</span> + idxName + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]);</div>
<div class="line"><span class="lineno">  603</span>        }</div>
<div class="line"><span class="lineno">  604</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  605</span>                             shiftSize, shiftType, parDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  606</span>    }</div>
<div class="line"><span class="lineno">  607</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;testing yoy inflation par sensis&quot;</span>);</div>
<div class="line"><span class="lineno">  608</span>    <span class="comment">// YoY Inflation sensis</span></div>
<div class="line"><span class="lineno">  609</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> d_it : initParMarket-&gt;yoyInflationRateHelperInstMap()) {</div>
<div class="line"><span class="lineno">  610</span>        <span class="keywordtype">string</span> idxName = d_it.first;</div>
<div class="line"><span class="lineno">  611</span>        Real shiftSize = zeroAnalysis-&gt;sensitivityData()-&gt;yoyInflationCurveShiftData()[idxName]-&gt;shiftSize;</div>
<div class="line"><span class="lineno">  612</span>        <span class="keywordtype">string</span> shiftType =</div>
<div class="line"><span class="lineno">  613</span>            boost::to_upper_copy(zeroAnalysis-&gt;sensitivityData()-&gt;yoyInflationCurveShiftData()[idxName]-&gt;shiftType);</div>
<div class="line"><span class="lineno">  614</span>        vector&lt;Period&gt; parTenorVec = initParMarket-&gt;yoyInflationRateHelperTenorsMap().find(idxName)-&gt;second;</div>
<div class="line"><span class="lineno">  615</span>        vector&lt;Handle&lt;Quote&gt;&gt; parValVecBase = initParMarket-&gt;yoyInflationRateHelperValuesMap().find(idxName)-&gt;second;</div>
<div class="line"><span class="lineno">  616</span>        vector&lt;string&gt; sensiLabels(parValVecBase.size());</div>
<div class="line"><span class="lineno">  617</span>        <span class="keywordflow">for</span> (Size i = 0; i &lt; parValVecBase.size(); i++) {</div>
<div class="line"><span class="lineno">  618</span>            sensiLabels[i] = <span class="stringliteral">&quot;YoYInflationCurve/&quot;</span> + idxName + <span class="stringliteral">&quot;/&quot;</span> + to_string(i) + <span class="stringliteral">&quot;/&quot;</span> + to_string(parTenorVec[i]);</div>
<div class="line"><span class="lineno">  619</span>        }</div>
<div class="line"><span class="lineno">  620</span>        parSensiBumpAnalysis(portfolio, engineData, initMarket, baseManualPv, baseCcy, parValVecBase, sensiLabels,</div>
<div class="line"><span class="lineno">  621</span>                             shiftSize, shiftType, parDelta, zeroDelta, basePv);</div>
<div class="line"><span class="lineno">  622</span>    }</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span>    <span class="comment">// end</span></div>
<div class="line"><span class="lineno">  625</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><span class="lineno">  626</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><span class="lineno">  627</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_observation_mode_html_a46c8a310cf4c094f8c80e1cb8dc1f911"><div class="ttname"><a href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ore::analytics::ObservationMode::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdoc">Allowable mode mode.</div><div class="ttdef"><b>Definition:</b> <a href="observationmode_8hpp_source.html#l00044">observationmode.hpp:44</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_par_sensitivity_analysis_html"><div class="ttname"><a href="classore_1_1analytics_1_1_par_sensitivity_analysis.html">ore::analytics::ParSensitivityAnalysis</a></div><div class="ttdoc">Par Sensitivity Analysis.</div><div class="ttdef"><b>Definition:</b> <a href="orea_2engine_2parsensitivityanalysis_8hpp_source.html#l00057">parsensitivityanalysis.hpp:57</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_zero_to_par_cube_html"><div class="ttname"><a href="classore_1_1analytics_1_1_zero_to_par_cube.html">ore::analytics::ZeroToParCube</a></div><div class="ttdoc">ZeroToParCube class.</div><div class="ttdef"><b>Definition:</b> <a href="zerotoparcube_8hpp_source.html#l00038">zerotoparcube.hpp:38</a></div></div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_a5d3a5e48cec33ea02c24791b2593cae1"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#a5d3a5e48cec33ea02c24791b2593cae1">testsuite::TestConfigurationObjects::setupSimMarketData</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::ScenarioSimMarketParameters &gt; setupSimMarketData(bool hasSwapVolCube=false, bool hasYYCapVols=false)</div><div class="ttdoc">ScenarioSimMarketParameters instance.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l01245">testmarket.cpp:1245</a></div></div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_ad3905794b6d3b29161c6cd00aa7865df"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#ad3905794b6d3b29161c6cd00aa7865df">testsuite::TestConfigurationObjects::setupSensitivityScenarioData</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::SensitivityScenarioData &gt; setupSensitivityScenarioData(bool hasSwapVolCube=false, bool hasYYCapVols=false, bool parConversion=false)</div><div class="ttdoc">SensitivityScenarioData instance.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l01357">testmarket.cpp:1357</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a306f6ee775460a838c33bcd361cf4cd9"><div class="ttname"><a href="namespacetestsuite.html#a306f6ee775460a838c33bcd361cf4cd9">testsuite::buildYYInflationSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildYYInflationSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real spread, string floatFreq, string floatDC, string index, string yyFreq, string yyDC, string yyIndex, string observationLag, Size fixDays)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00569">testportfolio.cpp:569</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a3c54e055257b56f61fc96e8f4993aacb"><div class="ttname"><a href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">testsuite::buildEquityOption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildEquityOption(string id, string longShort, string putCall, Size expiry, string equityName, string currency, Real strike, Real quantity, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00209">testportfolio.cpp:209</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a42359c43fde5ca54a8172a9c9a0dc7a5"><div class="ttname"><a href="namespacetestsuite.html#a42359c43fde5ca54a8172a9c9a0dc7a5">testsuite::buildCap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCap(string id, string ccy, string longShort, Real capRate, Real notional, int start, Size term, string floatFreq, string floatDC, string index, Calendar calendar, Natural spotDays, bool spotStartLag)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00254">testportfolio.cpp:254</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a51b621a66b133e2a519258f56aaa222e"><div class="ttname"><a href="namespacetestsuite.html#a51b621a66b133e2a519258f56aaa222e">testsuite::buildFloor</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildFloor(string id, string ccy, string longShort, Real floorRate, Real notional, int start, Size term, string floatFreq, string floatDC, string index, Calendar calendar, Natural spotDays, bool spotStartLag)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00261">testportfolio.cpp:261</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a74aa42fbcb9b7b5719157f3e5d5c5758"><div class="ttname"><a href="namespacetestsuite.html#a74aa42fbcb9b7b5719157f3e5d5c5758">testsuite::buildSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index, Calendar calendar, Natural spotDays, bool spotStartLag)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00048">testportfolio.cpp:48</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_aa9df3e61776f919738fb12e21ed049ca"><div class="ttname"><a href="namespacetestsuite.html#aa9df3e61776f919738fb12e21ed049ca">testsuite::buildSyntheticCDO</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildSyntheticCDO(string id, string name, vector&lt; string &gt; names, string longShort, string ccy, vector&lt; string &gt; ccys, bool isPayer, vector&lt; Real &gt; notionals, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00426">testportfolio.cpp:426</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_ab30f7b9c44095d806d2192ff584a9172"><div class="ttname"><a href="namespacetestsuite.html#ab30f7b9c44095d806d2192ff584a9172">testsuite::buildCPIInflationSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCPIInflationSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real spread, string floatFreq, string floatDC, string index, string cpiFreq, string cpiDC, string cpiIndex, Real baseRate, string observationLag, bool interpolated, Real cpiRate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00528">testportfolio.cpp:528</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_ab86fae4ea0ab03ec87480eea24e94100"><div class="ttname"><a href="namespacetestsuite.html#ab86fae4ea0ab03ec87480eea24e94100">testsuite::buildCrossCcyBasisSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCrossCcyBasisSwap(string id, string recCcy, Real recNotional, string payCcy, Real payNotional, int start, Size term, Real recLegSpread, Real payLegSpread, string recFreq, string recDC, string recIndex, Calendar recCalendar, string payFreq, string payDC, string payIndex, Calendar payCalendar, Natural spotDays, bool spotStartLag, bool notionalInitialExchange, bool notionalFinalExchange, bool notionalAmortizingExchange, bool isRecLegFXResettable, bool isPayLegFXResettable)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00306">testportfolio.cpp:306</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_adc05efdca192b590de52fd2e65b79a95"><div class="ttname"><a href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95">testsuite::buildCreditDefaultSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCreditDefaultSwap(string id, string ccy, string issuerId, string creditCurveId, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00389">testportfolio.cpp:389</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_adcf93a4b3b4221ead9beaa07a61516e1"><div class="ttname"><a href="namespacetestsuite.html#adcf93a4b3b4221ead9beaa07a61516e1">testsuite::buildCmsCapFloor</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCmsCapFloor(string id, string ccy, string indexId, bool isPayer, Real notional, int start, Size term, Real capRate, Real floorRate, Real spread, string freq, string dc)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00488">testportfolio.cpp:488</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classtestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_cgraph.png" border="0" usemap="#aclasstestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_cgraph" alt=""/></div>
<map name="aclasstestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_cgraph" id="aclasstestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_cgraph">
<area shape="rect" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="5,1322,168,1347"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a28915bb1dca6668799c336ea3a953e45" title="align pillars in scenario simulation market parameters with those of the par instruments" alt="" coords="263,776,449,816"/>
<area shape="rect" href="namespacetestsuite.html#a42359c43fde5ca54a8172a9c9a0dc7a5" title=" " alt="" coords="291,938,421,963"/>
<area shape="rect" href="namespacetestsuite.html#adcf93a4b3b4221ead9beaa07a61516e1" title=" " alt="" coords="263,987,449,1013"/>
<area shape="rect" href="namespacetestsuite.html#ab30f7b9c44095d806d2192ff584a9172" title=" " alt="" coords="254,1061,458,1086"/>
<area shape="rect" href="namespacetestsuite.html#adc05efdca192b590de52fd2e65b79a95" title=" " alt="" coords="249,1110,463,1135"/>
<area shape="rect" href="namespacetestsuite.html#ab86fae4ea0ab03ec87480eea24e94100" title=" " alt="" coords="274,1160,438,1200"/>
<area shape="rect" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb" title=" " alt="" coords="265,1249,447,1274"/>
<area shape="rect" href="namespacetestsuite.html#a51b621a66b133e2a519258f56aaa222e" title=" " alt="" coords="288,865,424,890"/>
<area shape="rect" href="namespacetestsuite.html#a74aa42fbcb9b7b5719157f3e5d5c5758" title=" " alt="" coords="287,1322,425,1347"/>
<area shape="rect" href="namespacetestsuite.html#aa9df3e61776f919738fb12e21ed049ca" title=" " alt="" coords="261,1371,451,1397"/>
<area shape="rect" href="namespacetestsuite.html#a306f6ee775460a838c33bcd361cf4cd9" title=" " alt="" coords="255,1445,457,1470"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15667fb454f6579571357dcefa65a559" title="Compute par instrument sensitivities." alt="" coords="216,1495,496,1535"/>
<area shape="rect" href="classore_1_1analytics_1_1_zero_to_par_cube.html#a6007c0f20ea89d5d2db573b08db43009" title="Return the non&#45;zero par deltas for the given tradeId." alt="" coords="273,1583,439,1623"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8092eccb5ce3a742bec7c90e7599fe71" title="Return computed par sensitivities. Empty if they have not been computed yet." alt="" coords="263,1647,449,1687"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#ad3905794b6d3b29161c6cd00aa7865df" title="SensitivityScenarioData instance." alt="" coords="234,1711,478,1751"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a5d3a5e48cec33ea02c24791b2593cae1" title="ScenarioSimMarketParameters instance." alt="" coords="257,1775,455,1815"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab397fee73d59f20038b686d3eeff9af3" title="Return the zero rate and par rate absolute shift size for each risk factor key." alt="" coords="263,1839,449,1879"/>
<area shape="rect" href="namespacetestsuite.html#a7fffb0953112d184642c9d0d7b524894" title=" " alt="" coords="589,902,748,927"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#aaf3b4fed233991ba67fc00a89e8fcd57" title="Augment relevant risk factors." alt="" coords="544,1495,793,1535"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a03ca088a3dab4c18db2c047232a89780" title="Create par instruments." alt="" coords="841,677,1045,717"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a6f28870e4c47d867aa859db7fb3c2fed" title=" " alt="" coords="854,1623,1033,1649"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#adc1ea5d86780f6a6557b3bb6cf84926e" title="Returns true if risk factor type is applicable for par conversion." alt="" coords="575,1431,762,1471"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a25d0c14ef75a713f89ee3117e3c0f304" title="Populate shiftSizes_ for key given the implied fair par rate parRate." alt="" coords="575,1559,763,1599"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a79cab2e964334fa8b6fb9472a51aeffe" title=" " alt="" coords="1107,837,1337,877"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a335c3820a9ad66b4114eae1b63f57837" title=" " alt="" coords="1137,709,1307,749"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a70d248ac62734bf0f55269fd44906f46" title=" " alt="" coords="1109,901,1335,941"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a0f272d628eba1221955e73b95896ea6f" title=" " alt="" coords="1101,965,1343,1005"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab4e5b1bca5d2c1234d8cb2375798ea82" title=" " alt="" coords="1110,1029,1334,1069"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a84f6a45da03b18ad06f2e6059576d335" title="Create Cap/Floor instrument for implying flat vol sensitivity from optionlet vol sensitivity." alt="" coords="1129,773,1315,813"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ab159350c50880e88ef534864f9466b26" title="Create CDS for implying par rate sensitivity from Hazard Rate sensitivity." alt="" coords="1129,5,1315,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a0a8cff443db13bb49f84bb402091baae" title="Create Cross Ccy Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1105,69,1339,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#abc5dd9703405793fd837d16b467ba2a8" title="Create Deposit for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1129,133,1315,173"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#ac59b12d3c4bc46e5912a4c7b7ef76307" title="Create FRA for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1129,197,1315,237"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a36b2d757640f779381349d234d4627a6" title="Create FX Forwrad for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1129,261,1315,301"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a8398135369084ed1a6d98a5c34816e4a" title="Create OIS Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1129,325,1315,365"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a7c4856e81fa16c1c0f4c30fe20863df8" title="Create Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1129,389,1315,429"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a10ed6e6816f20d1b60164edb508bdb98" title="Create Basis Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1117,453,1327,493"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a2abfe3c79d6b13d1865f82b9bae2ea65" title="Create YoY Cap/Floor for implying rate rate sensitivity from yoy optionlet vol sensitivity." alt="" coords="1127,517,1317,557"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a9a39605391eba53ee7e55cb504808a9e" title="Create YoY Swap for implying par rate sensitivity from yoy rate sensitivity." alt="" coords="1117,581,1327,621"/>
<area shape="rect" href="classore_1_1analytics_1_1_par_sensitivity_analysis.html#a15e7d23239efd7bda0bd107f0c568a2f" title="Create Zero Swap for implying par rate sensitivity from zero rate sensitivity." alt="" coords="1115,645,1329,685"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a1ac8230a9773a5d2f2af7e878b2bd276" title=" " alt="" coords="1112,1093,1332,1133"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad13d23727f28ba2e988d4ba685405f73" title=" " alt="" coords="1109,1158,1335,1213"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a04bd169bbc4c12c057ea988bcfa5c0c7" title=" " alt="" coords="1119,1237,1325,1291"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ab54d5f99e46c2615edb3499eb0d3a79e" title=" " alt="" coords="1117,1315,1327,1370"/>
<area shape="rect" href="test_2scenarioshiftcalculator_8cpp.html#a652b8805d9b88185e25574d4820660c4" title=" " alt="" coords="1199,2307,1245,2333"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aa20846f76afb42a5e0a7e907b727e345" title=" " alt="" coords="1097,1795,1347,1835"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aefc1dde6ea364f5790dc4dc75d339dba" title=" " alt="" coords="1121,1859,1323,1899"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ac040ad9950aac26ede1935ca320bd0e1" title=" " alt="" coords="1093,1923,1351,1963"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#aea45faada7a1e96039510c0eb5e9a51f" title=" " alt="" coords="1100,1987,1344,2027"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#ad25f69d5465945eb23f43d1146b450a8" title=" " alt="" coords="1104,2051,1340,2091"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#af073371655145388cd67182906ad5694" title=" " alt="" coords="1124,2115,1320,2155"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a344f4a67200865bd29b118ab0836c168" title=" " alt="" coords="1115,2179,1329,2219"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a7ab8bd40826ffcadec9a28c9b47deee0" title=" " alt="" coords="1137,2243,1307,2283"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a5781bba7cccea873352ae96390ae06a7" title=" " alt="" coords="1127,1459,1317,1499"/>
<area shape="rect" href="namespaceore_1_1analytics.html#a5cceb12d217bac14eeda59d5f774f7c1" title=" " alt="" coords="1125,2381,1319,2406"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a221481186bf38cc73b261331cda6bcec" title=" " alt="" coords="1119,1523,1325,1563"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a878f236e46973bef31d49a6ba7170aad" title=" " alt="" coords="1107,1587,1337,1627"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a595f1fc52e87fae0e9d1f1c92d940e2a" title=" " alt="" coords="1119,1651,1325,1691"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a9d7b43b0cc7fe85c7336883a552108e6" title=" " alt="" coords="1107,1715,1337,1770"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a2d1e0fb4f255552e89bb7fad306cd48b" title="Give back the shift data for the given risk factor type, keyType, with the given name." alt="" coords="860,1559,1027,1599"/>
<area shape="rect" href="classore_1_1analytics_1_1_sensitivity_scenario_data.html#a5b2ac7fa73674b88cd3c2cc68477b111" title=" " alt="" coords="1111,1395,1333,1435"/>
<area shape="rect" href="namespacetestsuite.html#aac0663d501b589be0427199becb6d9a8" title=" " alt="" coords="581,1718,756,1743"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classtestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_icgraph.png" border="0" usemap="#aclasstestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_icgraph" alt=""/></div>
<map name="aclasstestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_icgraph" id="aclasstestsuite_1_1_par_sensitivity_analysis_manual_test_a42cf0fd677773cdd75e7c048ed01eeb1_icgraph">
<area shape="rect" title="Benchmark par conversion against brute&#45;force bump on the par instruments (&quot;None&quot; observation mode)" alt="" coords="220,13,383,38"/>
<area shape="rect" href="namespacetestsuite.html#a227848f4347cd5ecd5cb75afd62bc23d" title=" " alt="" coords="5,5,172,45"/>
</map>
</div>

</div>
</div>
<a id="a599e62dc00f2d26201f2975de3401b6d" name="a599e62dc00f2d26201f2975de3401b6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a599e62dc00f2d26201f2975de3401b6d">&#9670;&#160;</a></span>suite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static boost::unit_test_framework::test_suite * suite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
