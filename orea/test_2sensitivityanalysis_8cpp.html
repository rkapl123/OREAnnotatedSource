<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<title>OREAnalytics: test/sensitivityanalysis.cpp File Reference</title>
<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans|Open+Sans" rel="stylesheet">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/png" href="favicon.png">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="oreaextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname"><a href="https://rkapl123.github.io/OREAnnotatedSource/">
       <img src="logo-analytics@2x.png" alt="Logo" width="150" height="68" style="float: left; padding: 15px;"/></a>
   <div id="projectbrief">Fully annotated reference manual - version 1.8</div>
   </div>
</div>
<!-- end header part --><!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_13e138d54eb8818da29c3992edef070a.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sensitivityanalysis.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;boost/test/unit_test.hpp&gt;</code><br />
<code>#include &lt;boost/timer/timer.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="inmemorycube_8hpp_source.html">orea/cube/inmemorycube.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="filteredsensitivitystream_8hpp_source.html">orea/engine/filteredsensitivitystream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="observationmode_8hpp_source.html">orea/engine/observationmode.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="parametricvar_8hpp_source.html">orea/engine/parametricvar.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="riskfilter_8hpp_source.html">orea/engine/riskfilter.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityaggregator_8hpp_source.html">orea/engine/sensitivityaggregator.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityanalysis_8hpp_source.html">orea/engine/sensitivityanalysis.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivitycubestream_8hpp_source.html">orea/engine/sensitivitycubestream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityfilestream_8hpp_source.html">orea/engine/sensitivityfilestream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityinmemorystream_8hpp_source.html">orea/engine/sensitivityinmemorystream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityrecord_8hpp_source.html">orea/engine/sensitivityrecord.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivitystream_8hpp_source.html">orea/engine/sensitivitystream.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stresstest_8hpp_source.html">orea/engine/stresstest.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="valuationcalculator_8hpp_source.html">orea/engine/valuationcalculator.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="valuationengine_8hpp_source.html">orea/engine/valuationengine.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="clonescenariofactory_8hpp_source.html">orea/scenario/clonescenariofactory.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="scenariosimmarket_8hpp_source.html">orea/scenario/scenariosimmarket.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sensitivityscenariogenerator_8hpp_source.html">orea/scenario/sensitivityscenariogenerator.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2capfloor_8hpp.html">ored/portfolio/builders/capfloor.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2commodityforward_8hpp.html">ored/portfolio/builders/commodityforward.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2commodityoption_8hpp.html">ored/portfolio/builders/commodityoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2equityforward_8hpp.html">ored/portfolio/builders/equityforward.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2equityoption_8hpp.html">ored/portfolio/builders/equityoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2fxforward_8hpp.html">ored/portfolio/builders/fxforward.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2fxoption_8hpp.html">ored/portfolio/builders/fxoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2swap_8hpp.html">ored/portfolio/builders/swap.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/builders_2swaption_8hpp.html">ored/portfolio/builders/swaption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/commodityforward_8hpp.html">ored/portfolio/commodityforward.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/commodityoption_8hpp.html">ored/portfolio/commodityoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/equityforward_8hpp.html">ored/portfolio/equityforward.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/equityoption_8hpp.html">ored/portfolio/equityoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/fxoption_8hpp.html">ored/portfolio/fxoption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/portfolio_8hpp.html">ored/portfolio/portfolio.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/swap_8hpp.html">ored/portfolio/swap.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/swaption_8hpp.html">ored/portfolio/swaption.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/log_8hpp.html">ored/utilities/log.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/osutils_8hpp.html">ored/utilities/osutils.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="../ored/to__string_8hpp.html">ored/utilities/to_string.hpp</a>&gt;</code><br />
<code>#include &lt;oret/toplevelfixture.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="oreatoplevelfixture_8hpp_source.html">test/oreatoplevelfixture.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="testmarket_8hpp_source.html">test/testmarket.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="testportfolio_8hpp_source.html">test/testportfolio.hpp</a>&gt;</code><br />
</div>
<p><a href="test_2sensitivityanalysis_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adc7a5ac10f6151560d3d7cefb068f0b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0">testPortfolioSensitivity</a> (<a class="el" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> om)</td></tr>
<tr class="separator:adc7a5ac10f6151560d3d7cefb068f0b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884986f587f4e96e9d36c8231440c4bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#a884986f587f4e96e9d36c8231440c4bd">BOOST_AUTO_TEST_CASE</a> (testPortfolioSensitivityNoneObs)</td></tr>
<tr class="separator:a884986f587f4e96e9d36c8231440c4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a763149f6f717912a18f4e67589279053"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#a763149f6f717912a18f4e67589279053">BOOST_AUTO_TEST_CASE</a> (testPortfolioSensitivityDisableObs)</td></tr>
<tr class="separator:a763149f6f717912a18f4e67589279053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d03a961b7253ecd08145cfec4188428"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#a6d03a961b7253ecd08145cfec4188428">BOOST_AUTO_TEST_CASE</a> (testPortfolioSensitivityDeferObs)</td></tr>
<tr class="separator:a6d03a961b7253ecd08145cfec4188428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee930d69e50643655a09eab94e46cb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#afee930d69e50643655a09eab94e46cb2">BOOST_AUTO_TEST_CASE</a> (testPortfolioSensitivityUnregisterObs)</td></tr>
<tr class="separator:afee930d69e50643655a09eab94e46cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b17e228380d393777e5200506267721"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#a1b17e228380d393777e5200506267721">test1dShifts</a> (bool granular)</td></tr>
<tr class="separator:a1b17e228380d393777e5200506267721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9cd5c4ef51fc25a3d90d05ee9214ad0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#ae9cd5c4ef51fc25a3d90d05ee9214ad0">BOOST_AUTO_TEST_CASE</a> (test1dShiftsSparse)</td></tr>
<tr class="separator:ae9cd5c4ef51fc25a3d90d05ee9214ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac41ff777f2facea0d8a8f131c7e5d88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#aac41ff777f2facea0d8a8f131c7e5d88">BOOST_AUTO_TEST_CASE</a> (test1dShiftsGranular)</td></tr>
<tr class="separator:aac41ff777f2facea0d8a8f131c7e5d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1a472c8b4a005b404d5ceaac1f14fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#aea1a472c8b4a005b404d5ceaac1f14fe">BOOST_AUTO_TEST_CASE</a> (test2dShifts)</td></tr>
<tr class="separator:aea1a472c8b4a005b404d5ceaac1f14fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb30903d6b6db666206a6c48eaca38e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#afb30903d6b6db666206a6c48eaca38e3">BOOST_AUTO_TEST_CASE</a> (testEquityOptionDeltaGamma)</td></tr>
<tr class="separator:afb30903d6b6db666206a6c48eaca38e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee8f85053423e807bac09167c46064b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#abee8f85053423e807bac09167c46064b">BOOST_AUTO_TEST_CASE</a> (testFxOptionDeltaGamma)</td></tr>
<tr class="separator:abee8f85053423e807bac09167c46064b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d8c7eb58e1524ca11fc67a9f53bcc2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="test_2sensitivityanalysis_8cpp.html#af2d8c7eb58e1524ca11fc67a9f53bcc2">BOOST_AUTO_TEST_CASE</a> (testCrossGamma)</td></tr>
<tr class="separator:af2d8c7eb58e1524ca11fc67a9f53bcc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="adc7a5ac10f6151560d3d7cefb068f0b0" name="adc7a5ac10f6151560d3d7cefb068f0b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc7a5ac10f6151560d3d7cefb068f0b0">&#9670;&#160;</a></span>testPortfolioSensitivity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testPortfolioSensitivity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a>&#160;</td>
          <td class="paramname"><em>om</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00089">89</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>                                                      {</div>
<div class="line"><span class="lineno">   90</span>    SavedSettings backup;</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><span class="lineno">   93</span>    ObservationMode::instance().setMode(om);</div>
<div class="line"><span class="lineno">   94</span> </div>
<div class="line"><span class="lineno">   95</span>    Date today = Date(14, April, 2016); <span class="comment">// Settings::instance().evaluationDate();</span></div>
<div class="line"><span class="lineno">   96</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno">  101</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno">  104</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno">  105</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5">TestConfigurationObjects::setupSimMarketData5</a>();</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno">  108</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f">TestConfigurationObjects::setupSensitivityScenarioData5</a>();</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="comment">// build scenario sim market</span></div>
<div class="line"><span class="lineno">  111</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarket&gt; simMarket =</div>
<div class="line"><span class="lineno">  112</span>        boost::make_shared&lt;analytics::ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><span class="lineno">  115</span>    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><span class="lineno">  116</span>    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><span class="lineno">  117</span> </div>
<div class="line"><span class="lineno">  118</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><span class="lineno">  119</span>    boost::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><span class="lineno">  120</span>        boost::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket, </div>
<div class="line"><span class="lineno">  121</span>                                                         scenarioFactory, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  122</span>    simMarket-&gt;scenarioGenerator() = scenarioGenerator;</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>    <span class="comment">// build portfolio</span></div>
<div class="line"><span class="lineno">  125</span>    boost::shared_ptr&lt;EngineData&gt; data = boost::make_shared&lt;EngineData&gt;();</div>
<div class="line"><span class="lineno">  126</span>    data-&gt;model(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  127</span>    data-&gt;engine(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountingSwapEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  128</span>    data-&gt;model(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  129</span>    data-&gt;engine(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountingCrossCurrencySwapEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  130</span>    data-&gt;model(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelier&quot;</span>;</div>
<div class="line"><span class="lineno">  131</span>    data-&gt;engine(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelierSwaptionEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  132</span>    data-&gt;model(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>) = <span class="stringliteral">&quot;LGM&quot;</span>;</div>
<div class="line"><span class="lineno">  133</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;Calibration&quot;</span>] = <span class="stringliteral">&quot;Bootstrap&quot;</span>;</div>
<div class="line"><span class="lineno">  134</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;CalibrationStrategy&quot;</span>] = <span class="stringliteral">&quot;CoterminalATM&quot;</span>;</div>
<div class="line"><span class="lineno">  135</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;Reversion&quot;</span>] = <span class="stringliteral">&quot;0.03&quot;</span>;</div>
<div class="line"><span class="lineno">  136</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;ReversionType&quot;</span>] = <span class="stringliteral">&quot;HullWhite&quot;</span>;</div>
<div class="line"><span class="lineno">  137</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;Volatility&quot;</span>] = <span class="stringliteral">&quot;0.01&quot;</span>;</div>
<div class="line"><span class="lineno">  138</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;VolatilityType&quot;</span>] = <span class="stringliteral">&quot;Hagan&quot;</span>;</div>
<div class="line"><span class="lineno">  139</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;Tolerance&quot;</span>] = <span class="stringliteral">&quot;0.0001&quot;</span>;</div>
<div class="line"><span class="lineno">  140</span>    data-&gt;engine(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>) = <span class="stringliteral">&quot;Grid&quot;</span>;</div>
<div class="line"><span class="lineno">  141</span>    data-&gt;engineParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;sy&quot;</span>] = <span class="stringliteral">&quot;3.0&quot;</span>;</div>
<div class="line"><span class="lineno">  142</span>    data-&gt;engineParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;ny&quot;</span>] = <span class="stringliteral">&quot;10&quot;</span>;</div>
<div class="line"><span class="lineno">  143</span>    data-&gt;engineParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;sx&quot;</span>] = <span class="stringliteral">&quot;3.0&quot;</span>;</div>
<div class="line"><span class="lineno">  144</span>    data-&gt;engineParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>)[<span class="stringliteral">&quot;nx&quot;</span>] = <span class="stringliteral">&quot;10&quot;</span>;</div>
<div class="line"><span class="lineno">  145</span>    data-&gt;model(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  146</span>    data-&gt;engine(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingFxForwardEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  147</span>    data-&gt;model(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;GarmanKohlhagen&quot;</span>;</div>
<div class="line"><span class="lineno">  148</span>    data-&gt;engine(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  149</span>    data-&gt;model(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapModel&quot;</span>;</div>
<div class="line"><span class="lineno">  150</span>    data-&gt;engine(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  151</span>    data-&gt;model(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackOrBachelier&quot;</span>;</div>
<div class="line"><span class="lineno">  152</span>    data-&gt;engine(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackIborCouponPricer&quot;</span>;</div>
<div class="line"><span class="lineno">  153</span>    data-&gt;model(<span class="stringliteral">&quot;Bond&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  154</span>    data-&gt;engine(<span class="stringliteral">&quot;Bond&quot;</span>) = <span class="stringliteral">&quot;DiscountingRiskyBondEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  155</span>    data-&gt;engineParameters(<span class="stringliteral">&quot;Bond&quot;</span>)[<span class="stringliteral">&quot;TimestepPeriod&quot;</span>] = <span class="stringliteral">&quot;6M&quot;</span>;</div>
<div class="line"><span class="lineno">  156</span>    data-&gt;model(<span class="stringliteral">&quot;EquityForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  157</span>    data-&gt;engine(<span class="stringliteral">&quot;EquityForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingEquityForwardEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  158</span>    data-&gt;model(<span class="stringliteral">&quot;EquityOption&quot;</span>) = <span class="stringliteral">&quot;BlackScholesMerton&quot;</span>;</div>
<div class="line"><span class="lineno">  159</span>    data-&gt;engine(<span class="stringliteral">&quot;EquityOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  160</span>    data-&gt;model(<span class="stringliteral">&quot;CommodityForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno">  161</span>    data-&gt;engine(<span class="stringliteral">&quot;CommodityForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingCommodityForwardEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  162</span>    data-&gt;model(<span class="stringliteral">&quot;CommodityOption&quot;</span>) = <span class="stringliteral">&quot;BlackScholes&quot;</span>;</div>
<div class="line"><span class="lineno">  163</span>    data-&gt;engine(<span class="stringliteral">&quot;CommodityOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno">  164</span>    boost::shared_ptr&lt;EngineFactory&gt; factory = boost::make_shared&lt;EngineFactory&gt;(data, simMarket);</div>
<div class="line"><span class="lineno">  165</span>    factory-&gt;registerBuilder(boost::make_shared&lt;SwapEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  166</span>    factory-&gt;registerBuilder(boost::make_shared&lt;EuropeanSwaptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  167</span>    factory-&gt;registerBuilder(boost::make_shared&lt;LGMGridBermudanSwaptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  168</span>    factory-&gt;registerBuilder(boost::make_shared&lt;FxEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  169</span>    factory-&gt;registerBuilder(boost::make_shared&lt;FxForwardEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  170</span>    factory-&gt;registerBuilder(boost::make_shared&lt;CapFloorEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  171</span>    factory-&gt;registerBuilder(boost::make_shared&lt;EquityEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  172</span>    factory-&gt;registerBuilder(boost::make_shared&lt;EquityForwardEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  173</span>    factory-&gt;registerBuilder(boost::make_shared&lt;CommodityForwardEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  174</span>    factory-&gt;registerBuilder(boost::make_shared&lt;CommodityEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>    <span class="comment">// boost::shared_ptr&lt;Portfolio&gt; portfolio = buildSwapPortfolio(portfolioSize, factory);</span></div>
<div class="line"><span class="lineno">  177</span>    boost::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_portfolio.html">Portfolio</a>());</div>
<div class="line"><span class="lineno">  178</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 10, 0.03, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno">  179</span>                             <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno">  180</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 15, 0.02, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno">  181</span>                             <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><span class="lineno">  182</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 20, 0.04, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno">  183</span>                             <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno">  184</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>, <span class="keyword">true</span>, 1000000000.0, 0, 5, 0.01, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno">  185</span>                             <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno">  186</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 10, 10, 0.02, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><span class="lineno">  187</span>                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;Physical&quot;</span>));</div>
<div class="line"><span class="lineno">  188</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 2, 5, 0.02, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><span class="lineno">  189</span>                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;Physical&quot;</span>));</div>
<div class="line"><span class="lineno">  190</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 2, 5, 0.02, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><span class="lineno">  191</span>                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;Physical&quot;</span>, 1200.0, <span class="stringliteral">&quot;EUR&quot;</span>,</div>
<div class="line"><span class="lineno">  192</span>                                         <span class="stringliteral">&quot;2018-04-14&quot;</span>));</div>
<div class="line"><span class="lineno">  193</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a1a1ea26e001a57a761bcef3901100d97">buildBermudanSwaption</a>(<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 5, 2, 10, 0.02, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><span class="lineno">  194</span>                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno">  195</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 3, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000.0, <span class="stringliteral">&quot;USD&quot;</span>, 11000000.0));</div>
<div class="line"><span class="lineno">  196</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 7, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000.0, <span class="stringliteral">&quot;GBP&quot;</span>, 11000000.0));</div>
<div class="line"><span class="lineno">  197</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a1f8ce589c50a9c62fc458cb91de7edf5">buildCap</a>(<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.05, 1000000.0, 0, 10, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno">  198</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a7da40f9d57dcfec350bdd68c50ea3b5e">buildFloor</a>(<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.01, 1000000.0, 0, 10, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><span class="lineno">  199</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3866ad77705e8f36e209f1a88125b3ce">buildZeroBond</a>(<span class="stringliteral">&quot;11_ZeroBond_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, 1.0, 10));</div>
<div class="line"><span class="lineno">  200</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3866ad77705e8f36e209f1a88125b3ce">buildZeroBond</a>(<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 1.0, 10));</div>
<div class="line"><span class="lineno">  201</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">buildEquityOption</a>(<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 2, <span class="stringliteral">&quot;SP5&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 2147.56, 775));</div>
<div class="line"><span class="lineno">  202</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#ab30f7b9c44095d806d2192ff584a9172">buildCPIInflationSwap</a>(<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 100000.0, 0, 10, 0.0, <span class="stringliteral">&quot;6M&quot;</span>,</div>
<div class="line"><span class="lineno">  203</span>                                         <span class="stringliteral">&quot;ACT/ACT&quot;</span>, <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>, <span class="stringliteral">&quot;UKRPI&quot;</span>, 201.0, <span class="stringliteral">&quot;2M&quot;</span>, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">  204</span>                                         0.005));</div>
<div class="line"><span class="lineno">  205</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a306f6ee775460a838c33bcd361cf4cd9">buildYYInflationSwap</a>(<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 100000.0, 0, 10, 0.0, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>,</div>
<div class="line"><span class="lineno">  206</span>                                        <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;ACT/ACT&quot;</span>, <span class="stringliteral">&quot;UKRPI&quot;</span>, <span class="stringliteral">&quot;2M&quot;</span>, 2));</div>
<div class="line"><span class="lineno">  207</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a4d9dd0dc4dd4bf05cbdfa0693f65c805">buildCommodityForward</a>(<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 1, <span class="stringliteral">&quot;COMDTY_GOLD_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 1170.0, 100));</div>
<div class="line"><span class="lineno">  208</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a4d9dd0dc4dd4bf05cbdfa0693f65c805">buildCommodityForward</a>(<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, 4, <span class="stringliteral">&quot;COMDTY_WTI_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 46.0, 100000));</div>
<div class="line"><span class="lineno">  209</span>    portfolio-&gt;add(</div>
<div class="line"><span class="lineno">  210</span>        <a class="code hl_function" href="namespacetestsuite.html#ae0f01fdbe1e8aab7a87c082c08b0bf3b">buildCommodityOption</a>(<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 1, <span class="stringliteral">&quot;COMDTY_GOLD_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 1170.0, 100));</div>
<div class="line"><span class="lineno">  211</span>    portfolio-&gt;add(</div>
<div class="line"><span class="lineno">  212</span>        <a class="code hl_function" href="namespacetestsuite.html#ae0f01fdbe1e8aab7a87c082c08b0bf3b">buildCommodityOption</a>(<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, <span class="stringliteral">&quot;Put&quot;</span>, 4, <span class="stringliteral">&quot;COMDTY_WTI_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 46.0, 100000));</div>
<div class="line"><span class="lineno">  213</span>    portfolio-&gt;build(factory);</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Portfolio size after build: &quot;</span> &lt;&lt; portfolio-&gt;size());</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <span class="comment">// build the scenario valuation engine</span></div>
<div class="line"><span class="lineno">  218</span>    boost::shared_ptr&lt;DateGrid&gt; dg = boost::make_shared&lt;DateGrid&gt;(</div>
<div class="line"><span class="lineno">  219</span>        <span class="stringliteral">&quot;1,0W&quot;</span>); <span class="comment">// TODO - extend the DateGrid interface so that it can actually take a vector of dates as input</span></div>
<div class="line"><span class="lineno">  220</span>    vector&lt;boost::shared_ptr&lt;ValuationCalculator&gt;&gt; calculators;</div>
<div class="line"><span class="lineno">  221</span>    calculators.push_back(boost::make_shared&lt;NPVCalculator&gt;(simMarketData-&gt;baseCcy()));</div>
<div class="line"><span class="lineno">  222</span>    <a class="code hl_class" href="classore_1_1analytics_1_1_valuation_engine.html">ValuationEngine</a> engine(today, dg, simMarket,</div>
<div class="line"><span class="lineno">  223</span>                           factory-&gt;modelBuilders()); <span class="comment">// last argument required for model recalibration</span></div>
<div class="line"><span class="lineno">  224</span>    <span class="comment">// run scenarios and fill the cube</span></div>
<div class="line"><span class="lineno">  225</span>    cpu_timer t;</div>
<div class="line"><span class="lineno">  226</span>    boost::shared_ptr&lt;NPVCube&gt; cube = boost::make_shared&lt;DoublePrecisionInMemoryCube&gt;(</div>
<div class="line"><span class="lineno">  227</span>        today, portfolio-&gt;ids(), vector&lt;Date&gt;(1, today), scenarioGenerator-&gt;samples());</div>
<div class="line"><span class="lineno">  228</span>    engine.buildCube(portfolio, cube, calculators);</div>
<div class="line"><span class="lineno">  229</span>    t.stop();</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>    <span class="keyword">struct </span>Results {</div>
<div class="line"><span class="lineno">  232</span>        <span class="keywordtype">string</span> id;</div>
<div class="line"><span class="lineno">  233</span>        <span class="keywordtype">string</span> label;</div>
<div class="line"><span class="lineno">  234</span>        Real npv;</div>
<div class="line"><span class="lineno">  235</span>        Real sensi;</div>
<div class="line"><span class="lineno">  236</span>    };</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    <span class="comment">// clang-format off</span></div>
<div class="line"><span class="lineno">  239</span>    std::vector&lt;Results&gt; cachedResults = {</div>
<div class="line"><span class="lineno">  240</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/0/6M&quot;</span>, -928826, -2.51631},</div>
<div class="line"><span class="lineno">  241</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/1/1Y&quot;</span>, -928826, 14.6846},</div>
<div class="line"><span class="lineno">  242</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/2/2Y&quot;</span>, -928826, 19.0081},</div>
<div class="line"><span class="lineno">  243</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/3/3Y&quot;</span>, -928826, 46.1186},</div>
<div class="line"><span class="lineno">  244</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/4/5Y&quot;</span>, -928826, 85.1033},</div>
<div class="line"><span class="lineno">  245</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/5/7Y&quot;</span>, -928826, 149.43},</div>
<div class="line"><span class="lineno">  246</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/6/10Y&quot;</span>, -928826, 205.064},</div>
<div class="line"><span class="lineno">  247</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/0/6M&quot;</span>, -928826, 2.51644},</div>
<div class="line"><span class="lineno">  248</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/1/1Y&quot;</span>, -928826, -14.6863},</div>
<div class="line"><span class="lineno">  249</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/2/2Y&quot;</span>, -928826, -19.0137},</div>
<div class="line"><span class="lineno">  250</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/3/3Y&quot;</span>, -928826, -46.1338},</div>
<div class="line"><span class="lineno">  251</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/4/5Y&quot;</span>, -928826, -85.1406},</div>
<div class="line"><span class="lineno">  252</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/5/7Y&quot;</span>, -928826, -149.515},</div>
<div class="line"><span class="lineno">  253</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/6/10Y&quot;</span>, -928826, -205.239},</div>
<div class="line"><span class="lineno">  254</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/0/6M&quot;</span>, -928826, -495.013},</div>
<div class="line"><span class="lineno">  255</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, -928826, 14.7304},</div>
<div class="line"><span class="lineno">  256</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -928826, 38.7816},</div>
<div class="line"><span class="lineno">  257</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -928826, 94.186},</div>
<div class="line"><span class="lineno">  258</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -928826, 173.125},</div>
<div class="line"><span class="lineno">  259</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -928826, 304.648},</div>
<div class="line"><span class="lineno">  260</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -928826, 8479.55},</div>
<div class="line"><span class="lineno">  261</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/0/6M&quot;</span>, -928826, 495.037},</div>
<div class="line"><span class="lineno">  262</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, -928826, -14.5864},</div>
<div class="line"><span class="lineno">  263</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -928826, -38.4045},</div>
<div class="line"><span class="lineno">  264</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -928826, -93.532},</div>
<div class="line"><span class="lineno">  265</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -928826, -171.969},</div>
<div class="line"><span class="lineno">  266</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -928826, -302.864},</div>
<div class="line"><span class="lineno">  267</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -928826, -8478.14},</div>
<div class="line"><span class="lineno">  268</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/0/6M&quot;</span>, 980404, -1.04797},</div>
<div class="line"><span class="lineno">  269</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/1/1Y&quot;</span>, 980404, -6.06931},</div>
<div class="line"><span class="lineno">  270</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/2/2Y&quot;</span>, 980404, -15.8605},</div>
<div class="line"><span class="lineno">  271</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/3/3Y&quot;</span>, 980404, -38.0708},</div>
<div class="line"><span class="lineno">  272</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/4/5Y&quot;</span>, 980404, -68.7288},</div>
<div class="line"><span class="lineno">  273</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/5/7Y&quot;</span>, 980404, -118.405},</div>
<div class="line"><span class="lineno">  274</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/6/10Y&quot;</span>, 980404, -244.946},</div>
<div class="line"><span class="lineno">  275</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/7/15Y&quot;</span>, 980404, -202.226},</div>
<div class="line"><span class="lineno">  276</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/8/20Y&quot;</span>, 980404, 0.0148314},</div>
<div class="line"><span class="lineno">  277</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/0/6M&quot;</span>, 980404, 1.04797},</div>
<div class="line"><span class="lineno">  278</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/1/1Y&quot;</span>, 980404, 6.06959},</div>
<div class="line"><span class="lineno">  279</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/2/2Y&quot;</span>, 980404, 15.8623},</div>
<div class="line"><span class="lineno">  280</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/3/3Y&quot;</span>, 980404, 38.0784},</div>
<div class="line"><span class="lineno">  281</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/4/5Y&quot;</span>, 980404, 68.7502},</div>
<div class="line"><span class="lineno">  282</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/5/7Y&quot;</span>, 980404, 118.458},</div>
<div class="line"><span class="lineno">  283</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/6/10Y&quot;</span>, 980404, 245.108},</div>
<div class="line"><span class="lineno">  284</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/7/15Y&quot;</span>, 980404, 202.42},</div>
<div class="line"><span class="lineno">  285</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/8/20Y&quot;</span>, 980404, -0.0148314},</div>
<div class="line"><span class="lineno">  286</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, 980404, -201.015},</div>
<div class="line"><span class="lineno">  287</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, 980404, 18.134},</div>
<div class="line"><span class="lineno">  288</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, 980404, 47.3066},</div>
<div class="line"><span class="lineno">  289</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, 980404, 113.4},</div>
<div class="line"><span class="lineno">  290</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, 980404, 205.068},</div>
<div class="line"><span class="lineno">  291</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, 980404, 352.859},</div>
<div class="line"><span class="lineno">  292</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, 980404, 730.076},</div>
<div class="line"><span class="lineno">  293</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/7/15Y&quot;</span>, 980404, 8626.78},</div>
<div class="line"><span class="lineno">  294</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/8/20Y&quot;</span>, 980404, 5.86437},</div>
<div class="line"><span class="lineno">  295</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, 980404, 201.03},</div>
<div class="line"><span class="lineno">  296</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, 980404, -18.0746},</div>
<div class="line"><span class="lineno">  297</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, 980404, -47.1526},</div>
<div class="line"><span class="lineno">  298</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, 980404, -113.136},</div>
<div class="line"><span class="lineno">  299</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, 980404, -204.611},</div>
<div class="line"><span class="lineno">  300</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, 980404, -352.166},</div>
<div class="line"><span class="lineno">  301</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, 980404, -729.248},</div>
<div class="line"><span class="lineno">  302</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/7/15Y&quot;</span>, 980404, -8626.13},</div>
<div class="line"><span class="lineno">  303</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/8/20Y&quot;</span>, 980404, -5.86436},</div>
<div class="line"><span class="lineno">  304</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, 980404, -9706.97},</div>
<div class="line"><span class="lineno">  305</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, 980404, 9903.07},</div>
<div class="line"><span class="lineno">  306</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/0/6M&quot;</span>, 69795.3, 2.12392},</div>
<div class="line"><span class="lineno">  307</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/1/1Y&quot;</span>, 69795.3, -0.646097},</div>
<div class="line"><span class="lineno">  308</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/2/2Y&quot;</span>, 69795.3, -1.75066},</div>
<div class="line"><span class="lineno">  309</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/3/3Y&quot;</span>, 69795.3, -4.24827},</div>
<div class="line"><span class="lineno">  310</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/4/5Y&quot;</span>, 69795.3, -7.2252},</div>
<div class="line"><span class="lineno">  311</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/5/7Y&quot;</span>, 69795.3, -12.5287},</div>
<div class="line"><span class="lineno">  312</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/6/10Y&quot;</span>, 69795.3, -24.7828},</div>
<div class="line"><span class="lineno">  313</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/7/15Y&quot;</span>, 69795.3, -39.2456},</div>
<div class="line"><span class="lineno">  314</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/8/20Y&quot;</span>, 69795.3, 31.2081},</div>
<div class="line"><span class="lineno">  315</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/0/6M&quot;</span>, 69795.3, -2.12413},</div>
<div class="line"><span class="lineno">  316</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/1/1Y&quot;</span>, 69795.3, 0.645698},</div>
<div class="line"><span class="lineno">  317</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/2/2Y&quot;</span>, 69795.3, 1.74981},</div>
<div class="line"><span class="lineno">  318</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/3/3Y&quot;</span>, 69795.3, 4.2473},</div>
<div class="line"><span class="lineno">  319</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/4/5Y&quot;</span>, 69795.3, 7.22426},</div>
<div class="line"><span class="lineno">  320</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/5/7Y&quot;</span>, 69795.3, 12.5298},</div>
<div class="line"><span class="lineno">  321</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/6/10Y&quot;</span>, 69795.3, 24.7939},</div>
<div class="line"><span class="lineno">  322</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/7/15Y&quot;</span>, 69795.3, 39.2773},</div>
<div class="line"><span class="lineno">  323</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/8/20Y&quot;</span>, 69795.3, -31.2925},</div>
<div class="line"><span class="lineno">  324</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/0/6M&quot;</span>, 69795.3, -308.49},</div>
<div class="line"><span class="lineno">  325</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/1/1Y&quot;</span>, 69795.3, 68.819},</div>
<div class="line"><span class="lineno">  326</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/2/2Y&quot;</span>, 69795.3, 81.3735},</div>
<div class="line"><span class="lineno">  327</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/3/3Y&quot;</span>, 69795.3, 239.034},</div>
<div class="line"><span class="lineno">  328</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/4/5Y&quot;</span>, 69795.3, 372.209},</div>
<div class="line"><span class="lineno">  329</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/5/7Y&quot;</span>, 69795.3, 654.949},</div>
<div class="line"><span class="lineno">  330</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/6/10Y&quot;</span>, 69795.3, 1343.01},</div>
<div class="line"><span class="lineno">  331</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/7/15Y&quot;</span>, 69795.3, 2139.68},</div>
<div class="line"><span class="lineno">  332</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/8/20Y&quot;</span>, 69795.3, 12633.8},</div>
<div class="line"><span class="lineno">  333</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/0/6M&quot;</span>, 69795.3, 308.513},</div>
<div class="line"><span class="lineno">  334</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/1/1Y&quot;</span>, 69795.3, -68.7287},</div>
<div class="line"><span class="lineno">  335</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/2/2Y&quot;</span>, 69795.3, -81.1438},</div>
<div class="line"><span class="lineno">  336</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/3/3Y&quot;</span>, 69795.3, -238.649},</div>
<div class="line"><span class="lineno">  337</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/4/5Y&quot;</span>, 69795.3, -371.553},</div>
<div class="line"><span class="lineno">  338</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/5/7Y&quot;</span>, 69795.3, -653.972},</div>
<div class="line"><span class="lineno">  339</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/6/10Y&quot;</span>, 69795.3, -1341.88},</div>
<div class="line"><span class="lineno">  340</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/7/15Y&quot;</span>, 69795.3, -2138.11},</div>
<div class="line"><span class="lineno">  341</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/8/20Y&quot;</span>, 69795.3, -12632.5},</div>
<div class="line"><span class="lineno">  342</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURGBP/0/spot&quot;</span>, 69795.3, -691.043},</div>
<div class="line"><span class="lineno">  343</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURGBP/0/spot&quot;</span>, 69795.3, 705.003},</div>
<div class="line"><span class="lineno">  344</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/JPY/0/6M&quot;</span>, 871.03, -0.00750246},</div>
<div class="line"><span class="lineno">  345</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/JPY/1/1Y&quot;</span>, 871.03, -0.00147994},</div>
<div class="line"><span class="lineno">  346</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/JPY/2/2Y&quot;</span>, 871.03, -0.020079},</div>
<div class="line"><span class="lineno">  347</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/JPY/3/3Y&quot;</span>, 871.03, -0.0667249},</div>
<div class="line"><span class="lineno">  348</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/JPY/4/5Y&quot;</span>, 871.03, 4.75708},</div>
<div class="line"><span class="lineno">  349</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/JPY/0/6M&quot;</span>, 871.03, 0.00747801},</div>
<div class="line"><span class="lineno">  350</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/JPY/1/1Y&quot;</span>, 871.03, 0.00140807},</div>
<div class="line"><span class="lineno">  351</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/JPY/2/2Y&quot;</span>, 871.03, 0.0199001},</div>
<div class="line"><span class="lineno">  352</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/JPY/3/3Y&quot;</span>, 871.03, 0.0664106},</div>
<div class="line"><span class="lineno">  353</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/JPY/4/5Y&quot;</span>, 871.03, -4.75978},</div>
<div class="line"><span class="lineno">  354</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/JPY-LIBOR-6M/0/6M&quot;</span>, 871.03, -193.514},</div>
<div class="line"><span class="lineno">  355</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/JPY-LIBOR-6M/1/1Y&quot;</span>, 871.03, 2.95767},</div>
<div class="line"><span class="lineno">  356</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/JPY-LIBOR-6M/2/2Y&quot;</span>, 871.03, 7.81453},</div>
<div class="line"><span class="lineno">  357</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/JPY-LIBOR-6M/3/3Y&quot;</span>, 871.03, 19.3576},</div>
<div class="line"><span class="lineno">  358</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/JPY-LIBOR-6M/4/5Y&quot;</span>, 871.03, 3832.83},</div>
<div class="line"><span class="lineno">  359</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/JPY-LIBOR-6M/0/6M&quot;</span>, 871.03, 193.528},</div>
<div class="line"><span class="lineno">  360</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/JPY-LIBOR-6M/1/1Y&quot;</span>, 871.03, -2.90067},</div>
<div class="line"><span class="lineno">  361</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/JPY-LIBOR-6M/2/2Y&quot;</span>, 871.03, -7.6631},</div>
<div class="line"><span class="lineno">  362</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/JPY-LIBOR-6M/3/3Y&quot;</span>, 871.03, -19.0907},</div>
<div class="line"><span class="lineno">  363</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/JPY-LIBOR-6M/4/5Y&quot;</span>, 871.03, -3832.59},</div>
<div class="line"><span class="lineno">  364</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURJPY/0/spot&quot;</span>, 871.03, -8.62406},</div>
<div class="line"><span class="lineno">  365</span>        {<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURJPY/0/spot&quot;</span>, 871.03, 8.79829},</div>
<div class="line"><span class="lineno">  366</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/6/10Y&quot;</span>, 37497.4, -10.0061},</div>
<div class="line"><span class="lineno">  367</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/7/15Y&quot;</span>, 37497.4, -28.0689},</div>
<div class="line"><span class="lineno">  368</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/8/20Y&quot;</span>, 37497.4, -17.5118},</div>
<div class="line"><span class="lineno">  369</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/6/10Y&quot;</span>, 37497.4, 10.0128},</div>
<div class="line"><span class="lineno">  370</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/7/15Y&quot;</span>, 37497.4, 28.0967},</div>
<div class="line"><span class="lineno">  371</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/8/20Y&quot;</span>, 37497.4, 17.535},</div>
<div class="line"><span class="lineno">  372</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 37497.4, -395.217},</div>
<div class="line"><span class="lineno">  373</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, 37497.4, 56.7325},</div>
<div class="line"><span class="lineno">  374</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, 37497.4, 722.297},</div>
<div class="line"><span class="lineno">  375</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 37497.4, 397.912},</div>
<div class="line"><span class="lineno">  376</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, 37497.4, -56.5086},</div>
<div class="line"><span class="lineno">  377</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, 37497.4, -713.454},</div>
<div class="line"><span class="lineno">  378</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, 37497.4, 367.34},</div>
<div class="line"><span class="lineno">  379</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, 37497.4, -367.339},</div>
<div class="line"><span class="lineno">  380</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/2/2Y&quot;</span>, 10728, -0.485565},</div>
<div class="line"><span class="lineno">  381</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/3/3Y&quot;</span>, 10728, -1.08915},</div>
<div class="line"><span class="lineno">  382</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/4/5Y&quot;</span>, 10728, -1.98536},</div>
<div class="line"><span class="lineno">  383</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/5/7Y&quot;</span>, 10728, -0.589162},</div>
<div class="line"><span class="lineno">  384</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/6/10Y&quot;</span>, 10728, 0.00671364},</div>
<div class="line"><span class="lineno">  385</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/2/2Y&quot;</span>, 10728, 0.485627},</div>
<div class="line"><span class="lineno">  386</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/3/3Y&quot;</span>, 10728, 1.08927},</div>
<div class="line"><span class="lineno">  387</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/4/5Y&quot;</span>, 10728, 1.9858},</div>
<div class="line"><span class="lineno">  388</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/5/7Y&quot;</span>, 10728, 0.589199},</div>
<div class="line"><span class="lineno">  389</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/6/10Y&quot;</span>, 10728, -0.00671365},</div>
<div class="line"><span class="lineno">  390</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 10728, -97.3815},</div>
<div class="line"><span class="lineno">  391</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 10728, 4.02331},</div>
<div class="line"><span class="lineno">  392</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 10728, 8.90295},</div>
<div class="line"><span class="lineno">  393</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 10728, 322.905},</div>
<div class="line"><span class="lineno">  394</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 10728, 1.2365},</div>
<div class="line"><span class="lineno">  395</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 10728, 97.9503},</div>
<div class="line"><span class="lineno">  396</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 10728, -3.98884},</div>
<div class="line"><span class="lineno">  397</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 10728, -8.83939},</div>
<div class="line"><span class="lineno">  398</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 10728, -316.852},</div>
<div class="line"><span class="lineno">  399</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 10728, -1.23641},</div>
<div class="line"><span class="lineno">  400</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 10728, 102.403},</div>
<div class="line"><span class="lineno">  401</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 10728, 0.187171},</div>
<div class="line"><span class="lineno">  402</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 10728, -102.402},</div>
<div class="line"><span class="lineno">  403</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 10728, -0.187171},</div>
<div class="line"><span class="lineno">  404</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/2/2Y&quot;</span>, 9574.97, -0.255216},</div>
<div class="line"><span class="lineno">  405</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/3/3Y&quot;</span>, 9574.97, -1.08915},</div>
<div class="line"><span class="lineno">  406</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/4/5Y&quot;</span>, 9574.97, -1.98536},</div>
<div class="line"><span class="lineno">  407</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/5/7Y&quot;</span>, 9574.97, -0.589162},</div>
<div class="line"><span class="lineno">  408</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/6/10Y&quot;</span>, 9574.97, 0.00671364},</div>
<div class="line"><span class="lineno">  409</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/2/2Y&quot;</span>, 9574.97, 0.255232},</div>
<div class="line"><span class="lineno">  410</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/3/3Y&quot;</span>, 9574.97, 1.08927},</div>
<div class="line"><span class="lineno">  411</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/4/5Y&quot;</span>, 9574.97, 1.9858},</div>
<div class="line"><span class="lineno">  412</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/5/7Y&quot;</span>, 9574.97, 0.589199},</div>
<div class="line"><span class="lineno">  413</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/6/10Y&quot;</span>, 9574.97, -0.00671365},</div>
<div class="line"><span class="lineno">  414</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 9574.97, -97.3815},</div>
<div class="line"><span class="lineno">  415</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 9574.97, 4.02331},</div>
<div class="line"><span class="lineno">  416</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 9574.97, 8.90295},</div>
<div class="line"><span class="lineno">  417</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 9574.97, 322.905},</div>
<div class="line"><span class="lineno">  418</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 9574.97, 1.2365},</div>
<div class="line"><span class="lineno">  419</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 9574.97, 97.9503},</div>
<div class="line"><span class="lineno">  420</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 9574.97, -3.98884},</div>
<div class="line"><span class="lineno">  421</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 9574.97, -8.83939},</div>
<div class="line"><span class="lineno">  422</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 9574.97, -316.852},</div>
<div class="line"><span class="lineno">  423</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 9574.97, -1.23641},</div>
<div class="line"><span class="lineno">  424</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 9574.97, 102.403},</div>
<div class="line"><span class="lineno">  425</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 9574.97, 0.187171},</div>
<div class="line"><span class="lineno">  426</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 9574.97, -102.402},</div>
<div class="line"><span class="lineno">  427</span>        {<span class="stringliteral">&quot;17_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 9574.97, -0.187171},</div>
<div class="line"><span class="lineno">  428</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/2/2Y&quot;</span>, 28942.4, -0.1908},</div>
<div class="line"><span class="lineno">  429</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/3/3Y&quot;</span>, 28942.4, -1.08453},</div>
<div class="line"><span class="lineno">  430</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/4/5Y&quot;</span>, 28942.4, -2.40986},</div>
<div class="line"><span class="lineno">  431</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/5/7Y&quot;</span>, 28942.4, -5.27631},</div>
<div class="line"><span class="lineno">  432</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/6/10Y&quot;</span>, 28942.4, -10.4971},</div>
<div class="line"><span class="lineno">  433</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/7/15Y&quot;</span>, 28942.4, -2.50552},</div>
<div class="line"><span class="lineno">  434</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/2/2Y&quot;</span>, 28942.4, 0.190804},</div>
<div class="line"><span class="lineno">  435</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/3/3Y&quot;</span>, 28942.4, 1.08461},</div>
<div class="line"><span class="lineno">  436</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/4/5Y&quot;</span>, 28942.4, 2.41026},</div>
<div class="line"><span class="lineno">  437</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/5/7Y&quot;</span>, 28942.4, 5.27825},</div>
<div class="line"><span class="lineno">  438</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/6/10Y&quot;</span>, 28942.4, 10.504},</div>
<div class="line"><span class="lineno">  439</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/7/15Y&quot;</span>, 28942.4, 2.50645},</div>
<div class="line"><span class="lineno">  440</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 28942.4, -38.301},</div>
<div class="line"><span class="lineno">  441</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 28942.4, -45.5766},</div>
<div class="line"><span class="lineno">  442</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 28942.4, -65.0922},</div>
<div class="line"><span class="lineno">  443</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 28942.4, -18.1541},</div>
<div class="line"><span class="lineno">  444</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 28942.4, 305.628},</div>
<div class="line"><span class="lineno">  445</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, 28942.4, 286.162},</div>
<div class="line"><span class="lineno">  446</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 28942.4, 38.3044},</div>
<div class="line"><span class="lineno">  447</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 28942.4, 45.5813},</div>
<div class="line"><span class="lineno">  448</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 28942.4, 67.0121},</div>
<div class="line"><span class="lineno">  449</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 28942.4, 19.5217},</div>
<div class="line"><span class="lineno">  450</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 28942.4, -305.566},</div>
<div class="line"><span class="lineno">  451</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, 28942.4, -286.126},</div>
<div class="line"><span class="lineno">  452</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 28942.4, 11.0872},</div>
<div class="line"><span class="lineno">  453</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/1/2Y/10Y/ATM&quot;</span>, 28942.4, 76.6783},</div>
<div class="line"><span class="lineno">  454</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 28942.4, 109.723},</div>
<div class="line"><span class="lineno">  455</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/3/5Y/10Y/ATM&quot;</span>, 28942.4, 60.6695},</div>
<div class="line"><span class="lineno">  456</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/4/10Y/5Y/ATM&quot;</span>, 28942.4, 18.7823},</div>
<div class="line"><span class="lineno">  457</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, 28942.4, 4.70603},</div>
<div class="line"><span class="lineno">  458</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 28942.4, -11.1019},</div>
<div class="line"><span class="lineno">  459</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/1/2Y/10Y/ATM&quot;</span>, 28942.4, -77.4478},</div>
<div class="line"><span class="lineno">  460</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 28942.4, -109.977},</div>
<div class="line"><span class="lineno">  461</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/3/5Y/10Y/ATM&quot;</span>, 28942.4, -60.9071},</div>
<div class="line"><span class="lineno">  462</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/4/10Y/5Y/ATM&quot;</span>, 28942.4, -18.8482},</div>
<div class="line"><span class="lineno">  463</span>        {<span class="stringliteral">&quot;13_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, 28942.4, -4.71396},</div>
<div class="line"><span class="lineno">  464</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/3/3Y&quot;</span>, 1.36968e+06, -2107.81},</div>
<div class="line"><span class="lineno">  465</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/4/5Y&quot;</span>, 1.36968e+06, -3.85768},</div>
<div class="line"><span class="lineno">  466</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/3/3Y&quot;</span>, 1.36968e+06, 1698.91},</div>
<div class="line"><span class="lineno">  467</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/4/5Y&quot;</span>, 1.36968e+06, 3.10717},</div>
<div class="line"><span class="lineno">  468</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/3/3Y&quot;</span>, 1.36968e+06, 2109.74},</div>
<div class="line"><span class="lineno">  469</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/4/5Y&quot;</span>, 1.36968e+06, 3.85768},</div>
<div class="line"><span class="lineno">  470</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/3/3Y&quot;</span>, 1.36968e+06, -1698.12},</div>
<div class="line"><span class="lineno">  471</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/4/5Y&quot;</span>, 1.36968e+06, -3.10717},</div>
<div class="line"><span class="lineno">  472</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, 1.36968e+06, 56850.7},</div>
<div class="line"><span class="lineno">  473</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, 1.36968e+06, -56537.6},</div>
<div class="line"><span class="lineno">  474</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Up:FXVolatility/EURUSD/0/5Y/ATM&quot;</span>, 1.36968e+06, 672236},</div>
<div class="line"><span class="lineno">  475</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Down:FXVolatility/EURUSD/0/5Y/ATM&quot;</span>, 1.36968e+06, -329688},</div>
<div class="line"><span class="lineno">  476</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/5/7Y&quot;</span>, 798336, -2435.22},</div>
<div class="line"><span class="lineno">  477</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/5/7Y&quot;</span>, 798336, 1880.89},</div>
<div class="line"><span class="lineno">  478</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/5/7Y&quot;</span>, 798336, 2441.08},</div>
<div class="line"><span class="lineno">  479</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/5/7Y&quot;</span>, 798336, -1878.05},</div>
<div class="line"><span class="lineno">  480</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURGBP/0/spot&quot;</span>, 798336, 27009.9},</div>
<div class="line"><span class="lineno">  481</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURGBP/0/spot&quot;</span>, 798336, -26700.2},</div>
<div class="line"><span class="lineno">  482</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Up:FXVolatility/EURGBP/0/5Y/ATM&quot;</span>, 798336, 1.36635e+06},</div>
<div class="line"><span class="lineno">  483</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Down:FXVolatility/EURGBP/0/5Y/ATM&quot;</span>, 798336, -798336},</div>
<div class="line"><span class="lineno">  484</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/2/2Y&quot;</span>, 289.105, -7.28588e-07},</div>
<div class="line"><span class="lineno">  485</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/3/3Y&quot;</span>, 289.105, -0.000381869},</div>
<div class="line"><span class="lineno">  486</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/4/5Y&quot;</span>, 289.105, -0.00790528},</div>
<div class="line"><span class="lineno">  487</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/5/7Y&quot;</span>, 289.105, -0.0764893},</div>
<div class="line"><span class="lineno">  488</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/EUR/6/10Y&quot;</span>, 289.105, -0.162697},</div>
<div class="line"><span class="lineno">  489</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/2/2Y&quot;</span>, 289.105, 7.28664e-07},</div>
<div class="line"><span class="lineno">  490</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/3/3Y&quot;</span>, 289.105, 0.000381934},</div>
<div class="line"><span class="lineno">  491</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/4/5Y&quot;</span>, 289.105, 0.00790776},</div>
<div class="line"><span class="lineno">  492</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/5/7Y&quot;</span>, 289.105, 0.0765231},</div>
<div class="line"><span class="lineno">  493</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/EUR/6/10Y&quot;</span>, 289.105, 0.162824},</div>
<div class="line"><span class="lineno">  494</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, 289.105, -1.81582e-05},</div>
<div class="line"><span class="lineno">  495</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 289.105, -0.00670729},</div>
<div class="line"><span class="lineno">  496</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 289.105, -0.330895},</div>
<div class="line"><span class="lineno">  497</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 289.105, -2.03937},</div>
<div class="line"><span class="lineno">  498</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 289.105, -6.42991},</div>
<div class="line"><span class="lineno">  499</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 289.105, 15.5182},</div>
<div class="line"><span class="lineno">  500</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, 289.105, 1.97218e-05},</div>
<div class="line"><span class="lineno">  501</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 289.105, 0.00746096},</div>
<div class="line"><span class="lineno">  502</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 289.105, 0.353405},</div>
<div class="line"><span class="lineno">  503</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 289.105, 2.24481},</div>
<div class="line"><span class="lineno">  504</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 289.105, 7.1522},</div>
<div class="line"><span class="lineno">  505</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 289.105, -14.6675},</div>
<div class="line"><span class="lineno">  506</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/EUR/4/1Y/0.05&quot;</span>, 289.105, 8.49293e-05},</div>
<div class="line"><span class="lineno">  507</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/EUR/9/2Y/0.05&quot;</span>, 289.105, 0.0150901},</div>
<div class="line"><span class="lineno">  508</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/EUR/14/3Y/0.05&quot;</span>, 289.105, 0.620393},</div>
<div class="line"><span class="lineno">  509</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, 289.105, 17.2057},</div>
<div class="line"><span class="lineno">  510</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/EUR/24/10Y/0.05&quot;</span>, 289.105, 24.4267},</div>
<div class="line"><span class="lineno">  511</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/EUR/4/1Y/0.05&quot;</span>, 289.105, -6.97789e-05},</div>
<div class="line"><span class="lineno">  512</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/EUR/9/2Y/0.05&quot;</span>, 289.105, -0.0125099},</div>
<div class="line"><span class="lineno">  513</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/EUR/14/3Y/0.05&quot;</span>, 289.105, -0.554344},</div>
<div class="line"><span class="lineno">  514</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, 289.105, -16.1212},</div>
<div class="line"><span class="lineno">  515</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/EUR/24/10Y/0.05&quot;</span>, 289.105, -23.0264},</div>
<div class="line"><span class="lineno">  516</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/0/6M&quot;</span>, 3406.46, -7.03494e-09},</div>
<div class="line"><span class="lineno">  517</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/1/1Y&quot;</span>, 3406.46, -8.41429e-05},</div>
<div class="line"><span class="lineno">  518</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/2/2Y&quot;</span>, 3406.46, -0.00329744},</div>
<div class="line"><span class="lineno">  519</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/3/3Y&quot;</span>, 3406.46, -0.053884},</div>
<div class="line"><span class="lineno">  520</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/4/5Y&quot;</span>, 3406.46, -0.269714},</div>
<div class="line"><span class="lineno">  521</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/5/7Y&quot;</span>, 3406.46, -0.989583},</div>
<div class="line"><span class="lineno">  522</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/6/10Y&quot;</span>, 3406.46, -1.26544},</div>
<div class="line"><span class="lineno">  523</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/0/6M&quot;</span>, 3406.46, 7.0354e-09},</div>
<div class="line"><span class="lineno">  524</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/1/1Y&quot;</span>, 3406.46, 8.41464e-05},</div>
<div class="line"><span class="lineno">  525</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/2/2Y&quot;</span>, 3406.46, 0.00329786},</div>
<div class="line"><span class="lineno">  526</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/3/3Y&quot;</span>, 3406.46, 0.0538949},</div>
<div class="line"><span class="lineno">  527</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/4/5Y&quot;</span>, 3406.46, 0.269802},</div>
<div class="line"><span class="lineno">  528</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/5/7Y&quot;</span>, 3406.46, 0.990038},</div>
<div class="line"><span class="lineno">  529</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/6/10Y&quot;</span>, 3406.46, 1.26635},</div>
<div class="line"><span class="lineno">  530</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, 3406.46, 0.00150733},</div>
<div class="line"><span class="lineno">  531</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, 3406.46, 0.240284},</div>
<div class="line"><span class="lineno">  532</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, 3406.46, 2.17175},</div>
<div class="line"><span class="lineno">  533</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, 3406.46, 7.77249},</div>
<div class="line"><span class="lineno">  534</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, 3406.46, 12.9642},</div>
<div class="line"><span class="lineno">  535</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, 3406.46, 16.8269},</div>
<div class="line"><span class="lineno">  536</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, 3406.46, -81.4363},</div>
<div class="line"><span class="lineno">  537</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, 3406.46, -0.00139804},</div>
<div class="line"><span class="lineno">  538</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, 3406.46, -0.230558},</div>
<div class="line"><span class="lineno">  539</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, 3406.46, -2.00123},</div>
<div class="line"><span class="lineno">  540</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, 3406.46, -7.14862},</div>
<div class="line"><span class="lineno">  541</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, 3406.46, -11.2003},</div>
<div class="line"><span class="lineno">  542</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, 3406.46, -13.7183},</div>
<div class="line"><span class="lineno">  543</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, 3406.46, 84.0113},</div>
<div class="line"><span class="lineno">  544</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, 3406.46, -33.7273},</div>
<div class="line"><span class="lineno">  545</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, 3406.46, 34.4087},</div>
<div class="line"><span class="lineno">  546</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/USD/0/1Y/0.01&quot;</span>, 3406.46, 0.402913},</div>
<div class="line"><span class="lineno">  547</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/USD/5/2Y/0.01&quot;</span>, 3406.46, 3.32861},</div>
<div class="line"><span class="lineno">  548</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/USD/10/3Y/0.01&quot;</span>, 3406.46, 16.8798},</div>
<div class="line"><span class="lineno">  549</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/USD/15/5Y/0.01&quot;</span>, 3406.46, 96.415},</div>
<div class="line"><span class="lineno">  550</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Up:OptionletVolatility/USD/20/10Y/0.01&quot;</span>, 3406.46, 92.2212},</div>
<div class="line"><span class="lineno">  551</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/USD/0/1Y/0.01&quot;</span>, 3406.46, -0.37428},</div>
<div class="line"><span class="lineno">  552</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/USD/5/2Y/0.01&quot;</span>, 3406.46, -3.14445},</div>
<div class="line"><span class="lineno">  553</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/USD/10/3Y/0.01&quot;</span>, 3406.46, -16.3074},</div>
<div class="line"><span class="lineno">  554</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/USD/15/5Y/0.01&quot;</span>, 3406.46, -94.5309},</div>
<div class="line"><span class="lineno">  555</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;Down:OptionletVolatility/USD/20/10Y/0.01&quot;</span>, 3406.46, -90.9303},</div>
<div class="line"><span class="lineno">  556</span>        <span class="comment">// Excel calculation with z=5% flat rate, term structure day counter ActAct,</span></div>
<div class="line"><span class="lineno">  557</span>        <span class="comment">// time to maturity T = YEARFRAC(14/4/16, 14/4/26, 1) = 9.99800896, yields</span></div>
<div class="line"><span class="lineno">  558</span>        <span class="comment">// sensi to up shift d=1bp: exp(-(z+d)*T)-exp(z*T)</span></div>
<div class="line"><span class="lineno">  559</span>        <span class="comment">// = -0.00060616719559925</span></div>
<div class="line"><span class="lineno">  560</span>        {<span class="stringliteral">&quot;11_ZeroBond_EUR&quot;</span>, <span class="stringliteral">&quot;Up:YieldCurve/BondCurve1/6/10Y&quot;</span>, 0.60659, -0.000606168}, <span class="comment">// OK, diff 1e-9</span></div>
<div class="line"><span class="lineno">  561</span>        <span class="comment">// sensi to down shift d=-1bp: 0.00060677354516836</span></div>
<div class="line"><span class="lineno">  562</span>        {<span class="stringliteral">&quot;11_ZeroBond_EUR&quot;</span>, <span class="stringliteral">&quot;Down:YieldCurve/BondCurve1/6/10Y&quot;</span>, 0.60659, 0.000606774}, <span class="comment">// OK, diff &lt; 1e-9</span></div>
<div class="line"><span class="lineno">  563</span>        <span class="comment">// A relative shift in yield curve is equivalent to a relative shift in default curve</span></div>
<div class="line"><span class="lineno">  564</span>        {<span class="stringliteral">&quot;11_ZeroBond_EUR&quot;</span>, <span class="stringliteral">&quot;Up:SurvivalProbability/BondIssuer1/6/10Y&quot;</span>, 0.60659, -0.000606168},</div>
<div class="line"><span class="lineno">  565</span>        {<span class="stringliteral">&quot;11_ZeroBond_EUR&quot;</span>, <span class="stringliteral">&quot;Down:SurvivalProbability/BondIssuer1/6/10Y&quot;</span>, 0.60659, 0.000606774},</div>
<div class="line"><span class="lineno">  566</span>        <span class="comment">// sensi to up shift d=+1bp: exp(-(z+d)*T)*USDEUR - exp(-z*T)*USDEUR</span></div>
<div class="line"><span class="lineno">  567</span>        <span class="comment">// = -0.000505139329666004</span></div>
<div class="line"><span class="lineno">  568</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;Up:YieldCurve/BondCurve1/6/10Y&quot;</span>, 0.505492, -0.00050514}, <span class="comment">// OK, diff &lt; 1e-8</span></div>
<div class="line"><span class="lineno">  569</span>        <span class="comment">// sensi to down shift d=-1bp: 0.000505644620973689</span></div>
<div class="line"><span class="lineno">  570</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;Down:YieldCurve/BondCurve1/6/10Y&quot;</span>, 0.505492, 0.000505645}, <span class="comment">// OK, diff &lt; 1e-9</span></div>
<div class="line"><span class="lineno">  571</span>        <span class="comment">// A relative shift in yield curve is equivalent to a relative shift in default curve</span></div>
<div class="line"><span class="lineno">  572</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;Up:SurvivalProbability/BondIssuer1/6/10Y&quot;</span>, 0.505492, -0.00050514},</div>
<div class="line"><span class="lineno">  573</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;Down:SurvivalProbability/BondIssuer1/6/10Y&quot;</span>, 0.505492, 0.000505645},</div>
<div class="line"><span class="lineno">  574</span>        <span class="comment">// sensi to EURUSD upshift d=+1%: exp(-z*T)*USDEUR/(1+d) - exp(-z*T)*USDEUR</span></div>
<div class="line"><span class="lineno">  575</span>        <span class="comment">// = -0.00500487660122262</span></div>
<div class="line"><span class="lineno">  576</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, 0.505492, -0.00500487}, <span class="comment">// OK, diff &lt; 1e-8</span></div>
<div class="line"><span class="lineno">  577</span>        <span class="comment">// sensi to EURUSD down shift d=-1%: 0.00510598521942907</span></div>
<div class="line"><span class="lineno">  578</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, 0.505492, 0.00510598}, <span class="comment">// OK, diff &lt; 1e-8</span></div>
<div class="line"><span class="lineno">  579</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/2/2Y&quot;</span>, 216085, 123.022},</div>
<div class="line"><span class="lineno">  580</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/3/3Y&quot;</span>, 216085, 1.0169},</div>
<div class="line"><span class="lineno">  581</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/2/2Y&quot;</span>, 216085, -122.988},</div>
<div class="line"><span class="lineno">  582</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/3/3Y&quot;</span>, 216085, -1.0169},</div>
<div class="line"><span class="lineno">  583</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Up:EquitySpot/SP5/0/spot&quot;</span>, 216085, 8423.66},</div>
<div class="line"><span class="lineno">  584</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Down:EquitySpot/SP5/0/spot&quot;</span>, 216085, -8277.55},</div>
<div class="line"><span class="lineno">  585</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, 216085, -2139.45},</div>
<div class="line"><span class="lineno">  586</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, 216085, 2182.67},</div>
<div class="line"><span class="lineno">  587</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Up:EquityVolatility/SP5/0/5Y/ATM&quot;</span>, 216085, 1849.98},</div>
<div class="line"><span class="lineno">  588</span>        {<span class="stringliteral">&quot;14_EquityOption_SP5&quot;</span>, <span class="stringliteral">&quot;Down:EquityVolatility/SP5/0/5Y/ATM&quot;</span>, 216085, -1850.33},</div>
<div class="line"><span class="lineno">  589</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/0/6M&quot;</span>, -32068.5, -0.0306304},</div>
<div class="line"><span class="lineno">  590</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/1/1Y&quot;</span>, -32068.5, -0.279201},</div>
<div class="line"><span class="lineno">  591</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/2/2Y&quot;</span>, -32068.5, -0.772336},</div>
<div class="line"><span class="lineno">  592</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/3/3Y&quot;</span>, -32068.5, -1.80941},</div>
<div class="line"><span class="lineno">  593</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/4/5Y&quot;</span>, -32068.5, -3.18149},</div>
<div class="line"><span class="lineno">  594</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/5/7Y&quot;</span>, -32068.5, -5.26791},</div>
<div class="line"><span class="lineno">  595</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/6/10Y&quot;</span>, -32068.5, 58.9998},</div>
<div class="line"><span class="lineno">  596</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/0/6M&quot;</span>, -32068.5, 0.030632},</div>
<div class="line"><span class="lineno">  597</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/1/1Y&quot;</span>, -32068.5, 0.279223},</div>
<div class="line"><span class="lineno">  598</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/2/2Y&quot;</span>, -32068.5, 0.772443},</div>
<div class="line"><span class="lineno">  599</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/3/3Y&quot;</span>, -32068.5, 1.8098},</div>
<div class="line"><span class="lineno">  600</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/4/5Y&quot;</span>, -32068.5, 3.18254},</div>
<div class="line"><span class="lineno">  601</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/5/7Y&quot;</span>, -32068.5, 5.27039},</div>
<div class="line"><span class="lineno">  602</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/6/10Y&quot;</span>, -32068.5, -59.0602},</div>
<div class="line"><span class="lineno">  603</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/0/6M&quot;</span>, -32068.5, -6.17897},</div>
<div class="line"><span class="lineno">  604</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/1/1Y&quot;</span>, -32068.5, 0.672814},</div>
<div class="line"><span class="lineno">  605</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/2/2Y&quot;</span>, -32068.5, 0.804723},</div>
<div class="line"><span class="lineno">  606</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/3/3Y&quot;</span>, -32068.5, 2.4176},</div>
<div class="line"><span class="lineno">  607</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/4/5Y&quot;</span>, -32068.5, 3.61554},</div>
<div class="line"><span class="lineno">  608</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/5/7Y&quot;</span>, -32068.5, 6.77412},</div>
<div class="line"><span class="lineno">  609</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/6/10Y&quot;</span>, -32068.5, 89.6542},</div>
<div class="line"><span class="lineno">  610</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/0/6M&quot;</span>, -32068.5, 6.17927},</div>
<div class="line"><span class="lineno">  611</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/1/1Y&quot;</span>, -32068.5, -0.671026},</div>
<div class="line"><span class="lineno">  612</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/2/2Y&quot;</span>, -32068.5, -0.80017},</div>
<div class="line"><span class="lineno">  613</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/3/3Y&quot;</span>, -32068.5, -2.40996},</div>
<div class="line"><span class="lineno">  614</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/4/5Y&quot;</span>, -32068.5, -3.60255},</div>
<div class="line"><span class="lineno">  615</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/5/7Y&quot;</span>, -32068.5, -6.75478},</div>
<div class="line"><span class="lineno">  616</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/6/10Y&quot;</span>, -32068.5, -89.6393},</div>
<div class="line"><span class="lineno">  617</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURGBP/0/spot&quot;</span>, -32068.5, 317.51},</div>
<div class="line"><span class="lineno">  618</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURGBP/0/spot&quot;</span>, -32068.5, -323.924},</div>
<div class="line"><span class="lineno">  619</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:ZeroInflationCurve/UKRPI/0/1Y&quot;</span>, -32068.5, -0.0789981},</div>
<div class="line"><span class="lineno">  620</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:ZeroInflationCurve/UKRPI/1/2Y&quot;</span>, -32068.5, -0.154098},</div>
<div class="line"><span class="lineno">  621</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:ZeroInflationCurve/UKRPI/2/3Y&quot;</span>, -32068.5, -0.381073},</div>
<div class="line"><span class="lineno">  622</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:ZeroInflationCurve/UKRPI/3/5Y&quot;</span>, -32068.5, -0.749769},</div>
<div class="line"><span class="lineno">  623</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:ZeroInflationCurve/UKRPI/4/7Y&quot;</span>, -32068.5, -1.34474},</div>
<div class="line"><span class="lineno">  624</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:ZeroInflationCurve/UKRPI/5/10Y&quot;</span>, -32068.5, -144.53},</div>
<div class="line"><span class="lineno">  625</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:ZeroInflationCurve/UKRPI/0/1Y&quot;</span>, -32068.5, 0.0789981},</div>
<div class="line"><span class="lineno">  626</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:ZeroInflationCurve/UKRPI/1/2Y&quot;</span>, -32068.5, 0.154083},</div>
<div class="line"><span class="lineno">  627</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:ZeroInflationCurve/UKRPI/2/3Y&quot;</span>, -32068.5, 0.381006},</div>
<div class="line"><span class="lineno">  628</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:ZeroInflationCurve/UKRPI/3/5Y&quot;</span>, -32068.5, 0.749547},</div>
<div class="line"><span class="lineno">  629</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:ZeroInflationCurve/UKRPI/4/7Y&quot;</span>, -32068.5, 1.34416},</div>
<div class="line"><span class="lineno">  630</span>        {<span class="stringliteral">&quot;15_CPIInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:ZeroInflationCurve/UKRPI/5/10Y&quot;</span>, -32068.5, 144.404},</div>
<div class="line"><span class="lineno">  631</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/1/1Y&quot;</span>, 7005.96, 0.232259},</div>
<div class="line"><span class="lineno">  632</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/2/2Y&quot;</span>, 7005.96, -0.239315},</div>
<div class="line"><span class="lineno">  633</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/3/3Y&quot;</span>, 7005.96, -0.583046},</div>
<div class="line"><span class="lineno">  634</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/4/5Y&quot;</span>, 7005.96, -1.00199},</div>
<div class="line"><span class="lineno">  635</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/5/7Y&quot;</span>, 7005.96, -1.72218},</div>
<div class="line"><span class="lineno">  636</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/GBP/6/10Y&quot;</span>, 7005.96, -1.79744},</div>
<div class="line"><span class="lineno">  637</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/1/1Y&quot;</span>, 7005.96, -0.232282},</div>
<div class="line"><span class="lineno">  638</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/2/2Y&quot;</span>, 7005.96, 0.239363},</div>
<div class="line"><span class="lineno">  639</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/3/3Y&quot;</span>, 7005.96, 0.583198},</div>
<div class="line"><span class="lineno">  640</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/4/5Y&quot;</span>, 7005.96, 1.00236},</div>
<div class="line"><span class="lineno">  641</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/5/7Y&quot;</span>, 7005.96, 1.72305},</div>
<div class="line"><span class="lineno">  642</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/GBP/6/10Y&quot;</span>, 7005.96, 1.79882},</div>
<div class="line"><span class="lineno">  643</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/0/6M&quot;</span>, 7005.96, -0.0656954},</div>
<div class="line"><span class="lineno">  644</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/1/1Y&quot;</span>, 7005.96, -11.785},</div>
<div class="line"><span class="lineno">  645</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/2/2Y&quot;</span>, 7005.96, 0.816056},</div>
<div class="line"><span class="lineno">  646</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/3/3Y&quot;</span>, 7005.96, 2.44319},</div>
<div class="line"><span class="lineno">  647</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/4/5Y&quot;</span>, 7005.96, 3.66156},</div>
<div class="line"><span class="lineno">  648</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/5/7Y&quot;</span>, 7005.96, 6.85113},</div>
<div class="line"><span class="lineno">  649</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:IndexCurve/GBP-LIBOR-6M/6/10Y&quot;</span>, 7005.96, 90.5575},</div>
<div class="line"><span class="lineno">  650</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/0/6M&quot;</span>, 7005.96, 0.0656954},</div>
<div class="line"><span class="lineno">  651</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/1/1Y&quot;</span>, 7005.96, 11.7862},</div>
<div class="line"><span class="lineno">  652</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/2/2Y&quot;</span>, 7005.96, -0.80686},</div>
<div class="line"><span class="lineno">  653</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/3/3Y&quot;</span>, 7005.96, -2.42775},</div>
<div class="line"><span class="lineno">  654</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/4/5Y&quot;</span>, 7005.96, -3.63532},</div>
<div class="line"><span class="lineno">  655</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/5/7Y&quot;</span>, 7005.96, -6.81206},</div>
<div class="line"><span class="lineno">  656</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:IndexCurve/GBP-LIBOR-6M/6/10Y&quot;</span>, 7005.96, -90.5274},</div>
<div class="line"><span class="lineno">  657</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURGBP/0/spot&quot;</span>, 7005.96, -69.3659},</div>
<div class="line"><span class="lineno">  658</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURGBP/0/spot&quot;</span>, 7005.96, 70.7673},</div>
<div class="line"><span class="lineno">  659</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:YoYInflationCurve/UKRPI/0/1Y&quot;</span>, 7005.96, -12.1136},</div>
<div class="line"><span class="lineno">  660</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:YoYInflationCurve/UKRPI/1/2Y&quot;</span>, 7005.96, -11.4741},</div>
<div class="line"><span class="lineno">  661</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:YoYInflationCurve/UKRPI/2/3Y&quot;</span>, 7005.96, -16.3788},</div>
<div class="line"><span class="lineno">  662</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:YoYInflationCurve/UKRPI/3/5Y&quot;</span>, 7005.96, -20.4522},</div>
<div class="line"><span class="lineno">  663</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:YoYInflationCurve/UKRPI/4/7Y&quot;</span>, 7005.96, -23.3381},</div>
<div class="line"><span class="lineno">  664</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Up:YoYInflationCurve/UKRPI/5/10Y&quot;</span>, 7005.96, -17.2056},</div>
<div class="line"><span class="lineno">  665</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:YoYInflationCurve/UKRPI/0/1Y&quot;</span>, 7005.96, 12.1136},</div>
<div class="line"><span class="lineno">  666</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:YoYInflationCurve/UKRPI/1/2Y&quot;</span>, 7005.96, 11.4741},</div>
<div class="line"><span class="lineno">  667</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:YoYInflationCurve/UKRPI/2/3Y&quot;</span>, 7005.96, 16.3788},</div>
<div class="line"><span class="lineno">  668</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:YoYInflationCurve/UKRPI/3/5Y&quot;</span>, 7005.96, 20.4522},</div>
<div class="line"><span class="lineno">  669</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:YoYInflationCurve/UKRPI/4/7Y&quot;</span>, 7005.96, 23.3381},</div>
<div class="line"><span class="lineno">  670</span>        {<span class="stringliteral">&quot;16_YoYInflationSwap_UKRPI&quot;</span>, <span class="stringliteral">&quot;Down:YoYInflationCurve/UKRPI/5/10Y&quot;</span>, 7005.96, 17.2056},</div>
<div class="line"><span class="lineno">  671</span>        {<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/1/1Y&quot;</span>, -735.964496751649, 0.073448445224},</div>
<div class="line"><span class="lineno">  672</span>        {<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/1/1Y&quot;</span>, -735.964496751649, -0.073455776029},</div>
<div class="line"><span class="lineno">  673</span>        {<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, -735.964496751649, 7.286777195561},</div>
<div class="line"><span class="lineno">  674</span>        {<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, -735.964496751649, -7.433984815673},</div>
<div class="line"><span class="lineno">  675</span>        {<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:CommodityCurve/COMDTY_GOLD_USD/1/1Y&quot;</span>, -735.964496751649, 938.880422284606},</div>
<div class="line"><span class="lineno">  676</span>        {<span class="stringliteral">&quot;17_CommodityForward_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:CommodityCurve/COMDTY_GOLD_USD/1/1Y&quot;</span>, -735.964496751649, -938.880422284606},</div>
<div class="line"><span class="lineno">  677</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/3/3Y&quot;</span>, -118575.997564574063, 23.666326609469},</div>
<div class="line"><span class="lineno">  678</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/4/5Y&quot;</span>, -118575.997564574063, 23.759329674402},</div>
<div class="line"><span class="lineno">  679</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/3/3Y&quot;</span>, -118575.997564574063, -23.671051063342},</div>
<div class="line"><span class="lineno">  680</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/4/5Y&quot;</span>, -118575.997564574063, -23.764091336881},</div>
<div class="line"><span class="lineno">  681</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, -118575.997564574063, 1174.019777867070},</div>
<div class="line"><span class="lineno">  682</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, -118575.997564574063, -1197.737349137125},</div>
<div class="line"><span class="lineno">  683</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityCurve/COMDTY_WTI_USD/2/2Y&quot;</span>, -118575.997564574063, -10938.550513848924},</div>
<div class="line"><span class="lineno">  684</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityCurve/COMDTY_WTI_USD/3/5Y&quot;</span>, -118575.997564574063, -24245.826202620548},</div>
<div class="line"><span class="lineno">  685</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityCurve/COMDTY_WTI_USD/2/2Y&quot;</span>, -118575.997564574063,</div>
<div class="line"><span class="lineno">  686</span>         10938.550513849448},</div>
<div class="line"><span class="lineno">  687</span>        {<span class="stringliteral">&quot;18_CommodityForward_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityCurve/COMDTY_WTI_USD/3/5Y&quot;</span>, -118575.997564574063,</div>
<div class="line"><span class="lineno">  688</span>         24245.826202621072},</div>
<div class="line"><span class="lineno">  689</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/1/1Y&quot;</span>, 5266.437412224631, -0.516232985022},</div>
<div class="line"><span class="lineno">  690</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/2/2Y&quot;</span>, 5266.437412224631, -0.018723533876},</div>
<div class="line"><span class="lineno">  691</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/1/1Y&quot;</span>, 5266.437412224631, 0.516283587557},</div>
<div class="line"><span class="lineno">  692</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/2/2Y&quot;</span>, 5266.437412224631, 0.018723579571},</div>
<div class="line"><span class="lineno">  693</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, 5266.437412224631, -52.142944675492},</div>
<div class="line"><span class="lineno">  694</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, 5266.437412224631, 53.196337497218},</div>
<div class="line"><span class="lineno">  695</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:CommodityCurve/COMDTY_GOLD_USD/1/1Y&quot;</span>, 5266.437412224631, 490.253537097216},</div>
<div class="line"><span class="lineno">  696</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:CommodityCurve/COMDTY_GOLD_USD/1/1Y&quot;</span>, 5266.437412224631, -465.274919275530},</div>
<div class="line"><span class="lineno">  697</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Up:CommodityVolatility/COMDTY_GOLD_USD/6/1Y/ATM&quot;</span>, 5266.437412224631,</div>
<div class="line"><span class="lineno">  698</span>         56.110511491685},</div>
<div class="line"><span class="lineno">  699</span>        {<span class="stringliteral">&quot;19_CommodityOption_GOLD&quot;</span>, <span class="stringliteral">&quot;Down:CommodityVolatility/COMDTY_GOLD_USD/6/1Y/ATM&quot;</span>, 5266.437412224631,</div>
<div class="line"><span class="lineno">  700</span>         -56.112114940141},</div>
<div class="line"><span class="lineno">  701</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/3/3Y&quot;</span>, -491152.228798501019, 98.775116046891},</div>
<div class="line"><span class="lineno">  702</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:DiscountCurve/USD/4/5Y&quot;</span>, -491152.228798501019, 97.292577287881},</div>
<div class="line"><span class="lineno">  703</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/3/3Y&quot;</span>, -491152.228798501019, -98.794984069362},</div>
<div class="line"><span class="lineno">  704</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:DiscountCurve/USD/4/5Y&quot;</span>, -491152.228798501019, -97.311852635990},</div>
<div class="line"><span class="lineno">  705</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:FXSpot/EURUSD/0/spot&quot;</span>, -491152.228798501019, 4862.893354440632},</div>
<div class="line"><span class="lineno">  706</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:FXSpot/EURUSD/0/spot&quot;</span>, -491152.228798501019, -4961.133624227310},</div>
<div class="line"><span class="lineno">  707</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityCurve/COMDTY_WTI_USD/2/2Y&quot;</span>, -491152.228798501019, 4223.515679404372},</div>
<div class="line"><span class="lineno">  708</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityCurve/COMDTY_WTI_USD/3/5Y&quot;</span>, -491152.228798501019, 9317.978340855800},</div>
<div class="line"><span class="lineno">  709</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityCurve/COMDTY_WTI_USD/2/2Y&quot;</span>, -491152.228798501019, -4256.075631047075},</div>
<div class="line"><span class="lineno">  710</span>        {<span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityCurve/COMDTY_WTI_USD/3/5Y&quot;</span>, -491152.228798501019, -9477.947397496144},</div>
<div class="line"><span class="lineno">  711</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityVolatility/COMDTY_WTI_USD/3/1Y/0.95&quot;</span>, -491152.228798501019, -169.914415647450 },</div>
<div class="line"><span class="lineno">  712</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityVolatility/COMDTY_WTI_USD/6/1Y/ATM&quot;</span>, -491152.228798501019, -167.260480643541 },</div>
<div class="line"><span class="lineno">  713</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityVolatility/COMDTY_WTI_USD/5/5Y/0.95&quot;</span>, -491152.228798501019, -2553.579689398874 },</div>
<div class="line"><span class="lineno">  714</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Up:CommodityVolatility/COMDTY_WTI_USD/8/5Y/ATM&quot;</span>, -491152.228798501019, -2513.783958086802 },</div>
<div class="line"><span class="lineno">  715</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityVolatility/COMDTY_WTI_USD/3/1Y/0.95&quot;</span>, -491152.228798501019, 168.278235032340 },</div>
<div class="line"><span class="lineno">  716</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityVolatility/COMDTY_WTI_USD/6/1Y/ATM&quot;</span>, -491152.228798501019, 165.649017560529 },</div>
<div class="line"><span class="lineno">  717</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityVolatility/COMDTY_WTI_USD/5/5Y/0.95&quot;</span>, -491152.228798501019, 2540.538653619646 },</div>
<div class="line"><span class="lineno">  718</span>        { <span class="stringliteral">&quot;20_CommodityOption_OIL&quot;</span>, <span class="stringliteral">&quot;Down:CommodityVolatility/COMDTY_WTI_USD/8/5Y/ATM&quot;</span>, -491152.228798501019, 2500.755505821493 }};</div>
<div class="line"><span class="lineno">  719</span>    <span class="comment">// clang-format on</span></div>
<div class="line"><span class="lineno">  720</span> </div>
<div class="line"><span class="lineno">  721</span>    std::map&lt;pair&lt;string, string&gt;, Real&gt; npvMap, sensiMap;</div>
<div class="line"><span class="lineno">  722</span>    std::set&lt;pair&lt;string, string&gt;&gt; coveredSensis;</div>
<div class="line"><span class="lineno">  723</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; cachedResults.size(); ++i) {</div>
<div class="line"><span class="lineno">  724</span>        pair&lt;string, string&gt; p(cachedResults[i].<span class="keywordtype">id</span>, cachedResults[i].label);</div>
<div class="line"><span class="lineno">  725</span>        npvMap[p] = cachedResults[i].npv;</div>
<div class="line"><span class="lineno">  726</span>        sensiMap[p] = cachedResults[i].sensi;</div>
<div class="line"><span class="lineno">  727</span>    }</div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span>    Real tiny = 1.0e-10;</div>
<div class="line"><span class="lineno">  730</span>    Real tolerance = 0.01;</div>
<div class="line"><span class="lineno">  731</span>    Size <a class="code hl_variableRef" href="../ored/ored_2marketdata_2todaysmarket_8cpp.html#a36d2d3ec8fc39969adfd76b5ac2cfcb0">count</a> = 0;</div>
<div class="line"><span class="lineno">  732</span>    vector&lt;ShiftScenarioGenerator::ScenarioDescription&gt; desc = scenarioGenerator-&gt;scenarioDescriptions();</div>
<div class="line"><span class="lineno">  733</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; portfolio-&gt;size(); ++i) {</div>
<div class="line"><span class="lineno">  734</span>        Real npv0 = cube-&gt;getT0(i, 0);</div>
<div class="line"><span class="lineno">  735</span>        <span class="keywordtype">string</span> <span class="keywordtype">id</span> = portfolio-&gt;trades()[i]-&gt;id();</div>
<div class="line"><span class="lineno">  736</span>        <span class="keywordflow">for</span> (Size j = 1; j &lt; scenarioGenerator-&gt;samples(); ++j) { <span class="comment">// skip j = 0, this is the base scenario</span></div>
<div class="line"><span class="lineno">  737</span>            Real npv = cube-&gt;get(i, 0, j, 0);</div>
<div class="line"><span class="lineno">  738</span>            Real sensi = npv - npv0;</div>
<div class="line"><span class="lineno">  739</span>            <span class="keywordtype">string</span> label = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a>(desc[j]);</div>
<div class="line"><span class="lineno">  740</span>            <span class="keywordflow">if</span> (fabs(sensi) &gt; tiny) {</div>
<div class="line"><span class="lineno">  741</span>                <a class="code hl_variableRef" href="../ored/ored_2marketdata_2todaysmarket_8cpp.html#a36d2d3ec8fc39969adfd76b5ac2cfcb0">count</a>++;</div>
<div class="line"><span class="lineno">  742</span>                BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;{ \&quot;&quot;</span> &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;\&quot;, \&quot;&quot;</span> &lt;&lt; label &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span> &lt;&lt;</div>
<div class="line"><span class="lineno">  743</span>                    std::fixed &lt;&lt; std::setprecision(12) &lt;&lt; npv0 &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; sensi &lt;&lt; <span class="stringliteral">&quot; },&quot;</span>);</div>
<div class="line"><span class="lineno">  744</span>                pair&lt;string, string&gt; p(<span class="keywordtype">id</span>, label);</div>
<div class="line"><span class="lineno">  745</span>                QL_REQUIRE(npvMap.find(p) != npvMap.end(),</div>
<div class="line"><span class="lineno">  746</span>                           <span class="stringliteral">&quot;pair (&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;) not found in npv map&quot;</span>);</div>
<div class="line"><span class="lineno">  747</span>                QL_REQUIRE(sensiMap.find(p) != sensiMap.end(),</div>
<div class="line"><span class="lineno">  748</span>                           <span class="stringliteral">&quot;pair (&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;) not found in sensi map&quot;</span>);</div>
<div class="line"><span class="lineno">  749</span>                BOOST_CHECK_MESSAGE(fabs(npv0 - npvMap[p]) &lt; tolerance || fabs((npv0 - npvMap[p]) / npv0) &lt; tolerance,</div>
<div class="line"><span class="lineno">  750</span>                                    <span class="stringliteral">&quot;npv regression failed for pair (&quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; npv0</div>
<div class="line"><span class="lineno">  751</span>                                                                       &lt;&lt; <span class="stringliteral">&quot; vs &quot;</span> &lt;&lt; npvMap[p]);</div>
<div class="line"><span class="lineno">  752</span>                BOOST_CHECK_MESSAGE(fabs(sensi - sensiMap[p]) &lt; tolerance ||</div>
<div class="line"><span class="lineno">  753</span>                                        fabs((sensi - sensiMap[p]) / sensi) &lt; tolerance,</div>
<div class="line"><span class="lineno">  754</span>                                    <span class="stringliteral">&quot;sensitivity regression failed for pair (&quot;</span></div>
<div class="line"><span class="lineno">  755</span>                                        &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; sensi &lt;&lt; <span class="stringliteral">&quot; vs &quot;</span> &lt;&lt; sensiMap[p]);</div>
<div class="line"><span class="lineno">  756</span>        coveredSensis.insert(p);</div>
<div class="line"><span class="lineno">  757</span>            }</div>
<div class="line"><span class="lineno">  758</span>        }</div>
<div class="line"><span class="lineno">  759</span>    }</div>
<div class="line"><span class="lineno">  760</span>    BOOST_CHECK_MESSAGE(count == cachedResults.size(), <span class="stringliteral">&quot;number of non-zero sensitivities (&quot;</span></div>
<div class="line"><span class="lineno">  761</span>                                                           &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;) do not match regression data (&quot;</span></div>
<div class="line"><span class="lineno">  762</span>                                                           &lt;&lt; cachedResults.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  763</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; p : sensiMap) {</div>
<div class="line"><span class="lineno">  764</span>        <span class="keywordflow">if</span> (coveredSensis.find(p.first) == coveredSensis.end()) {</div>
<div class="line"><span class="lineno">  765</span>            BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;sensi in expected, but not in calculated results: &quot;</span> &lt;&lt; p.first.first &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><span class="lineno">  766</span>                                                                                    &lt;&lt; p.first.second);</div>
<div class="line"><span class="lineno">  767</span>        }</div>
<div class="line"><span class="lineno">  768</span>    }</div>
<div class="line"><span class="lineno">  769</span> </div>
<div class="line"><span class="lineno">  770</span>    <span class="comment">// Repeat analysis using the SensitivityAnalysis class and spot check a few deltas and gammas</span></div>
<div class="line"><span class="lineno">  771</span>    boost::shared_ptr&lt;SensitivityAnalysis&gt; sa = boost::make_shared&lt;SensitivityAnalysis&gt;(</div>
<div class="line"><span class="lineno">  772</span>        portfolio, initMarket, <a class="code hl_variableRef" href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a>, data, simMarketData, sensiData, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  773</span>    sa-&gt;generateSensitivities();</div>
<div class="line"><span class="lineno">  774</span>    map&lt;pair&lt;string, string&gt;, Real&gt; deltaMap;</div>
<div class="line"><span class="lineno">  775</span>    map&lt;pair&lt;string, string&gt;, Real&gt; gammaMap;</div>
<div class="line"><span class="lineno">  776</span>    std::set&lt;string&gt; sensiTrades;</div>
<div class="line"><span class="lineno">  777</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : portfolio-&gt;trades()) {</div>
<div class="line"><span class="lineno">  778</span>        sensiTrades.insert(p-&gt;id());</div>
<div class="line"><span class="lineno">  779</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : sa-&gt;sensiCube()-&gt;factors()) {</div>
<div class="line"><span class="lineno">  780</span>            <span class="keyword">auto</span> des = sa-&gt;sensiCube()-&gt;factorDescription(f);</div>
<div class="line"><span class="lineno">  781</span>            deltaMap[make_pair(p-&gt;id(), des)] = sa-&gt;sensiCube()-&gt;delta(p-&gt;id(), f);</div>
<div class="line"><span class="lineno">  782</span>            gammaMap[make_pair(p-&gt;id(), des)] = sa-&gt;sensiCube()-&gt;gamma(p-&gt;id(), f);</div>
<div class="line"><span class="lineno">  783</span>        }</div>
<div class="line"><span class="lineno">  784</span>    }</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>    std::vector&lt;Results&gt; cachedResults2 = {</div>
<div class="line"><span class="lineno">  787</span>        <span class="comment">// trade, factor, delta, gamma</span></div>
<div class="line"><span class="lineno">  788</span>        {<span class="stringliteral">&quot;11_ZeroBond_EUR&quot;</span>, <span class="stringliteral">&quot;YieldCurve/BondCurve1/6/10Y&quot;</span>, -0.000606168, 6.06352e-07}, <span class="comment">// gamma OK see case 1 below</span></div>
<div class="line"><span class="lineno">  789</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;YieldCurve/BondCurve1/6/10Y&quot;</span>, -0.00050514, 5.05294e-07},  <span class="comment">// gamma OK, see case 2 below</span></div>
<div class="line"><span class="lineno">  790</span>        {<span class="stringliteral">&quot;12_ZeroBond_USD&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURUSD/0/spot&quot;</span>, -0.00500487, 0.000101108}          <span class="comment">// gamma OK, see case 3</span></div>
<div class="line"><span class="lineno">  791</span>    };</div>
<div class="line"><span class="lineno">  792</span> </div>
<div class="line"><span class="lineno">  793</span>    <span class="comment">// Validation of cached gammas:</span></div>
<div class="line"><span class="lineno">  794</span>    <span class="comment">// gamma * (dx)^2 = \partial^2_x NPV(x) * (dx)^2</span></div>
<div class="line"><span class="lineno">  795</span>    <span class="comment">//               \approx (NPV(x_up) - 2 NPV(x) + NPV(x_down)) = sensi(up) + sensi(down)</span></div>
<div class="line"><span class="lineno">  796</span>    <span class="comment">// Case 1: &quot;11_ZeroBond_EUR&quot;, &quot;YieldCurve/BondCurve1/6/10Y&quot;</span></div>
<div class="line"><span class="lineno">  797</span>    <span class="comment">// NPV(x_up) - NPV(x) = -0.000606168, NPV(x_down) - NPV(x) = 0.000606774</span></div>
<div class="line"><span class="lineno">  798</span>    <span class="comment">// gamma * (dx)^2 = -0.000606168 + 0.000606774 = 0.000000606 = 6.06e-7</span></div>
<div class="line"><span class="lineno">  799</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  800</span>    <span class="comment">// Case 2: &quot;12_ZeroBond_USD&quot;, &quot;YieldCurve/BondCurve1/6/10Y&quot;</span></div>
<div class="line"><span class="lineno">  801</span>    <span class="comment">// NPV(x_up) - NPV(x) = -0.00050514, NPV(x_down) - NPV(x) = 0.000505645</span></div>
<div class="line"><span class="lineno">  802</span>    <span class="comment">// gamma * (dx)^2 =  -0.00050514 + 0.000505645 = 0.000000505 = 5.05e-7</span></div>
<div class="line"><span class="lineno">  803</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  804</span>    <span class="comment">// Case 3: &quot;12_ZeroBond_USD&quot;, &quot;FXSpot/EURUSD/0/spot&quot;</span></div>
<div class="line"><span class="lineno">  805</span>    <span class="comment">// NPV(x_up) - NPV(x) = -0.00500487, NPV(x_down) - NPV(x) = 0.00510598</span></div>
<div class="line"><span class="lineno">  806</span>    <span class="comment">// gamma * (dx)^2 =  -0.00500487 + 0.00510598 = 0.00010111</span></div>
<div class="line"><span class="lineno">  807</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  808</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; cachedResults2.size(); ++i) {</div>
<div class="line"><span class="lineno">  809</span>        pair&lt;string, string&gt; p(cachedResults2[i].<span class="keywordtype">id</span>, cachedResults2[i].label);</div>
<div class="line"><span class="lineno">  810</span>        Real delta = cachedResults2[i].npv;   <span class="comment">// is delta</span></div>
<div class="line"><span class="lineno">  811</span>        Real gamma = cachedResults2[i].sensi; <span class="comment">// is gamma</span></div>
<div class="line"><span class="lineno">  812</span>        BOOST_CHECK_MESSAGE(fabs((delta - deltaMap[p]) / delta) &lt; tolerance,</div>
<div class="line"><span class="lineno">  813</span>                            <span class="stringliteral">&quot;delta regression failed for trade &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; factor &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;, cached=&quot;</span></div>
<div class="line"><span class="lineno">  814</span>                                                                 &lt;&lt; delta &lt;&lt; <span class="stringliteral">&quot;, computed=&quot;</span> &lt;&lt; deltaMap[p]);</div>
<div class="line"><span class="lineno">  815</span>        BOOST_CHECK_MESSAGE(fabs((gamma - gammaMap[p]) / gamma) &lt; tolerance,</div>
<div class="line"><span class="lineno">  816</span>                            <span class="stringliteral">&quot;gamma regression failed for trade &quot;</span> &lt;&lt; p.first &lt;&lt; <span class="stringliteral">&quot; factor &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="stringliteral">&quot;, cached=&quot;</span></div>
<div class="line"><span class="lineno">  817</span>                                                                 &lt;&lt; gamma &lt;&lt; <span class="stringliteral">&quot;, computed=&quot;</span> &lt;&lt; gammaMap[p]);</div>
<div class="line"><span class="lineno">  818</span>    }</div>
<div class="line"><span class="lineno">  819</span> </div>
<div class="line"><span class="lineno">  820</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Cube generated in &quot;</span> &lt;&lt; t.format(default_places, <span class="stringliteral">&quot;%w&quot;</span>) &lt;&lt; <span class="stringliteral">&quot; seconds&quot;</span>);</div>
<div class="line"><span class="lineno">  821</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><span class="lineno">  822</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><span class="lineno">  823</span>}</div>
<div class="ttc" id="aclassore_1_1analytics_1_1_observation_mode_html_a46c8a310cf4c094f8c80e1cb8dc1f911"><div class="ttname"><a href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ore::analytics::ObservationMode::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdoc">Allowable mode mode.</div><div class="ttdef"><b>Definition:</b> <a href="observationmode_8hpp_source.html#l00044">observationmode.hpp:44</a></div></div>
<div class="ttc" id="aclassore_1_1analytics_1_1_valuation_engine_html"><div class="ttname"><a href="classore_1_1analytics_1_1_valuation_engine.html">ore::analytics::ValuationEngine</a></div><div class="ttdoc">Valuation Engine.</div><div class="ttdef"><b>Definition:</b> <a href="valuationengine_8hpp_source.html#l00058">valuationengine.hpp:58</a></div></div>
<div class="ttc" id="aclassore_1_1data_1_1_market_html_ab336651e3455fff1764bf576a5785bbd"><div class="ttname"><a href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">ore::data::Market::defaultConfiguration</a></div><div class="ttdeci">static const string defaultConfiguration</div></div>
<div class="ttc" id="aclassore_1_1data_1_1_portfolio_html"><div class="ttname"><a href="../ored/classore_1_1data_1_1_portfolio.html">ore::data::Portfolio</a></div></div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_aa6e080b0f36515a4544fb5b2e6495ce5"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5">testsuite::TestConfigurationObjects::setupSimMarketData5</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::ScenarioSimMarketParameters &gt; setupSimMarketData5()</div><div class="ttdoc">ScenarioSimMarketParameters instance, 5 currencies.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l00424">testmarket.cpp:424</a></div></div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_afcd9c8fe4e7efcf1332d1be41a6c323f"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f">testsuite::TestConfigurationObjects::setupSensitivityScenarioData5</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::SensitivityScenarioData &gt; setupSensitivityScenarioData5()</div><div class="ttdoc">SensitivityScenarioData instance, 5 currencies.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l00638">testmarket.cpp:638</a></div></div>
<div class="ttc" id="agroup__utilities_html_ga1b8cd9a976247da6df232ad48d4af190"><div class="ttname"><a href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190">to_string</a></div><div class="ttdeci">std::string to_string(const QuantLib::Date &amp;date)</div></div>
<div class="ttc" id="anamespacetestsuite_html_a065f2919a7ee7254653afd562b975a14"><div class="ttname"><a href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">testsuite::buildFxOption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildFxOption(string id, string longShort, string putCall, Size expiry, string boughtCcy, Real boughtAmount, string soldCcy, Real soldAmount, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00175">testportfolio.cpp:175</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a0cf55200a1ba13d942044fce914bfbf6"><div class="ttname"><a href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">testsuite::buildSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00041">testportfolio.cpp:41</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a1a1ea26e001a57a761bcef3901100d97"><div class="ttname"><a href="namespacetestsuite.html#a1a1ea26e001a57a761bcef3901100d97">testsuite::buildBermudanSwaption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildBermudanSwaption(string id, string longShort, string ccy, bool isPayer, Real notional, Size exercises, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index, string cashPhysical, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00123">testportfolio.cpp:123</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a1f8ce589c50a9c62fc458cb91de7edf5"><div class="ttname"><a href="namespacetestsuite.html#a1f8ce589c50a9c62fc458cb91de7edf5">testsuite::buildCap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCap(string id, string ccy, string longShort, Real capRate, Real notional, int start, Size term, string floatFreq, string floatDC, string index)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00244">testportfolio.cpp:244</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a2ace8fd4987982d98b9f2a4c441d9f9e"><div class="ttname"><a href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">testsuite::buildEuropeanSwaption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildEuropeanSwaption(string id, string longShort, string ccy, bool isPayer, Real notional, int start, Size term, Real rate, Real spread, string fixedFreq, string fixedDC, string floatFreq, string floatDC, string index, string cashPhysical, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00077">testportfolio.cpp:77</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a306f6ee775460a838c33bcd361cf4cd9"><div class="ttname"><a href="namespacetestsuite.html#a306f6ee775460a838c33bcd361cf4cd9">testsuite::buildYYInflationSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildYYInflationSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real spread, string floatFreq, string floatDC, string index, string yyFreq, string yyDC, string yyIndex, string observationLag, Size fixDays)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00352">testportfolio.cpp:352</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a3866ad77705e8f36e209f1a88125b3ce"><div class="ttname"><a href="namespacetestsuite.html#a3866ad77705e8f36e209f1a88125b3ce">testsuite::buildZeroBond</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildZeroBond(string id, string ccy, Real notional, Size term)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00289">testportfolio.cpp:289</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a3c54e055257b56f61fc96e8f4993aacb"><div class="ttname"><a href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">testsuite::buildEquityOption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildEquityOption(string id, string longShort, string putCall, Size expiry, string equityName, string currency, Real strike, Real quantity, Real premium, string premiumCcy, string premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00199">testportfolio.cpp:199</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a4d9dd0dc4dd4bf05cbdfa0693f65c805"><div class="ttname"><a href="namespacetestsuite.html#a4d9dd0dc4dd4bf05cbdfa0693f65c805">testsuite::buildCommodityForward</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCommodityForward(const std::string &amp;id, const std::string &amp;position, Size term, const std::string &amp;commodityName, const std::string &amp;currency, Real strike, Real quantity)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00391">testportfolio.cpp:391</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_a7da40f9d57dcfec350bdd68c50ea3b5e"><div class="ttname"><a href="namespacetestsuite.html#a7da40f9d57dcfec350bdd68c50ea3b5e">testsuite::buildFloor</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildFloor(string id, string ccy, string longShort, Real floorRate, Real notional, int start, Size term, string floatFreq, string floatDC, string index)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00250">testportfolio.cpp:250</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_ab30f7b9c44095d806d2192ff584a9172"><div class="ttname"><a href="namespacetestsuite.html#ab30f7b9c44095d806d2192ff584a9172">testsuite::buildCPIInflationSwap</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCPIInflationSwap(string id, string ccy, bool isPayer, Real notional, int start, Size term, Real spread, string floatFreq, string floatDC, string index, string cpiFreq, string cpiDC, string cpiIndex, Real baseRate, string observationLag, bool interpolated, Real cpiRate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00311">testportfolio.cpp:311</a></div></div>
<div class="ttc" id="anamespacetestsuite_html_ae0f01fdbe1e8aab7a87c082c08b0bf3b"><div class="ttname"><a href="namespacetestsuite.html#ae0f01fdbe1e8aab7a87c082c08b0bf3b">testsuite::buildCommodityOption</a></div><div class="ttdeci">boost::shared_ptr&lt; Trade &gt; buildCommodityOption(const string &amp;id, const string &amp;longShort, const string &amp;putCall, Size term, const string &amp;commodityName, const string &amp;currency, Real strike, Real quantity, Real premium, const string &amp;premiumCcy, const string &amp;premiumDate)</div><div class="ttdef"><b>Definition:</b> <a href="testportfolio_8cpp_source.html#l00406">testportfolio.cpp:406</a></div></div>
<div class="ttc" id="aored_2marketdata_2todaysmarket_8cpp_html_a36d2d3ec8fc39969adfd76b5ac2cfcb0"><div class="ttname"><a href="../ored/ored_2marketdata_2todaysmarket_8cpp.html#a36d2d3ec8fc39969adfd76b5ac2cfcb0">count</a></div><div class="ttdeci">std::size_t count</div></div>
</div><!-- fragment --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_cgraph" id="atest_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_cgraph">
<area shape="rect" title=" " alt="" coords="5,291,156,317"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ad24847236b96716fc0b97aaa04c64e94" title="Build NPV cube." alt="" coords="248,133,411,173"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="733,170,864,195"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="204,312,455,352"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="227,376,431,416"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a9cee7dbce995d0e0396b7e5fbba7a181" title=" " alt="" coords="508,5,680,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ac11882a2037b881720b88b3fd05e0124" title=" " alt="" coords="513,69,675,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a6391ff718ebf1573861f7eb2bbd8561e" title=" " alt="" coords="511,133,677,173"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_progress_reporter.html#aa0478bbe90075f6f870926294318bf7e" title=" " alt="" coords="503,197,685,237"/>
</map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_icgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_icgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_icgraph" id="atest_2sensitivityanalysis_8cpp_adc7a5ac10f6151560d3d7cefb068f0b0_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,395,31"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#a884986f587f4e96e9d36c8231440c4bd" title=" " alt="" coords="5,5,196,31"/>
</map>
</div>

</div>
</div>
<a id="a884986f587f4e96e9d36c8231440c4bd" name="a884986f587f4e96e9d36c8231440c4bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884986f587f4e96e9d36c8231440c4bd">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[1/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testPortfolioSensitivityNoneObs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00829">829</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  829</span>                                                      {</div>
<div class="line"><span class="lineno">  830</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Portfolio sensitivity (None observation mode)&quot;</span>);</div>
<div class="line"><span class="lineno">  831</span>    <a class="code hl_function" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0">testPortfolioSensitivity</a>(ObservationMode::Mode::None);</div>
<div class="line"><span class="lineno">  832</span>}</div>
<div class="ttc" id="atest_2sensitivityanalysis_8cpp_html_adc7a5ac10f6151560d3d7cefb068f0b0"><div class="ttname"><a href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0">testPortfolioSensitivity</a></div><div class="ttdeci">void testPortfolioSensitivity(ObservationMode::Mode om)</div><div class="ttdef"><b>Definition:</b> <a href="test_2sensitivityanalysis_8cpp_source.html#l00089">sensitivityanalysis.cpp:89</a></div></div>
</div><!-- fragment --><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_a884986f587f4e96e9d36c8231440c4bd_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_a884986f587f4e96e9d36c8231440c4bd_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_a884986f587f4e96e9d36c8231440c4bd_cgraph" id="atest_2sensitivityanalysis_8cpp_a884986f587f4e96e9d36c8231440c4bd_cgraph">
<area shape="rect" title=" " alt="" coords="5,291,196,317"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0" title=" " alt="" coords="244,291,395,317"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ad24847236b96716fc0b97aaa04c64e94" title="Build NPV cube." alt="" coords="487,133,649,173"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="972,170,1103,195"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="443,312,693,352"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="466,376,670,416"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a9cee7dbce995d0e0396b7e5fbba7a181" title=" " alt="" coords="747,5,919,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ac11882a2037b881720b88b3fd05e0124" title=" " alt="" coords="751,69,914,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a6391ff718ebf1573861f7eb2bbd8561e" title=" " alt="" coords="749,133,916,173"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_progress_reporter.html#aa0478bbe90075f6f870926294318bf7e" title=" " alt="" coords="741,197,924,237"/>
</map>
</div>

</div>
</div>
<a id="a763149f6f717912a18f4e67589279053" name="a763149f6f717912a18f4e67589279053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a763149f6f717912a18f4e67589279053">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[2/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testPortfolioSensitivityDisableObs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00834">834</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  834</span>                                                         {</div>
<div class="line"><span class="lineno">  835</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Portfolio sensitivity (Disable observation mode)&quot;</span>);</div>
<div class="line"><span class="lineno">  836</span>    <a class="code hl_function" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0">testPortfolioSensitivity</a>(ObservationMode::Mode::Disable);</div>
<div class="line"><span class="lineno">  837</span>}</div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_a763149f6f717912a18f4e67589279053_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_a763149f6f717912a18f4e67589279053_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_a763149f6f717912a18f4e67589279053_cgraph" id="atest_2sensitivityanalysis_8cpp_a763149f6f717912a18f4e67589279053_cgraph">
<area shape="rect" title=" " alt="" coords="5,291,196,317"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0" title=" " alt="" coords="244,291,395,317"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ad24847236b96716fc0b97aaa04c64e94" title="Build NPV cube." alt="" coords="487,133,649,173"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="972,170,1103,195"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="443,312,693,352"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="466,376,670,416"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a9cee7dbce995d0e0396b7e5fbba7a181" title=" " alt="" coords="747,5,919,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ac11882a2037b881720b88b3fd05e0124" title=" " alt="" coords="751,69,914,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a6391ff718ebf1573861f7eb2bbd8561e" title=" " alt="" coords="749,133,916,173"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_progress_reporter.html#aa0478bbe90075f6f870926294318bf7e" title=" " alt="" coords="741,197,924,237"/>
</map>
</div>

</div>
</div>
<a id="a6d03a961b7253ecd08145cfec4188428" name="a6d03a961b7253ecd08145cfec4188428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d03a961b7253ecd08145cfec4188428">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[3/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testPortfolioSensitivityDeferObs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00839">839</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  839</span>                                                       {</div>
<div class="line"><span class="lineno">  840</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Portfolio sensitivity (Defer observation mode)&quot;</span>);</div>
<div class="line"><span class="lineno">  841</span>    <a class="code hl_function" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0">testPortfolioSensitivity</a>(ObservationMode::Mode::Defer);</div>
<div class="line"><span class="lineno">  842</span>}</div>
</div><!-- fragment --><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_a6d03a961b7253ecd08145cfec4188428_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_a6d03a961b7253ecd08145cfec4188428_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_a6d03a961b7253ecd08145cfec4188428_cgraph" id="atest_2sensitivityanalysis_8cpp_a6d03a961b7253ecd08145cfec4188428_cgraph">
<area shape="rect" title=" " alt="" coords="5,291,196,317"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0" title=" " alt="" coords="244,291,395,317"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ad24847236b96716fc0b97aaa04c64e94" title="Build NPV cube." alt="" coords="487,133,649,173"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="972,170,1103,195"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="443,312,693,352"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="466,376,670,416"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a9cee7dbce995d0e0396b7e5fbba7a181" title=" " alt="" coords="747,5,919,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ac11882a2037b881720b88b3fd05e0124" title=" " alt="" coords="751,69,914,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a6391ff718ebf1573861f7eb2bbd8561e" title=" " alt="" coords="749,133,916,173"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_progress_reporter.html#aa0478bbe90075f6f870926294318bf7e" title=" " alt="" coords="741,197,924,237"/>
</map>
</div>

</div>
</div>
<a id="afee930d69e50643655a09eab94e46cb2" name="afee930d69e50643655a09eab94e46cb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee930d69e50643655a09eab94e46cb2">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[4/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testPortfolioSensitivityUnregisterObs&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00844">844</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  844</span>                                                            {</div>
<div class="line"><span class="lineno">  845</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Portfolio sensitivity (Unregister observation mode)&quot;</span>);</div>
<div class="line"><span class="lineno">  846</span>    <a class="code hl_function" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0">testPortfolioSensitivity</a>(ObservationMode::Mode::Unregister);</div>
<div class="line"><span class="lineno">  847</span>}</div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_afee930d69e50643655a09eab94e46cb2_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_afee930d69e50643655a09eab94e46cb2_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_afee930d69e50643655a09eab94e46cb2_cgraph" id="atest_2sensitivityanalysis_8cpp_afee930d69e50643655a09eab94e46cb2_cgraph">
<area shape="rect" title=" " alt="" coords="5,291,196,317"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#adc7a5ac10f6151560d3d7cefb068f0b0" title=" " alt="" coords="244,291,395,317"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ad24847236b96716fc0b97aaa04c64e94" title="Build NPV cube." alt="" coords="487,133,649,173"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga1b8cd9a976247da6df232ad48d4af190" title=" " alt="" coords="972,170,1103,195"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="443,312,693,352"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="466,376,670,416"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a9cee7dbce995d0e0396b7e5fbba7a181" title=" " alt="" coords="747,5,919,45"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#ac11882a2037b881720b88b3fd05e0124" title=" " alt="" coords="751,69,914,109"/>
<area shape="rect" href="classore_1_1analytics_1_1_valuation_engine.html#a6391ff718ebf1573861f7eb2bbd8561e" title=" " alt="" coords="749,133,916,173"/>
<area shape="rect" target="_parent" href="../ored/classore_1_1data_1_1_progress_reporter.html#aa0478bbe90075f6f870926294318bf7e" title=" " alt="" coords="741,197,924,237"/>
</map>
</div>

</div>
</div>
<a id="a1b17e228380d393777e5200506267721" name="a1b17e228380d393777e5200506267721"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b17e228380d393777e5200506267721">&#9670;&#160;</a></span>test1dShifts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test1dShifts </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>granular</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00849">849</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  849</span>                                 {</div>
<div class="line"><span class="lineno">  850</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing 1d shifts &quot;</span> &lt;&lt; (granular ? <span class="stringliteral">&quot;granular&quot;</span> : <span class="stringliteral">&quot;sparse&quot;</span>));</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>    SavedSettings backup;</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><span class="lineno">  855</span>    ObservationMode::instance().setMode(ObservationMode::Mode::None);</div>
<div class="line"><span class="lineno">  856</span> </div>
<div class="line"><span class="lineno">  857</span>    Date today = Date(14, April, 2016);</div>
<div class="line"><span class="lineno">  858</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno">  859</span> </div>
<div class="line"><span class="lineno">  860</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>    <span class="comment">// build model</span></div>
<div class="line"><span class="lineno">  863</span>    <span class="keywordtype">string</span> baseCcy = <span class="stringliteral">&quot;EUR&quot;</span>;</div>
<div class="line"><span class="lineno">  864</span>    vector&lt;string&gt; ccys;</div>
<div class="line"><span class="lineno">  865</span>    ccys.push_back(baseCcy);</div>
<div class="line"><span class="lineno">  866</span>    ccys.push_back(<span class="stringliteral">&quot;GBP&quot;</span>);</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno">  869</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno">  872</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno">  873</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299">TestConfigurationObjects::setupSimMarketData2</a>();</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno">  876</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData;</div>
<div class="line"><span class="lineno">  877</span>    <span class="keywordflow">if</span> (granular)</div>
<div class="line"><span class="lineno">  878</span>        sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#a4521758651d5f28ff2cfaab2ce80e2d6">TestConfigurationObjects::setupSensitivityScenarioData2b</a>();</div>
<div class="line"><span class="lineno">  879</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  880</span>        sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863">TestConfigurationObjects::setupSensitivityScenarioData2</a>();</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>    <span class="comment">// build sim market</span></div>
<div class="line"><span class="lineno">  883</span>    <span class="keyword">auto</span> simMarket = boost::make_shared&lt;ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><span class="lineno">  884</span> </div>
<div class="line"><span class="lineno">  885</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><span class="lineno">  886</span>    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><span class="lineno">  887</span>    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><span class="lineno">  888</span> </div>
<div class="line"><span class="lineno">  889</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><span class="lineno">  890</span>    boost::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><span class="lineno">  891</span>        boost::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket, </div>
<div class="line"><span class="lineno">  892</span>                                                         scenarioFactory, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  893</span> </div>
<div class="line"><span class="lineno">  894</span>    <span class="comment">// cache initial zero rates</span></div>
<div class="line"><span class="lineno">  895</span>    vector&lt;Period&gt; tenors = simMarketData-&gt;yieldCurveTenors(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  896</span>    vector&lt;Real&gt; initialZeros(tenors.size());</div>
<div class="line"><span class="lineno">  897</span>    vector&lt;Real&gt; times(tenors.size());</div>
<div class="line"><span class="lineno">  898</span>    <span class="keywordtype">string</span> ccy = simMarketData-&gt;ccys()[0];</div>
<div class="line"><span class="lineno">  899</span>    Handle&lt;YieldTermStructure&gt; ts = initMarket-&gt;discountCurve(ccy);</div>
<div class="line"><span class="lineno">  900</span>    DayCounter dc = ts-&gt;dayCounter();</div>
<div class="line"><span class="lineno">  901</span>    <span class="keywordflow">for</span> (Size j = 0; j &lt; tenors.size(); ++j) {</div>
<div class="line"><span class="lineno">  902</span>        Date d = today + simMarketData-&gt;yieldCurveTenors(<span class="stringliteral">&quot;&quot;</span>)[j];</div>
<div class="line"><span class="lineno">  903</span>        initialZeros[j] = ts-&gt;zeroRate(d, dc, Continuous);</div>
<div class="line"><span class="lineno">  904</span>        times[j] = dc.yearFraction(today, d);</div>
<div class="line"><span class="lineno">  905</span>    }</div>
<div class="line"><span class="lineno">  906</span> </div>
<div class="line"><span class="lineno">  907</span>    <span class="comment">// apply zero shifts for tenors on the shift curve</span></div>
<div class="line"><span class="lineno">  908</span>    <span class="comment">// collect shifted data at tenors of the underlying curve</span></div>
<div class="line"><span class="lineno">  909</span>    <span class="comment">// aggregate &quot;observed&quot; shifts</span></div>
<div class="line"><span class="lineno">  910</span>    <span class="comment">// compare to expected total shifts</span></div>
<div class="line"><span class="lineno">  911</span>    vector&lt;Period&gt; shiftTenors = sensiData-&gt;discountCurveShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>]-&gt;shiftTenors;</div>
<div class="line"><span class="lineno">  912</span>    vector&lt;Time&gt; shiftTimes(shiftTenors.size());</div>
<div class="line"><span class="lineno">  913</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; shiftTenors.size(); ++i)</div>
<div class="line"><span class="lineno">  914</span>        shiftTimes[i] = dc.yearFraction(today, today + shiftTenors[i]);</div>
<div class="line"><span class="lineno">  915</span> </div>
<div class="line"><span class="lineno">  916</span>    vector&lt;Real&gt; shiftedZeros(tenors.size());</div>
<div class="line"><span class="lineno">  917</span>    vector&lt;Real&gt; diffAbsolute(tenors.size(), 0.0);</div>
<div class="line"><span class="lineno">  918</span>    vector&lt;Real&gt; diffRelative(tenors.size(), 0.0);</div>
<div class="line"><span class="lineno">  919</span>    Real shiftSize = 0.01;</div>
<div class="line"><span class="lineno">  920</span>    SensitivityScenarioGenerator::ShiftType shiftTypeAbsolute = SensitivityScenarioGenerator::ShiftType::Absolute;</div>
<div class="line"><span class="lineno">  921</span>    SensitivityScenarioGenerator::ShiftType shiftTypeRelative = SensitivityScenarioGenerator::ShiftType::Relative;</div>
<div class="line"><span class="lineno">  922</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; shiftTenors.size(); ++i) {</div>
<div class="line"><span class="lineno">  923</span>        scenarioGenerator-&gt;applyShift(i, shiftSize, <span class="keyword">true</span>, shiftTypeAbsolute, shiftTimes, initialZeros, times,</div>
<div class="line"><span class="lineno">  924</span>                                      shiftedZeros, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  925</span>        <span class="keywordflow">for</span> (Size j = 0; j &lt; tenors.size(); ++j)</div>
<div class="line"><span class="lineno">  926</span>            diffAbsolute[j] += shiftedZeros[j] - initialZeros[j];</div>
<div class="line"><span class="lineno">  927</span>        scenarioGenerator-&gt;applyShift(i, shiftSize, <span class="keyword">true</span>, shiftTypeRelative, shiftTimes, initialZeros, times,</div>
<div class="line"><span class="lineno">  928</span>                                      shiftedZeros, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  929</span>        <span class="keywordflow">for</span> (Size j = 0; j &lt; tenors.size(); ++j)</div>
<div class="line"><span class="lineno">  930</span>            diffRelative[j] += shiftedZeros[j] / initialZeros[j] - 1.0;</div>
<div class="line"><span class="lineno">  931</span>    }</div>
<div class="line"><span class="lineno">  932</span> </div>
<div class="line"><span class="lineno">  933</span>    Real tolerance = 1.0e-10;</div>
<div class="line"><span class="lineno">  934</span>    <span class="keywordflow">for</span> (Size j = 0; j &lt; tenors.size(); ++j) {</div>
<div class="line"><span class="lineno">  935</span>        <span class="comment">// BOOST_TEST_MESSAGE(&quot;1d shift: checking sensitivity to curve tenor point &quot; &lt;&lt; j &lt;&lt; &quot;: &quot; &lt;&lt; diff[j]);</span></div>
<div class="line"><span class="lineno">  936</span>        BOOST_CHECK_MESSAGE(fabs(diffAbsolute[j] - shiftSize) &lt; tolerance,</div>
<div class="line"><span class="lineno">  937</span>                            <span class="stringliteral">&quot;inconsistency in absolute 1d shifts at curve tenor point &quot;</span> &lt;&lt; j);</div>
<div class="line"><span class="lineno">  938</span>        BOOST_CHECK_MESSAGE(fabs(diffRelative[j] - shiftSize) &lt; tolerance,</div>
<div class="line"><span class="lineno">  939</span>                            <span class="stringliteral">&quot;inconsistency in relative 1d shifts at curve tenor point &quot;</span> &lt;&lt; j);</div>
<div class="line"><span class="lineno">  940</span>    }</div>
<div class="line"><span class="lineno">  941</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><span class="lineno">  942</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><span class="lineno">  943</span>}</div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_a336ceb7de57dbce29aa878f906b57863"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863">testsuite::TestConfigurationObjects::setupSensitivityScenarioData2</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::SensitivityScenarioData &gt; setupSensitivityScenarioData2()</div><div class="ttdoc">SensitivityScenarioData instance, 2 currencies.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l00506">testmarket.cpp:506</a></div></div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_a4521758651d5f28ff2cfaab2ce80e2d6"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#a4521758651d5f28ff2cfaab2ce80e2d6">testsuite::TestConfigurationObjects::setupSensitivityScenarioData2b</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::SensitivityScenarioData &gt; setupSensitivityScenarioData2b()</div><div class="ttdoc">SensitivityScenarioData instance, 2 currencies, shifts more granular than base curve.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l00570">testmarket.cpp:570</a></div></div>
<div class="ttc" id="aclasstestsuite_1_1_test_configuration_objects_html_ae590b9666047643ef2a8e8d4b684f299"><div class="ttname"><a href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299">testsuite::TestConfigurationObjects::setupSimMarketData2</a></div><div class="ttdeci">static boost::shared_ptr&lt; ore::analytics::ScenarioSimMarketParameters &gt; setupSimMarketData2()</div><div class="ttdoc">ScenarioSimMarketParameters instance, 2 currencies.</div><div class="ttdef"><b>Definition:</b> <a href="testmarket_8cpp_source.html#l00383">testmarket.cpp:383</a></div></div>
</div><!-- fragment --><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_cgraph" id="atest_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_cgraph">
<area shape="rect" title=" " alt="" coords="5,85,96,110"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863" title="SensitivityScenarioData instance, 2 currencies." alt="" coords="144,5,395,45"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a4521758651d5f28ff2cfaab2ce80e2d6" title="SensitivityScenarioData instance, 2 currencies, shifts more granular than base curve." alt="" coords="161,70,378,125"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299" title="ScenarioSimMarketParameters instance, 2 currencies." alt="" coords="167,149,371,189"/>
</map>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_icgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_icgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_icgraph" id="atest_2sensitivityanalysis_8cpp_a1b17e228380d393777e5200506267721_icgraph">
<area shape="rect" title=" " alt="" coords="244,5,335,31"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#ae9cd5c4ef51fc25a3d90d05ee9214ad0" title=" " alt="" coords="5,5,196,31"/>
</map>
</div>

</div>
</div>
<a id="ae9cd5c4ef51fc25a3d90d05ee9214ad0" name="ae9cd5c4ef51fc25a3d90d05ee9214ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9cd5c4ef51fc25a3d90d05ee9214ad0">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[5/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">test1dShiftsSparse&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00945">945</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  945</span>{ <a class="code hl_function" href="test_2sensitivityanalysis_8cpp.html#a1b17e228380d393777e5200506267721">test1dShifts</a>(<span class="keyword">false</span>); }</div>
<div class="ttc" id="atest_2sensitivityanalysis_8cpp_html_a1b17e228380d393777e5200506267721"><div class="ttname"><a href="test_2sensitivityanalysis_8cpp.html#a1b17e228380d393777e5200506267721">test1dShifts</a></div><div class="ttdeci">void test1dShifts(bool granular)</div><div class="ttdef"><b>Definition:</b> <a href="test_2sensitivityanalysis_8cpp_source.html#l00849">sensitivityanalysis.cpp:849</a></div></div>
</div><!-- fragment --><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_ae9cd5c4ef51fc25a3d90d05ee9214ad0_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_ae9cd5c4ef51fc25a3d90d05ee9214ad0_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_ae9cd5c4ef51fc25a3d90d05ee9214ad0_cgraph" id="atest_2sensitivityanalysis_8cpp_ae9cd5c4ef51fc25a3d90d05ee9214ad0_cgraph">
<area shape="rect" title=" " alt="" coords="5,85,196,110"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#a1b17e228380d393777e5200506267721" title=" " alt="" coords="244,85,335,110"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863" title="SensitivityScenarioData instance, 2 currencies." alt="" coords="383,5,633,45"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a4521758651d5f28ff2cfaab2ce80e2d6" title="SensitivityScenarioData instance, 2 currencies, shifts more granular than base curve." alt="" coords="399,70,617,125"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299" title="ScenarioSimMarketParameters instance, 2 currencies." alt="" coords="406,149,610,189"/>
</map>
</div>

</div>
</div>
<a id="aac41ff777f2facea0d8a8f131c7e5d88" name="aac41ff777f2facea0d8a8f131c7e5d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac41ff777f2facea0d8a8f131c7e5d88">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[6/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">test1dShiftsGranular&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00947">947</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  947</span>{ <a class="code hl_function" href="test_2sensitivityanalysis_8cpp.html#a1b17e228380d393777e5200506267721">test1dShifts</a>(<span class="keyword">true</span>); }</div>
</div><!-- fragment --><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_aac41ff777f2facea0d8a8f131c7e5d88_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_aac41ff777f2facea0d8a8f131c7e5d88_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_aac41ff777f2facea0d8a8f131c7e5d88_cgraph" id="atest_2sensitivityanalysis_8cpp_aac41ff777f2facea0d8a8f131c7e5d88_cgraph">
<area shape="rect" title=" " alt="" coords="5,85,196,110"/>
<area shape="rect" href="test_2sensitivityanalysis_8cpp.html#a1b17e228380d393777e5200506267721" title=" " alt="" coords="244,85,335,110"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863" title="SensitivityScenarioData instance, 2 currencies." alt="" coords="383,5,633,45"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a4521758651d5f28ff2cfaab2ce80e2d6" title="SensitivityScenarioData instance, 2 currencies, shifts more granular than base curve." alt="" coords="399,70,617,125"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299" title="ScenarioSimMarketParameters instance, 2 currencies." alt="" coords="406,149,610,189"/>
</map>
</div>

</div>
</div>
<a id="aea1a472c8b4a005b404d5ceaac1f14fe" name="aea1a472c8b4a005b404d5ceaac1f14fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1a472c8b4a005b404d5ceaac1f14fe">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[7/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">test2dShifts&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l00949">949</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  949</span>                                   {</div>
<div class="line"><span class="lineno">  950</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing 2d shifts&quot;</span>);</div>
<div class="line"><span class="lineno">  951</span> </div>
<div class="line"><span class="lineno">  952</span>    SavedSettings backup;</div>
<div class="line"><span class="lineno">  953</span> </div>
<div class="line"><span class="lineno">  954</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><span class="lineno">  955</span>    ObservationMode::instance().setMode(ObservationMode::Mode::None);</div>
<div class="line"><span class="lineno">  956</span> </div>
<div class="line"><span class="lineno">  957</span>    Date today = Date(14, April, 2016);</div>
<div class="line"><span class="lineno">  958</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno">  961</span> </div>
<div class="line"><span class="lineno">  962</span>    <span class="comment">// build model</span></div>
<div class="line"><span class="lineno">  963</span>    <span class="keywordtype">string</span> baseCcy = <span class="stringliteral">&quot;EUR&quot;</span>;</div>
<div class="line"><span class="lineno">  964</span>    vector&lt;string&gt; ccys;</div>
<div class="line"><span class="lineno">  965</span>    ccys.push_back(baseCcy);</div>
<div class="line"><span class="lineno">  966</span>    ccys.push_back(<span class="stringliteral">&quot;GBP&quot;</span>);</div>
<div class="line"><span class="lineno">  967</span> </div>
<div class="line"><span class="lineno">  968</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno">  969</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><span class="lineno">  970</span> </div>
<div class="line"><span class="lineno">  971</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno">  972</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno">  973</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299">TestConfigurationObjects::setupSimMarketData2</a>();</div>
<div class="line"><span class="lineno">  974</span> </div>
<div class="line"><span class="lineno">  975</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno">  976</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863">TestConfigurationObjects::setupSensitivityScenarioData2</a>();</div>
<div class="line"><span class="lineno">  977</span> </div>
<div class="line"><span class="lineno">  978</span>    <span class="comment">// build sim market</span></div>
<div class="line"><span class="lineno">  979</span>    <span class="keyword">auto</span> simMarket = boost::make_shared&lt;ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><span class="lineno">  980</span> </div>
<div class="line"><span class="lineno">  981</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><span class="lineno">  982</span>    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><span class="lineno">  983</span>    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><span class="lineno">  986</span>    boost::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><span class="lineno">  987</span>        boost::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket, </div>
<div class="line"><span class="lineno">  988</span>                                                         scenarioFactory,</div>
<div class="line"><span class="lineno">  989</span>                                                         <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">  990</span> </div>
<div class="line"><span class="lineno">  991</span>    <span class="comment">// cache initial zero rates</span></div>
<div class="line"><span class="lineno">  992</span>    vector&lt;Period&gt; expiries = simMarketData-&gt;swapVolExpiries(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  993</span>    vector&lt;Period&gt; terms = simMarketData-&gt;swapVolTerms(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  994</span>    vector&lt;vector&lt;Real&gt;&gt; initialData(expiries.size(), vector&lt;Real&gt;(terms.size(), 0.0));</div>
<div class="line"><span class="lineno">  995</span>    vector&lt;Real&gt; expiryTimes(expiries.size());</div>
<div class="line"><span class="lineno">  996</span>    vector&lt;Real&gt; termTimes(terms.size());</div>
<div class="line"><span class="lineno">  997</span>    <span class="keywordtype">string</span> ccy = simMarketData-&gt;ccys()[0];</div>
<div class="line"><span class="lineno">  998</span>    Handle&lt;SwaptionVolatilityStructure&gt; ts = initMarket-&gt;swaptionVol(ccy);</div>
<div class="line"><span class="lineno">  999</span>    DayCounter dc = ts-&gt;dayCounter();</div>
<div class="line"><span class="lineno"> 1000</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; expiries.size(); ++i)</div>
<div class="line"><span class="lineno"> 1001</span>        expiryTimes[i] = dc.yearFraction(today, today + expiries[i]);</div>
<div class="line"><span class="lineno"> 1002</span>    <span class="keywordflow">for</span> (Size j = 0; j &lt; terms.size(); ++j)</div>
<div class="line"><span class="lineno"> 1003</span>        termTimes[j] = dc.yearFraction(today, today + terms[j]);</div>
<div class="line"><span class="lineno"> 1004</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; expiries.size(); ++i) {</div>
<div class="line"><span class="lineno"> 1005</span>        <span class="keywordflow">for</span> (Size j = 0; j &lt; terms.size(); ++j)</div>
<div class="line"><span class="lineno"> 1006</span>            initialData[i][j] = ts-&gt;volatility(expiries[i], terms[j], Null&lt;Real&gt;()); <span class="comment">// ATM</span></div>
<div class="line"><span class="lineno"> 1007</span>    }</div>
<div class="line"><span class="lineno"> 1008</span> </div>
<div class="line"><span class="lineno"> 1009</span>    <span class="comment">// apply shifts for tenors on the 2d shift grid</span></div>
<div class="line"><span class="lineno"> 1010</span>    <span class="comment">// collect shifted data at tenors of the underlying 2d grid (different from the grid above)</span></div>
<div class="line"><span class="lineno"> 1011</span>    <span class="comment">// aggregate &quot;observed&quot; shifts</span></div>
<div class="line"><span class="lineno"> 1012</span>    <span class="comment">// compare to expected total shifts</span></div>
<div class="line"><span class="lineno"> 1013</span>    vector&lt;Period&gt; expiryShiftTenors = sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>].shiftExpiries;</div>
<div class="line"><span class="lineno"> 1014</span>    vector&lt;Period&gt; termShiftTenors = sensiData-&gt;swaptionVolShiftData()[<span class="stringliteral">&quot;EUR&quot;</span>].shiftTerms;</div>
<div class="line"><span class="lineno"> 1015</span>    vector&lt;Real&gt; shiftExpiryTimes(expiryShiftTenors.size());</div>
<div class="line"><span class="lineno"> 1016</span>    vector&lt;Real&gt; shiftTermTimes(termShiftTenors.size());</div>
<div class="line"><span class="lineno"> 1017</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; expiryShiftTenors.size(); ++i)</div>
<div class="line"><span class="lineno"> 1018</span>        shiftExpiryTimes[i] = dc.yearFraction(today, today + expiryShiftTenors[i]);</div>
<div class="line"><span class="lineno"> 1019</span>    <span class="keywordflow">for</span> (Size j = 0; j &lt; termShiftTenors.size(); ++j)</div>
<div class="line"><span class="lineno"> 1020</span>        shiftTermTimes[j] = dc.yearFraction(today, today + termShiftTenors[j]);</div>
<div class="line"><span class="lineno"> 1021</span> </div>
<div class="line"><span class="lineno"> 1022</span>    vector&lt;vector&lt;Real&gt;&gt; shiftedData(expiries.size(), vector&lt;Real&gt;(terms.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1023</span>    vector&lt;vector&lt;Real&gt;&gt; diffAbsolute(expiries.size(), vector&lt;Real&gt;(terms.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1024</span>    vector&lt;vector&lt;Real&gt;&gt; diffRelative(expiries.size(), vector&lt;Real&gt;(terms.size(), 0.0));</div>
<div class="line"><span class="lineno"> 1025</span>    Real shiftSize = 0.01; <span class="comment">// arbitrary</span></div>
<div class="line"><span class="lineno"> 1026</span>    SensitivityScenarioGenerator::ShiftType shiftTypeAbsolute = SensitivityScenarioGenerator::ShiftType::Absolute;</div>
<div class="line"><span class="lineno"> 1027</span>    SensitivityScenarioGenerator::ShiftType shiftTypeRelative = SensitivityScenarioGenerator::ShiftType::Relative;</div>
<div class="line"><span class="lineno"> 1028</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; expiryShiftTenors.size(); ++i) {</div>
<div class="line"><span class="lineno"> 1029</span>        <span class="keywordflow">for</span> (Size j = 0; j &lt; termShiftTenors.size(); ++j) {</div>
<div class="line"><span class="lineno"> 1030</span>            scenarioGenerator-&gt;applyShift(i, j, shiftSize, <span class="keyword">true</span>, shiftTypeAbsolute, shiftExpiryTimes, shiftTermTimes,</div>
<div class="line"><span class="lineno"> 1031</span>                                          expiryTimes, termTimes, initialData, shiftedData, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1032</span>            <span class="keywordflow">for</span> (Size k = 0; k &lt; expiries.size(); ++k) {</div>
<div class="line"><span class="lineno"> 1033</span>                <span class="keywordflow">for</span> (Size l = 0; l &lt; terms.size(); ++l)</div>
<div class="line"><span class="lineno"> 1034</span>                    diffAbsolute[k][l] += shiftedData[k][l] - initialData[k][l];</div>
<div class="line"><span class="lineno"> 1035</span>            }</div>
<div class="line"><span class="lineno"> 1036</span>            scenarioGenerator-&gt;applyShift(i, j, shiftSize, <span class="keyword">true</span>, shiftTypeRelative, shiftExpiryTimes, shiftTermTimes,</div>
<div class="line"><span class="lineno"> 1037</span>                                          expiryTimes, termTimes, initialData, shiftedData, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1038</span>            <span class="keywordflow">for</span> (Size k = 0; k &lt; expiries.size(); ++k) {</div>
<div class="line"><span class="lineno"> 1039</span>                <span class="keywordflow">for</span> (Size l = 0; l &lt; terms.size(); ++l)</div>
<div class="line"><span class="lineno"> 1040</span>                    diffRelative[k][l] += shiftedData[k][l] / initialData[k][l] - 1.0;</div>
<div class="line"><span class="lineno"> 1041</span>            }</div>
<div class="line"><span class="lineno"> 1042</span>        }</div>
<div class="line"><span class="lineno"> 1043</span>    }</div>
<div class="line"><span class="lineno"> 1044</span> </div>
<div class="line"><span class="lineno"> 1045</span>    Real tolerance = 1.0e-10;</div>
<div class="line"><span class="lineno"> 1046</span>    <span class="keywordflow">for</span> (Size k = 0; k &lt; expiries.size(); ++k) {</div>
<div class="line"><span class="lineno"> 1047</span>        <span class="keywordflow">for</span> (Size l = 0; l &lt; terms.size(); ++l) {</div>
<div class="line"><span class="lineno"> 1048</span>            <span class="comment">// BOOST_TEST_MESSAGE(&quot;2d shift: checking sensitivity to underlying grid point (&quot; &lt;&lt; k &lt;&lt; &quot;, &quot; &lt;&lt; l &lt;&lt; &quot;): &quot;</span></div>
<div class="line"><span class="lineno"> 1049</span>            <span class="comment">// &lt;&lt; diff[k][l]);</span></div>
<div class="line"><span class="lineno"> 1050</span>            BOOST_CHECK_MESSAGE(fabs(diffAbsolute[k][l] - shiftSize) &lt; tolerance,</div>
<div class="line"><span class="lineno"> 1051</span>                                <span class="stringliteral">&quot;inconsistency in absolute 2d shifts at grid point (&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; l</div>
<div class="line"><span class="lineno"> 1052</span>                                                                                      &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; diffAbsolute[k][l]);</div>
<div class="line"><span class="lineno"> 1053</span>            BOOST_CHECK_MESSAGE(fabs(diffRelative[k][l] - shiftSize) &lt; tolerance,</div>
<div class="line"><span class="lineno"> 1054</span>                                <span class="stringliteral">&quot;inconsistency in relative 2d shifts at grid point (&quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; l</div>
<div class="line"><span class="lineno"> 1055</span>                                                                                      &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; diffRelative[k][l]);</div>
<div class="line"><span class="lineno"> 1056</span>        }</div>
<div class="line"><span class="lineno"> 1057</span>    }</div>
<div class="line"><span class="lineno"> 1058</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><span class="lineno"> 1059</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><span class="lineno"> 1060</span>}</div>
</div><!-- fragment --><div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_aea1a472c8b4a005b404d5ceaac1f14fe_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_aea1a472c8b4a005b404d5ceaac1f14fe_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_aea1a472c8b4a005b404d5ceaac1f14fe_cgraph" id="atest_2sensitivityanalysis_8cpp_aea1a472c8b4a005b404d5ceaac1f14fe_cgraph">
<area shape="rect" title=" " alt="" coords="5,45,196,70"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#a336ceb7de57dbce29aa878f906b57863" title="SensitivityScenarioData instance, 2 currencies." alt="" coords="244,5,495,45"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#ae590b9666047643ef2a8e8d4b684f299" title="ScenarioSimMarketParameters instance, 2 currencies." alt="" coords="267,69,471,109"/>
</map>
</div>

</div>
</div>
<a id="afb30903d6b6db666206a6c48eaca38e3" name="afb30903d6b6db666206a6c48eaca38e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb30903d6b6db666206a6c48eaca38e3">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[8/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testEquityOptionDeltaGamma&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l01062">1062</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1062</span>                                                 {</div>
<div class="line"><span class="lineno"> 1063</span> </div>
<div class="line"><span class="lineno"> 1064</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing Equity option sensitivities against QL analytic greeks&quot;</span>);</div>
<div class="line"><span class="lineno"> 1065</span> </div>
<div class="line"><span class="lineno"> 1066</span>    ObservationMode::instance().setMode(ObservationMode::Mode::None);</div>
<div class="line"><span class="lineno"> 1067</span> </div>
<div class="line"><span class="lineno"> 1068</span>    Date today = Date(14, April, 2016);</div>
<div class="line"><span class="lineno"> 1069</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno"> 1070</span> </div>
<div class="line"><span class="lineno"> 1071</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno"> 1072</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno"> 1073</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><span class="lineno"> 1074</span> </div>
<div class="line"><span class="lineno"> 1075</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno"> 1076</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno"> 1077</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5">TestConfigurationObjects::setupSimMarketData5</a>();</div>
<div class="line"><span class="lineno"> 1078</span> </div>
<div class="line"><span class="lineno"> 1079</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno"> 1080</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f">TestConfigurationObjects::setupSensitivityScenarioData5</a>();</div>
<div class="line"><span class="lineno"> 1081</span> </div>
<div class="line"><span class="lineno"> 1082</span>    map&lt;string, SensitivityScenarioData::VolShiftData&gt;&amp; eqvs = sensiData-&gt;equityVolShiftData();</div>
<div class="line"><span class="lineno"> 1083</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : eqvs) {</div>
<div class="line"><span class="lineno"> 1084</span>        it.second.shiftSize = 0.0001; <span class="comment">// want a smaller shift size than 1.0 to test the analytic sensitivities</span></div>
<div class="line"><span class="lineno"> 1085</span>    }</div>
<div class="line"><span class="lineno"> 1086</span>    map&lt;string, SensitivityScenarioData::SpotShiftData&gt;&amp; eqs = sensiData-&gt;equityShiftData();</div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : eqs) {</div>
<div class="line"><span class="lineno"> 1088</span>        it.second.shiftSize = 0.0001; <span class="comment">// want a smaller shift size to test the analytic sensitivities</span></div>
<div class="line"><span class="lineno"> 1089</span>    }</div>
<div class="line"><span class="lineno"> 1090</span> </div>
<div class="line"><span class="lineno"> 1091</span>    <span class="comment">// build sim market</span></div>
<div class="line"><span class="lineno"> 1092</span>    <span class="keyword">auto</span> simMarket = boost::make_shared&lt;ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><span class="lineno"> 1093</span> </div>
<div class="line"><span class="lineno"> 1094</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><span class="lineno"> 1095</span>    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><span class="lineno"> 1096</span>    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><span class="lineno"> 1097</span> </div>
<div class="line"><span class="lineno"> 1098</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><span class="lineno"> 1099</span>    boost::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><span class="lineno"> 1100</span>        boost::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket,</div>
<div class="line"><span class="lineno"> 1101</span>                                                         scenarioFactory, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1102</span>    simMarket-&gt;scenarioGenerator() = scenarioGenerator;</div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span>    <span class="comment">// build portfolio</span></div>
<div class="line"><span class="lineno"> 1105</span>    boost::shared_ptr&lt;EngineData&gt; data = boost::make_shared&lt;EngineData&gt;();</div>
<div class="line"><span class="lineno"> 1106</span>    data-&gt;model(<span class="stringliteral">&quot;EquityForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno"> 1107</span>    data-&gt;engine(<span class="stringliteral">&quot;EquityForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingEquityForwardEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1108</span>    data-&gt;model(<span class="stringliteral">&quot;EquityOption&quot;</span>) = <span class="stringliteral">&quot;BlackScholesMerton&quot;</span>;</div>
<div class="line"><span class="lineno"> 1109</span>    data-&gt;engine(<span class="stringliteral">&quot;EquityOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1110</span>    boost::shared_ptr&lt;EngineFactory&gt; factory = boost::make_shared&lt;EngineFactory&gt;(data, simMarket);</div>
<div class="line"><span class="lineno"> 1111</span>    factory-&gt;registerBuilder(boost::make_shared&lt;EquityEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1112</span>    factory-&gt;registerBuilder(boost::make_shared&lt;EquityForwardEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>    boost::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_portfolio.html">Portfolio</a>());</div>
<div class="line"><span class="lineno"> 1115</span>    Size trnCount = 0;</div>
<div class="line"><span class="lineno"> 1116</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">buildEquityOption</a>(<span class="stringliteral">&quot;Call_SP5&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 2, <span class="stringliteral">&quot;SP5&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 2147.56, 1000));</div>
<div class="line"><span class="lineno"> 1117</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1118</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">buildEquityOption</a>(<span class="stringliteral">&quot;Put_SP5&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Put&quot;</span>, 2, <span class="stringliteral">&quot;SP5&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, 2147.56, 1000));</div>
<div class="line"><span class="lineno"> 1119</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1120</span>    <span class="comment">// portfolio-&gt;add(buildEquityForward(&quot;Fwd_SP5&quot;, &quot;Long&quot;, 2, &quot;SP5&quot;, &quot;USD&quot;, 2147.56, 1000));</span></div>
<div class="line"><span class="lineno"> 1121</span>    <span class="comment">// trnCount++;</span></div>
<div class="line"><span class="lineno"> 1122</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">buildEquityOption</a>(<span class="stringliteral">&quot;Call_Luft&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 2, <span class="stringliteral">&quot;Lufthansa&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, 12.75, 1000));</div>
<div class="line"><span class="lineno"> 1123</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1124</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a3c54e055257b56f61fc96e8f4993aacb">buildEquityOption</a>(<span class="stringliteral">&quot;Put_Luft&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, <span class="stringliteral">&quot;Put&quot;</span>, 2, <span class="stringliteral">&quot;Lufthansa&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, 12.75, 1000));</div>
<div class="line"><span class="lineno"> 1125</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1126</span>    <span class="comment">// portfolio-&gt;add(buildEquityForward(&quot;Fwd_Luft&quot;, &quot;Short&quot;, 2, &quot;Lufthansa&quot;, &quot;EUR&quot;, 12.75, 1000));</span></div>
<div class="line"><span class="lineno"> 1127</span>    <span class="comment">// trnCount++;</span></div>
<div class="line"><span class="lineno"> 1128</span>    portfolio-&gt;build(factory);</div>
<div class="line"><span class="lineno"> 1129</span>    BOOST_CHECK_EQUAL(portfolio-&gt;size(), trnCount);</div>
<div class="line"><span class="lineno"> 1130</span> </div>
<div class="line"><span class="lineno"> 1131</span>    <span class="keyword">struct </span>AnalyticInfo {</div>
<div class="line"><span class="lineno"> 1132</span>        <span class="keywordtype">string</span> id;</div>
<div class="line"><span class="lineno"> 1133</span>        <span class="keywordtype">string</span> <a class="code hl_variableRef" href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a>;</div>
<div class="line"><span class="lineno"> 1134</span>        <span class="keywordtype">string</span> npvCcy;</div>
<div class="line"><span class="lineno"> 1135</span>        Real spot;</div>
<div class="line"><span class="lineno"> 1136</span>        Real fx;</div>
<div class="line"><span class="lineno"> 1137</span>        Real baseNpv;</div>
<div class="line"><span class="lineno"> 1138</span>        Real qlNpv;</div>
<div class="line"><span class="lineno"> 1139</span>        Real delta;</div>
<div class="line"><span class="lineno"> 1140</span>        Real gamma;</div>
<div class="line"><span class="lineno"> 1141</span>        Real vega;</div>
<div class="line"><span class="lineno"> 1142</span>        Real rho;</div>
<div class="line"><span class="lineno"> 1143</span>        Real divRho;</div>
<div class="line"><span class="lineno"> 1144</span>    };</div>
<div class="line"><span class="lineno"> 1145</span>    map&lt;string, AnalyticInfo&gt; qlInfoMap;</div>
<div class="line"><span class="lineno"> 1146</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; portfolio-&gt;size(); ++i) {</div>
<div class="line"><span class="lineno"> 1147</span>        AnalyticInfo info;</div>
<div class="line"><span class="lineno"> 1148</span>        boost::shared_ptr&lt;Trade&gt; trn = portfolio-&gt;trades()[i];</div>
<div class="line"><span class="lineno"> 1149</span>        boost::shared_ptr&lt;ore::data::EquityOption&gt; eqoTrn = boost::dynamic_pointer_cast&lt;ore::data::EquityOption&gt;(trn);</div>
<div class="line"><span class="lineno"> 1150</span>        BOOST_CHECK(eqoTrn);</div>
<div class="line"><span class="lineno"> 1151</span>        info.id = trn-&gt;id();</div>
<div class="line"><span class="lineno"> 1152</span>        info.name = eqoTrn-&gt;equityName();</div>
<div class="line"><span class="lineno"> 1153</span>        info.npvCcy = trn-&gt;npvCurrency();</div>
<div class="line"><span class="lineno"> 1154</span> </div>
<div class="line"><span class="lineno"> 1155</span>        info.spot = initMarket-&gt;equitySpot(info.name)-&gt;value();</div>
<div class="line"><span class="lineno"> 1156</span>        <span class="keywordtype">string</span> pair = info.npvCcy + simMarketData-&gt;baseCcy();</div>
<div class="line"><span class="lineno"> 1157</span>        info.fx = initMarket-&gt;fxRate(pair)-&gt;value();</div>
<div class="line"><span class="lineno"> 1158</span>        info.baseNpv = trn-&gt;instrument()-&gt;NPV() * info.fx;</div>
<div class="line"><span class="lineno"> 1159</span>        boost::shared_ptr&lt;QuantLib::VanillaOption&gt; qlOpt =</div>
<div class="line"><span class="lineno"> 1160</span>            boost::dynamic_pointer_cast&lt;QuantLib::VanillaOption&gt;(trn-&gt;instrument()-&gt;qlInstrument());</div>
<div class="line"><span class="lineno"> 1161</span>        BOOST_CHECK(qlOpt);</div>
<div class="line"><span class="lineno"> 1162</span>        Position::Type positionType = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga71937c757a73b33221be6ce6a8046839">parsePositionType</a>(eqoTrn-&gt;option().longShort());</div>
<div class="line"><span class="lineno"> 1163</span>        Real bsInd = (positionType == QuantLib::Position::Long ? 1.0 : -1.0);</div>
<div class="line"><span class="lineno"> 1164</span>        info.qlNpv = qlOpt-&gt;NPV() * eqoTrn-&gt;quantity() * bsInd;</div>
<div class="line"><span class="lineno"> 1165</span>        info.delta = qlOpt-&gt;delta() * eqoTrn-&gt;quantity() * bsInd;</div>
<div class="line"><span class="lineno"> 1166</span>        info.gamma = qlOpt-&gt;gamma() * eqoTrn-&gt;quantity() * bsInd;</div>
<div class="line"><span class="lineno"> 1167</span>        info.vega = qlOpt-&gt;vega() * eqoTrn-&gt;quantity() * bsInd;</div>
<div class="line"><span class="lineno"> 1168</span>        info.rho = qlOpt-&gt;rho() * eqoTrn-&gt;quantity() * bsInd;</div>
<div class="line"><span class="lineno"> 1169</span>        info.divRho = qlOpt-&gt;dividendRho() * eqoTrn-&gt;quantity() * bsInd;</div>
<div class="line"><span class="lineno"> 1170</span>        qlInfoMap[info.id] = info;</div>
<div class="line"><span class="lineno"> 1171</span>    }</div>
<div class="line"><span class="lineno"> 1172</span> </div>
<div class="line"><span class="lineno"> 1173</span>    <span class="keywordtype">bool</span> recalibrateModels = <span class="keyword">true</span>; <span class="comment">// nothing to calibrate here</span></div>
<div class="line"><span class="lineno"> 1174</span>    boost::shared_ptr&lt;SensitivityAnalysis&gt; sa =</div>
<div class="line"><span class="lineno"> 1175</span>        boost::make_shared&lt;SensitivityAnalysis&gt;(portfolio, initMarket, <a class="code hl_variableRef" href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a>, data,</div>
<div class="line"><span class="lineno"> 1176</span>                                                simMarketData, sensiData, recalibrateModels);</div>
<div class="line"><span class="lineno"> 1177</span>    sa-&gt;generateSensitivities();</div>
<div class="line"><span class="lineno"> 1178</span> </div>
<div class="line"><span class="lineno"> 1179</span>    map&lt;pair&lt;string, string&gt;, Real&gt; deltaMap;</div>
<div class="line"><span class="lineno"> 1180</span>    map&lt;pair&lt;string, string&gt;, Real&gt; gammaMap;</div>
<div class="line"><span class="lineno"> 1181</span>    std::set&lt;string&gt; sensiTrades;</div>
<div class="line"><span class="lineno"> 1182</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : portfolio-&gt;trades()) {</div>
<div class="line"><span class="lineno"> 1183</span>        sensiTrades.insert(p-&gt;id());</div>
<div class="line"><span class="lineno"> 1184</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : sa-&gt;sensiCube()-&gt;factors()) {</div>
<div class="line"><span class="lineno"> 1185</span>            <span class="keyword">auto</span> des = sa-&gt;sensiCube()-&gt;factorDescription(f);</div>
<div class="line"><span class="lineno"> 1186</span>            deltaMap[make_pair(p-&gt;id(), des)] = sa-&gt;sensiCube()-&gt;delta(p-&gt;id(), f);</div>
<div class="line"><span class="lineno"> 1187</span>            gammaMap[make_pair(p-&gt;id(), des)] = sa-&gt;sensiCube()-&gt;gamma(p-&gt;id(), f);</div>
<div class="line"><span class="lineno"> 1188</span>        }</div>
<div class="line"><span class="lineno"> 1189</span>    }</div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span>    <span class="keyword">struct </span>SensiResults {</div>
<div class="line"><span class="lineno"> 1192</span>        <span class="keywordtype">string</span> id;</div>
<div class="line"><span class="lineno"> 1193</span>        Real baseNpv;</div>
<div class="line"><span class="lineno"> 1194</span>        Real discountDelta;</div>
<div class="line"><span class="lineno"> 1195</span>        Real ycDelta;</div>
<div class="line"><span class="lineno"> 1196</span>        Real equitySpotDelta;</div>
<div class="line"><span class="lineno"> 1197</span>        Real equityVolDelta;</div>
<div class="line"><span class="lineno"> 1198</span>        Real equitySpotGamma;</div>
<div class="line"><span class="lineno"> 1199</span>    };</div>
<div class="line"><span class="lineno"> 1200</span> </div>
<div class="line"><span class="lineno"> 1201</span>    Real epsilon = 1.e-15; <span class="comment">// a small number</span></div>
<div class="line"><span class="lineno"> 1202</span>    <span class="keywordtype">string</span> equitySpotStr = <span class="stringliteral">&quot;EquitySpot&quot;</span>;</div>
<div class="line"><span class="lineno"> 1203</span>    <span class="keywordtype">string</span> equityVolStr = <span class="stringliteral">&quot;EquityVolatility&quot;</span>;</div>
<div class="line"><span class="lineno"> 1204</span> </div>
<div class="line"><span class="lineno"> 1205</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : qlInfoMap) {</div>
<div class="line"><span class="lineno"> 1206</span>        <span class="keywordtype">string</span> <span class="keywordtype">id</span> = it.first;</div>
<div class="line"><span class="lineno"> 1207</span>        BOOST_CHECK(sensiTrades.find(<span class="keywordtype">id</span>) != sensiTrades.end());</div>
<div class="line"><span class="lineno"> 1208</span>        AnalyticInfo qlInfo = it.second;</div>
<div class="line"><span class="lineno"> 1209</span>        SensiResults res = {string(<span class="stringliteral">&quot;&quot;</span>), 0.0, 0.0, 0.0, 0.0, 0.0, 0.0};</div>
<div class="line"><span class="lineno"> 1210</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it2 : deltaMap) {</div>
<div class="line"><span class="lineno"> 1211</span>            pair&lt;string, string&gt; sensiKey = it2.first;</div>
<div class="line"><span class="lineno"> 1212</span>            <span class="keywordtype">string</span> sensiTrnId = it2.first.first;</div>
<div class="line"><span class="lineno"> 1213</span>            <span class="keywordflow">if</span> (sensiTrnId != <span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno"> 1214</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1215</span>            res.id = sensiTrnId;</div>
<div class="line"><span class="lineno"> 1216</span>            res.baseNpv = sa-&gt;sensiCube()-&gt;npv(sensiTrnId);</div>
<div class="line"><span class="lineno"> 1217</span>            <span class="keywordtype">string</span> sensiId = it2.first.second;</div>
<div class="line"><span class="lineno"> 1218</span>            Real sensiVal = it2.second;</div>
<div class="line"><span class="lineno"> 1219</span>            <span class="keywordflow">if</span> (std::fabs(sensiVal) &lt; epsilon) <span class="comment">// not interested in zero sensis</span></div>
<div class="line"><span class="lineno"> 1220</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1221</span>            vector&lt;string&gt; tokens;</div>
<div class="line"><span class="lineno"> 1222</span>            boost::split(tokens, sensiId, boost::is_any_of(<span class="stringliteral">&quot;/-&quot;</span>));</div>
<div class="line"><span class="lineno"> 1223</span>            BOOST_CHECK(tokens.size() &gt; 0);</div>
<div class="line"><span class="lineno"> 1224</span>            <span class="keywordtype">bool</span> isEquitySpot = (tokens[0] == equitySpotStr);</div>
<div class="line"><span class="lineno"> 1225</span>            <span class="keywordtype">bool</span> isEquityVol = (tokens[0] == equityVolStr);</div>
<div class="line"><span class="lineno"> 1226</span>            <span class="keywordflow">if</span> (isEquitySpot) {</div>
<div class="line"><span class="lineno"> 1227</span>                BOOST_CHECK(tokens.size() &gt; 2);</div>
<div class="line"><span class="lineno"> 1228</span>                <span class="keywordtype">bool</span> hasGamma = (gammaMap.find(sensiKey) != gammaMap.end());</div>
<div class="line"><span class="lineno"> 1229</span>                BOOST_CHECK(hasGamma);</div>
<div class="line"><span class="lineno"> 1230</span>                Real gammaVal = 0.0;</div>
<div class="line"><span class="lineno"> 1231</span>                <span class="keywordflow">if</span> (hasGamma) {</div>
<div class="line"><span class="lineno"> 1232</span>                    gammaVal = gammaMap[sensiKey];</div>
<div class="line"><span class="lineno"> 1233</span>                }</div>
<div class="line"><span class="lineno"> 1234</span>                res.equitySpotDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1235</span>                res.equitySpotGamma += gammaVal;</div>
<div class="line"><span class="lineno"> 1236</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1237</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isEquityVol) {</div>
<div class="line"><span class="lineno"> 1238</span>                BOOST_CHECK(tokens.size() &gt; 2);</div>
<div class="line"><span class="lineno"> 1239</span>                res.equityVolDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1240</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1241</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1242</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1243</span>            }</div>
<div class="line"><span class="lineno"> 1244</span>        }</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>        Real bp = 1.e-4;</div>
<div class="line"><span class="lineno"> 1247</span>        Real tol = 0.5; <span class="comment">// % relative tolerance</span></div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>        BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;SA: id=&quot;</span> &lt;&lt; res.id &lt;&lt; <span class="stringliteral">&quot;, npv=&quot;</span> &lt;&lt; res.baseNpv &lt;&lt; <span class="stringliteral">&quot;, equitySpotDelta=&quot;</span> &lt;&lt; res.equitySpotDelta</div>
<div class="line"><span class="lineno"> 1250</span>                                     &lt;&lt; <span class="stringliteral">&quot;, equityVolDelta=&quot;</span> &lt;&lt; res.equityVolDelta</div>
<div class="line"><span class="lineno"> 1251</span>                                     &lt;&lt; <span class="stringliteral">&quot;, equitySpotGamma=&quot;</span> &lt;&lt; res.equitySpotGamma);</div>
<div class="line"><span class="lineno"> 1252</span>        BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;QL: id=&quot;</span> &lt;&lt; qlInfo.id &lt;&lt; <span class="stringliteral">&quot;, fx=&quot;</span> &lt;&lt; qlInfo.fx &lt;&lt; <span class="stringliteral">&quot;, npv=&quot;</span> &lt;&lt; qlInfo.baseNpv</div>
<div class="line"><span class="lineno"> 1253</span>                                     &lt;&lt; <span class="stringliteral">&quot;, ccyNpv=&quot;</span> &lt;&lt; qlInfo.qlNpv &lt;&lt; <span class="stringliteral">&quot;, delta=&quot;</span> &lt;&lt; qlInfo.delta</div>
<div class="line"><span class="lineno"> 1254</span>                                     &lt;&lt; <span class="stringliteral">&quot;, gamma=&quot;</span> &lt;&lt; qlInfo.gamma &lt;&lt; <span class="stringliteral">&quot;, vega=&quot;</span> &lt;&lt; qlInfo.vega</div>
<div class="line"><span class="lineno"> 1255</span>                                     &lt;&lt; <span class="stringliteral">&quot;, spotDelta=&quot;</span> &lt;&lt; (qlInfo.delta * qlInfo.fx * bp * qlInfo.spot));</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>        Real eqVol =</div>
<div class="line"><span class="lineno"> 1258</span>            initMarket-&gt;equityVol(qlInfo.name)-&gt;blackVol(1.0, 1.0, <span class="keyword">true</span>); <span class="comment">// TO-DO more appropriate vol extraction</span></div>
<div class="line"><span class="lineno"> 1259</span>        BOOST_CHECK_CLOSE(res.equityVolDelta, qlInfo.vega * qlInfo.fx * (bp * eqVol), tol);</div>
<div class="line"><span class="lineno"> 1260</span> </div>
<div class="line"><span class="lineno"> 1261</span>        BOOST_CHECK_CLOSE(res.equitySpotDelta, qlInfo.delta * qlInfo.fx * (bp * qlInfo.spot), tol);</div>
<div class="line"><span class="lineno"> 1262</span>        BOOST_CHECK_CLOSE(res.equitySpotGamma, qlInfo.gamma * qlInfo.fx * (<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(bp * qlInfo.spot, 2)), tol);</div>
<div class="line"><span class="lineno"> 1263</span>    }</div>
<div class="line"><span class="lineno"> 1264</span>}</div>
<div class="ttc" id="agroup__utilities_html_ga71937c757a73b33221be6ce6a8046839"><div class="ttname"><a href="../ored/group__utilities.html#ga71937c757a73b33221be6ce6a8046839">parsePositionType</a></div><div class="ttdeci">Position::Type parsePositionType(const string &amp;s)</div></div>
<div class="ttc" id="anamespace_quant_ext_html_a33845c3e343e646697955b3813b5ccbb"><div class="ttname"><a href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a></div><div class="ttdeci">RandomVariable pow(RandomVariable x, const RandomVariable &amp;y)</div></div>
<div class="ttc" id="atodaysmarketparameters_8cpp_html_a8ccf841cb59e451791bcb2e1ac4f1edc"><div class="ttname"><a href="../ored/todaysmarketparameters_8cpp.html#a8ccf841cb59e451791bcb2e1ac4f1edc">name</a></div><div class="ttdeci">string name</div></div>
</div><!-- fragment --><div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_afb30903d6b6db666206a6c48eaca38e3_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_afb30903d6b6db666206a6c48eaca38e3_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_afb30903d6b6db666206a6c48eaca38e3_cgraph" id="atest_2sensitivityanalysis_8cpp_afb30903d6b6db666206a6c48eaca38e3_cgraph">
<area shape="rect" title=" " alt="" coords="5,84,196,109"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga71937c757a73b33221be6ce6a8046839" title=" " alt="" coords="305,5,434,31"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb" title=" " alt="" coords="347,55,392,80"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="244,105,495,145"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="267,169,471,209"/>
</map>
</div>

</div>
</div>
<a id="abee8f85053423e807bac09167c46064b" name="abee8f85053423e807bac09167c46064b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee8f85053423e807bac09167c46064b">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[9/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testFxOptionDeltaGamma&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l01266">1266</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1266</span>                                             {</div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing FX option sensitivities against QL analytic greeks&quot;</span>);</div>
<div class="line"><span class="lineno"> 1269</span> </div>
<div class="line"><span class="lineno"> 1270</span>    SavedSettings backup;</div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><span class="lineno"> 1273</span>    ObservationMode::instance().setMode(ObservationMode::Mode::None);</div>
<div class="line"><span class="lineno"> 1274</span> </div>
<div class="line"><span class="lineno"> 1275</span>    Date today = Date(14, April, 2016); <span class="comment">// Settings::instance().evaluationDate();</span></div>
<div class="line"><span class="lineno"> 1276</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno"> 1277</span> </div>
<div class="line"><span class="lineno"> 1278</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno"> 1281</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><span class="lineno"> 1282</span> </div>
<div class="line"><span class="lineno"> 1283</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno"> 1284</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno"> 1285</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5">TestConfigurationObjects::setupSimMarketData5</a>();</div>
<div class="line"><span class="lineno"> 1286</span> </div>
<div class="line"><span class="lineno"> 1287</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno"> 1288</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f">TestConfigurationObjects::setupSensitivityScenarioData5</a>();</div>
<div class="line"><span class="lineno"> 1289</span> </div>
<div class="line"><span class="lineno"> 1290</span>    map&lt;string, SensitivityScenarioData::VolShiftData&gt;&amp; fxvs = sensiData-&gt;fxVolShiftData();</div>
<div class="line"><span class="lineno"> 1291</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : fxvs) {</div>
<div class="line"><span class="lineno"> 1292</span>        it.second.shiftSize = 0.0001; <span class="comment">// want a smaller shift size than 1.0 to test the analytic sensitivities</span></div>
<div class="line"><span class="lineno"> 1293</span>    }</div>
<div class="line"><span class="lineno"> 1294</span>    map&lt;string, SensitivityScenarioData::SpotShiftData&gt;&amp; fxs = sensiData-&gt;fxShiftData();</div>
<div class="line"><span class="lineno"> 1295</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; it : fxs) {</div>
<div class="line"><span class="lineno"> 1296</span>        it.second.shiftSize = 0.0001; <span class="comment">// want a smaller shift size to test the analytic sensitivities</span></div>
<div class="line"><span class="lineno"> 1297</span>    }</div>
<div class="line"><span class="lineno"> 1298</span> </div>
<div class="line"><span class="lineno"> 1299</span>    <span class="comment">// build sim market</span></div>
<div class="line"><span class="lineno"> 1300</span>    <span class="keyword">auto</span> simMarket = boost::make_shared&lt;ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><span class="lineno"> 1303</span>    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><span class="lineno"> 1304</span>    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><span class="lineno"> 1305</span> </div>
<div class="line"><span class="lineno"> 1306</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><span class="lineno"> 1307</span>    boost::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><span class="lineno"> 1308</span>        boost::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket,</div>
<div class="line"><span class="lineno"> 1309</span>                                                         scenarioFactory, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1310</span>    simMarket-&gt;scenarioGenerator() = scenarioGenerator;</div>
<div class="line"><span class="lineno"> 1311</span> </div>
<div class="line"><span class="lineno"> 1312</span>    <span class="comment">// build portfolio</span></div>
<div class="line"><span class="lineno"> 1313</span>    boost::shared_ptr&lt;EngineData&gt; data = boost::make_shared&lt;EngineData&gt;();</div>
<div class="line"><span class="lineno"> 1314</span>    data-&gt;model(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;GarmanKohlhagen&quot;</span>;</div>
<div class="line"><span class="lineno"> 1315</span>    data-&gt;engine(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1316</span>    boost::shared_ptr&lt;EngineFactory&gt; factory = boost::make_shared&lt;EngineFactory&gt;(data, simMarket);</div>
<div class="line"><span class="lineno"> 1317</span>    factory-&gt;registerBuilder(boost::make_shared&lt;FxEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1318</span> </div>
<div class="line"><span class="lineno"> 1319</span>    boost::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_portfolio.html">Portfolio</a>());</div>
<div class="line"><span class="lineno"> 1320</span>    Size trnCount = 0;</div>
<div class="line"><span class="lineno"> 1321</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Call_1&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 1, <span class="stringliteral">&quot;USD&quot;</span>, 100000000.0, <span class="stringliteral">&quot;EUR&quot;</span>, 100000000.0));</div>
<div class="line"><span class="lineno"> 1322</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1323</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Put_1&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Put&quot;</span>, 1, <span class="stringliteral">&quot;USD&quot;</span>, 100000000.0, <span class="stringliteral">&quot;EUR&quot;</span>, 100000000.0));</div>
<div class="line"><span class="lineno"> 1324</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1325</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Call_2&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 2, <span class="stringliteral">&quot;GBP&quot;</span>, 100000000.0, <span class="stringliteral">&quot;CHF&quot;</span>, 130000000.0));</div>
<div class="line"><span class="lineno"> 1326</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1327</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Put_2&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, <span class="stringliteral">&quot;Put&quot;</span>, 2, <span class="stringliteral">&quot;GBP&quot;</span>, 100000000.0, <span class="stringliteral">&quot;CHF&quot;</span>, 130000000.0));</div>
<div class="line"><span class="lineno"> 1328</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1329</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Call_3&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 1, <span class="stringliteral">&quot;EUR&quot;</span>, 100000000.0, <span class="stringliteral">&quot;USD&quot;</span>, 100000000.0));</div>
<div class="line"><span class="lineno"> 1330</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1331</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Put_3&quot;</span>, <span class="stringliteral">&quot;Short&quot;</span>, <span class="stringliteral">&quot;Put&quot;</span>, 1, <span class="stringliteral">&quot;EUR&quot;</span>, 100000000.0, <span class="stringliteral">&quot;USD&quot;</span>, 100000000.0));</div>
<div class="line"><span class="lineno"> 1332</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1333</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Call_4&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 1, <span class="stringliteral">&quot;JPY&quot;</span>, 10000000000.0, <span class="stringliteral">&quot;EUR&quot;</span>, 100000000.0));</div>
<div class="line"><span class="lineno"> 1334</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1335</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;Call_5&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 1, <span class="stringliteral">&quot;EUR&quot;</span>, 100000000.0, <span class="stringliteral">&quot;JPY&quot;</span>, 10000000000.0));</div>
<div class="line"><span class="lineno"> 1336</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1337</span>    portfolio-&gt;build(factory);</div>
<div class="line"><span class="lineno"> 1338</span>    BOOST_CHECK_EQUAL(portfolio-&gt;size(), trnCount);</div>
<div class="line"><span class="lineno"> 1339</span> </div>
<div class="line"><span class="lineno"> 1340</span>    <span class="keyword">struct </span>AnalyticInfo {</div>
<div class="line"><span class="lineno"> 1341</span>        <span class="keywordtype">string</span> id;</div>
<div class="line"><span class="lineno"> 1342</span>        <span class="keywordtype">string</span> npvCcy;</div>
<div class="line"><span class="lineno"> 1343</span>        <span class="keywordtype">string</span> forCcy;</div>
<div class="line"><span class="lineno"> 1344</span>        <span class="keywordtype">string</span> domCcy;</div>
<div class="line"><span class="lineno"> 1345</span>        Real fx;</div>
<div class="line"><span class="lineno"> 1346</span>        Real trnFx;</div>
<div class="line"><span class="lineno"> 1347</span>        Real baseNpv;</div>
<div class="line"><span class="lineno"> 1348</span>        Real qlNpv;</div>
<div class="line"><span class="lineno"> 1349</span>        Real delta;</div>
<div class="line"><span class="lineno"> 1350</span>        Real gamma;</div>
<div class="line"><span class="lineno"> 1351</span>        Real vega;</div>
<div class="line"><span class="lineno"> 1352</span>        Real rho;</div>
<div class="line"><span class="lineno"> 1353</span>        Real divRho;</div>
<div class="line"><span class="lineno"> 1354</span>        Real fxForBase;</div>
<div class="line"><span class="lineno"> 1355</span>    };</div>
<div class="line"><span class="lineno"> 1356</span>    map&lt;string, AnalyticInfo&gt; qlInfoMap;</div>
<div class="line"><span class="lineno"> 1357</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; portfolio-&gt;size(); ++i) {</div>
<div class="line"><span class="lineno"> 1358</span>        AnalyticInfo info;</div>
<div class="line"><span class="lineno"> 1359</span>        boost::shared_ptr&lt;Trade&gt; trn = portfolio-&gt;trades()[i];</div>
<div class="line"><span class="lineno"> 1360</span>        boost::shared_ptr&lt;ore::data::FxOption&gt; fxoTrn = boost::dynamic_pointer_cast&lt;ore::data::FxOption&gt;(trn);</div>
<div class="line"><span class="lineno"> 1361</span>        BOOST_CHECK(fxoTrn);</div>
<div class="line"><span class="lineno"> 1362</span>        info.id = trn-&gt;id();</div>
<div class="line"><span class="lineno"> 1363</span>        info.npvCcy = trn-&gt;npvCurrency();</div>
<div class="line"><span class="lineno"> 1364</span>        info.forCcy = fxoTrn-&gt;boughtCurrency();</div>
<div class="line"><span class="lineno"> 1365</span>        info.domCcy = fxoTrn-&gt;soldCurrency();</div>
<div class="line"><span class="lineno"> 1366</span>        BOOST_CHECK_EQUAL(info.npvCcy, info.domCcy);</div>
<div class="line"><span class="lineno"> 1367</span>        <span class="keywordtype">string</span> pair = info.npvCcy + simMarketData-&gt;baseCcy();</div>
<div class="line"><span class="lineno"> 1368</span>        info.fx = initMarket-&gt;fxRate(pair)-&gt;value();</div>
<div class="line"><span class="lineno"> 1369</span>        <span class="keywordtype">string</span> trnPair = info.forCcy + info.domCcy;</div>
<div class="line"><span class="lineno"> 1370</span>        info.trnFx = initMarket-&gt;fxRate(trnPair)-&gt;value();</div>
<div class="line"><span class="lineno"> 1371</span>        <span class="keywordtype">string</span> forPair = info.forCcy + simMarketData-&gt;baseCcy();</div>
<div class="line"><span class="lineno"> 1372</span>        info.fxForBase = initMarket-&gt;fxRate(forPair)-&gt;value();</div>
<div class="line"><span class="lineno"> 1373</span>        info.baseNpv = trn-&gt;instrument()-&gt;NPV() * info.fx;</div>
<div class="line"><span class="lineno"> 1374</span>        boost::shared_ptr&lt;QuantLib::VanillaOption&gt; qlOpt =</div>
<div class="line"><span class="lineno"> 1375</span>            boost::dynamic_pointer_cast&lt;QuantLib::VanillaOption&gt;(trn-&gt;instrument()-&gt;qlInstrument());</div>
<div class="line"><span class="lineno"> 1376</span>        BOOST_CHECK(qlOpt);</div>
<div class="line"><span class="lineno"> 1377</span>        Position::Type positionType = <a class="code hl_functionRef" href="../ored/group__utilities.html#ga71937c757a73b33221be6ce6a8046839">parsePositionType</a>(fxoTrn-&gt;option().longShort());</div>
<div class="line"><span class="lineno"> 1378</span>        Real bsInd = (positionType == QuantLib::Position::Long ? 1.0 : -1.0);</div>
<div class="line"><span class="lineno"> 1379</span>        info.qlNpv = qlOpt-&gt;NPV() * fxoTrn-&gt;boughtAmount() * bsInd;</div>
<div class="line"><span class="lineno"> 1380</span>        info.delta = qlOpt-&gt;delta() * fxoTrn-&gt;boughtAmount() * bsInd;</div>
<div class="line"><span class="lineno"> 1381</span>        info.gamma = qlOpt-&gt;gamma() * fxoTrn-&gt;boughtAmount() * bsInd;</div>
<div class="line"><span class="lineno"> 1382</span>        info.vega = qlOpt-&gt;vega() * fxoTrn-&gt;boughtAmount() * bsInd;</div>
<div class="line"><span class="lineno"> 1383</span>        info.rho = qlOpt-&gt;rho() * fxoTrn-&gt;boughtAmount() * bsInd;</div>
<div class="line"><span class="lineno"> 1384</span>        info.divRho = qlOpt-&gt;dividendRho() * fxoTrn-&gt;boughtAmount() * bsInd;</div>
<div class="line"><span class="lineno"> 1385</span>        BOOST_CHECK_CLOSE(info.fx, info.baseNpv / info.qlNpv, 0.01);</div>
<div class="line"><span class="lineno"> 1386</span>        qlInfoMap[info.id] = info;</div>
<div class="line"><span class="lineno"> 1387</span>    }</div>
<div class="line"><span class="lineno"> 1388</span> </div>
<div class="line"><span class="lineno"> 1389</span>    <span class="keywordtype">bool</span> recalibrateModels = <span class="keyword">true</span>;           <span class="comment">// nothing to calibrate here</span></div>
<div class="line"><span class="lineno"> 1390</span>    <span class="keywordtype">bool</span> useOriginalFxForBaseCcyConv = <span class="keyword">true</span>; <span class="comment">// convert sensi to EUR using original FX rate (not the shifted rate)</span></div>
<div class="line"><span class="lineno"> 1391</span>    boost::shared_ptr&lt;SensitivityAnalysis&gt; sa = boost::make_shared&lt;SensitivityAnalysis&gt;(</div>
<div class="line"><span class="lineno"> 1392</span>        portfolio, initMarket, <a class="code hl_variableRef" href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a>, data, simMarketData, sensiData, recalibrateModels, <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno"> 1393</span>        <span class="keyword">nullptr</span>, useOriginalFxForBaseCcyConv);</div>
<div class="line"><span class="lineno"> 1394</span>    sa-&gt;generateSensitivities();</div>
<div class="line"><span class="lineno"> 1395</span> </div>
<div class="line"><span class="lineno"> 1396</span>    map&lt;pair&lt;string, string&gt;, Real&gt; deltaMap;</div>
<div class="line"><span class="lineno"> 1397</span>    map&lt;pair&lt;string, string&gt;, Real&gt; gammaMap;</div>
<div class="line"><span class="lineno"> 1398</span>    std::set&lt;string&gt; sensiTrades;</div>
<div class="line"><span class="lineno"> 1399</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> p : portfolio-&gt;trades()) {</div>
<div class="line"><span class="lineno"> 1400</span>        sensiTrades.insert(p-&gt;id());</div>
<div class="line"><span class="lineno"> 1401</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : sa-&gt;sensiCube()-&gt;factors()) {</div>
<div class="line"><span class="lineno"> 1402</span>            <span class="keyword">auto</span> des = sa-&gt;sensiCube()-&gt;factorDescription(f);</div>
<div class="line"><span class="lineno"> 1403</span>            deltaMap[make_pair(p-&gt;id(), des)] = sa-&gt;sensiCube()-&gt;delta(p-&gt;id(), f);</div>
<div class="line"><span class="lineno"> 1404</span>            gammaMap[make_pair(p-&gt;id(), des)] = sa-&gt;sensiCube()-&gt;gamma(p-&gt;id(), f);</div>
<div class="line"><span class="lineno"> 1405</span>        }</div>
<div class="line"><span class="lineno"> 1406</span>    }</div>
<div class="line"><span class="lineno"> 1407</span> </div>
<div class="line"><span class="lineno"> 1408</span>    <span class="keyword">struct </span>SensiResults {</div>
<div class="line"><span class="lineno"> 1409</span>        <span class="keywordtype">string</span> id;</div>
<div class="line"><span class="lineno"> 1410</span>        Real baseNpv;</div>
<div class="line"><span class="lineno"> 1411</span>        Real forDiscountDelta;</div>
<div class="line"><span class="lineno"> 1412</span>        Real forIndexDelta;</div>
<div class="line"><span class="lineno"> 1413</span>        Real forYcDelta;</div>
<div class="line"><span class="lineno"> 1414</span>        Real domDiscountDelta;</div>
<div class="line"><span class="lineno"> 1415</span>        Real domIndexDelta;</div>
<div class="line"><span class="lineno"> 1416</span>        Real domYcDelta;</div>
<div class="line"><span class="lineno"> 1417</span>        Real fxSpotDeltaFor;</div>
<div class="line"><span class="lineno"> 1418</span>        Real fxSpotDeltaDom;</div>
<div class="line"><span class="lineno"> 1419</span>        Real fxVolDelta;</div>
<div class="line"><span class="lineno"> 1420</span>        Real fxSpotGammaFor;</div>
<div class="line"><span class="lineno"> 1421</span>        Real fxSpotGammaDom;</div>
<div class="line"><span class="lineno"> 1422</span>        Real fxRateSensiFor;</div>
<div class="line"><span class="lineno"> 1423</span>        Real fxRateSensiDom;</div>
<div class="line"><span class="lineno"> 1424</span>        <span class="keywordtype">bool</span> hasFxSpotDomSensi;</div>
<div class="line"><span class="lineno"> 1425</span>        <span class="keywordtype">bool</span> hasFxSpotForSensi;</div>
<div class="line"><span class="lineno"> 1426</span>        <span class="keywordtype">string</span> fxSensiForCcy;</div>
<div class="line"><span class="lineno"> 1427</span>        <span class="keywordtype">string</span> fxSensiDomCcy;</div>
<div class="line"><span class="lineno"> 1428</span>    };</div>
<div class="line"><span class="lineno"> 1429</span> </div>
<div class="line"><span class="lineno"> 1430</span>    Real epsilon = 1.e-15; <span class="comment">// a small number</span></div>
<div class="line"><span class="lineno"> 1431</span>    <span class="keywordtype">string</span> discountCurveStr = <span class="stringliteral">&quot;DiscountCurve&quot;</span>;</div>
<div class="line"><span class="lineno"> 1432</span>    <span class="keywordtype">string</span> indexCurveStr = <span class="stringliteral">&quot;IndexCurve&quot;</span>;</div>
<div class="line"><span class="lineno"> 1433</span>    <span class="keywordtype">string</span> yieldCurveStr = <span class="stringliteral">&quot;YieldCurve&quot;</span>;</div>
<div class="line"><span class="lineno"> 1434</span>    <span class="keywordtype">string</span> fxSpotStr = <span class="stringliteral">&quot;FXSpot&quot;</span>;</div>
<div class="line"><span class="lineno"> 1435</span>    <span class="keywordtype">string</span> fxVolStr = <span class="stringliteral">&quot;FXVolatility&quot;</span>;</div>
<div class="line"><span class="lineno"> 1436</span>    <span class="keywordtype">string</span> swaptionStr = <span class="stringliteral">&quot;SwaptionVolatility&quot;</span>;</div>
<div class="line"><span class="lineno"> 1437</span>    <span class="keywordtype">string</span> capStr = <span class="stringliteral">&quot;OptionletVolatility&quot;</span>;</div>
<div class="line"><span class="lineno"> 1438</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : qlInfoMap) {</div>
<div class="line"><span class="lineno"> 1439</span>        <span class="keywordtype">string</span> <span class="keywordtype">id</span> = it.first;</div>
<div class="line"><span class="lineno"> 1440</span>        BOOST_CHECK(sensiTrades.find(<span class="keywordtype">id</span>) != sensiTrades.end());</div>
<div class="line"><span class="lineno"> 1441</span>        AnalyticInfo qlInfo = it.second;</div>
<div class="line"><span class="lineno"> 1442</span>        SensiResults res = {string(<span class="stringliteral">&quot;&quot;</span>), 0.0, 0.0, 0.0, 0.0, 0.0,   0.0,   0.0,        0.0,       0.0,</div>
<div class="line"><span class="lineno"> 1443</span>                            0.0,        0.0, 0.0, 0.0, 0.0, <span class="keyword">false</span>, <span class="keyword">false</span>, string(<span class="stringliteral">&quot;&quot;</span>), string(<span class="stringliteral">&quot;&quot;</span>)};</div>
<div class="line"><span class="lineno"> 1444</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it2 : deltaMap) {</div>
<div class="line"><span class="lineno"> 1445</span>            pair&lt;string, string&gt; sensiKey = it2.first;</div>
<div class="line"><span class="lineno"> 1446</span>            <span class="keywordtype">string</span> sensiTrnId = it2.first.first;</div>
<div class="line"><span class="lineno"> 1447</span>            <span class="keywordflow">if</span> (sensiTrnId != <span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno"> 1448</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1449</span>            res.id = sensiTrnId;</div>
<div class="line"><span class="lineno"> 1450</span>            res.baseNpv = sa-&gt;sensiCube()-&gt;npv(sensiTrnId);</div>
<div class="line"><span class="lineno"> 1451</span>            <span class="keywordtype">string</span> sensiId = it2.first.second;</div>
<div class="line"><span class="lineno"> 1452</span>            Real sensiVal = it2.second;</div>
<div class="line"><span class="lineno"> 1453</span>            <span class="keywordflow">if</span> (std::fabs(sensiVal) &lt; epsilon) <span class="comment">// not interested in zero sensis</span></div>
<div class="line"><span class="lineno"> 1454</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1455</span>            vector&lt;string&gt; tokens;</div>
<div class="line"><span class="lineno"> 1456</span>            boost::split(tokens, sensiId, boost::is_any_of(<span class="stringliteral">&quot;/-&quot;</span>));</div>
<div class="line"><span class="lineno"> 1457</span>            BOOST_CHECK(tokens.size() &gt; 0);</div>
<div class="line"><span class="lineno"> 1458</span>            <span class="keywordtype">bool</span> isDiscountCurve = (tokens[0] == discountCurveStr);</div>
<div class="line"><span class="lineno"> 1459</span>            <span class="keywordtype">bool</span> isIndexCurve = (tokens[0] == indexCurveStr);</div>
<div class="line"><span class="lineno"> 1460</span>            <span class="keywordtype">bool</span> isYieldCurve = (tokens[0] == yieldCurveStr);</div>
<div class="line"><span class="lineno"> 1461</span>            <span class="keywordtype">bool</span> isFxSpot = (tokens[0] == fxSpotStr);</div>
<div class="line"><span class="lineno"> 1462</span>            <span class="keywordtype">bool</span> isFxVol = (tokens[0] == fxVolStr);</div>
<div class="line"><span class="lineno"> 1463</span>            <span class="keywordtype">bool</span> isSwaption = (tokens[0] == swaptionStr);</div>
<div class="line"><span class="lineno"> 1464</span>            <span class="keywordtype">bool</span> isCapFloorlet = (tokens[0] == capStr);</div>
<div class="line"><span class="lineno"> 1465</span>            BOOST_CHECK(!(isSwaption || isCapFloorlet)); <span class="comment">// no relation to fx options</span></div>
<div class="line"><span class="lineno"> 1466</span>            <span class="keywordflow">if</span> (isDiscountCurve || isIndexCurve || isYieldCurve) {</div>
<div class="line"><span class="lineno"> 1467</span>                BOOST_CHECK(tokens.size() &gt; 2);</div>
<div class="line"><span class="lineno"> 1468</span>                <span class="keywordtype">string</span> ccy = tokens[1];</div>
<div class="line"><span class="lineno"> 1469</span>                <span class="keywordtype">bool</span> isFgnCcySensi = (ccy == qlInfo.forCcy);</div>
<div class="line"><span class="lineno"> 1470</span>                <span class="keywordtype">bool</span> isDomCcySensi = (ccy == qlInfo.domCcy);</div>
<div class="line"><span class="lineno"> 1471</span>                BOOST_CHECK(isFgnCcySensi || isDomCcySensi);</div>
<div class="line"><span class="lineno"> 1472</span>                <span class="keywordflow">if</span> (isDiscountCurve) {</div>
<div class="line"><span class="lineno"> 1473</span>                    <span class="keywordflow">if</span> (isFgnCcySensi)</div>
<div class="line"><span class="lineno"> 1474</span>                        res.forDiscountDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1475</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isDomCcySensi)</div>
<div class="line"><span class="lineno"> 1476</span>                        res.domDiscountDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1477</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isIndexCurve) {</div>
<div class="line"><span class="lineno"> 1478</span>                    <span class="keywordflow">if</span> (isFgnCcySensi)</div>
<div class="line"><span class="lineno"> 1479</span>                        res.forIndexDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1480</span>                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isDomCcySensi)</div>
<div class="line"><span class="lineno"> 1481</span>                        res.domIndexDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1482</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isYieldCurve) {</div>
<div class="line"><span class="lineno"> 1483</span>                    <span class="keywordflow">if</span> (isFgnCcySensi)</div>
<div class="line"><span class="lineno"> 1484</span>                        res.forYcDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1485</span>                    <span class="keywordflow">if</span> (isDomCcySensi)</div>
<div class="line"><span class="lineno"> 1486</span>                        res.domYcDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1487</span>                }</div>
<div class="line"><span class="lineno"> 1488</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1489</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isFxSpot) {</div>
<div class="line"><span class="lineno"> 1490</span>                BOOST_CHECK(tokens.size() &gt; 2);</div>
<div class="line"><span class="lineno"> 1491</span>                <span class="keywordtype">string</span> pair = tokens[1];</div>
<div class="line"><span class="lineno"> 1492</span>                BOOST_CHECK_EQUAL(pair.length(), 6);</div>
<div class="line"><span class="lineno"> 1493</span>                <span class="keywordtype">string</span> sensiForCcy = pair.substr(0, 3);</div>
<div class="line"><span class="lineno"> 1494</span>                <span class="keywordtype">string</span> sensiDomCcy = pair.substr(3, 3);</div>
<div class="line"><span class="lineno"> 1495</span>                Real fxSensi = initMarket-&gt;fxRate(pair)-&gt;value();</div>
<div class="line"><span class="lineno"> 1496</span>                <span class="keywordtype">bool</span> isSensiForBase = (sensiForCcy == simMarketData-&gt;baseCcy());</div>
<div class="line"><span class="lineno"> 1497</span>                <span class="keywordtype">bool</span> isSensiDomBase = (sensiDomCcy == simMarketData-&gt;baseCcy());</div>
<div class="line"><span class="lineno"> 1498</span>                <span class="comment">// TO-DO this could be relaxed to handle case where market stores the currency pairs the other way</span></div>
<div class="line"><span class="lineno"> 1499</span>                <span class="comment">// around</span></div>
<div class="line"><span class="lineno"> 1500</span>                BOOST_CHECK(isSensiForBase &amp;&amp; !isSensiDomBase);</div>
<div class="line"><span class="lineno"> 1501</span>                <span class="keywordtype">bool</span> hasGamma = (gammaMap.find(sensiKey) != gammaMap.end());</div>
<div class="line"><span class="lineno"> 1502</span>                BOOST_CHECK(hasGamma);</div>
<div class="line"><span class="lineno"> 1503</span>                Real gammaVal = 0.0;</div>
<div class="line"><span class="lineno"> 1504</span>                <span class="keywordflow">if</span> (hasGamma) {</div>
<div class="line"><span class="lineno"> 1505</span>                    gammaVal = gammaMap[sensiKey];</div>
<div class="line"><span class="lineno"> 1506</span>                }</div>
<div class="line"><span class="lineno"> 1507</span>                <span class="keywordflow">if</span> (isSensiForBase) {</div>
<div class="line"><span class="lineno"> 1508</span>                    <span class="keywordflow">if</span> (sensiDomCcy == qlInfo.forCcy) {</div>
<div class="line"><span class="lineno"> 1509</span>                        res.fxSpotDeltaFor += sensiVal;</div>
<div class="line"><span class="lineno"> 1510</span>                        res.fxRateSensiFor = fxSensi;</div>
<div class="line"><span class="lineno"> 1511</span>                        res.hasFxSpotForSensi = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1512</span>                        res.fxSpotGammaFor += gammaVal;</div>
<div class="line"><span class="lineno"> 1513</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sensiDomCcy == qlInfo.domCcy) {</div>
<div class="line"><span class="lineno"> 1514</span>                        res.fxSpotDeltaDom += sensiVal;</div>
<div class="line"><span class="lineno"> 1515</span>                        res.fxRateSensiDom = fxSensi;</div>
<div class="line"><span class="lineno"> 1516</span>                        res.hasFxSpotDomSensi = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1517</span>                        res.fxSpotGammaDom += gammaVal;</div>
<div class="line"><span class="lineno"> 1518</span>                    }</div>
<div class="line"><span class="lineno"> 1519</span>                    res.fxSensiForCcy = sensiForCcy;</div>
<div class="line"><span class="lineno"> 1520</span>                    res.fxSensiDomCcy = sensiDomCcy;</div>
<div class="line"><span class="lineno"> 1521</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1522</span>                    BOOST_ERROR(<span class="stringliteral">&quot;This ccy pair configuration not supported yet by this test&quot;</span>);</div>
<div class="line"><span class="lineno"> 1523</span>                }</div>
<div class="line"><span class="lineno"> 1524</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1525</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isFxVol) {</div>
<div class="line"><span class="lineno"> 1526</span>                BOOST_CHECK(tokens.size() &gt; 2);</div>
<div class="line"><span class="lineno"> 1527</span>                <span class="keywordtype">string</span> pair = tokens[1];</div>
<div class="line"><span class="lineno"> 1528</span>                BOOST_CHECK_EQUAL(pair.length(), 6);</div>
<div class="line"><span class="lineno"> 1529</span>                <span class="keywordtype">string</span> sensiForCcy = pair.substr(0, 3);</div>
<div class="line"><span class="lineno"> 1530</span>                <span class="keywordtype">string</span> sensiDomCcy = pair.substr(3, 3);</div>
<div class="line"><span class="lineno"> 1531</span>                BOOST_CHECK((sensiForCcy == qlInfo.forCcy) || (sensiForCcy == qlInfo.domCcy));</div>
<div class="line"><span class="lineno"> 1532</span>                BOOST_CHECK((sensiDomCcy == qlInfo.forCcy) || (sensiDomCcy == qlInfo.domCcy));</div>
<div class="line"><span class="lineno"> 1533</span>                res.fxVolDelta += sensiVal;</div>
<div class="line"><span class="lineno"> 1534</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1535</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1536</span>                BOOST_ERROR(<span class="stringliteral">&quot;Unrecognised sensitivity factor - &quot;</span> &lt;&lt; sensiId);</div>
<div class="line"><span class="lineno"> 1537</span>            }</div>
<div class="line"><span class="lineno"> 1538</span>        }</div>
<div class="line"><span class="lineno"> 1539</span>        <span class="comment">// HERE COME THE ACTUAL SENSI COMPARISONS</span></div>
<div class="line"><span class="lineno"> 1540</span>        <span class="comment">// index and yc sensis not expected</span></div>
<div class="line"><span class="lineno"> 1541</span>        BOOST_CHECK_EQUAL(res.forIndexDelta, 0.0);</div>
<div class="line"><span class="lineno"> 1542</span>        BOOST_CHECK_EQUAL(res.domIndexDelta, 0.0);</div>
<div class="line"><span class="lineno"> 1543</span>        BOOST_CHECK_EQUAL(res.forYcDelta, 0.0);</div>
<div class="line"><span class="lineno"> 1544</span>        BOOST_CHECK_EQUAL(res.domYcDelta, 0.0);</div>
<div class="line"><span class="lineno"> 1545</span>        BOOST_TEST_MESSAGE(</div>
<div class="line"><span class="lineno"> 1546</span>            <span class="stringliteral">&quot;SA: id=&quot;</span> &lt;&lt; res.id &lt;&lt; <span class="stringliteral">&quot;, npv=&quot;</span> &lt;&lt; res.baseNpv &lt;&lt; <span class="stringliteral">&quot;, forDiscountDelta=&quot;</span> &lt;&lt; res.forDiscountDelta</div>
<div class="line"><span class="lineno"> 1547</span>                      &lt;&lt; <span class="stringliteral">&quot;, domDiscountDelta=&quot;</span> &lt;&lt; res.domDiscountDelta &lt;&lt; <span class="stringliteral">&quot;, fxSpotDeltaFor=&quot;</span> &lt;&lt; res.fxSpotDeltaFor</div>
<div class="line"><span class="lineno"> 1548</span>                      &lt;&lt; <span class="stringliteral">&quot;, fxSpotDeltaDom=&quot;</span> &lt;&lt; res.fxSpotDeltaDom &lt;&lt; <span class="stringliteral">&quot;, fxVolDelta=&quot;</span> &lt;&lt; res.fxVolDelta</div>
<div class="line"><span class="lineno"> 1549</span>                      &lt;&lt; <span class="stringliteral">&quot;, fxSpotGammaFor=&quot;</span> &lt;&lt; res.fxSpotGammaFor &lt;&lt; <span class="stringliteral">&quot;, fxSpotGammaDom=&quot;</span> &lt;&lt; res.fxSpotGammaDom</div>
<div class="line"><span class="lineno"> 1550</span>                      &lt;&lt; <span class="stringliteral">&quot;, hasFxDom=&quot;</span> &lt;&lt; res.hasFxSpotDomSensi &lt;&lt; <span class="stringliteral">&quot;, hasFxFor=&quot;</span> &lt;&lt; res.hasFxSpotForSensi);</div>
<div class="line"><span class="lineno"> 1551</span>        BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;QL: id=&quot;</span> &lt;&lt; qlInfo.id &lt;&lt; <span class="stringliteral">&quot;, forCcy=&quot;</span> &lt;&lt; qlInfo.forCcy &lt;&lt; <span class="stringliteral">&quot;, domCcy=&quot;</span> &lt;&lt; qlInfo.domCcy</div>
<div class="line"><span class="lineno"> 1552</span>                                     &lt;&lt; <span class="stringliteral">&quot;, fx=&quot;</span> &lt;&lt; qlInfo.fx &lt;&lt; <span class="stringliteral">&quot;, npv=&quot;</span> &lt;&lt; qlInfo.baseNpv</div>
<div class="line"><span class="lineno"> 1553</span>                                     &lt;&lt; <span class="stringliteral">&quot;, ccyNpv=&quot;</span> &lt;&lt; qlInfo.qlNpv &lt;&lt; <span class="stringliteral">&quot;, delta=&quot;</span> &lt;&lt; qlInfo.delta</div>
<div class="line"><span class="lineno"> 1554</span>                                     &lt;&lt; <span class="stringliteral">&quot;, gamma=&quot;</span> &lt;&lt; qlInfo.gamma &lt;&lt; <span class="stringliteral">&quot;, vega=&quot;</span> &lt;&lt; qlInfo.vega &lt;&lt; <span class="stringliteral">&quot;, rho=&quot;</span> &lt;&lt; qlInfo.rho</div>
<div class="line"><span class="lineno"> 1555</span>                                     &lt;&lt; <span class="stringliteral">&quot;, divRho=&quot;</span> &lt;&lt; qlInfo.divRho);</div>
<div class="line"><span class="lineno"> 1556</span>        Real bp = 1.e-4;</div>
<div class="line"><span class="lineno"> 1557</span>        Real tol = 0.5; <span class="comment">// % relative tolerance</span></div>
<div class="line"><span class="lineno"> 1558</span>        <span class="comment">// rate sensis are 1bp absolute shifts</span></div>
<div class="line"><span class="lineno"> 1559</span>        <span class="comment">// fx vol sensis are 1bp relative shifts</span></div>
<div class="line"><span class="lineno"> 1560</span>        <span class="comment">// fx spot sensis are 1pb relative shifts</span></div>
<div class="line"><span class="lineno"> 1561</span>        BOOST_CHECK_CLOSE(res.domDiscountDelta, qlInfo.rho * qlInfo.fx * bp, tol);</div>
<div class="line"><span class="lineno"> 1562</span>        BOOST_CHECK_CLOSE(res.forDiscountDelta, qlInfo.divRho * qlInfo.fx * bp, tol);</div>
<div class="line"><span class="lineno"> 1563</span>        Real fxVol = initMarket-&gt;fxVol(qlInfo.forCcy + qlInfo.domCcy)</div>
<div class="line"><span class="lineno"> 1564</span>                         -&gt;blackVol(1.0, 1.0, <span class="keyword">true</span>); <span class="comment">// TO-DO more appropriate vol extraction</span></div>
<div class="line"><span class="lineno"> 1565</span>        BOOST_CHECK_CLOSE(res.fxVolDelta, qlInfo.vega * qlInfo.fx * (bp * fxVol), tol);</div>
<div class="line"><span class="lineno"> 1566</span>        <span class="keywordflow">if</span> (res.hasFxSpotDomSensi) {</div>
<div class="line"><span class="lineno"> 1567</span>            Real qlGamma = qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1568</span>            <span class="keywordflow">if</span> ((res.fxSensiForCcy == qlInfo.domCcy) &amp;&amp; (res.fxSensiDomCcy == qlInfo.forCcy)) {</div>
<div class="line"><span class="lineno"> 1569</span>                <span class="comment">// the QL sensi is relative to the inverted FX quote, so we need to convert to the sensi that we want</span></div>
<div class="line"><span class="lineno"> 1570</span>                <span class="comment">// (via chain rule)</span></div>
<div class="line"><span class="lineno"> 1571</span>                Real ql_fx = qlInfo.trnFx;</div>
<div class="line"><span class="lineno"> 1572</span>                qlGamma = 2 * <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(ql_fx, 3) * qlInfo.delta + <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(ql_fx, 4) * qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1573</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res.fxSensiForCcy == qlInfo.forCcy) &amp;&amp; (res.fxSensiDomCcy == qlInfo.domCcy)) {</div>
<div class="line"><span class="lineno"> 1574</span>                qlGamma = qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1575</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1576</span>                <span class="comment">// perform the necessary conversion for cross quotes</span></div>
<div class="line"><span class="lineno"> 1577</span>                Real otherFx = 1.0 / qlInfo.fxForBase;</div>
<div class="line"><span class="lineno"> 1578</span>                qlGamma = qlInfo.gamma / <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(otherFx, 2);</div>
<div class="line"><span class="lineno"> 1579</span>            }</div>
<div class="line"><span class="lineno"> 1580</span>            BOOST_CHECK_CLOSE(res.fxSpotDeltaDom, qlInfo.delta * qlInfo.fx * (bp * qlInfo.trnFx), tol);</div>
<div class="line"><span class="lineno"> 1581</span>            BOOST_CHECK_CLOSE(res.fxSpotGammaDom, qlGamma * qlInfo.fx * (<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(bp * res.fxRateSensiDom, 2)), tol);</div>
<div class="line"><span class="lineno"> 1582</span>        }</div>
<div class="line"><span class="lineno"> 1583</span>        <span class="keywordflow">if</span> (res.hasFxSpotForSensi) {</div>
<div class="line"><span class="lineno"> 1584</span>            Real qlGamma = qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1585</span>            <span class="keywordflow">if</span> ((res.fxSensiForCcy == qlInfo.domCcy) &amp;&amp; (res.fxSensiDomCcy == qlInfo.forCcy)) {</div>
<div class="line"><span class="lineno"> 1586</span>                <span class="comment">// the QL sensi is relative to the inverted FX quote, so we need to convert to the sensi that we want</span></div>
<div class="line"><span class="lineno"> 1587</span>                <span class="comment">// (via chain rule)</span></div>
<div class="line"><span class="lineno"> 1588</span>                Real ql_fx = qlInfo.trnFx;</div>
<div class="line"><span class="lineno"> 1589</span>                qlGamma = 2 * <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(ql_fx, 3) * qlInfo.delta + <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(ql_fx, 4) * qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1590</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res.fxSensiForCcy == qlInfo.forCcy) &amp;&amp; (res.fxSensiDomCcy == qlInfo.domCcy)) {</div>
<div class="line"><span class="lineno"> 1591</span>                qlGamma = qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1592</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1593</span>                <span class="comment">// perform the necessary conversion for cross quotes</span></div>
<div class="line"><span class="lineno"> 1594</span>                Real y = 1.0 / qlInfo.fx;        <span class="comment">// BASE/TrnDom</span></div>
<div class="line"><span class="lineno"> 1595</span>                Real z = 1.0 / qlInfo.fxForBase; <span class="comment">// BASE/TrnFor</span></div>
<div class="line"><span class="lineno"> 1596</span>                qlGamma = ((2.0 * y) / <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(z, 3)) * qlInfo.delta + (y / <a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(z, 4)) * qlInfo.gamma;</div>
<div class="line"><span class="lineno"> 1597</span>            }</div>
<div class="line"><span class="lineno"> 1598</span>            BOOST_CHECK_CLOSE(res.fxSpotDeltaFor, qlInfo.delta * qlInfo.fx * (-bp * qlInfo.trnFx), tol);</div>
<div class="line"><span class="lineno"> 1599</span>            BOOST_CHECK_CLOSE(res.fxSpotGammaFor, qlGamma * qlInfo.fx * (<a class="code hl_functionRef" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb">pow</a>(-bp * res.fxRateSensiFor, 2)), tol);</div>
<div class="line"><span class="lineno"> 1600</span>        }</div>
<div class="line"><span class="lineno"> 1601</span>    }</div>
<div class="line"><span class="lineno"> 1602</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><span class="lineno"> 1603</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><span class="lineno"> 1604</span>}</div>
</div><!-- fragment --><div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_abee8f85053423e807bac09167c46064b_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_abee8f85053423e807bac09167c46064b_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_abee8f85053423e807bac09167c46064b_cgraph" id="atest_2sensitivityanalysis_8cpp_abee8f85053423e807bac09167c46064b_cgraph">
<area shape="rect" title=" " alt="" coords="5,84,196,109"/>
<area shape="rect" target="_parent" href="../ored/group__utilities.html#ga71937c757a73b33221be6ce6a8046839" title=" " alt="" coords="305,5,434,31"/>
<area shape="rect" target="_parent" href="../qle/namespace_quant_ext.html#a33845c3e343e646697955b3813b5ccbb" title=" " alt="" coords="347,55,392,80"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="244,105,495,145"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="267,169,471,209"/>
</map>
</div>

</div>
</div>
<a id="af2d8c7eb58e1524ca11fc67a9f53bcc2" name="af2d8c7eb58e1524ca11fc67a9f53bcc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2d8c7eb58e1524ca11fc67a9f53bcc2">&#9670;&#160;</a></span>BOOST_AUTO_TEST_CASE() <span class="overload">[10/10]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_AUTO_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">testCrossGamma&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test_2sensitivityanalysis_8cpp_source.html#l01606">1606</a> of file <a class="el" href="test_2sensitivityanalysis_8cpp_source.html">sensitivityanalysis.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1606</span>                                     {</div>
<div class="line"><span class="lineno"> 1607</span> </div>
<div class="line"><span class="lineno"> 1608</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Testing cross-gamma sensitivities against cached results&quot;</span>);</div>
<div class="line"><span class="lineno"> 1609</span> </div>
<div class="line"><span class="lineno"> 1610</span>    SavedSettings backup;</div>
<div class="line"><span class="lineno"> 1611</span> </div>
<div class="line"><span class="lineno"> 1612</span>    <a class="code hl_enumeration" href="classore_1_1analytics_1_1_observation_mode.html#a46c8a310cf4c094f8c80e1cb8dc1f911">ObservationMode::Mode</a> backupMode = ObservationMode::instance().mode();</div>
<div class="line"><span class="lineno"> 1613</span>    ObservationMode::instance().setMode(ObservationMode::Mode::None);</div>
<div class="line"><span class="lineno"> 1614</span> </div>
<div class="line"><span class="lineno"> 1615</span>    Date today = Date(14, April, 2016);</div>
<div class="line"><span class="lineno"> 1616</span>    Settings::instance().evaluationDate() = today;</div>
<div class="line"><span class="lineno"> 1617</span> </div>
<div class="line"><span class="lineno"> 1618</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;Today is &quot;</span> &lt;&lt; today);</div>
<div class="line"><span class="lineno"> 1619</span> </div>
<div class="line"><span class="lineno"> 1620</span>    <span class="comment">// Init market</span></div>
<div class="line"><span class="lineno"> 1621</span>    boost::shared_ptr&lt;Market&gt; initMarket = boost::make_shared&lt;TestMarket&gt;(today);</div>
<div class="line"><span class="lineno"> 1622</span> </div>
<div class="line"><span class="lineno"> 1623</span>    <span class="comment">// build scenario sim market parameters</span></div>
<div class="line"><span class="lineno"> 1624</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarketParameters&gt; simMarketData =</div>
<div class="line"><span class="lineno"> 1625</span>        <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5">TestConfigurationObjects::setupSimMarketData5</a>();</div>
<div class="line"><span class="lineno"> 1626</span> </div>
<div class="line"><span class="lineno"> 1627</span>    <span class="comment">// sensitivity config</span></div>
<div class="line"><span class="lineno"> 1628</span>    boost::shared_ptr&lt;SensitivityScenarioData&gt; sensiData = <a class="code hl_function" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f">TestConfigurationObjects::setupSensitivityScenarioData5</a>();</div>
<div class="line"><span class="lineno"> 1629</span>    vector&lt;pair&lt;string, string&gt;&gt;&amp; cgFilter = sensiData-&gt;crossGammaFilter();</div>
<div class="line"><span class="lineno"> 1630</span>    BOOST_CHECK_EQUAL(cgFilter.size(), 0);</div>
<div class="line"><span class="lineno"> 1631</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1632</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1633</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1634</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;IndexCurve/USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD&quot;</span>));</div>
<div class="line"><span class="lineno"> 1635</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>));</div>
<div class="line"><span class="lineno"> 1636</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;OptionletVolatility/EUR&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1637</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;OptionletVolatility/EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1638</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;OptionletVolatility/EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>));</div>
<div class="line"><span class="lineno"> 1639</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;OptionletVolatility/USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD&quot;</span>));</div>
<div class="line"><span class="lineno"> 1640</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;OptionletVolatility/USD&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD&quot;</span>));</div>
<div class="line"><span class="lineno"> 1641</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;SwaptionVolatility/EUR&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1642</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;SwaptionVolatility/EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1643</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;SwaptionVolatility/EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1644</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;FXVolatility/EURUSD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1645</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;FXSpot/EURUSD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1646</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;FXSpot/EURUSD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR&quot;</span>));</div>
<div class="line"><span class="lineno"> 1647</span>    cgFilter.push_back(pair&lt;string, string&gt;(<span class="stringliteral">&quot;FXSpot/EURGBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP&quot;</span>));</div>
<div class="line"><span class="lineno"> 1648</span> </div>
<div class="line"><span class="lineno"> 1649</span>    <span class="comment">// build scenario sim market</span></div>
<div class="line"><span class="lineno"> 1650</span>    boost::shared_ptr&lt;analytics::ScenarioSimMarket&gt; simMarket =</div>
<div class="line"><span class="lineno"> 1651</span>        boost::make_shared&lt;analytics::ScenarioSimMarket&gt;(initMarket, simMarketData);</div>
<div class="line"><span class="lineno"> 1652</span> </div>
<div class="line"><span class="lineno"> 1653</span>    <span class="comment">// build scenario factory</span></div>
<div class="line"><span class="lineno"> 1654</span>    boost::shared_ptr&lt;Scenario&gt; baseScenario = simMarket-&gt;baseScenario();</div>
<div class="line"><span class="lineno"> 1655</span>    boost::shared_ptr&lt;ScenarioFactory&gt; scenarioFactory = boost::make_shared&lt;CloneScenarioFactory&gt;(baseScenario);</div>
<div class="line"><span class="lineno"> 1656</span> </div>
<div class="line"><span class="lineno"> 1657</span>    <span class="comment">// build scenario generator</span></div>
<div class="line"><span class="lineno"> 1658</span>    boost::shared_ptr&lt;SensitivityScenarioGenerator&gt; scenarioGenerator =</div>
<div class="line"><span class="lineno"> 1659</span>        boost::make_shared&lt;SensitivityScenarioGenerator&gt;(sensiData, baseScenario, simMarketData, simMarket,</div>
<div class="line"><span class="lineno"> 1660</span>                                                         scenarioFactory, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1661</span>    simMarket-&gt;scenarioGenerator() = scenarioGenerator;</div>
<div class="line"><span class="lineno"> 1662</span> </div>
<div class="line"><span class="lineno"> 1663</span>    <span class="comment">// build portfolio</span></div>
<div class="line"><span class="lineno"> 1664</span>    boost::shared_ptr&lt;EngineData&gt; data = boost::make_shared&lt;EngineData&gt;();</div>
<div class="line"><span class="lineno"> 1665</span>    data-&gt;model(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno"> 1666</span>    data-&gt;engine(<span class="stringliteral">&quot;Swap&quot;</span>) = <span class="stringliteral">&quot;DiscountingSwapEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1667</span>    data-&gt;model(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno"> 1668</span>    data-&gt;engine(<span class="stringliteral">&quot;CrossCurrencySwap&quot;</span>) = <span class="stringliteral">&quot;DiscountingCrossCurrencySwapEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1669</span>    data-&gt;model(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelier&quot;</span>;</div>
<div class="line"><span class="lineno"> 1670</span>    data-&gt;engine(<span class="stringliteral">&quot;EuropeanSwaption&quot;</span>) = <span class="stringliteral">&quot;BlackBachelierSwaptionEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1671</span>    data-&gt;model(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>) = <span class="stringliteral">&quot;LGM&quot;</span>;</div>
<div class="line"><span class="lineno"> 1672</span>    data-&gt;engine(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>) = <span class="stringliteral">&quot;Grid&quot;</span>;</div>
<div class="line"><span class="lineno"> 1673</span>    map&lt;string, string&gt; bermudanModelParams;</div>
<div class="line"><span class="lineno"> 1674</span>    bermudanModelParams[<span class="stringliteral">&quot;Calibration&quot;</span>] = <span class="stringliteral">&quot;Bootstrap&quot;</span>;</div>
<div class="line"><span class="lineno"> 1675</span>    bermudanModelParams[<span class="stringliteral">&quot;CalibrationStrategy&quot;</span>] = <span class="stringliteral">&quot;Coterminal&quot;</span>;</div>
<div class="line"><span class="lineno"> 1676</span>    bermudanModelParams[<span class="stringliteral">&quot;Reversion&quot;</span>] = <span class="stringliteral">&quot;0.03&quot;</span>;</div>
<div class="line"><span class="lineno"> 1677</span>    bermudanModelParams[<span class="stringliteral">&quot;ReversionType&quot;</span>] = <span class="stringliteral">&quot;HullWhite&quot;</span>;</div>
<div class="line"><span class="lineno"> 1678</span>    bermudanModelParams[<span class="stringliteral">&quot;Volatility&quot;</span>] = <span class="stringliteral">&quot;0.01&quot;</span>;</div>
<div class="line"><span class="lineno"> 1679</span>    bermudanModelParams[<span class="stringliteral">&quot;CalibrationType&quot;</span>] = <span class="stringliteral">&quot;Hagan&quot;</span>;</div>
<div class="line"><span class="lineno"> 1680</span>    bermudanModelParams[<span class="stringliteral">&quot;Tolerance&quot;</span>] = <span class="stringliteral">&quot;0.0001&quot;</span>;</div>
<div class="line"><span class="lineno"> 1681</span>    data-&gt;modelParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>) = bermudanModelParams;</div>
<div class="line"><span class="lineno"> 1682</span>    map&lt;string, string&gt; bermudanEngineParams;</div>
<div class="line"><span class="lineno"> 1683</span>    bermudanEngineParams[<span class="stringliteral">&quot;sy&quot;</span>] = <span class="stringliteral">&quot;3.0&quot;</span>;</div>
<div class="line"><span class="lineno"> 1684</span>    bermudanEngineParams[<span class="stringliteral">&quot;ny&quot;</span>] = <span class="stringliteral">&quot;10&quot;</span>;</div>
<div class="line"><span class="lineno"> 1685</span>    bermudanEngineParams[<span class="stringliteral">&quot;sx&quot;</span>] = <span class="stringliteral">&quot;3.0&quot;</span>;</div>
<div class="line"><span class="lineno"> 1686</span>    bermudanEngineParams[<span class="stringliteral">&quot;nx&quot;</span>] = <span class="stringliteral">&quot;10&quot;</span>;</div>
<div class="line"><span class="lineno"> 1687</span>    data-&gt;engineParameters(<span class="stringliteral">&quot;BermudanSwaption&quot;</span>) = bermudanEngineParams;</div>
<div class="line"><span class="lineno"> 1688</span>    data-&gt;model(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountedCashflows&quot;</span>;</div>
<div class="line"><span class="lineno"> 1689</span>    data-&gt;engine(<span class="stringliteral">&quot;FxForward&quot;</span>) = <span class="stringliteral">&quot;DiscountingFxForwardEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1690</span>    data-&gt;model(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;GarmanKohlhagen&quot;</span>;</div>
<div class="line"><span class="lineno"> 1691</span>    data-&gt;engine(<span class="stringliteral">&quot;FxOption&quot;</span>) = <span class="stringliteral">&quot;AnalyticEuropeanEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1692</span>    data-&gt;model(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapModel&quot;</span>;</div>
<div class="line"><span class="lineno"> 1693</span>    data-&gt;engine(<span class="stringliteral">&quot;CapFloor&quot;</span>) = <span class="stringliteral">&quot;IborCapEngine&quot;</span>;</div>
<div class="line"><span class="lineno"> 1694</span>    data-&gt;model(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackOrBachelier&quot;</span>;</div>
<div class="line"><span class="lineno"> 1695</span>    data-&gt;engine(<span class="stringliteral">&quot;CapFlooredIborLeg&quot;</span>) = <span class="stringliteral">&quot;BlackIborCouponPricer&quot;</span>;</div>
<div class="line"><span class="lineno"> 1696</span>    boost::shared_ptr&lt;EngineFactory&gt; factory = boost::make_shared&lt;EngineFactory&gt;(data, simMarket);</div>
<div class="line"><span class="lineno"> 1697</span>    factory-&gt;registerBuilder(boost::make_shared&lt;SwapEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1698</span>    factory-&gt;registerBuilder(boost::make_shared&lt;EuropeanSwaptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1699</span>    factory-&gt;registerBuilder(boost::make_shared&lt;LGMGridBermudanSwaptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1700</span>    factory-&gt;registerBuilder(boost::make_shared&lt;FxEuropeanOptionEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1701</span>    factory-&gt;registerBuilder(boost::make_shared&lt;FxForwardEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1702</span>    factory-&gt;registerBuilder(boost::make_shared&lt;CapFloorEngineBuilder&gt;());</div>
<div class="line"><span class="lineno"> 1703</span> </div>
<div class="line"><span class="lineno"> 1704</span>    <span class="comment">// boost::shared_ptr&lt;Portfolio&gt; portfolio = buildSwapPortfolio(portfolioSize, factory);</span></div>
<div class="line"><span class="lineno"> 1705</span>    boost::shared_ptr&lt;Portfolio&gt; portfolio(<span class="keyword">new</span> <a class="code hl_classRef" href="../ored/classore_1_1data_1_1_portfolio.html">Portfolio</a>());</div>
<div class="line"><span class="lineno"> 1706</span>    Size trnCount = 0;</div>
<div class="line"><span class="lineno"> 1707</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 10, 0.03, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno"> 1708</span>                             <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno"> 1709</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1710</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 15, 0.02, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno"> 1711</span>                             <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><span class="lineno"> 1712</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1713</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;GBP&quot;</span>, <span class="keyword">true</span>, 10000000.0, 0, 20, 0.04, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno"> 1714</span>                             <span class="stringliteral">&quot;GBP-LIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno"> 1715</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1716</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a0cf55200a1ba13d942044fce914bfbf6">buildSwap</a>(<span class="stringliteral">&quot;4_Swap_JPY&quot;</span>, <span class="stringliteral">&quot;JPY&quot;</span>, <span class="keyword">true</span>, 1000000000.0, 0, 5, 0.01, 0.00, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>,</div>
<div class="line"><span class="lineno"> 1717</span>                             <span class="stringliteral">&quot;JPY-LIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno"> 1718</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1719</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 10, 10, 0.02, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><span class="lineno"> 1720</span>                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;Physical&quot;</span>));</div>
<div class="line"><span class="lineno"> 1721</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1722</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a2ace8fd4987982d98b9f2a4c441d9f9e">buildEuropeanSwaption</a>(<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="keyword">true</span>, 1000000.0, 2, 5, 0.02, 0.00, <span class="stringliteral">&quot;1Y&quot;</span>,</div>
<div class="line"><span class="lineno"> 1723</span>                                         <span class="stringliteral">&quot;30/360&quot;</span>, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>, <span class="stringliteral">&quot;Physical&quot;</span>));</div>
<div class="line"><span class="lineno"> 1724</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1725</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 3, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000.0, <span class="stringliteral">&quot;USD&quot;</span>, 11000000.0));</div>
<div class="line"><span class="lineno"> 1726</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1727</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a065f2919a7ee7254653afd562b975a14">buildFxOption</a>(<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, <span class="stringliteral">&quot;Call&quot;</span>, 7, <span class="stringliteral">&quot;EUR&quot;</span>, 10000000.0, <span class="stringliteral">&quot;GBP&quot;</span>, 11000000.0));</div>
<div class="line"><span class="lineno"> 1728</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1729</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a1f8ce589c50a9c62fc458cb91de7edf5">buildCap</a>(<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;EUR&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.05, 1000000.0, 0, 10, <span class="stringliteral">&quot;6M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;EUR-EURIBOR-6M&quot;</span>));</div>
<div class="line"><span class="lineno"> 1730</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1731</span>    portfolio-&gt;add(<a class="code hl_function" href="namespacetestsuite.html#a7da40f9d57dcfec350bdd68c50ea3b5e">buildFloor</a>(<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;USD&quot;</span>, <span class="stringliteral">&quot;Long&quot;</span>, 0.01, 1000000.0, 0, 10, <span class="stringliteral">&quot;3M&quot;</span>, <span class="stringliteral">&quot;A360&quot;</span>, <span class="stringliteral">&quot;USD-LIBOR-3M&quot;</span>));</div>
<div class="line"><span class="lineno"> 1732</span>    trnCount++;</div>
<div class="line"><span class="lineno"> 1733</span>    portfolio-&gt;build(factory);</div>
<div class="line"><span class="lineno"> 1734</span>    BOOST_CHECK_EQUAL(trnCount, portfolio-&gt;size());</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span>    <span class="keywordtype">bool</span> useOriginalFxForBaseCcyConv = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1737</span>    boost::shared_ptr&lt;SensitivityAnalysis&gt; sa =</div>
<div class="line"><span class="lineno"> 1738</span>        boost::make_shared&lt;SensitivityAnalysis&gt;(portfolio, initMarket, <a class="code hl_variableRef" href="../ored/classore_1_1data_1_1_market.html#ab336651e3455fff1764bf576a5785bbd">Market::defaultConfiguration</a>, data,</div>
<div class="line"><span class="lineno"> 1739</span>                                                simMarketData, sensiData, useOriginalFxForBaseCcyConv);</div>
<div class="line"><span class="lineno"> 1740</span>    sa-&gt;generateSensitivities();</div>
<div class="line"><span class="lineno"> 1741</span> </div>
<div class="line"><span class="lineno"> 1742</span>    std::vector&lt;ore::analytics::SensitivityScenarioGenerator::ScenarioDescription&gt; scenDesc =</div>
<div class="line"><span class="lineno"> 1743</span>        sa-&gt;scenarioGenerator()-&gt;scenarioDescriptions();</div>
<div class="line"><span class="lineno"> 1744</span> </div>
<div class="line"><span class="lineno"> 1745</span>    <span class="keyword">struct </span>GammaResult {</div>
<div class="line"><span class="lineno"> 1746</span>        <span class="keywordtype">string</span> id;</div>
<div class="line"><span class="lineno"> 1747</span>        <span class="keywordtype">string</span> factor1;</div>
<div class="line"><span class="lineno"> 1748</span>        <span class="keywordtype">string</span> factor2;</div>
<div class="line"><span class="lineno"> 1749</span>        Real crossgamma;</div>
<div class="line"><span class="lineno"> 1750</span>    };</div>
<div class="line"><span class="lineno"> 1751</span> </div>
<div class="line"><span class="lineno"> 1752</span>    vector&lt;GammaResult&gt; cachedResults = {</div>
<div class="line"><span class="lineno"> 1753</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/1/1Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/0/1Y/0.01&quot;</span>, -1.14292006e-05},</div>
<div class="line"><span class="lineno"> 1754</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/1/1Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/5/2Y/0.01&quot;</span>, -4.75325714e-06},</div>
<div class="line"><span class="lineno"> 1755</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/2/2Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/0/1Y/0.01&quot;</span>, -5.72627955e-05},</div>
<div class="line"><span class="lineno"> 1756</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/2/2Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/10/3Y/0.01&quot;</span>, -6.0423848e-05},</div>
<div class="line"><span class="lineno"> 1757</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/2/2Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/5/2Y/0.01&quot;</span>, -0.0003282313},</div>
<div class="line"><span class="lineno"> 1758</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, 2.38844859e-06},</div>
<div class="line"><span class="lineno"> 1759</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/10/3Y/0.01&quot;</span>, -0.0032767365},</div>
<div class="line"><span class="lineno"> 1760</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/15/5Y/0.01&quot;</span>, -0.00124021334},</div>
<div class="line"><span class="lineno"> 1761</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/5/2Y/0.01&quot;</span>, -0.000490482465},</div>
<div class="line"><span class="lineno"> 1762</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, 4.56303869e-05},</div>
<div class="line"><span class="lineno"> 1763</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/10/3Y/0.01&quot;</span>, -0.00309734116},</div>
<div class="line"><span class="lineno"> 1764</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/15/5Y/0.01&quot;</span>, -0.0154732663},</div>
<div class="line"><span class="lineno"> 1765</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/20/10Y/0.01&quot;</span>, -0.0011774169},</div>
<div class="line"><span class="lineno"> 1766</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/5/2Y/0.01&quot;</span>, -1.15352532e-06},</div>
<div class="line"><span class="lineno"> 1767</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/6/10Y&quot;</span>, 0.00024726356},</div>
<div class="line"><span class="lineno"> 1768</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/10/3Y/0.01&quot;</span>, -1.30253466e-06},</div>
<div class="line"><span class="lineno"> 1769</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/15/5Y/0.01&quot;</span>, -0.0325565983},</div>
<div class="line"><span class="lineno"> 1770</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/20/10Y/0.01&quot;</span>, -0.026175823},</div>
<div class="line"><span class="lineno"> 1771</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/6/10Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/15/5Y/0.01&quot;</span>, -0.0151532607},</div>
<div class="line"><span class="lineno"> 1772</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/6/10Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/20/10Y/0.01&quot;</span>, -0.0524224726},</div>
<div class="line"><span class="lineno"> 1773</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, -0.000206363102},</div>
<div class="line"><span class="lineno"> 1774</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, -9.83482187e-06},</div>
<div class="line"><span class="lineno"> 1775</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, -0.0181056744},</div>
<div class="line"><span class="lineno"> 1776</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, -0.000292001105},</div>
<div class="line"><span class="lineno"> 1777</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, -0.197980608},</div>
<div class="line"><span class="lineno"> 1778</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, -0.000472459871},</div>
<div class="line"><span class="lineno"> 1779</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, -0.506924993},</div>
<div class="line"><span class="lineno"> 1780</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, -1.31308851},</div>
<div class="line"><span class="lineno"> 1781</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, -1.79643202},</div>
<div class="line"><span class="lineno"> 1782</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/0/1Y/0.01&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/5/2Y/0.01&quot;</span>, 0.0214845769},</div>
<div class="line"><span class="lineno"> 1783</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/10/3Y/0.01&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/15/5Y/0.01&quot;</span>, 0.224709734},</div>
<div class="line"><span class="lineno"> 1784</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/15/5Y/0.01&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/20/10Y/0.01&quot;</span>, 0.693920762},</div>
<div class="line"><span class="lineno"> 1785</span>        {<span class="stringliteral">&quot;10_Floor_USD&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/5/2Y/0.01&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/USD/10/3Y/0.01&quot;</span>, 0.0649121282},</div>
<div class="line"><span class="lineno"> 1786</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/1/1Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, 0.000439456664},</div>
<div class="line"><span class="lineno"> 1787</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/0/6M&quot;</span>, 0.0488603441},</div>
<div class="line"><span class="lineno"> 1788</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, -0.0725961695},</div>
<div class="line"><span class="lineno"> 1789</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -0.0499326873},</div>
<div class="line"><span class="lineno"> 1790</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, 0.00136525929},</div>
<div class="line"><span class="lineno"> 1791</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/0/6M&quot;</span>, 0.00108389393},</div>
<div class="line"><span class="lineno"> 1792</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, 0.141865394},</div>
<div class="line"><span class="lineno"> 1793</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -0.191425738},</div>
<div class="line"><span class="lineno"> 1794</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.1454702},</div>
<div class="line"><span class="lineno"> 1795</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, 0.00183080882},</div>
<div class="line"><span class="lineno"> 1796</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, 0.000784549396},</div>
<div class="line"><span class="lineno"> 1797</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 0.425320865},</div>
<div class="line"><span class="lineno"> 1798</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.337527203},</div>
<div class="line"><span class="lineno"> 1799</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.560276813},</div>
<div class="line"><span class="lineno"> 1800</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, -0.00376823638},</div>
<div class="line"><span class="lineno"> 1801</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 0.000516382745},</div>
<div class="line"><span class="lineno"> 1802</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 0.91807051},</div>
<div class="line"><span class="lineno"> 1803</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.606871969},</div>
<div class="line"><span class="lineno"> 1804</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -1.1789221},</div>
<div class="line"><span class="lineno"> 1805</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, -0.0210602414},</div>
<div class="line"><span class="lineno"> 1806</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 1.93838247},</div>
<div class="line"><span class="lineno"> 1807</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.964284878},</div>
<div class="line"><span class="lineno"> 1808</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -2.50079601},</div>
<div class="line"><span class="lineno"> 1809</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 3.43097423},</div>
<div class="line"><span class="lineno"> 1810</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -4.9024972},</div>
<div class="line"><span class="lineno"> 1811</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/0/6M&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, -0.048865166},</div>
<div class="line"><span class="lineno"> 1812</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/0/6M&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -0.00108389556},</div>
<div class="line"><span class="lineno"> 1813</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -0.0924553103},</div>
<div class="line"><span class="lineno"> 1814</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.000784546835},</div>
<div class="line"><span class="lineno"> 1815</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.281394335},</div>
<div class="line"><span class="lineno"> 1816</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.000516386237},</div>
<div class="line"><span class="lineno"> 1817</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.359848329},</div>
<div class="line"><span class="lineno"> 1818</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.779536431},</div>
<div class="line"><span class="lineno"> 1819</span>        {<span class="stringliteral">&quot;1_Swap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.989040876},</div>
<div class="line"><span class="lineno"> 1820</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/0/6M&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/1/1Y&quot;</span>, 7.85577577e-05},</div>
<div class="line"><span class="lineno"> 1821</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/1/1Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/2/2Y&quot;</span>, 0.00034391915},</div>
<div class="line"><span class="lineno"> 1822</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/2/2Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, 0.00101750751},</div>
<div class="line"><span class="lineno"> 1823</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, 0.00129107304},</div>
<div class="line"><span class="lineno"> 1824</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, 0.00885138742},</div>
<div class="line"><span class="lineno"> 1825</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/5/7Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/6/10Y&quot;</span>, 0.0236235501},</div>
<div class="line"><span class="lineno"> 1826</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/6/10Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/7/15Y&quot;</span>, 0.07325946},</div>
<div class="line"><span class="lineno"> 1827</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/7/15Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/8/20Y&quot;</span>, -2.22151866e-05},</div>
<div class="line"><span class="lineno"> 1828</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, -0.0202145245},</div>
<div class="line"><span class="lineno"> 1829</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/0/6M&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, -0.000431735534},</div>
<div class="line"><span class="lineno"> 1830</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, -0.0379707172},</div>
<div class="line"><span class="lineno"> 1831</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, -0.000316063757},</div>
<div class="line"><span class="lineno"> 1832</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, -0.11422779},</div>
<div class="line"><span class="lineno"> 1833</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, -0.000207132776},</div>
<div class="line"><span class="lineno"> 1834</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, -0.137591099},</div>
<div class="line"><span class="lineno"> 1835</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, -0.305644142},</div>
<div class="line"><span class="lineno"> 1836</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, -0.37816313},</div>
<div class="line"><span class="lineno"> 1837</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/7/15Y&quot;</span>, -0.431405343},</div>
<div class="line"><span class="lineno"> 1838</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/8/20Y&quot;</span>, -0.000289136427},</div>
<div class="line"><span class="lineno"> 1839</span>        {<span class="stringliteral">&quot;2_Swap_USD&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/7/15Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/USD-LIBOR-3M/8/20Y&quot;</span>, 0.00042894634},</div>
<div class="line"><span class="lineno"> 1840</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/0/6M&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, -0.0210289143},</div>
<div class="line"><span class="lineno"> 1841</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/1/1Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.00639700286},</div>
<div class="line"><span class="lineno"> 1842</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/2/2Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.0173332273},</div>
<div class="line"><span class="lineno"> 1843</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/3/3Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.0420620699},</div>
<div class="line"><span class="lineno"> 1844</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/4/5Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.0715365904},</div>
<div class="line"><span class="lineno"> 1845</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/5/7Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.124046364},</div>
<div class="line"><span class="lineno"> 1846</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/6/10Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.245374591},</div>
<div class="line"><span class="lineno"> 1847</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/7/15Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 0.388570486},</div>
<div class="line"><span class="lineno"> 1848</span>        {<span class="stringliteral">&quot;3_Swap_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/8/20Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, -0.308991311},</div>
<div class="line"><span class="lineno"> 1849</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/7/15Y&quot;</span>, 0.00500290218},</div>
<div class="line"><span class="lineno"> 1850</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/8/20Y&quot;</span>, -0.000119650445},</div>
<div class="line"><span class="lineno"> 1851</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 0.193956982},</div>
<div class="line"><span class="lineno"> 1852</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, -0.274626882},</div>
<div class="line"><span class="lineno"> 1853</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, -0.0230959074},</div>
<div class="line"><span class="lineno"> 1854</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, -0.0783525323},</div>
<div class="line"><span class="lineno"> 1855</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/7/15Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/8/20Y&quot;</span>, 0.00909222141},</div>
<div class="line"><span class="lineno"> 1856</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/7/15Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 0.318897412},</div>
<div class="line"><span class="lineno"> 1857</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/7/15Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, -0.113123194},</div>
<div class="line"><span class="lineno"> 1858</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/7/15Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, -0.492342945},</div>
<div class="line"><span class="lineno"> 1859</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/7/15Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, -0.277872723},</div>
<div class="line"><span class="lineno"> 1860</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/8/20Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.0231524316},</div>
<div class="line"><span class="lineno"> 1861</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/8/20Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, 0.586686233},</div>
<div class="line"><span class="lineno"> 1862</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/8/20Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, -0.741062084},</div>
<div class="line"><span class="lineno"> 1863</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/8/20Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, -0.207022576},</div>
<div class="line"><span class="lineno"> 1864</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, -0.438748346},</div>
<div class="line"><span class="lineno"> 1865</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, -4.80598188},</div>
<div class="line"><span class="lineno"> 1866</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, 0.0374673201},</div>
<div class="line"><span class="lineno"> 1867</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, 0.578274874},</div>
<div class="line"><span class="lineno"> 1868</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/7/15Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, -0.00750543873},</div>
<div class="line"><span class="lineno"> 1869</span>        {<span class="stringliteral">&quot;5_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/8/20Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/5/10Y/10Y/ATM&quot;</span>, -0.134678679},</div>
<div class="line"><span class="lineno"> 1870</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, 7.34225287e-05},</div>
<div class="line"><span class="lineno"> 1871</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, -1.39672557e-06},</div>
<div class="line"><span class="lineno"> 1872</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, -4.54013752e-05},</div>
<div class="line"><span class="lineno"> 1873</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 0.00762697723},</div>
<div class="line"><span class="lineno"> 1874</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.00743193871},</div>
<div class="line"><span class="lineno"> 1875</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.000253325068},</div>
<div class="line"><span class="lineno"> 1876</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.0091003291},</div>
<div class="line"><span class="lineno"> 1877</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -3.51917679e-05},</div>
<div class="line"><span class="lineno"> 1878</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/2/2Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 0.000131859928},</div>
<div class="line"><span class="lineno"> 1879</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, 9.36521301e-05},</div>
<div class="line"><span class="lineno"> 1880</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, 1.17673517e-06},</div>
<div class="line"><span class="lineno"> 1881</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 0.0217662195},</div>
<div class="line"><span class="lineno"> 1882</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.0173020895},</div>
<div class="line"><span class="lineno"> 1883</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.0288530865},</div>
<div class="line"><span class="lineno"> 1884</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 0.000542137221},</div>
<div class="line"><span class="lineno"> 1885</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.0105191516},</div>
<div class="line"><span class="lineno"> 1886</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, -1.92268253e-05},</div>
<div class="line"><span class="lineno"> 1887</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, 0.000380955356},</div>
<div class="line"><span class="lineno"> 1888</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -0.000175687061},</div>
<div class="line"><span class="lineno"> 1889</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 0.0470703001},</div>
<div class="line"><span class="lineno"> 1890</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.0309543681},</div>
<div class="line"><span class="lineno"> 1891</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.0603712949},</div>
<div class="line"><span class="lineno"> 1892</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 3.56844794e-06},</div>
<div class="line"><span class="lineno"> 1893</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.0194332275},</div>
<div class="line"><span class="lineno"> 1894</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, -3.55200336e-05},</div>
<div class="line"><span class="lineno"> 1895</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, -3.53218638e-06},</div>
<div class="line"><span class="lineno"> 1896</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -0.00907584063},</div>
<div class="line"><span class="lineno"> 1897</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 0.000465011277},</div>
<div class="line"><span class="lineno"> 1898</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 0.100206381},</div>
<div class="line"><span class="lineno"> 1899</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.110760564},</div>
<div class="line"><span class="lineno"> 1900</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.000747127526},</div>
<div class="line"><span class="lineno"> 1901</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.0212825534},</div>
<div class="line"><span class="lineno"> 1902</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, -3.89078705e-05},</div>
<div class="line"><span class="lineno"> 1903</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -7.04072845e-05},</div>
<div class="line"><span class="lineno"> 1904</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 2.90610478e-06},</div>
<div class="line"><span class="lineno"> 1905</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 0.00015803353},</div>
<div class="line"><span class="lineno"> 1906</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 1.87784499e-05},</div>
<div class="line"><span class="lineno"> 1907</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -2.49396362e-06},</div>
<div class="line"><span class="lineno"> 1908</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -5.68973592e-05},</div>
<div class="line"><span class="lineno"> 1909</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.0374868064},</div>
<div class="line"><span class="lineno"> 1910</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.0510088999},</div>
<div class="line"><span class="lineno"> 1911</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -1.83061212},</div>
<div class="line"><span class="lineno"> 1912</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.00707882478},</div>
<div class="line"><span class="lineno"> 1913</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, 0.0237742927},</div>
<div class="line"><span class="lineno"> 1914</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 4.3887334e-05},</div>
<div class="line"><span class="lineno"> 1915</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.0162251326},</div>
<div class="line"><span class="lineno"> 1916</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 0.0753026757},</div>
<div class="line"><span class="lineno"> 1917</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 0.000291552333},</div>
<div class="line"><span class="lineno"> 1918</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.00109766971},</div>
<div class="line"><span class="lineno"> 1919</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, -2.02629781e-06},</div>
<div class="line"><span class="lineno"> 1920</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 0.126414823},</div>
<div class="line"><span class="lineno"> 1921</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 0.000493449001},</div>
<div class="line"><span class="lineno"> 1922</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.00244118512},</div>
<div class="line"><span class="lineno"> 1923</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, -4.50652442e-06},</div>
<div class="line"><span class="lineno"> 1924</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, 0.0233867156},</div>
<div class="line"><span class="lineno"> 1925</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.116493942},</div>
<div class="line"><span class="lineno"> 1926</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, -0.000215046299},</div>
<div class="line"><span class="lineno"> 1927</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, -0.000336383262},</div>
<div class="line"><span class="lineno"> 1928</span>        {<span class="stringliteral">&quot;6_Swaption_EUR&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/0/2Y/5Y/ATM&quot;</span>, <span class="stringliteral">&quot;SwaptionVolatility/EUR/2/5Y/5Y/ATM&quot;</span>, 2.31331433e-06},</div>
<div class="line"><span class="lineno"> 1929</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, 0.0027612336},</div>
<div class="line"><span class="lineno"> 1930</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURUSD/0/spot&quot;</span>, -42.4452352},</div>
<div class="line"><span class="lineno"> 1931</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;FXVolatility/EURUSD/0/5Y/ATM&quot;</span>, 168.577072},</div>
<div class="line"><span class="lineno"> 1932</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURUSD/0/spot&quot;</span>, -0.0776202832},</div>
<div class="line"><span class="lineno"> 1933</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;FXVolatility/EURUSD/0/5Y/ATM&quot;</span>, 0.308961544},</div>
<div class="line"><span class="lineno"> 1934</span>        {<span class="stringliteral">&quot;7_FxOption_EUR_USD&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/3/3Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/USD/4/5Y&quot;</span>, 0.00206353236},</div>
<div class="line"><span class="lineno"> 1935</span>        {<span class="stringliteral">&quot;8_FxOption_EUR_GBP&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/GBP/5/7Y&quot;</span>, <span class="stringliteral">&quot;FXSpot/EURGBP/0/spot&quot;</span>, 40.247185},</div>
<div class="line"><span class="lineno"> 1936</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, 1.89362237e-06},</div>
<div class="line"><span class="lineno"> 1937</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 1.60204674e-05},</div>
<div class="line"><span class="lineno"> 1938</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -3.54807444e-05},</div>
<div class="line"><span class="lineno"> 1939</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/14/3Y/0.05&quot;</span>, -7.41440071e-05},</div>
<div class="line"><span class="lineno"> 1940</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, -2.8717396e-05},</div>
<div class="line"><span class="lineno"> 1941</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/3/3Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/9/2Y/0.05&quot;</span>, -3.95373826e-06},</div>
<div class="line"><span class="lineno"> 1942</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, 1.87918619e-06},</div>
<div class="line"><span class="lineno"> 1943</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, 0.000141954676},</div>
<div class="line"><span class="lineno"> 1944</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 0.000136532169},</div>
<div class="line"><span class="lineno"> 1945</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.000558091084},</div>
<div class="line"><span class="lineno"> 1946</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/14/3Y/0.05&quot;</span>, -0.000195855626},</div>
<div class="line"><span class="lineno"> 1947</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, -0.0013501175},</div>
<div class="line"><span class="lineno"> 1948</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/4/5Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/24/10Y/0.05&quot;</span>, -9.03819837e-05},</div>
<div class="line"><span class="lineno"> 1949</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, 2.44087892e-05},</div>
<div class="line"><span class="lineno"> 1950</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, 0.00131097735},</div>
<div class="line"><span class="lineno"> 1951</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 0.000537751659},</div>
<div class="line"><span class="lineno"> 1952</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.00376190752},</div>
<div class="line"><span class="lineno"> 1953</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, -0.00650057233},</div>
<div class="line"><span class="lineno"> 1954</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/5/7Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/24/10Y/0.05&quot;</span>, -0.00529335126},</div>
<div class="line"><span class="lineno"> 1955</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, 0.00677440175},</div>
<div class="line"><span class="lineno"> 1956</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.0101355366},</div>
<div class="line"><span class="lineno"> 1957</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, -0.00512368197},</div>
<div class="line"><span class="lineno"> 1958</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;DiscountCurve/EUR/6/10Y&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/24/10Y/0.05&quot;</span>, -0.0166702108},</div>
<div class="line"><span class="lineno"> 1959</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/1/1Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, -3.22099407e-06},</div>
<div class="line"><span class="lineno"> 1960</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, -0.00114858136},</div>
<div class="line"><span class="lineno"> 1961</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/2/2Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -3.32910605e-06},</div>
<div class="line"><span class="lineno"> 1962</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/3/3Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, -0.0325351415},</div>
<div class="line"><span class="lineno"> 1963</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/4/5Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, -0.22049032},</div>
<div class="line"><span class="lineno"> 1964</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/5/7Y&quot;</span>, <span class="stringliteral">&quot;IndexCurve/EUR-EURIBOR-6M/6/10Y&quot;</span>, -0.599739496},</div>
<div class="line"><span class="lineno"> 1965</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/14/3Y/0.05&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, 0.0480747768},</div>
<div class="line"><span class="lineno"> 1966</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/19/5Y/0.05&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/24/10Y/0.05&quot;</span>, 0.670249341},</div>
<div class="line"><span class="lineno"> 1967</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/4/1Y/0.05&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/9/2Y/0.05&quot;</span>, 2.49049523e-05},</div>
<div class="line"><span class="lineno"> 1968</span>        {<span class="stringliteral">&quot;9_Cap_EUR&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/9/2Y/0.05&quot;</span>, <span class="stringliteral">&quot;OptionletVolatility/EUR/14/3Y/0.05&quot;</span>, 0.00180372518}};</div>
<div class="line"><span class="lineno"> 1969</span> </div>
<div class="line"><span class="lineno"> 1970</span>    map&lt;tuple&lt;string, string, string&gt;, Real&gt; cachedMap;</div>
<div class="line"><span class="lineno"> 1971</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; cachedResults.size(); ++i) {</div>
<div class="line"><span class="lineno"> 1972</span>        tuple&lt;string, string, string&gt; p(cachedResults[i].<span class="keywordtype">id</span>, cachedResults[i].factor1, cachedResults[i].factor2);</div>
<div class="line"><span class="lineno"> 1973</span>        cachedMap[p] = cachedResults[i].crossgamma;</div>
<div class="line"><span class="lineno"> 1974</span>    }</div>
<div class="line"><span class="lineno"> 1975</span> </div>
<div class="line"><span class="lineno"> 1976</span>    vector&lt;tuple&lt;string, string, string&gt;&gt; ids;</div>
<div class="line"><span class="lineno"> 1977</span>    Real rel_tol = 0.005;</div>
<div class="line"><span class="lineno"> 1978</span>    Real threshold = 1.e-6;</div>
<div class="line"><span class="lineno"> 1979</span>    Size <a class="code hl_variableRef" href="../ored/ored_2marketdata_2todaysmarket_8cpp.html#a36d2d3ec8fc39969adfd76b5ac2cfcb0">count</a> = 0;</div>
<div class="line"><span class="lineno"> 1980</span>    <span class="keywordflow">for</span> (Size i = 0; i &lt; portfolio-&gt;size(); i++) {</div>
<div class="line"><span class="lineno"> 1981</span>        <span class="keywordtype">string</span> <span class="keywordtype">id</span> = portfolio-&gt;trades()[i]-&gt;id();</div>
<div class="line"><span class="lineno"> 1982</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; s : scenDesc) {</div>
<div class="line"><span class="lineno"> 1983</span>            <span class="keywordflow">if</span> (s.type() == ShiftScenarioGenerator::ScenarioDescription::Type::Cross) {</div>
<div class="line"><span class="lineno"> 1984</span>                <span class="keywordtype">string</span> factor1 = s.factor1();</div>
<div class="line"><span class="lineno"> 1985</span>                <span class="keywordtype">string</span> factor2 = s.factor2();</div>
<div class="line"><span class="lineno"> 1986</span>                ostringstream os;</div>
<div class="line"><span class="lineno"> 1987</span>                os &lt;&lt; <span class="keywordtype">id</span> &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; factor1 &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; factor2;</div>
<div class="line"><span class="lineno"> 1988</span>                <span class="keywordtype">string</span> keyStr = os.str();</div>
<div class="line"><span class="lineno"> 1989</span>                tuple&lt;string, string, string&gt; key = make_tuple(<span class="keywordtype">id</span>, factor1, factor2);</div>
<div class="line"><span class="lineno"> 1990</span>                Real crossgamma = sa-&gt;sensiCube()-&gt;crossGamma(<span class="keywordtype">id</span>, make_pair(s.key1(), s.key2()));</div>
<div class="line"><span class="lineno"> 1991</span>                <span class="keywordflow">if</span> (fabs(crossgamma) &gt;= threshold) {</div>
<div class="line"><span class="lineno"> 1992</span>                    ids.push_back(make_tuple(<span class="keywordtype">id</span>, factor1, factor2));</div>
<div class="line"><span class="lineno"> 1993</span>                    <span class="comment">// BOOST_TEST_MESSAGE(&quot;{ \&quot;&quot; &lt;&lt; id &lt;&lt; std::setprecision(9) &lt;&lt; &quot;\&quot;, \&quot;&quot; &lt;&lt; factor1 &lt;&lt; &quot;\&quot;, \&quot;&quot; &lt;&lt;</span></div>
<div class="line"><span class="lineno"> 1994</span>                    <span class="comment">// factor2 &lt;&lt;</span></div>
<div class="line"><span class="lineno"> 1995</span>                    <span class="comment">// &quot;\&quot;, &quot; &lt;&lt; crossgamma &lt;&lt; &quot; },&quot;);</span></div>
<div class="line"><span class="lineno"> 1996</span>                    <span class="keyword">auto</span> cached_it = cachedMap.find(key);</div>
<div class="line"><span class="lineno"> 1997</span>                    BOOST_CHECK_MESSAGE(cached_it != cachedMap.end(), keyStr &lt;&lt; <span class="stringliteral">&quot; not found in cached results&quot;</span>);</div>
<div class="line"><span class="lineno"> 1998</span>                    <span class="keywordflow">if</span> (cached_it != cachedMap.end()) {</div>
<div class="line"><span class="lineno"> 1999</span>                        Real cached_cg = cached_it-&gt;second;</div>
<div class="line"><span class="lineno"> 2000</span>                        BOOST_CHECK_CLOSE(crossgamma, cached_cg, rel_tol);</div>
<div class="line"><span class="lineno"> 2001</span>                        <a class="code hl_variableRef" href="../ored/ored_2marketdata_2todaysmarket_8cpp.html#a36d2d3ec8fc39969adfd76b5ac2cfcb0">count</a>++;</div>
<div class="line"><span class="lineno"> 2002</span>                    }</div>
<div class="line"><span class="lineno"> 2003</span>                }</div>
<div class="line"><span class="lineno"> 2004</span>            }</div>
<div class="line"><span class="lineno"> 2005</span>        }</div>
<div class="line"><span class="lineno"> 2006</span>    }</div>
<div class="line"><span class="lineno"> 2007</span>    BOOST_TEST_MESSAGE(<span class="stringliteral">&quot;number of cross-gammas checked = &quot;</span> &lt;&lt; count);</div>
<div class="line"><span class="lineno"> 2008</span>    BOOST_CHECK_MESSAGE(count == cachedResults.size(), <span class="stringliteral">&quot;number of non-zero sensitivities (&quot;</span></div>
<div class="line"><span class="lineno"> 2009</span>                                                           &lt;&lt; count &lt;&lt; <span class="stringliteral">&quot;) do not match regression data (&quot;</span></div>
<div class="line"><span class="lineno"> 2010</span>                                                           &lt;&lt; cachedResults.size() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno"> 2011</span>    ObservationMode::instance().setMode(backupMode);</div>
<div class="line"><span class="lineno"> 2012</span>    IndexManager::instance().clearHistories();</div>
<div class="line"><span class="lineno"> 2013</span>}</div>
</div><!-- fragment --><div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="test_2sensitivityanalysis_8cpp_af2d8c7eb58e1524ca11fc67a9f53bcc2_cgraph.png" border="0" usemap="#atest_2sensitivityanalysis_8cpp_af2d8c7eb58e1524ca11fc67a9f53bcc2_cgraph" alt=""/></div>
<map name="atest_2sensitivityanalysis_8cpp_af2d8c7eb58e1524ca11fc67a9f53bcc2_cgraph" id="atest_2sensitivityanalysis_8cpp_af2d8c7eb58e1524ca11fc67a9f53bcc2_cgraph">
<area shape="rect" title=" " alt="" coords="5,45,196,70"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#afcd9c8fe4e7efcf1332d1be41a6c323f" title="SensitivityScenarioData instance, 5 currencies." alt="" coords="244,5,495,45"/>
<area shape="rect" href="classtestsuite_1_1_test_configuration_objects.html#aa6e080b0f36515a4544fb5b2e6495ce5" title="ScenarioSimMarketParameters instance, 5 currencies." alt="" coords="267,69,471,109"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by <a href="http://www.doxygen.org/index.html">Doxygen</a>
1.9.5
</small></address>
</body>
</html>
